!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=9)}([function(t,e,i){t.exports=i.p+"ab65c472c6b592afe8757bb8be8c6267.png"},function(t,e,i){t.exports=i.p+"5c078847978a138d64371531f48bbdbd.wav"},function(t,e,i){t.exports=i.p+"84c22dc339b5f57e4b15287e0125a9e7.wav"},function(t,e,i){t.exports=i.p+"d4d17f1f4a0eee511856bf90569911c0.wav"},function(t,e,i){t.exports=i.p+"17f99c4e1534406164b4d67012374629.wav"},function(t,e,i){t.exports=i.p+"f912610ac78e8270b6341ec4e6d08d83.wav"},function(t,e,i){t.exports=i.p+"54af95b7b45424485b6ebf0361d019a3.wav"},function(t,e,i){t.exports=i.p+"aa8c51850c09e89bb9a47fb31ee31a38.wav"},function(t,e,i){t.exports=i.p+"9af88a6ac9cfbc392a941b4ed520d5f8.wav"},function(t,e,i){"use strict";i.r(e);var s={};i.r(s),i.d(s,"Player",function(){return Dt}),i.d(s,"Bullet",function(){return Ot}),i.d(s,"Enemy",function(){return At}),i.d(s,"Flag",function(){return Lt}),i.d(s,"PowerupEvents",function(){return Et}),i.d(s,"powerupEvents",function(){return Ct}),i.d(s,"Powerup",function(){return Rt}),i.d(s,"Tank",function(){return wt}),i.d(s,"Movable",function(){return xt});var n=i(0),o=i.n(n),r=i(1),a=i.n(r),h=i(2),c=i.n(h),l=i(3),p=i.n(l),u=i(4),d=i.n(u),m=i(5),g=i.n(m),y=i(6),f=i.n(y),v=i(7),x=i.n(v),w=i(8),b=i.n(w);function M(t,e){return t.x1<e.x2&&t.x2>e.x1&&t.y1<e.y2&&t.y2>e.y1}const T=t=>Math.floor(Math.random()*t);function k(t,e,i){const s=e/t;return Math.floor(i/s)}function S(t,e,i,s){const n=Math.min(k(e.length,i,s),e.length-1),{sprite:o,size:r}=e[n];return o(t,r)}var B,E,C,R,D,O,A;!function(t){t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.Right=2]="Right",t[t.Left=3]="Left"}(B||(B={})),function(t){t[t.Default=0]="Default",t[t.Fast=1]="Fast",t[t.Armored=2]="Armored",t[t.Armored2=3]="Armored2",t[t.Armored3=4]="Armored3"}(E||(E={})),function(t){t[t.Helmet=0]="Helmet",t[t.Star=1]="Star",t[t.Stopwatch=2]="Stopwatch",t[t.Grenade=3]="Grenade",t[t.Tank=4]="Tank"}(C||(C={})),function(t){t[t.Default=0]="Default",t[t.First=1]="First",t[t.Second=2]="Second"}(R||(R={})),function(t){t[t.None=0]="None",t[t.Brick1=1]="Brick1",t[t.Brick2=2]="Brick2",t[t.Brick3=3]="Brick3",t[t.Brick4=4]="Brick4",t[t.Steel=5]="Steel",t[t.Ice=6]="Ice",t[t.Grass=7]="Grass",t[t.Water=8]="Water"}(D||(D={})),function(t){t[t.under=0]="under",t[t.main=1]="main",t[t.over=2]="over"}(O||(O={})),function(t){t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.ArrowLeft="ArrowLeft",t.Space="Space"}(A||(A={}));const L=1/60,j={x:40,y:40},P={x:40,y:40},z={x:280,y:560},F={x:210,y:560},I={x:10,y:10},G=300,N={x:40,y:40},_={[R.Default]:{velocity:100,shotCD:50},[R.First]:{velocity:120,shotCD:40},[R.Second]:{velocity:150,shotCD:30}},W={[E.Default]:{velocity:100,shotCD:70,lives:1},[E.Fast]:{velocity:200,shotCD:60,lives:1},[E.Armored]:{velocity:120,shotCD:70,lives:3}},Q=35,q=35,H=200,U=200,K=600,J=200,V=400,X=300,Y=[{x:0,y:0},{x:560,y:0}],Z=20,$=document.getElementById("root"),tt=$.getContext("2d");tt.font="30px Arial",tt.textAlign="center";const et={canvas:$,context:tt,clearScreen(){tt.clearRect(0,0,$.width,$.height),tt.beginPath()},renderChaingingStage(t){const e=k(X,X,t);tt.fillRect(0,0,600,e),tt.fillRect(0,600-e,600,e)},renderGameOver(t=0){const e=k(X,X,t);tt.fillRect(0,0,600,300-e),tt.fillRect(0,300+e,600,300-e),t||ht.sprites.gameOver({x:275,y:275},{x:50,y:50})},renderStartScreen(){ht.sprites.logo({x:100,y:200},{x:400,y:200}),tt.strokeText("Press any key",300,500)}},it=document.getElementById("dashboard"),st=it.getContext("2d"),nt={canvas:it,context:st,render(t,e,i){const{numberIcons:s,flagIcon:n,playerIcon:o,tankIcon:r}=ht.sprites;((t,e)=>{if(!t.length)return;let i=70,s=0;t.forEach((t,n)=>{e(n%2==0?{x:695,y:i}:{x:670,y:i},{x:15,y:15}),2===s?(i+=20,s=0):s+=1})})(i,r),n({x:670,y:450},{x:50,y:40}),o({x:670,y:380},{x:20,y:20}),s[e]({x:690,y:485},{x:20,y:20}),s[t]({x:700,y:380},{x:20,y:20})},clearScreen(){st.clearRect(0,0,it.width,it.height),st.beginPath()}},ot=(t,e)=>(i,s,n,o)=>(r,a)=>{e.drawImage(t,i,s,n,o,r.x,r.y,a.x,a.y)},rt=t=>{const e=ot(t,et.context),i=ot(t,nt.context);return{player:{[R.Default]:{[B.Top]:[e(0,0,16,15),e(16,0,16,15)],[B.Bottom]:[e(64,0,16,15),e(80,0,16,15)],[B.Right]:[e(96,0,16,15),e(112,0,16,15)],[B.Left]:[e(32,0,16,15),e(48,0,16,15)]},[R.First]:{[B.Top]:[e(0,32.3,16,15),e(15.7,32.5,16,15)],[B.Bottom]:[e(64,32.3,16,15),e(80,32.5,16,15)],[B.Right]:[e(96,32.3,16,15),e(112.3,32,16,15)],[B.Left]:[e(31.7,32,16,15),e(48,32,16,15)]},[R.Second]:{[B.Top]:[e(0,48,16,15),e(15.7,48,16,15)],[B.Bottom]:[e(64,48,16,15),e(80,48,16,15)],[B.Right]:[e(96,48,16,15),e(112.3,48,16,15)],[B.Left]:[e(31.7,48,16,15),e(48,48,16,15)]}},enemy:{[E.Default]:{[B.Top]:[e(128,0,16,15),e(144,0,16,15)],[B.Bottom]:[e(192,0,16,15),e(208,0,16,15)],[B.Right]:[e(223.7,0,16,15),e(239.7,0,16,15)],[B.Left]:[e(160,0,16,15),e(176,0,16,15)]},[E.Fast]:{[B.Top]:[e(128,80,16,15),e(144,80,16,15)],[B.Bottom]:[e(192,80,16,15),e(208,80,16,15)],[B.Right]:[e(224,80,16,15),e(240,80,16,15)],[B.Left]:[e(160,80,16,15),e(176,80,16,15)]},[E.Armored]:{1:{[B.Top]:[e(128.5,111.75,14.75,16),e(144.25,111.75,14.75,16)],[B.Bottom]:[e(191.75,111.75,15.25,16),e(207.5,111.75,15.25,16)],[B.Right]:[e(222.75,111.75,16,16),e(239,111.75,14.75,16)],[B.Left]:[e(159,111.75,16,16),e(174.75,111.75,16,16)]},2:{[B.Top]:[e(0,240,14.75,16),e(16,240,14.75,16)],[B.Bottom]:[e(64,240,15.25,16),e(80,240,15.25,16)],[B.Right]:[e(96,240,16,16),e(112,240,14.75,16)],[B.Left]:[e(32,240,16,16),e(48,240,16,16)]},3:{[B.Top]:[e(128,240,14.75,16),e(144,240,14.75,16)],[B.Bottom]:[e(192,240,15.25,16),e(208,240,15.25,16)],[B.Right]:[e(224,240,16,16),e(240,240,14.75,16)],[B.Left]:[e(160,240,16,16),e(176,240,16,16)]}}},bullet:{[B.Top]:[e(322.25,101.5,5,5.7)],[B.Bottom]:[e(338.5,101.5,5,5.7)],[B.Right]:[e(345.75,101.5,5,5.7)],[B.Left]:[e(329.5,101.5,5,5.7)]},flag:e(304.5,33,16,15.25),flagDeath:e(320,33,16,15.25),tankIcon:i(320.25,192.75,8.5,7.75),flagIcon:i(375.5,184,17,15),playerIcon:i(376.5,144.5,8,8.5),numberIcons:[i(328.5,184,8,7),i(336.5,184,8,7),i(344.5,184,8,7),i(352.5,184,8,7),i(360.5,184,8,7),i(328.5,192,8,7),i(336.5,192,8,7),i(344.5,192,8,7),i(352.5,192,8,7),i(360.5,192,8,7)],logo:e(0,260,375,137),tiles:{[D.Brick1]:e(256,0,8,7),[D.Brick2]:e(264,0,8,7),[D.Brick3]:e(256,8,8,7),[D.Brick4]:e(264,8,8,7),[D.Steel]:e(256,16,8,7),[D.Ice]:e(288,32,8,7),[D.Grass]:e(272,32,8,7),[D.Water]:e(256,40,8,7)},gameOver:e(288.5,184,31.2,16),powerup:{[C.Helmet]:e(255.5,112,16,14),[C.Stopwatch]:e(271.5,112,16,14),[C.Star]:e(303.5,112,16,14),[C.Grenade]:e(319.5,112,16,14),[C.Tank]:e(335.5,112,16,14)},invincible:[e(256,144,15.7,16),e(272.2,144,15.7,16)]}},at=t=>{const e=ot(t,et.context);return{tankSpawn:[{sprite:e(303,97,15,14),size:{x:35,y:35}},{sprite:e(303,97,15,14),size:{x:35,y:35}},{sprite:e(288,97,15,14),size:{x:35,y:35}},{sprite:e(273,97,15,14),size:{x:30,y:30}},{sprite:e(257,97,15,14),size:{x:30,y:30}}],tankDestruction:[{sprite:e(336,128.75,32,32),size:{x:60,y:60}},{sprite:e(304.5,128.75,30.5,31.25),size:{x:60,y:60}},{sprite:e(288.25,128.75,16,15.5),size:{x:40,y:40}},{sprite:e(272.25,128.75,15.75,14.25),size:{x:37,y:37}},{sprite:e(258,128.75,13.75,13.25),size:{x:35,y:35}}]}};const ht=new class{loadSprite(t){return new Promise((e,i)=>{const s=new Image;s.addEventListener("load",()=>{this.image=s,this.sprites=rt(s),this.variableSprites=at(s),e()}),s.src=t})}loadAudio(t){this.audio=t}};const ct=new class{constructor(){this.queue=new Set}handleEvent(t,e){const{code:i,type:s}=t;return e.isWaitingForRestart()?e.restart():e.isStartScreen?e.play():void(A[i]&&("keydown"===s?this.queue.add(A[i]):this.queue.delete(A[i])))}getKey(){return Array.from(this.queue).pop()}listenToEvents(t){["keydown","keyup"].forEach(e=>{window.addEventListener(e,e=>{this.handleEvent(e,t)})})}},lt=[[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,5,5,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,5,5,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,0,0,0,0,0,0,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,3,4,0,0,3,4,0,0,0,0,0,0,0,0,0,0,0,0],[1,2,0,0,1,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,1,2,0,0,1,2],[5,5,0,0,3,4,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,3,4,0,0,5,5],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,1,2,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,3,4,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,1,1,2,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,1,2,1,0,0],[0,0,1,3,4,0,0,3,4,0,0,0,0,0,0,0,0,0,0,0,0,3,4,0,0,3,4,1,0,0],[0,0,1,1,2,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,1,2,1,0,0],[0,0,1,3,4,0,0,3,4,0,0,0,0,1,2,1,2,0,0,0,0,3,4,0,0,3,4,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,1,2,5,5,1,2,1,2,5,5,1,2,5,5,1,2,1,2,5,5,1,2,0,0,0,0],[0,0,0,0,3,4,5,5,3,4,3,4,5,5,3,4,5,5,3,4,3,4,5,5,3,4,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,5,5,0,0,1,2,0,0,5,5,1,2,5,5,0,0,1,2,0,0,1,2,0,0,0,0],[0,0,0,0,5,5,0,0,3,4,0,0,5,5,3,4,5,5,0,0,3,4,0,0,3,4,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,2,0,0,7,7,7,7,7,7,7,7,7,7,7,7,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,7,7,0,7,0,7,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,1,2,0,0,7,0,7,0,7,0,7,0,7,0,7,0,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,7,7,0,7,0,7,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,1,2,0,0,7,0,7,0,7,0,7,0,7,0,7,0,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,7,7,0,7,0,7,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,0,0,0,0,5,0,6,6,6,6,6,0,7,0,7,0,7,7,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,5,7,6,6,6,6,6,7,0,7,0,7,0,7,0,0,0,0,0,0,0,0],[0,0,0,0,1,2,0,0,5,0,6,6,6,6,7,0,7,0,7,0,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,5,7,6,6,6,6,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,1,2,0,0,7,0,6,6,7,0,7,0,7,0,7,0,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,7,7,6,6,0,7,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,0,0,0,0,7,0,7,0,7,0,7,0,7,0,7,0,7,7,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,7,7,7,7,7,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,5,5,1,2,5,5,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,5,5,3,4,5,5,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0]]],pt=[[2,2,0,0,1,2,1,0,0,0],[2,2,0,0,1,2,1,0,0,0]],ut=[D.Brick1,D.Brick2,D.Brick3,D.Brick4,D.Steel,D.Water],dt=[D.Grass,D.Water,D.None],mt={[O.under]:[D.Ice,D.Water],[O.main]:[D.Brick1,D.Brick2,D.Brick3,D.Brick4,D.Steel],[O.over]:[D.Grass]};class gt{constructor(t){this.tiles=t.map(t=>[...t])}destroy(t){const e=Math.max(0,Math.floor(t.x/Z)),i=Math.max(0,Math.floor(t.y/Z));this.tiles[i][e]=D.None}lookup(t){const e=Math.min(Math.max(0,Math.floor(t.x/Z)),29),i=Math.min(Math.max(0,Math.floor(t.y/Z)),29);return{type:this.tiles[i][e],position:{x:e*Z,y:i*Z}}}lookupRange(t,e){let i=[];const s=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return s>0&&s>Z?i.push({x:t.x+Z,y:t.y}):n>0&&n>Z&&i.push({x:t.x,y:t.y+Z}),[t,...i,e].map(t=>this.lookup(t))}renderLayer(t){this.tiles.forEach((e,i)=>{e.forEach((e,s)=>{mt[t].includes(e)&&ht.sprites.tiles[e]({x:s*Z,y:i*Z},{x:Z,y:Z})})})}}class yt{constructor(t){this.setupTracks(t)}setupTracks(t){this.tracks=t.reduce((t,e)=>{if("string"==typeof e)t[e]=new Audio(ht.audio[e]);else{const{trackName:i,loop:s}=e;t[i]=new Audio(ht.audio[i]),t[i].loop=s}return t},{})}play(t){return this.tracks[t].play()}pause(t){return this.tracks[t].pause()}pauseAll(){Object.values(this.tracks).forEach(t=>t.pause())}}class ft{constructor(){this.timers={}}setTimer(t,e){this.timers[t]=e}getTimer(t){return this.timers[t]}some(t){return Object.entries(this.timers).some(e=>t.includes(e[0])&&e[1]>=0)}decrementTimers(){const t=Object.entries(this.timers).filter(t=>0===t[1]);t.length&&t.forEach(t=>{delete this.timers[t[0]]}),Object.keys(this.timers).forEach(t=>{this.timers[t]-=1})}}class vt{constructor(t,e){this.id=vt.numberGen,this.position=t,this.size=e,vt.numberGen+=1}update(){}render(){}resolveEntityCollision(t){}getBoundingBox(){const{x:t,y:e}=this.position,{x:i,y:s}=this.size;return{x1:t,x2:t+i,y1:e,y2:e+s}}deconstruct(){}}vt.numberGen=0;class xt extends vt{constructor(t,e,i){super(t,e),this.direction=i,this.prevPosition=Object.assign({},t)}resolveEdgeCollision(){}resolveTileCollision(t,e){}resolveEntityCollision(t){}move(t){this.prevPosition=Object.assign({},this.position),this.direction===B.Top?this.position.y-=t*L:this.direction===B.Bottom?this.position.y+=t*L:this.direction===B.Left?this.position.x-=t*L:this.direction===B.Right&&(this.position.x+=t*L)}goBack(){this.position=Object.assign({},this.prevPosition)}animateMovement(t){let e;e=this.direction===B.Left||this.direction===B.Right?this.position.x:this.position.y,t[Math.floor(e/.3)%t.length](this.position,this.size)}isOutOfScreen(){const t=this.getBoundingBox();return t.y1<0||t.y2>600||t.x1<0||t.x2>600}getFrontCollisionPoints(){const{x1:t,x2:e,y1:i,y2:s}=this.getBoundingBox();return this.direction===B.Top?[{x:t,y:i},{x:e,y:i}]:this.direction===B.Right?[{x:e,y:i},{x:e,y:s}]:this.direction===B.Bottom?[{x:t,y:s},{x:e,y:s}]:this.direction===B.Left?[{x:t,y:i},{x:t,y:s}]:void 0}}class wt extends xt{constructor(t,e,i){super(t,e,i)}shot(t){if(this.timeManager.getTimer("shotCD"))return;let e;const{x:i,y:s}=I;e=this.direction===B.Top?{x:this.size.x/2+this.position.x-i/2,y:this.position.y-s}:this.direction===B.Right?{x:this.size.x+this.position.x,y:this.size.y/2+this.position.y-s/2}:this.direction===B.Bottom?{x:this.size.x/2+this.position.x-i/2,y:this.size.y+this.position.y}:{x:this.position.x-i,y:this.size.y/2+this.position.y-s/2},jt.spawnEntity("Bullet",e,this.direction,this),this.timeManager.setTimer("shotCD",t)}die(){this.timeManager.setTimer("death",Q),this.soundManager.play("explode"),jt.toRemove(this.id)}forgiveCollision(t){const[e,i]=this.getFrontCollisionPoints(),s=t.position;if(this.direction===B.Top||this.direction===B.Bottom){const t=Math.min(Math.abs(s.x-e.x),Math.abs(s.x-i.x));if(t>0&&t<5){return{x:this.position.x>s.x?s.x+Z:s.x-this.size.x,y:this.prevPosition.y}}}else if(this.direction===B.Left||this.direction===B.Right){const t=Math.min(Math.abs(s.y-e.y),Math.abs(s.y-i.y));if(t>0&&t<5){const t=this.position.y>s.y?s.y+Z:s.y-this.size.y;return{x:this.prevPosition.x,y:t}}}}}function bt(t){return t instanceof wt}function Mt(t){return t instanceof Dt}function Tt(t){return t instanceof At}function kt(t){return t instanceof Ot}function St(t){return t instanceof Lt}function Bt(t){return t instanceof Rt}class Et{constructor(){this.observers={}}subscribe(t,e){this.observers[t]=e}unsubscribe(t){delete this.observers[t]}notify(t){Object.values(this.observers).forEach(e=>e(t))}}const Ct=new Et;class Rt extends vt{constructor(t,e){super(e,Object.assign({},N)),this.type=t,this.timeManager=new ft,this.soundManager=new yt(["powerup"]),this.timeManager.setTimer("live",K)}update(){const t=this.timeManager.getTimer("live");0===t?jt.toRemove(this.id):t===J&&this.timeManager.setTimer("blink",J),this.timeManager.decrementTimers()}render(){const t=this.timeManager.getTimer("blink");t&&t%50==0||ht.sprites.powerup[this.type](this.position,this.size)}resolveEntityCollision(t){Mt(t)&&(jt.toRemove(this.id),Ct.notify(this.type),this.soundManager.play("powerup"))}}class Dt extends wt{constructor(){super(Object.assign({},F),Object.assign({},j),B.Top),this.lives=3,this.power=R.Default,this.timeManager=new ft,this.soundManager=new yt(["explode",{trackName:"neutral",loop:!0},{trackName:"move",loop:!0}]),this.timeManager.setTimer("spawn",q),this.timeManager.setTimer("invincible",H),Ct.subscribe(this.id,function(t){t===C.Tank?this.lives+=1:t===C.Helmet?this.timeManager.setTimer("invincible",H):t===C.Star&&this.power<R.Second&&(this.power+=1)}.bind(this))}update(){this.timeManager.decrementTimers();const t=this.timeManager.getTimer("death"),e=this.timeManager.getTimer("spawn");t?1===t&&this.respawn(!0):e||(this.soundManager.play("neutral"),this.processInput())}render(){const t=this.timeManager.getTimer("spawn"),e=this.timeManager.getTimer("death"),i=this.timeManager.getTimer("invincible");if(t)return S(this.position,ht.variableSprites.tankSpawn,q,t);if(e)return S(this.position,ht.variableSprites.tankDestruction,Q,e);if(i){const t=ht.sprites.invincible;t[i%t.length](this.position,this.size)}this.animateMovement(ht.sprites.player[this.power][this.direction])}processInput(){const t=ct.getKey();let e=!0;t===A.ArrowUp?this.direction=B.Top:t===A.ArrowDown?this.direction=B.Bottom:t===A.ArrowLeft?this.direction=B.Left:t===A.ArrowRight?this.direction=B.Right:(this.soundManager.pause("move"),e=!1),t===A.Space&&this.shot(_[this.power].shotCD),e&&(this.soundManager.pause("neutral"),this.soundManager.play("move"),this.move(_[this.power].velocity))}resolveEdgeCollision(){this.goBack()}resolveTileCollision(t){if(1===t.length){const e=this.forgiveCollision(t[0]);e?this.position=Object.assign({},e):this.goBack()}else this.goBack()}resolveEntityCollision(t){const e=this.timeManager.getTimer("death");if(!Bt(t))if(kt(t)&&!e){if(this.timeManager.getTimer("invincible"))return;this.timeManager.setTimer("death",Q),this.soundManager.play("explode"),this.lives-=1,0===this.lives&&this.die()}else this.goBack()}respawn(t=!1){t&&(this.power=R.Default),this.soundManager.pauseAll(),this.timeManager.setTimer("spawn",q),this.timeManager.setTimer("invincible",H),this.position=Object.assign({},F),this.prevPosition=Object.assign({},F)}deconstruct(){this.soundManager.pauseAll(),Ct.unsubscribe(this.id)}}class Ot extends xt{constructor(t,e,i){super(t,Object.assign({},I),e),this.direction=e,this.shooter=i,this.soundManager=new yt(["hit","hitdmg"])}update(){this.move(G)}render(){this.animateMovement(ht.sprites.bullet[this.direction])}resolveEdgeCollision(){jt.toRemove(this.id)}resolveTileCollision(t,e){if(t.every(t=>dt.includes(t.type)))return;jt.toRemove(this.id);const i=Mt(this.shooter)&&this.shooter.power===R.Second;t.some(t=>t.type===D.Steel)?this.soundManager.play("hit"):this.soundManager.play("hitdmg"),t.forEach(t=>{dt.includes(t.type)||t.type===D.Steel&&!i||e.destroy(t.position)})}resolveEntityCollision(t){Bt(t)||(Mt(this.shooter)&&Tt(t)&&t.type>=1&&this.soundManager.play("hit"),jt.toRemove(this.id))}}class At extends wt{constructor(t,e){super(e,Object.assign({},j),B.Bottom),this.type=t,this.lives=W[t].lives,this.prevTile=Object.assign({},e),this.timeManager=new ft,this.soundManager=new yt(["explode"]),this.timeManager.setTimer("spawn",q),Ct.subscribe(this.id,function(t){t===C.Stopwatch?this.timeManager.setTimer("freeze",U):t===C.Grenade&&(this.timeManager.some(["death","spawn"])||this.die())}.bind(this))}update(){const t=this.timeManager.getTimer("spawn"),e=this.timeManager.getTimer("death"),i=this.timeManager.getTimer("freeze");if(this.timeManager.decrementTimers(),t){if(this.isSpawnSpotClear())return void this.timeManager.setTimer("spawn",q)}else{if(e||i)return;this.aiMove(),this.shot(W[this.type].shotCD)}}render(){const t=this.timeManager.getTimer("spawn"),e=this.timeManager.getTimer("death");return t?S(this.position,ht.variableSprites.tankSpawn,q,t):e?S(this.position,ht.variableSprites.tankDestruction,Q,e):void(this.type===E.Armored?this.animateMovement(ht.sprites.enemy[this.type][this.lives][this.direction]):this.animateMovement(ht.sprites.enemy[this.type][this.direction]))}aiMove(){const{velocity:t}=W[this.type];Math.abs(Math.floor(this.prevTile.x-this.position.x))>120||Math.abs(Math.floor(this.prevTile.y-this.position.y))>120?(this.prevTile=Object.assign({},this.position),this.setRandomDirection(),this.move(t)):this.move(t)}resolveEdgeCollision(){this.goBack(),this.setRandomDirection()}resolveTileCollision(t){if(1===t.length){const e=this.forgiveCollision(t[0]);e?this.position=Object.assign({},e):(this.setRandomDirection(),this.goBack())}else this.setRandomDirection(),this.goBack()}resolveEntityCollision(t){Bt(t)||(kt(t)&&Mt(t.shooter)?1===this.lives?this.die():this.lives-=1:Tt(t)?(this.goBack(),this.setOpositeDirection()):Mt(t)&&(this.timeManager.getTimer("shotCD")>10&&this.setOpositeDirection(),this.goBack()))}setRandomDirection(){const t=[B.Top,B.Right,B.Bottom,B.Left].filter(t=>t!==this.direction),e=Math.floor(Math.random()*t.length);this.direction=t[e]}setOpositeDirection(){this.direction===B.Top?this.direction=B.Bottom:this.direction===B.Bottom?this.direction=B.Top:this.direction===B.Right?this.direction=B.Left:this.direction=B.Right}isSpawnSpotClear(){return jt.entities.filter(t=>t.id!==this.id&&!kt(t)).filter(t=>!Tt(t)||!t.timeManager.getTimer("spawn")).some(t=>M(t.getBoundingBox(),this.getBoundingBox()))}deconstruct(){Ct.unsubscribe(this.id)}}class Lt extends vt{constructor(){super(z,P),this.isDestroyed=!1}render(){this.isDestroyed?ht.sprites.flagDeath(this.position,this.size):ht.sprites.flag(this.position,this.size)}resolveEntityCollision(t){kt(t)&&(this.isDestroyed=!0)}}const jt=new class{constructor(){this.toRemove=(t=>{this.toRemoveQueue.add(t)}),this.removeFromQueue=(()=>{this.toRemoveQueue.forEach(t=>{const e=this.pool[t];this._checkDeath(e)||(delete this.pool[t],e.deconstruct(),this.toRemoveQueue.delete(t))})}),this.pool={},this.toRemoveQueue=new Set}spawnEntity(t,...e){const i=new s[t](...e);this.pool[i.id]=i}getEnemies(){return this.entities.filter(Tt)}getPlayer(){return this.entities.find(Mt)}getFlag(){return this.entities.find(St)}render(){this.entities.forEach(t=>t.render())}update(){this.entities.forEach(t=>t.update())}checkCollisions(t){const e=new Set;this.entities.forEach(i=>{Bt(i)||St(i)||(this.checkTileCollision(i,t),this.checkEntitiesCollision(i,e),e.add(i.id))})}checkTileCollision(t,e){if(t.isOutOfScreen())t.resolveEdgeCollision();else{const[i,s]=t.getFrontCollisionPoints(),n=e.lookupRange(i,s).filter(t=>ut.includes(t.type)).filter(e=>M(t.getBoundingBox(),{x1:e.position.x,x2:e.position.x+Z,y1:e.position.y,y2:e.position.y+Z}));n.length&&t.resolveTileCollision(n,e)}}checkEntitiesCollision(t,e){this.entities.forEach(i=>{t.id===i.id||e.has(i.id)||this._isInteractive(i)&&M(t.getBoundingBox(),i.getBoundingBox())&&(t.resolveEntityCollision(i),i.resolveEntityCollision(t))})}clear(t=!0){if(t)Object.values(this.pool).forEach(t=>t.deconstruct()),this.pool={};else{const t=this.getPlayer();Object.values(this.pool).filter(e=>e.id!==t.id).forEach(t=>t.deconstruct()),this.pool={[t.id]:t}}this.toRemoveQueue=new Set}_isInteractive(t){return!bt(t)||!t.timeManager.some(["spawn","death"])}_checkDeath(t){if(bt(t))return t.timeManager.getTimer("death")}get entities(){return Object.values(this.pool)}};class Pt{constructor(t,e,i){this.number=t,this.map=e,this.tanks=[...i],this.powerupsAvailable=5,this.timeManager=new ft,this.soundManager=new yt(["start"]),this.timeManager.setTimer("powerupSpawnCD",K),this.soundManager.play("start"),jt.spawnEntity("Flag")}update(){this.timeManager.decrementTimers(),this.spawnEnemy(),this.spawnPowerup()}isFinish(){const t=jt.getEnemies();return!this.tanks.length&&!t.length}spawnEnemy(){const t=this.timeManager.getTimer("enemySpawnCD"),e=jt.getEnemies();if(!this.tanks.length||e.length>4||t)return;const i=T(2);this.timeManager.setTimer("enemySpawnCD",V),jt.spawnEntity("Enemy",this.tanks.pop(),Object.assign({},Y[i]))}spawnPowerup(){if(this.timeManager.getTimer("powerupSpawnCD")||!this.powerupsAvailable)return;const t=T(Object.keys(C).length/2);jt.spawnEntity("Powerup",C[C[t]],{x:T(500),y:T(500)}),this.timeManager.setTimer("powerupSpawnCD",K),this.powerupsAvailable-=1}render(){this.map.renderLayer(O.under),this.map.renderLayer(O.main),jt.render(),this.map.renderLayer(O.over)}get screenNum(){return this.number+1}}class zt{constructor(){this.isStartScreen=!0,this.isLost=!1,this.timeManager=new ft,this.soundManager=new yt(["gameover"])}createLoop(){let t=0,e=0;const i=s=>{for(t+=(s-e)/1e3;t>L;)this.update(),t-=L;this.render(),e=s,requestAnimationFrame(i)};i(0)}update(){this.timeManager.decrementTimers();const t=this.timeManager.getTimer("screenFade");if(this.isLost||this.isStartScreen||t)return;this.stage.update(),jt.update(),jt.checkCollisions(this.stage.map),jt.removeFromQueue();const e=jt.getPlayer(),i=jt.getFlag();if(!e||i.isDestroyed)return e&&e.soundManager.pauseAll(),this.gameOver();this.stage.isFinish()&&this.toNextStage()}render(){et.clearScreen(),nt.clearScreen(),this.isStartScreen?et.renderStartScreen():this.renderGame()}renderGame(){const t=this.timeManager.getTimer("screenFade");if(this.stage.render(),this.isLost)et.renderGameOver(t);else if(t)et.renderChaingingStage(t);else{const t=jt.getPlayer();nt.render(t.lives,this.stage.screenNum,this.stage.tanks)}}gameOver(){this.soundManager.play("gameover"),this.timeManager.setTimer("screenFade",X),this.isLost=!0}isWaitingForRestart(){return!this.timeManager.getTimer("screenFade")&&this.isLost}getNextStageNum(){let t=this.stage.number+1;return t>lt.length-1&&(t=0),t}toNextStage(){this.timeManager.setTimer("screenFade",X),jt.clear(!1);const t=this.getNextStageNum(),e=jt.getPlayer();this.stage=new Pt(t,new gt(lt[t]),pt[t]),e.respawn()}play(){this.isStartScreen=!1,jt.spawnEntity("Player"),this.timeManager.setTimer("screenFade",X),this.stage=new Pt(0,new gt(lt[0]),pt[0])}restart(){this.isLost=!1,jt.clear(),this.play()}}!async function(){await ht.loadSprite(o.a),ht.loadAudio({explode:a.a,hit:c.a,hitdmg:p.a,neutral:d.a,powerup:g.a,move:f.a,start:x.a,gameover:b.a});const t=new zt;ct.listenToEvents(t),t.createLoop()}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL3Nwcml0ZXMucG5nIiwid2VicGFjazovLy8uL2Fzc2V0cy9hdWRpby9leHBsb2RlLndhdiIsIndlYnBhY2s6Ly8vLi9hc3NldHMvYXVkaW8vaGl0LndhdiIsIndlYnBhY2s6Ly8vLi9hc3NldHMvYXVkaW8vaGl0ZG1nLndhdiIsIndlYnBhY2s6Ly8vLi9hc3NldHMvYXVkaW8vbmV1dHJhbC53YXYiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2F1ZGlvL3Bvd2VydXAud2F2Iiwid2VicGFjazovLy8uL2Fzc2V0cy9hdWRpby9tb3ZlLndhdiIsIndlYnBhY2s6Ly8vLi9hc3NldHMvYXVkaW8vc3RhcnQud2F2Iiwid2VicGFjazovLy8uL2Fzc2V0cy9hdWRpby9nYW1lb3Zlci53YXYiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvdXRpbHMvY2hlY2tFbnRpdHlDb2xsaXNpb24uanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvdXRpbHMvcmFuZG9tLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3V0aWxzL2FuaW1hdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC90eXBlcy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc2NyZWVucy9tYWluLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NjcmVlbnMvZGFzaGJvYXJkLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3V0aWxzL2Fzc2V0c0hvbGRlci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9rZXlib2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zdGFnZUNvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9UaWxlTWFwLmpzIiwid2VicGFjazovLy8uL2J1aWxkL21hbmFnZXJzL1NvdW5kTWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9tYW5hZ2Vycy9UaW1lTWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9lbnRpdGllcy9FbnRpdHkuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvZW50aXRpZXMvTW92YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9lbnRpdGllcy9UYW5rLmpzIiwid2VicGFjazovLy8uL2J1aWxkL2VudGl0aWVzL2d1YXJkcy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9lbnRpdGllcy9Qb3dlcnVwLmpzIiwid2VicGFjazovLy8uL2J1aWxkL2VudGl0aWVzL1BsYXllci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9lbnRpdGllcy9CdWxsZXQuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvZW50aXRpZXMvRW5lbXkuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvZW50aXRpZXMvRmxhZy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9tYW5hZ2Vycy9lbnRpdHlNYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL2J1aWxkL1N0YWdlLmpzIiwid2VicGFjazovLy8uL2J1aWxkL0dhbWUuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjaGVja0VudGl0eUNvbGxpc2lvbiIsImJveDEiLCJib3gyIiwieDEiLCJ4MiIsInkxIiwieTIiLCJyYW5kb21JbnQiLCJsaW1pdCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImdldEFuaW1hdGlvbkluZGV4IiwiYW5pbWF0aW9uTGVuZ3RoIiwiZnJhbWVzVG90YWwiLCJmcmFtZXNMZWZ0Iiwic3RlcCIsImFuaW1hdGVWYXJpYWJsZVNwcml0ZXMiLCJwb3NpdGlvbiIsImFuaW1hdGlvbiIsImluZGV4IiwibWluIiwibGVuZ3RoIiwic3ByaXRlIiwic2l6ZSIsIkRpcmVjdGlvbiIsIlRhbmtUeXBlcyIsIlBvd2VydXBUeXBlcyIsIlBsYXllclBvd2VyIiwiVGlsZXMiLCJMYXllcnMiLCJDb250cm9sS2V5cyIsIkRFTFRBX1RJTUUiLCJUQU5LX1NJWkUiLCJ4IiwieSIsIkZMQUdfU0laRSIsIkZMQUdfUE9TSVRJT04iLCJQTEFZRVJfU1BBV05fUE9TSVRJT04iLCJCVUxMRVRfU0laRSIsIkJVTExFVF9WRUxPQ0lUWSIsIlBPV0VSVVBfU0laRSIsIlBMQVlFUl9TVEFUUyIsIltvYmplY3QgT2JqZWN0XSIsIkRlZmF1bHQiLCJ2ZWxvY2l0eSIsInNob3RDRCIsIkZpcnN0IiwiU2Vjb25kIiwiRU5FTVlfU1RBVFMiLCJsaXZlcyIsIkZhc3QiLCJBcm1vcmVkIiwiREVBVEhfRlJBTUVTIiwiU1BBV05fRlJBTUVTIiwiSU5WSU5DSUJMRV9GUkFNRVMiLCJGUkVFWkVfRlJBTUVTIiwiUE9XRVJVUF9TUEFXTl9DRCIsIlBPV0VSVVBfQkxJTktfRlJBTUVTIiwiRU5FTVlfU1BBV05fQ0QiLCJTQ1JFRU5fRkFERV9GUkFNRVMiLCJFTkVNWV9TUEFXTl9QT1NJVElPTiIsIlRJTEVfU0lERSIsImNhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImZvbnQiLCJ0ZXh0QWxpZ24iLCJtYWluIiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJiZWdpblBhdGgiLCJsZWZ0IiwiZmlsbFJlY3QiLCJhc3NldHNIb2xkZXIiLCJzcHJpdGVzIiwiZ2FtZU92ZXIiLCJsb2dvIiwic3Ryb2tlVGV4dCIsImRhc2hib2FyZF9jYW52YXMiLCJkYXNoYm9hcmRfY29udGV4dCIsImRhc2hib2FyZCIsInBsYXllckxpdmVzIiwic3RhZ2VOdW0iLCJ0YW5rcyIsIm51bWJlckljb25zIiwiZmxhZ0ljb24iLCJwbGF5ZXJJY29uIiwidGFua0ljb24iLCJ0YW5rU3ByaXRlIiwiY291bnRlciIsImZvckVhY2giLCJfIiwiaWR4IiwiZHJhd1RhbmtzIiwiY3JlYXRlU3ByaXRlIiwiaW1hZ2UiLCJkeCIsImR5IiwiZFdpZHRoIiwiZEhlaWdodCIsImRyYXdJbWFnZSIsInNldHVwU3ByaXRlcyIsIm1haW5TcHJpdGUiLCJkYXNoYm9hcmRTcHJpdGUiLCJwbGF5ZXIiLCJUb3AiLCJCb3R0b20iLCJSaWdodCIsIkxlZnQiLCJlbmVteSIsIjEiLCIyIiwiMyIsImJ1bGxldCIsImZsYWciLCJmbGFnRGVhdGgiLCJ0aWxlcyIsIkJyaWNrMSIsIkJyaWNrMiIsIkJyaWNrMyIsIkJyaWNrNCIsIlN0ZWVsIiwiSWNlIiwiR3Jhc3MiLCJXYXRlciIsInBvd2VydXAiLCJIZWxtZXQiLCJTdG9wd2F0Y2giLCJTdGFyIiwiR3JlbmFkZSIsIlRhbmsiLCJpbnZpbmNpYmxlIiwic2V0dXBWYXJpYWJsZVNwcml0ZXMiLCJ0YW5rU3Bhd24iLCJ0YW5rRGVzdHJ1Y3Rpb24iLCJzcmMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIkltYWdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRoaXMiLCJ2YXJpYWJsZVNwcml0ZXMiLCJhdWRpbyIsImtleWJvYXJkIiwicXVldWUiLCJTZXQiLCJldmVudCIsImdhbWUiLCJjb2RlIiwidHlwZSIsImlzV2FpdGluZ0ZvclJlc3RhcnQiLCJyZXN0YXJ0IiwiaXNTdGFydFNjcmVlbiIsInBsYXkiLCJhZGQiLCJkZWxldGUiLCJBcnJheSIsImZyb20iLCJwb3AiLCJldmVudE5hbWUiLCJ3aW5kb3ciLCJoYW5kbGVFdmVudCIsIm1hcHMiLCJzdGFnZUNvbmZpZ190YW5rcyIsInJpZ2lkIiwiYnVsbGV0VGhyb3VnaCIsIk5vbmUiLCJsYXllc3JNYXAiLCJ1bmRlciIsIm92ZXIiLCJUaWxlTWFwX1RpbGVNYXAiLCJtYXAiLCJyb3ciLCJwb2ludCIsInhJbmRleCIsIm1heCIsInlJbmRleCIsInBvaW50MSIsInBvaW50MiIsImluQmV0d2VlblBvaW50cyIsInJhbmdlWCIsImFicyIsInJhbmdlWSIsInB1c2giLCJsb29rdXAiLCJ0aWxlIiwiaW5jbHVkZXMiLCJTb3VuZE1hbmFnZXJfU291bmRNYW5hZ2VyIiwidHJhY2tOYW1lcyIsInNldHVwVHJhY2tzIiwidHJhY2tzIiwicmVkdWNlIiwiYWNjIiwidHJhY2siLCJBdWRpbyIsInRyYWNrTmFtZSIsImxvb3AiLCJwYXVzZSIsInZhbHVlcyIsIlRpbWVNYW5hZ2VyIiwidGltZXJzIiwidGltZXJOYW1lIiwiZnJhbWVMZW5ndGgiLCJlbnRyaWVzIiwic29tZSIsImVudHJ5IiwidG9SZW1vdmUiLCJmaWx0ZXIiLCJrZXlzIiwiRW50aXR5IiwiaWQiLCJudW1iZXJHZW4iLCJvdGhlciIsIk1vdmFibGVfTW92YWJsZSIsImRpcmVjdGlvbiIsInN1cGVyIiwicHJldlBvc2l0aW9uIiwiYXNzaWduIiwidGlsZU1hcCIsImRpc3RhbmNlIiwiYm94IiwiZ2V0Qm91bmRpbmdCb3giLCJUYW5rX1RhbmsiLCJjZCIsInRpbWVNYW5hZ2VyIiwiZ2V0VGltZXIiLCJidWxsZXRQb3NpdGlvbiIsImVudGl0eU1hbmFnZXIiLCJzcGF3bkVudGl0eSIsInNldFRpbWVyIiwic291bmRNYW5hZ2VyIiwiZ2V0RnJvbnRDb2xsaXNpb25Qb2ludHMiLCJ0aWxlUG9zIiwiZGlmZlBvaW50IiwiZGVzdGluYXRpb24iLCJpc1RhbmsiLCJlbnRpdHkiLCJpc1BsYXllciIsIlBsYXllcl9QbGF5ZXIiLCJpc0VuZW15IiwiRW5lbXlfRW5lbXkiLCJpc0J1bGxldCIsIkJ1bGxldF9CdWxsZXQiLCJpc0ZsYWciLCJGbGFnX0ZsYWciLCJpc1Bvd2VydXAiLCJQb3dlcnVwX1Bvd2VydXAiLCJQb3dlcnVwRXZlbnRzIiwib2JzZXJ2ZXJzIiwiZW50aXR5SWQiLCJvYnNlcnZlciIsImV2ZW50VHlwZSIsInBvd2VydXBFdmVudHMiLCJsaXZlc0xlZnQiLCJkZWNyZW1lbnRUaW1lcnMiLCJibGlua0xlZnQiLCJub3RpZnkiLCJwb3dlciIsInN1YnNjcmliZSIsInBvd2VydXBUeXBlIiwiZGVhdGgiLCJzcGF3biIsInJlc3Bhd24iLCJwcm9jZXNzSW5wdXQiLCJpbnZpbmNpYmxlU3ByaXRlcyIsImFuaW1hdGVNb3ZlbWVudCIsImdldEtleSIsImlzTW92aW5nIiwiQXJyb3dVcCIsIkFycm93RG93biIsIkFycm93TGVmdCIsIkFycm93UmlnaHQiLCJTcGFjZSIsInNob3QiLCJtb3ZlIiwiZ29CYWNrIiwibmV3UG9zIiwiZm9yZ2l2ZUNvbGxpc2lvbiIsImRpZSIsImRlZmF1bHRQb3dlciIsInBhdXNlQWxsIiwidW5zdWJzY3JpYmUiLCJzaG9vdGVyIiwiZXZlcnkiLCJjYW5EZXN0cm95U3RlZWwiLCJkZXN0cm95IiwicHJldlRpbGUiLCJmcmVlemUiLCJpc1NwYXduU3BvdENsZWFyIiwiYWlNb3ZlIiwic2V0UmFuZG9tRGlyZWN0aW9uIiwic2V0T3Bvc2l0ZURpcmVjdGlvbiIsIml0ZW1zIiwiZW50aXRpZXMiLCJpc0Rlc3Ryb3llZCIsInRvUmVtb3ZlUXVldWUiLCJyZW1vdmVGcm9tUXVldWUiLCJwb29sIiwiX2NoZWNrRGVhdGgiLCJkZWNvbnN0cnVjdCIsImFyZ3MiLCJlbnRpdGllc19uYW1lc3BhY2VPYmplY3QiLCJmaW5kIiwicmVuZGVyIiwidXBkYXRlIiwic2VlbiIsImNoZWNrVGlsZUNvbGxpc2lvbiIsImNoZWNrRW50aXRpZXNDb2xsaXNpb24iLCJpc091dE9mU2NyZWVuIiwicmVzb2x2ZUVkZ2VDb2xsaXNpb24iLCJmaXJzdCIsInNlY29uZCIsImNvbGxpZGFibGUiLCJsb29rdXBSYW5nZSIsInJlc29sdmVUaWxlQ29sbGlzaW9uIiwiaGFzIiwiX2lzSW50ZXJhY3RpdmUiLCJyZXNvbHZlRW50aXR5Q29sbGlzaW9uIiwiY2xlYXJQbGF5ZXIiLCJnZXRQbGF5ZXIiLCJTdGFnZV9TdGFnZSIsIm51bWJlciIsInBvd2VydXBzQXZhaWxhYmxlIiwic3Bhd25FbmVteSIsInNwYXduUG93ZXJ1cCIsImVuZW1pZXMiLCJnZXRFbmVtaWVzIiwiZW5lbXlTcGF3bkNEIiwicmVuZGVyTGF5ZXIiLCJzY3JlZW5OdW0iLCJHYW1lX0dhbWUiLCJpc0xvc3QiLCJhY2N1bXVsYXRlZFRpbWUiLCJsYXN0VGltZSIsInRpbWUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzcmVlbkZhZGVMZWZ0Iiwic3RhZ2UiLCJjaGVja0NvbGxpc2lvbnMiLCJnZXRGbGFnIiwiaXNGaW5pc2giLCJ0b05leHRTdGFnZSIsImNsZWFyU2NyZWVuIiwicmVuZGVyU3RhcnRTY3JlZW4iLCJyZW5kZXJHYW1lIiwicmVuZGVyR2FtZU92ZXIiLCJyZW5kZXJDaGFpbmdpbmdTdGFnZSIsIm5ld051bSIsImNsZWFyIiwiZ2V0TmV4dFN0YWdlTnVtIiwiYXN5bmMiLCJsb2FkU3ByaXRlIiwic3ByaXRlc19kZWZhdWx0IiwiYSIsImxvYWRBdWRpbyIsImV4cGxvZGUiLCJleHBsb2RlX2RlZmF1bHQiLCJoaXQiLCJoaXRfZGVmYXVsdCIsImhpdGRtZyIsImhpdGRtZ19kZWZhdWx0IiwibmV1dHJhbCIsIm5ldXRyYWxfZGVmYXVsdCIsInBvd2VydXBfZGVmYXVsdCIsIm1vdmVfZGVmYXVsdCIsInN0YXJ0Iiwic3RhcnRfZGVmYXVsdCIsImdhbWVvdmVyIiwiZ2FtZW92ZXJfZGVmYXVsdCIsImxpc3RlblRvRXZlbnRzIiwiY3JlYXRlTG9vcCIsImJ1aWxkX21haW4iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFN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LEVBQUFQLEVBQVFRLFFBQUFDLEVBQUFULEVBQVNyTyxRQUFBK08sRUFBQVYsRUFBUy9FLEtBQUEwRixFQUFBWCxFQUFNWSxNQUFBQyxFQUFBYixFQUFPYyxTQUFBQyxFQUFBZixJQUNsRixNQUFBOU0sRUFBQSxJQUFxQnVMLEdBQ2pCM0wsR0FBUWtPLGVBQUE5TixHQUNaQSxFQUFBK04sYUFFQUMiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYWI2NWM0NzJjNmI1OTJhZmU4NzU3YmI4YmU4YzYyNjcucG5nXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiNWMwNzg4NDc5NzhhMTM4ZDY0MzcxNTMxZjQ4YmJkYmQud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiODRjMjJkYzMzOWI1ZjU3ZTRiMTUyODdlMDEyNWE5ZTcud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZDRkMTdmMWY0YTBlZWU1MTE4NTZiZjkwNTY5OTExYzAud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiMTdmOTljNGUxNTM0NDA2MTY0YjRkNjcwMTIzNzQ2Mjkud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZjkxMjYxMGFjNzhlODI3MGI2MzQxZWM0ZTZkMDhkODMud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiNTRhZjk1YjdiNDU0MjQ0ODViNmViZjAzNjFkMDE5YTMud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYWE4YzUxODUwYzA5ZTg5YmI5YTQ3ZmIzMWVlMzFhMzgud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiOWFmODhhNmFjOWNmYmMzOTJhOTQxYjRlZDUyMGQ1Zjgud2F2XCI7IiwiZnVuY3Rpb24gY2hlY2tFbnRpdHlDb2xsaXNpb24oYm94MSwgYm94Mikge1xuICAgIHJldHVybiBib3gxLngxIDwgYm94Mi54MiAmJiBib3gxLngyID4gYm94Mi54MSAmJiBib3gxLnkxIDwgYm94Mi55MiAmJiBib3gxLnkyID4gYm94Mi55MTtcbn1cbmV4cG9ydCB7IGNoZWNrRW50aXR5Q29sbGlzaW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaGVja0VudGl0eUNvbGxpc2lvbi5qcy5tYXAiLCJjb25zdCByYW5kb21JbnQgPSAobGltaXQpID0+IHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbGltaXQpO1xufTtcbmV4cG9ydCB7IHJhbmRvbUludCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmFuZG9tLmpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBnZXRBbmltYXRpb25JbmRleChhbmltYXRpb25MZW5ndGgsIGZyYW1lc1RvdGFsLCBmcmFtZXNMZWZ0KSB7XG4gICAgY29uc3Qgc3RlcCA9IGZyYW1lc1RvdGFsIC8gYW5pbWF0aW9uTGVuZ3RoO1xuICAgIHJldHVybiBNYXRoLmZsb29yKGZyYW1lc0xlZnQgLyBzdGVwKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhbmltYXRlVmFyaWFibGVTcHJpdGVzKHBvc2l0aW9uLCBhbmltYXRpb24sIGZyYW1lc1RvdGFsLCBmcmFtZXNMZWZ0KSB7XG4gICAgY29uc3QgaW5kZXggPSBNYXRoLm1pbihnZXRBbmltYXRpb25JbmRleChhbmltYXRpb24ubGVuZ3RoLCBmcmFtZXNUb3RhbCwgZnJhbWVzTGVmdCksIGFuaW1hdGlvbi5sZW5ndGggLSAxKTtcbiAgICBjb25zdCB7IHNwcml0ZSwgc2l6ZSB9ID0gYW5pbWF0aW9uW2luZGV4XTtcbiAgICByZXR1cm4gc3ByaXRlKHBvc2l0aW9uLCBzaXplKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuaW1hdGlvbi5qcy5tYXAiLCJleHBvcnQgdmFyIERpcmVjdGlvbjtcbihmdW5jdGlvbiAoRGlyZWN0aW9uKSB7XG4gICAgRGlyZWN0aW9uW0RpcmVjdGlvbltcIlRvcFwiXSA9IDBdID0gXCJUb3BcIjtcbiAgICBEaXJlY3Rpb25bRGlyZWN0aW9uW1wiQm90dG9tXCJdID0gMV0gPSBcIkJvdHRvbVwiO1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJSaWdodFwiXSA9IDJdID0gXCJSaWdodFwiO1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJMZWZ0XCJdID0gM10gPSBcIkxlZnRcIjtcbn0pKERpcmVjdGlvbiB8fCAoRGlyZWN0aW9uID0ge30pKTtcbmV4cG9ydCB2YXIgVGFua1R5cGVzO1xuKGZ1bmN0aW9uIChUYW5rVHlwZXMpIHtcbiAgICBUYW5rVHlwZXNbVGFua1R5cGVzW1wiRGVmYXVsdFwiXSA9IDBdID0gXCJEZWZhdWx0XCI7XG4gICAgVGFua1R5cGVzW1RhbmtUeXBlc1tcIkZhc3RcIl0gPSAxXSA9IFwiRmFzdFwiO1xuICAgIFRhbmtUeXBlc1tUYW5rVHlwZXNbXCJBcm1vcmVkXCJdID0gMl0gPSBcIkFybW9yZWRcIjtcbiAgICBUYW5rVHlwZXNbVGFua1R5cGVzW1wiQXJtb3JlZDJcIl0gPSAzXSA9IFwiQXJtb3JlZDJcIjtcbiAgICBUYW5rVHlwZXNbVGFua1R5cGVzW1wiQXJtb3JlZDNcIl0gPSA0XSA9IFwiQXJtb3JlZDNcIjtcbn0pKFRhbmtUeXBlcyB8fCAoVGFua1R5cGVzID0ge30pKTtcbmV4cG9ydCB2YXIgUG93ZXJ1cFR5cGVzO1xuKGZ1bmN0aW9uIChQb3dlcnVwVHlwZXMpIHtcbiAgICBQb3dlcnVwVHlwZXNbUG93ZXJ1cFR5cGVzW1wiSGVsbWV0XCJdID0gMF0gPSBcIkhlbG1ldFwiO1xuICAgIFBvd2VydXBUeXBlc1tQb3dlcnVwVHlwZXNbXCJTdGFyXCJdID0gMV0gPSBcIlN0YXJcIjtcbiAgICBQb3dlcnVwVHlwZXNbUG93ZXJ1cFR5cGVzW1wiU3RvcHdhdGNoXCJdID0gMl0gPSBcIlN0b3B3YXRjaFwiO1xuICAgIFBvd2VydXBUeXBlc1tQb3dlcnVwVHlwZXNbXCJHcmVuYWRlXCJdID0gM10gPSBcIkdyZW5hZGVcIjtcbiAgICBQb3dlcnVwVHlwZXNbUG93ZXJ1cFR5cGVzW1wiVGFua1wiXSA9IDRdID0gXCJUYW5rXCI7XG59KShQb3dlcnVwVHlwZXMgfHwgKFBvd2VydXBUeXBlcyA9IHt9KSk7XG5leHBvcnQgdmFyIFBsYXllclBvd2VyO1xuKGZ1bmN0aW9uIChQbGF5ZXJQb3dlcikge1xuICAgIFBsYXllclBvd2VyW1BsYXllclBvd2VyW1wiRGVmYXVsdFwiXSA9IDBdID0gXCJEZWZhdWx0XCI7XG4gICAgUGxheWVyUG93ZXJbUGxheWVyUG93ZXJbXCJGaXJzdFwiXSA9IDFdID0gXCJGaXJzdFwiO1xuICAgIFBsYXllclBvd2VyW1BsYXllclBvd2VyW1wiU2Vjb25kXCJdID0gMl0gPSBcIlNlY29uZFwiO1xufSkoUGxheWVyUG93ZXIgfHwgKFBsYXllclBvd2VyID0ge30pKTtcbmV4cG9ydCB2YXIgVGlsZXM7XG4oZnVuY3Rpb24gKFRpbGVzKSB7XG4gICAgVGlsZXNbVGlsZXNbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcbiAgICBUaWxlc1tUaWxlc1tcIkJyaWNrMVwiXSA9IDFdID0gXCJCcmljazFcIjtcbiAgICBUaWxlc1tUaWxlc1tcIkJyaWNrMlwiXSA9IDJdID0gXCJCcmljazJcIjtcbiAgICBUaWxlc1tUaWxlc1tcIkJyaWNrM1wiXSA9IDNdID0gXCJCcmljazNcIjtcbiAgICBUaWxlc1tUaWxlc1tcIkJyaWNrNFwiXSA9IDRdID0gXCJCcmljazRcIjtcbiAgICBUaWxlc1tUaWxlc1tcIlN0ZWVsXCJdID0gNV0gPSBcIlN0ZWVsXCI7XG4gICAgVGlsZXNbVGlsZXNbXCJJY2VcIl0gPSA2XSA9IFwiSWNlXCI7XG4gICAgVGlsZXNbVGlsZXNbXCJHcmFzc1wiXSA9IDddID0gXCJHcmFzc1wiO1xuICAgIFRpbGVzW1RpbGVzW1wiV2F0ZXJcIl0gPSA4XSA9IFwiV2F0ZXJcIjtcbn0pKFRpbGVzIHx8IChUaWxlcyA9IHt9KSk7XG5leHBvcnQgdmFyIExheWVycztcbihmdW5jdGlvbiAoTGF5ZXJzKSB7XG4gICAgTGF5ZXJzW0xheWVyc1tcInVuZGVyXCJdID0gMF0gPSBcInVuZGVyXCI7XG4gICAgTGF5ZXJzW0xheWVyc1tcIm1haW5cIl0gPSAxXSA9IFwibWFpblwiO1xuICAgIExheWVyc1tMYXllcnNbXCJvdmVyXCJdID0gMl0gPSBcIm92ZXJcIjtcbn0pKExheWVycyB8fCAoTGF5ZXJzID0ge30pKTtcbmV4cG9ydCB2YXIgQ29udHJvbEtleXM7XG4oZnVuY3Rpb24gKENvbnRyb2xLZXlzKSB7XG4gICAgQ29udHJvbEtleXNbXCJBcnJvd1VwXCJdID0gXCJBcnJvd1VwXCI7XG4gICAgQ29udHJvbEtleXNbXCJBcnJvd1JpZ2h0XCJdID0gXCJBcnJvd1JpZ2h0XCI7XG4gICAgQ29udHJvbEtleXNbXCJBcnJvd0Rvd25cIl0gPSBcIkFycm93RG93blwiO1xuICAgIENvbnRyb2xLZXlzW1wiQXJyb3dMZWZ0XCJdID0gXCJBcnJvd0xlZnRcIjtcbiAgICBDb250cm9sS2V5c1tcIlNwYWNlXCJdID0gXCJTcGFjZVwiO1xufSkoQ29udHJvbEtleXMgfHwgKENvbnRyb2xLZXlzID0ge30pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGVzLmpzLm1hcCIsImltcG9ydCAqIGFzIHR5cGVzIGZyb20gJy4vdHlwZXMnO1xuLy8gR2FtZVxuZXhwb3J0IGNvbnN0IERFTFRBX1RJTUUgPSAxIC8gNjA7XG4vLyBFbnRpdGllc1xuZXhwb3J0IGNvbnN0IFRBTktfU0laRSA9IHsgeDogNDAsIHk6IDQwIH07XG5leHBvcnQgY29uc3QgRkxBR19TSVpFID0geyB4OiA0MCwgeTogNDAgfTtcbmV4cG9ydCBjb25zdCBGTEFHX1BPU0lUSU9OID0geyB4OiAyODAsIHk6IDU2MCB9O1xuZXhwb3J0IGNvbnN0IFBMQVlFUl9TUEFXTl9QT1NJVElPTiA9IHsgeDogMjEwLCB5OiA1NjAgfTtcbmV4cG9ydCBjb25zdCBCVUxMRVRfU0laRSA9IHsgeDogMTAsIHk6IDEwIH07XG5leHBvcnQgY29uc3QgQlVMTEVUX1ZFTE9DSVRZID0gMzAwO1xuZXhwb3J0IGNvbnN0IFBPV0VSVVBfU0laRSA9IHsgeDogNDAsIHk6IDQwIH07XG5leHBvcnQgY29uc3QgUExBWUVSX1NUQVRTID0ge1xuICAgIFt0eXBlcy5QbGF5ZXJQb3dlci5EZWZhdWx0XToge1xuICAgICAgICB2ZWxvY2l0eTogMTAwLFxuICAgICAgICBzaG90Q0Q6IDUwLFxuICAgIH0sXG4gICAgW3R5cGVzLlBsYXllclBvd2VyLkZpcnN0XToge1xuICAgICAgICB2ZWxvY2l0eTogMTIwLFxuICAgICAgICBzaG90Q0Q6IDQwLFxuICAgIH0sXG4gICAgW3R5cGVzLlBsYXllclBvd2VyLlNlY29uZF06IHtcbiAgICAgICAgdmVsb2NpdHk6IDE1MCxcbiAgICAgICAgc2hvdENEOiAzMCxcbiAgICB9LFxufTtcbmV4cG9ydCBjb25zdCBFTkVNWV9TVEFUUyA9IHtcbiAgICBbdHlwZXMuVGFua1R5cGVzLkRlZmF1bHRdOiB7XG4gICAgICAgIHZlbG9jaXR5OiAxMDAsXG4gICAgICAgIHNob3RDRDogNzAsXG4gICAgICAgIGxpdmVzOiAxLFxuICAgIH0sXG4gICAgW3R5cGVzLlRhbmtUeXBlcy5GYXN0XToge1xuICAgICAgICB2ZWxvY2l0eTogMjAwLFxuICAgICAgICBzaG90Q0Q6IDYwLFxuICAgICAgICBsaXZlczogMSxcbiAgICB9LFxuICAgIFt0eXBlcy5UYW5rVHlwZXMuQXJtb3JlZF06IHtcbiAgICAgICAgdmVsb2NpdHk6IDEyMCxcbiAgICAgICAgc2hvdENEOiA3MCxcbiAgICAgICAgbGl2ZXM6IDMsXG4gICAgfSxcbn07XG4vLyBUaW1lcnNcbmV4cG9ydCBjb25zdCBERUFUSF9GUkFNRVMgPSAzNTtcbmV4cG9ydCBjb25zdCBTUEFXTl9GUkFNRVMgPSAzNTtcbmV4cG9ydCBjb25zdCBJTlZJTkNJQkxFX0ZSQU1FUyA9IDIwMDtcbmV4cG9ydCBjb25zdCBGUkVFWkVfRlJBTUVTID0gMjAwO1xuZXhwb3J0IGNvbnN0IFBPV0VSVVBfU1BBV05fQ0QgPSA2MDA7XG5leHBvcnQgY29uc3QgUE9XRVJVUF9CTElOS19GUkFNRVMgPSAyMDA7XG5leHBvcnQgY29uc3QgRU5FTVlfU1BBV05fQ0QgPSA0MDA7XG5leHBvcnQgY29uc3QgU0NSRUVOX0ZBREVfRlJBTUVTID0gMzAwO1xuLy8gU3RhZ2VcbmV4cG9ydCBjb25zdCBFTkVNWV9TUEFXTl9QT1NJVElPTiA9IFt7IHg6IDAsIHk6IDAgfSwgeyB4OiA1NjAsIHk6IDAgfV07XG4vLyBNYXBcbmV4cG9ydCBjb25zdCBUSUxFX1NJREUgPSAyMDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnN0YW50cy5qcy5tYXAiLCJpbXBvcnQgeyBnZXRBbmltYXRpb25JbmRleCB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7IFNDUkVFTl9GQURFX0ZSQU1FUyB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBhc3NldHNIb2xkZXIgfSBmcm9tICcuLi91dGlscyc7XG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpO1xuY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuY29udGV4dC5mb250ID0gJzMwcHggQXJpYWwnO1xuY29udGV4dC50ZXh0QWxpZ24gPSAnY2VudGVyJztcbmV4cG9ydCBjb25zdCBnZXRBbmltSW5kZXggPSAoYW5pbWF0aW9uTGVuZ3RoLCBmcmFtZXNMZWZ0LCBzcHJpdGVzTGVuZ3RoKSA9PiB7XG4gICAgY29uc3Qgc3RlcCA9IGFuaW1hdGlvbkxlbmd0aCAvIHNwcml0ZXNMZW5ndGg7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoZnJhbWVzTGVmdCAvIHN0ZXApO1xufTtcbmV4cG9ydCBjb25zdCBtYWluID0ge1xuICAgIGNhbnZhcyxcbiAgICBjb250ZXh0LFxuICAgIGNsZWFyU2NyZWVuKCkge1xuICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgIH0sXG4gICAgcmVuZGVyQ2hhaW5naW5nU3RhZ2UobGVmdCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IGdldEFuaW1hdGlvbkluZGV4KFNDUkVFTl9GQURFX0ZSQU1FUywgU0NSRUVOX0ZBREVfRlJBTUVTLCBsZWZ0KTtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCA2MDAsIGluZGV4KTtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCA2MDAgLSBpbmRleCwgNjAwLCBpbmRleCk7XG4gICAgfSxcbiAgICByZW5kZXJHYW1lT3ZlcihsZWZ0ID0gMCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IGdldEFuaW1hdGlvbkluZGV4KFNDUkVFTl9GQURFX0ZSQU1FUywgU0NSRUVOX0ZBREVfRlJBTUVTLCBsZWZ0KTtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCA2MDAsIDMwMCAtIGluZGV4KTtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAzMDAgKyBpbmRleCwgNjAwLCAzMDAgLSBpbmRleCk7XG4gICAgICAgIGlmICghbGVmdCkge1xuICAgICAgICAgICAgYXNzZXRzSG9sZGVyLnNwcml0ZXMuZ2FtZU92ZXIoeyB4OiAyNzUsIHk6IDI3NSB9LCB7IHg6IDUwLCB5OiA1MCB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcmVuZGVyU3RhcnRTY3JlZW4oKSB7XG4gICAgICAgIGFzc2V0c0hvbGRlci5zcHJpdGVzLmxvZ28oeyB4OiAxMDAsIHk6IDIwMCB9LCB7IHg6IDQwMCwgeTogMjAwIH0pO1xuICAgICAgICBjb250ZXh0LnN0cm9rZVRleHQoJ1ByZXNzIGFueSBrZXknLCAzMDAsIDUwMCk7XG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYWluLmpzLm1hcCIsImltcG9ydCB7IGFzc2V0c0hvbGRlciB9IGZyb20gJy4uL3V0aWxzJztcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmQnKTtcbmNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbmNvbnN0IGRyYXdUYW5rcyA9ICh0YW5rcywgdGFua1Nwcml0ZSkgPT4ge1xuICAgIGlmICghdGFua3MubGVuZ3RoKVxuICAgICAgICByZXR1cm47XG4gICAgbGV0IHkgPSA3MDtcbiAgICBsZXQgY291bnRlciA9IDA7XG4gICAgdGFua3MuZm9yRWFjaCgoXywgaWR4KSA9PiB7XG4gICAgICAgIGlmIChpZHggJSAyID09PSAwKSB7XG4gICAgICAgICAgICB0YW5rU3ByaXRlKHsgeDogNjk1LCB5IH0sIHsgeDogMTUsIHk6IDE1IH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFua1Nwcml0ZSh7IHg6IDY3MCwgeSB9LCB7IHg6IDE1LCB5OiAxNSB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY291bnRlciA9PT0gMikge1xuICAgICAgICAgICAgeSArPSAyMDtcbiAgICAgICAgICAgIGNvdW50ZXIgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY291bnRlciArPSAxO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuZXhwb3J0IGNvbnN0IGRhc2hib2FyZCA9IHtcbiAgICBjYW52YXMsXG4gICAgY29udGV4dCxcbiAgICByZW5kZXIocGxheWVyTGl2ZXMsIHN0YWdlTnVtLCB0YW5rcykge1xuICAgICAgICBjb25zdCB7IG51bWJlckljb25zLCBmbGFnSWNvbiwgcGxheWVySWNvbiwgdGFua0ljb24gfSA9IGFzc2V0c0hvbGRlci5zcHJpdGVzO1xuICAgICAgICBkcmF3VGFua3ModGFua3MsIHRhbmtJY29uKTtcbiAgICAgICAgZmxhZ0ljb24oeyB4OiA2NzAsIHk6IDQ1MCB9LCB7IHg6IDUwLCB5OiA0MCB9KTtcbiAgICAgICAgcGxheWVySWNvbih7IHg6IDY3MCwgeTogMzgwIH0sIHsgeDogMjAsIHk6IDIwIH0pO1xuICAgICAgICBudW1iZXJJY29uc1tzdGFnZU51bV0oeyB4OiA2OTAsIHk6IDQ4NSB9LCB7IHg6IDIwLCB5OiAyMCB9KTtcbiAgICAgICAgbnVtYmVySWNvbnNbcGxheWVyTGl2ZXNdKHsgeDogNzAwLCB5OiAzODAgfSwgeyB4OiAyMCwgeTogMjAgfSk7XG4gICAgfSxcbiAgICBjbGVhclNjcmVlbigpIHtcbiAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICB9LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhc2hib2FyZC5qcy5tYXAiLCJpbXBvcnQgeyBtYWluLCBkYXNoYm9hcmQgfSBmcm9tICcuLi9zY3JlZW5zJztcbmltcG9ydCB7IFBsYXllclBvd2VyLCBEaXJlY3Rpb24sIFRhbmtUeXBlcywgUG93ZXJ1cFR5cGVzLCBUaWxlcywgfSBmcm9tICcuLi90eXBlcyc7XG5jb25zdCBjcmVhdGVTcHJpdGUgPSAoaW1hZ2UsIGNvbnRleHQpID0+IChkeCwgZHksIGRXaWR0aCwgZEhlaWdodCkgPT4gKHBvc2l0aW9uLCBzaXplKSA9PiB7XG4gICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIGR4LCBkeSwgZFdpZHRoLCBkSGVpZ2h0LCBwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBzaXplLngsIHNpemUueSk7XG59O1xuY29uc3Qgc2V0dXBTcHJpdGVzID0gKGltYWdlKSA9PiB7XG4gICAgY29uc3QgbWFpblNwcml0ZSA9IGNyZWF0ZVNwcml0ZShpbWFnZSwgbWFpbi5jb250ZXh0KTtcbiAgICBjb25zdCBkYXNoYm9hcmRTcHJpdGUgPSBjcmVhdGVTcHJpdGUoaW1hZ2UsIGRhc2hib2FyZC5jb250ZXh0KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBwbGF5ZXI6IHtcbiAgICAgICAgICAgIFtQbGF5ZXJQb3dlci5EZWZhdWx0XToge1xuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uVG9wXTogW21haW5TcHJpdGUoMCwgMCwgMTYsIDE1KSwgbWFpblNwcml0ZSgxNiwgMCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Cb3R0b21dOiBbbWFpblNwcml0ZSg2NCwgMCwgMTYsIDE1KSwgbWFpblNwcml0ZSg4MCwgMCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDk2LCAwLCAxNiwgMTUpLCBtYWluU3ByaXRlKDExMiwgMCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5MZWZ0XTogW21haW5TcHJpdGUoMzIsIDAsIDE2LCAxNSksIG1haW5TcHJpdGUoNDgsIDAsIDE2LCAxNSldLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtQbGF5ZXJQb3dlci5GaXJzdF06IHtcbiAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlRvcF06IFttYWluU3ByaXRlKDAsIDMyLjMsIDE2LCAxNSksIG1haW5TcHJpdGUoMTUuNywgMzIuNSwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Cb3R0b21dOiBbbWFpblNwcml0ZSg2NCwgMzIuMywgMTYsIDE1KSwgbWFpblNwcml0ZSg4MCwgMzIuNSwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDk2LCAzMi4zLCAxNiwgMTUpLCBtYWluU3ByaXRlKDExMi4zLCAzMiwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5MZWZ0XTogW21haW5TcHJpdGUoMzEuNywgMzIsIDE2LCAxNSksIG1haW5TcHJpdGUoNDgsIDMyLCAxNiwgMTUpXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbUGxheWVyUG93ZXIuU2Vjb25kXToge1xuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uVG9wXTogW21haW5TcHJpdGUoMCwgNDgsIDE2LCAxNSksIG1haW5TcHJpdGUoMTUuNywgNDgsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uQm90dG9tXTogW21haW5TcHJpdGUoNjQsIDQ4LCAxNiwgMTUpLCBtYWluU3ByaXRlKDgwLCA0OCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDk2LCA0OCwgMTYsIDE1KSwgbWFpblNwcml0ZSgxMTIuMywgNDgsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uTGVmdF06IFttYWluU3ByaXRlKDMxLjcsIDQ4LCAxNiwgMTUpLCBtYWluU3ByaXRlKDQ4LCA0OCwgMTYsIDE1KV0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBlbmVteToge1xuICAgICAgICAgICAgW1RhbmtUeXBlcy5EZWZhdWx0XToge1xuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uVG9wXTogW21haW5TcHJpdGUoMTI4LCAwLCAxNiwgMTUpLCBtYWluU3ByaXRlKDE0NCwgMCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Cb3R0b21dOiBbbWFpblNwcml0ZSgxOTIsIDAsIDE2LCAxNSksIG1haW5TcHJpdGUoMjA4LCAwLCAxNiwgMTUpXSxcbiAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlJpZ2h0XTogW21haW5TcHJpdGUoMjIzLjcsIDAsIDE2LCAxNSksIG1haW5TcHJpdGUoMjM5LjcsIDAsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uTGVmdF06IFttYWluU3ByaXRlKDE2MCwgMCwgMTYsIDE1KSwgbWFpblNwcml0ZSgxNzYsIDAsIDE2LCAxNSldLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtUYW5rVHlwZXMuRmFzdF06IHtcbiAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlRvcF06IFttYWluU3ByaXRlKDEyOCwgODAsIDE2LCAxNSksIG1haW5TcHJpdGUoMTQ0LCA4MCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Cb3R0b21dOiBbbWFpblNwcml0ZSgxOTIsIDgwLCAxNiwgMTUpLCBtYWluU3ByaXRlKDIwOCwgODAsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uUmlnaHRdOiBbbWFpblNwcml0ZSgyMjQsIDgwLCAxNiwgMTUpLCBtYWluU3ByaXRlKDI0MCwgODAsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uTGVmdF06IFttYWluU3ByaXRlKDE2MCwgODAsIDE2LCAxNSksIG1haW5TcHJpdGUoMTc2LCA4MCwgMTYsIDE1KV0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW1RhbmtUeXBlcy5Bcm1vcmVkXToge1xuICAgICAgICAgICAgICAgICcxJzoge1xuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlRvcF06IFttYWluU3ByaXRlKDEyOC41LCAxMTEuNzUsIDE0Ljc1LCAxNiksIG1haW5TcHJpdGUoMTQ0LjI1LCAxMTEuNzUsIDE0Ljc1LCAxNildLFxuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLkJvdHRvbV06IFttYWluU3ByaXRlKDE5MS43NSwgMTExLjc1LCAxNS4yNSwgMTYpLCBtYWluU3ByaXRlKDIwNy41LCAxMTEuNzUsIDE1LjI1LCAxNildLFxuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlJpZ2h0XTogW21haW5TcHJpdGUoMjIyLjc1LCAxMTEuNzUsIDE2LCAxNiksIG1haW5TcHJpdGUoMjM5LCAxMTEuNzUsIDE0Ljc1LCAxNildLFxuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLkxlZnRdOiBbbWFpblNwcml0ZSgxNTksIDExMS43NSwgMTYsIDE2KSwgbWFpblNwcml0ZSgxNzQuNzUsIDExMS43NSwgMTYsIDE2KV0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnMic6IHtcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Ub3BdOiBbbWFpblNwcml0ZSgwLCAyNDAsIDE0Ljc1LCAxNiksIG1haW5TcHJpdGUoMTYsIDI0MCwgMTQuNzUsIDE2KV0sXG4gICAgICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uQm90dG9tXTogW21haW5TcHJpdGUoNjQsIDI0MCwgMTUuMjUsIDE2KSwgbWFpblNwcml0ZSg4MCwgMjQwLCAxNS4yNSwgMTYpXSxcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDk2LCAyNDAsIDE2LCAxNiksIG1haW5TcHJpdGUoMTEyLCAyNDAsIDE0Ljc1LCAxNildLFxuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLkxlZnRdOiBbbWFpblNwcml0ZSgzMiwgMjQwLCAxNiwgMTYpLCBtYWluU3ByaXRlKDQ4LCAyNDAsIDE2LCAxNildLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJzMnOiB7XG4gICAgICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uVG9wXTogW21haW5TcHJpdGUoMTI4LCAyNDAsIDE0Ljc1LCAxNiksIG1haW5TcHJpdGUoMTQ0LCAyNDAsIDE0Ljc1LCAxNildLFxuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLkJvdHRvbV06IFttYWluU3ByaXRlKDE5MiwgMjQwLCAxNS4yNSwgMTYpLCBtYWluU3ByaXRlKDIwOCwgMjQwLCAxNS4yNSwgMTYpXSxcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDIyNCwgMjQwLCAxNiwgMTYpLCBtYWluU3ByaXRlKDI0MCwgMjQwLCAxNC43NSwgMTYpXSxcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5MZWZ0XTogW21haW5TcHJpdGUoMTYwLCAyNDAsIDE2LCAxNiksIG1haW5TcHJpdGUoMTc2LCAyNDAsIDE2LCAxNildLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBidWxsZXQ6IHtcbiAgICAgICAgICAgIFtEaXJlY3Rpb24uVG9wXTogW21haW5TcHJpdGUoMzIyLjI1LCAxMDEuNSwgNSwgNS43KV0sXG4gICAgICAgICAgICBbRGlyZWN0aW9uLkJvdHRvbV06IFttYWluU3ByaXRlKDMzOC41LCAxMDEuNSwgNSwgNS43KV0sXG4gICAgICAgICAgICBbRGlyZWN0aW9uLlJpZ2h0XTogW21haW5TcHJpdGUoMzQ1Ljc1LCAxMDEuNSwgNSwgNS43KV0sXG4gICAgICAgICAgICBbRGlyZWN0aW9uLkxlZnRdOiBbbWFpblNwcml0ZSgzMjkuNSwgMTAxLjUsIDUsIDUuNyldLFxuICAgICAgICB9LFxuICAgICAgICBmbGFnOiBtYWluU3ByaXRlKDMwNC41LCAzMywgMTYsIDE1LjI1KSxcbiAgICAgICAgZmxhZ0RlYXRoOiBtYWluU3ByaXRlKDMyMCwgMzMsIDE2LCAxNS4yNSksXG4gICAgICAgIHRhbmtJY29uOiBkYXNoYm9hcmRTcHJpdGUoMzIwLjI1LCAxOTIuNzUsIDguNSwgNy43NSksXG4gICAgICAgIGZsYWdJY29uOiBkYXNoYm9hcmRTcHJpdGUoMzc1LjUsIDE4NCwgMTcsIDE1KSxcbiAgICAgICAgcGxheWVySWNvbjogZGFzaGJvYXJkU3ByaXRlKDM3Ni41LCAxNDQuNSwgOCwgOC41KSxcbiAgICAgICAgbnVtYmVySWNvbnM6IFtcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzMjguNSwgMTg0LCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzMzYuNSwgMTg0LCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNDQuNSwgMTg0LCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNTIuNSwgMTg0LCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNjAuNSwgMTg0LCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzMjguNSwgMTkyLCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzMzYuNSwgMTkyLCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNDQuNSwgMTkyLCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNTIuNSwgMTkyLCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNjAuNSwgMTkyLCA4LCA3KSxcbiAgICAgICAgXSxcbiAgICAgICAgbG9nbzogbWFpblNwcml0ZSgwLCAyNjAsIDM3NSwgMTM3KSxcbiAgICAgICAgdGlsZXM6IHtcbiAgICAgICAgICAgIFtUaWxlcy5CcmljazFdOiBtYWluU3ByaXRlKDI1NiwgMCwgOCwgNyksXG4gICAgICAgICAgICBbVGlsZXMuQnJpY2syXTogbWFpblNwcml0ZSgyNjQsIDAsIDgsIDcpLFxuICAgICAgICAgICAgW1RpbGVzLkJyaWNrM106IG1haW5TcHJpdGUoMjU2LCA4LCA4LCA3KSxcbiAgICAgICAgICAgIFtUaWxlcy5CcmljazRdOiBtYWluU3ByaXRlKDI2NCwgOCwgOCwgNyksXG4gICAgICAgICAgICBbVGlsZXMuU3RlZWxdOiBtYWluU3ByaXRlKDI1NiwgMTYsIDgsIDcpLFxuICAgICAgICAgICAgW1RpbGVzLkljZV06IG1haW5TcHJpdGUoMjg4LCAzMiwgOCwgNyksXG4gICAgICAgICAgICBbVGlsZXMuR3Jhc3NdOiBtYWluU3ByaXRlKDI3MiwgMzIsIDgsIDcpLFxuICAgICAgICAgICAgW1RpbGVzLldhdGVyXTogbWFpblNwcml0ZSgyNTYsIDQwLCA4LCA3KSxcbiAgICAgICAgfSxcbiAgICAgICAgZ2FtZU92ZXI6IG1haW5TcHJpdGUoMjg4LjUsIDE4NCwgMzEuMiwgMTYpLFxuICAgICAgICBwb3dlcnVwOiB7XG4gICAgICAgICAgICBbUG93ZXJ1cFR5cGVzLkhlbG1ldF06IG1haW5TcHJpdGUoMjU1LjUsIDExMiwgMTYsIDE0KSxcbiAgICAgICAgICAgIFtQb3dlcnVwVHlwZXMuU3RvcHdhdGNoXTogbWFpblNwcml0ZSgyNzEuNSwgMTEyLCAxNiwgMTQpLFxuICAgICAgICAgICAgW1Bvd2VydXBUeXBlcy5TdGFyXTogbWFpblNwcml0ZSgzMDMuNSwgMTEyLCAxNiwgMTQpLFxuICAgICAgICAgICAgW1Bvd2VydXBUeXBlcy5HcmVuYWRlXTogbWFpblNwcml0ZSgzMTkuNSwgMTEyLCAxNiwgMTQpLFxuICAgICAgICAgICAgW1Bvd2VydXBUeXBlcy5UYW5rXTogbWFpblNwcml0ZSgzMzUuNSwgMTEyLCAxNiwgMTQpLFxuICAgICAgICB9LFxuICAgICAgICBpbnZpbmNpYmxlOiBbbWFpblNwcml0ZSgyNTYsIDE0NCwgMTUuNywgMTYpLCBtYWluU3ByaXRlKDI3Mi4yLCAxNDQsIDE1LjcsIDE2KV0sXG4gICAgfTtcbn07XG5jb25zdCBzZXR1cFZhcmlhYmxlU3ByaXRlcyA9IChpbWFnZSkgPT4ge1xuICAgIGNvbnN0IG1haW5TcHJpdGUgPSBjcmVhdGVTcHJpdGUoaW1hZ2UsIG1haW4uY29udGV4dCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGFua1NwYXduOiBbXG4gICAgICAgICAgICB7IHNwcml0ZTogbWFpblNwcml0ZSgzMDMsIDk3LCAxNSwgMTQpLCBzaXplOiB7IHg6IDM1LCB5OiAzNSB9IH0sXG4gICAgICAgICAgICB7IHNwcml0ZTogbWFpblNwcml0ZSgzMDMsIDk3LCAxNSwgMTQpLCBzaXplOiB7IHg6IDM1LCB5OiAzNSB9IH0sXG4gICAgICAgICAgICB7IHNwcml0ZTogbWFpblNwcml0ZSgyODgsIDk3LCAxNSwgMTQpLCBzaXplOiB7IHg6IDM1LCB5OiAzNSB9IH0sXG4gICAgICAgICAgICB7IHNwcml0ZTogbWFpblNwcml0ZSgyNzMsIDk3LCAxNSwgMTQpLCBzaXplOiB7IHg6IDMwLCB5OiAzMCB9IH0sXG4gICAgICAgICAgICB7IHNwcml0ZTogbWFpblNwcml0ZSgyNTcsIDk3LCAxNSwgMTQpLCBzaXplOiB7IHg6IDMwLCB5OiAzMCB9IH0sXG4gICAgICAgIF0sXG4gICAgICAgIHRhbmtEZXN0cnVjdGlvbjogW1xuICAgICAgICAgICAgeyBzcHJpdGU6IG1haW5TcHJpdGUoMzM2LCAxMjguNzUsIDMyLCAzMiksIHNpemU6IHsgeDogNjAsIHk6IDYwIH0gfSxcbiAgICAgICAgICAgIHsgc3ByaXRlOiBtYWluU3ByaXRlKDMwNC41LCAxMjguNzUsIDMwLjUsIDMxLjI1KSwgc2l6ZTogeyB4OiA2MCwgeTogNjAgfSB9LFxuICAgICAgICAgICAgeyBzcHJpdGU6IG1haW5TcHJpdGUoMjg4LjI1LCAxMjguNzUsIDE2LCAxNS41KSwgc2l6ZTogeyB4OiA0MCwgeTogNDAgfSB9LFxuICAgICAgICAgICAgeyBzcHJpdGU6IG1haW5TcHJpdGUoMjcyLjI1LCAxMjguNzUsIDE1Ljc1LCAxNC4yNSksIHNpemU6IHsgeDogMzcsIHk6IDM3IH0gfSxcbiAgICAgICAgICAgIHsgc3ByaXRlOiBtYWluU3ByaXRlKDI1OCwgMTI4Ljc1LCAxMy43NSwgMTMuMjUpLCBzaXplOiB7IHg6IDM1LCB5OiAzNSB9IH0sXG4gICAgICAgIF0sXG4gICAgfTtcbn07XG5jbGFzcyBBc3NldHNIb2xkZXIge1xuICAgIGxvYWRTcHJpdGUoc3JjKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7XG4gICAgICAgICAgICAgICAgdGhpcy5zcHJpdGVzID0gc2V0dXBTcHJpdGVzKGltYWdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnZhcmlhYmxlU3ByaXRlcyA9IHNldHVwVmFyaWFibGVTcHJpdGVzKGltYWdlKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGltYWdlLnNyYyA9IHNyYztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxvYWRBdWRpbyhhdWRpbykge1xuICAgICAgICB0aGlzLmF1ZGlvID0gYXVkaW87XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IGFzc2V0c0hvbGRlciA9IG5ldyBBc3NldHNIb2xkZXIoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzc2V0c0hvbGRlci5qcy5tYXAiLCJpbXBvcnQgeyBDb250cm9sS2V5cyB9IGZyb20gJy4vdHlwZXMnO1xuZXhwb3J0IGNsYXNzIEtleWJvYXJkIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IG5ldyBTZXQoKTtcbiAgICB9XG4gICAgaGFuZGxlRXZlbnQoZXZlbnQsIGdhbWUpIHtcbiAgICAgICAgY29uc3QgeyBjb2RlLCB0eXBlIH0gPSBldmVudDtcbiAgICAgICAgaWYgKGdhbWUuaXNXYWl0aW5nRm9yUmVzdGFydCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2FtZS5yZXN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWUuaXNTdGFydFNjcmVlbikge1xuICAgICAgICAgICAgcmV0dXJuIGdhbWUucGxheSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghQ29udHJvbEtleXNbY29kZV0pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0eXBlID09PSAna2V5ZG93bicpIHtcbiAgICAgICAgICAgIHRoaXMucXVldWUuYWRkKENvbnRyb2xLZXlzW2NvZGVdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucXVldWUuZGVsZXRlKENvbnRyb2xLZXlzW2NvZGVdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRLZXkoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucXVldWUpLnBvcCgpO1xuICAgIH1cbiAgICBsaXN0ZW5Ub0V2ZW50cyhnYW1lKSB7XG4gICAgICAgIFsna2V5ZG93bicsICdrZXl1cCddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFdmVudChldmVudCwgZ2FtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IGtleWJvYXJkID0gbmV3IEtleWJvYXJkKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1rZXlib2FyZC5qcy5tYXAiLCJjb25zdCBtYXBzID0gW1xuICAgIFtcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAzLCA0LCA1LCA1LCAzLCA0LCAwLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDUsIDUsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFsxLCAyLCAwLCAwLCAxLCAyLCAxLCAyLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAyLCAxLCAyLCAwLCAwLCAxLCAyXSxcbiAgICAgICAgWzUsIDUsIDAsIDAsIDMsIDQsIDMsIDQsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDMsIDQsIDMsIDQsIDAsIDAsIDUsIDVdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMywgNCwgMSwgMiwgMywgNCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAzLCA0LCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDEsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDEsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMSwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMSwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAxLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAxLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDEsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDAsIDEsIDIsIDEsIDIsIDAsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDEsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMywgMCwgMCwgNCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAyLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgWzAsIDAsIDAsIDAsIDEsIDIsIDUsIDUsIDEsIDIsIDEsIDIsIDUsIDUsIDEsIDIsIDUsIDUsIDEsIDIsIDEsIDIsIDUsIDUsIDEsIDIsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMywgNCwgNSwgNSwgMywgNCwgMywgNCwgNSwgNSwgMywgNCwgNSwgNSwgMywgNCwgMywgNCwgNSwgNSwgMywgNCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgNSwgNSwgMCwgMCwgMSwgMiwgMCwgMCwgNSwgNSwgMSwgMiwgNSwgNSwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCA1LCA1LCAwLCAwLCAzLCA0LCAwLCAwLCA1LCA1LCAzLCA0LCA1LCA1LCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDcsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgNywgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAzLCA0LCAwLCAwLCA3LCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDcsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgNywgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgMCwgMywgNCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCA1LCAwLCA2LCA2LCA2LCA2LCA2LCAwLCA3LCAwLCA3LCAwLCA3LCA3LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDUsIDcsIDYsIDYsIDYsIDYsIDYsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgNSwgMCwgNiwgNiwgNiwgNiwgNywgMCwgNywgMCwgNywgMCwgNywgNywgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAzLCA0LCAwLCAwLCA1LCA3LCA2LCA2LCA2LCA2LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDcsIDAsIDYsIDYsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDcsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgNywgNywgNiwgNiwgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgMCwgMywgNCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCA3LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCA1LCA1LCAxLCAyLCA1LCA1LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDUsIDUsIDMsIDQsIDUsIDUsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDIsIDEsIDIsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMywgMCwgMCwgNCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAyLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICBdLFxuXTtcbmNvbnN0IHRhbmtzID0gW1syLCAyLCAwLCAwLCAxLCAyLCAxLCAwLCAwLCAwXSwgWzIsIDIsIDAsIDAsIDEsIDIsIDEsIDAsIDAsIDBdXTtcbmV4cG9ydCB7IG1hcHMsIHRhbmtzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdGFnZUNvbmZpZy5qcy5tYXAiLCJpbXBvcnQgeyBUaWxlcywgTGF5ZXJzIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBUSUxFX1NJREUgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBhc3NldHNIb2xkZXIgfSBmcm9tICcuL3V0aWxzJztcbmV4cG9ydCBjb25zdCByaWdpZCA9IFtUaWxlcy5CcmljazEsIFRpbGVzLkJyaWNrMiwgVGlsZXMuQnJpY2szLCBUaWxlcy5CcmljazQsIFRpbGVzLlN0ZWVsLCBUaWxlcy5XYXRlcl07XG5leHBvcnQgY29uc3QgYnVsbGV0VGhyb3VnaCA9IFtUaWxlcy5HcmFzcywgVGlsZXMuV2F0ZXIsIFRpbGVzLk5vbmVdO1xuY29uc3QgbGF5ZXNyTWFwID0ge1xuICAgIFtMYXllcnMudW5kZXJdOiBbVGlsZXMuSWNlLCBUaWxlcy5XYXRlcl0sXG4gICAgW0xheWVycy5tYWluXTogW1RpbGVzLkJyaWNrMSwgVGlsZXMuQnJpY2syLCBUaWxlcy5CcmljazMsIFRpbGVzLkJyaWNrNCwgVGlsZXMuU3RlZWxdLFxuICAgIFtMYXllcnMub3Zlcl06IFtUaWxlcy5HcmFzc10sXG59O1xuZXhwb3J0IGNsYXNzIFRpbGVNYXAge1xuICAgIGNvbnN0cnVjdG9yKHRpbGVzKSB7XG4gICAgICAgIHRoaXMudGlsZXMgPSB0aWxlcy5tYXAocm93ID0+IFsuLi5yb3ddKTtcbiAgICB9XG4gICAgZGVzdHJveShwb2ludCkge1xuICAgICAgICBjb25zdCB4SW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKHBvaW50LnggLyBUSUxFX1NJREUpKTtcbiAgICAgICAgY29uc3QgeUluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihwb2ludC55IC8gVElMRV9TSURFKSk7XG4gICAgICAgIHRoaXMudGlsZXNbeUluZGV4XVt4SW5kZXhdID0gVGlsZXMuTm9uZTtcbiAgICB9XG4gICAgbG9va3VwKHBvaW50KSB7XG4gICAgICAgIGNvbnN0IHhJbmRleCA9IE1hdGgubWluKE1hdGgubWF4KDAsIE1hdGguZmxvb3IocG9pbnQueCAvIFRJTEVfU0lERSkpLCAyOSk7XG4gICAgICAgIGNvbnN0IHlJbmRleCA9IE1hdGgubWluKE1hdGgubWF4KDAsIE1hdGguZmxvb3IocG9pbnQueSAvIFRJTEVfU0lERSkpLCAyOSk7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IHRoaXMudGlsZXNbeUluZGV4XVt4SW5kZXhdLCBwb3NpdGlvbjogeyB4OiB4SW5kZXggKiBUSUxFX1NJREUsIHk6IHlJbmRleCAqIFRJTEVfU0lERSB9IH07XG4gICAgfVxuICAgIGxvb2t1cFJhbmdlKHBvaW50MSwgcG9pbnQyKSB7XG4gICAgICAgIGxldCBpbkJldHdlZW5Qb2ludHMgPSBbXTtcbiAgICAgICAgY29uc3QgcmFuZ2VYID0gTWF0aC5hYnMocG9pbnQxLnggLSBwb2ludDIueCk7XG4gICAgICAgIGNvbnN0IHJhbmdlWSA9IE1hdGguYWJzKHBvaW50MS55IC0gcG9pbnQyLnkpO1xuICAgICAgICBpZiAocmFuZ2VYID4gMCAmJiByYW5nZVggPiBUSUxFX1NJREUpIHtcbiAgICAgICAgICAgIC8vIENoZWNrcyB0aWxlIGluIGJldHdlZW4gdGFuayBlZGdlc1xuICAgICAgICAgICAgaW5CZXR3ZWVuUG9pbnRzLnB1c2goeyB4OiBwb2ludDEueCArIFRJTEVfU0lERSwgeTogcG9pbnQxLnkgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmFuZ2VZID4gMCAmJiByYW5nZVkgPiBUSUxFX1NJREUpIHtcbiAgICAgICAgICAgIGluQmV0d2VlblBvaW50cy5wdXNoKHsgeDogcG9pbnQxLngsIHk6IHBvaW50MS55ICsgVElMRV9TSURFIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbcG9pbnQxLCAuLi5pbkJldHdlZW5Qb2ludHMsIHBvaW50Ml0ubWFwKHBvaW50ID0+IHRoaXMubG9va3VwKHBvaW50KSk7XG4gICAgfVxuICAgIHJlbmRlckxheWVyKG5hbWUpIHtcbiAgICAgICAgdGhpcy50aWxlcy5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh0aWxlLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXllc3JNYXBbbmFtZV0uaW5jbHVkZXModGlsZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBhc3NldHNIb2xkZXIuc3ByaXRlcy50aWxlc1t0aWxlXSh7IHg6IHggKiBUSUxFX1NJREUsIHk6IHkgKiBUSUxFX1NJREUgfSwgeyB4OiBUSUxFX1NJREUsIHk6IFRJTEVfU0lERSB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlTWFwLmpzLm1hcCIsImltcG9ydCB7IGFzc2V0c0hvbGRlciB9IGZyb20gJy4uL3V0aWxzJztcbmV4cG9ydCBjbGFzcyBTb3VuZE1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHRyYWNrTmFtZXMpIHtcbiAgICAgICAgdGhpcy5zZXR1cFRyYWNrcyh0cmFja05hbWVzKTtcbiAgICB9XG4gICAgc2V0dXBUcmFja3ModHJhY2tOYW1lcykge1xuICAgICAgICB0aGlzLnRyYWNrcyA9IHRyYWNrTmFtZXMucmVkdWNlKChhY2MsIHRyYWNrKSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRyYWNrID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGFjY1t0cmFja10gPSBuZXcgQXVkaW8oYXNzZXRzSG9sZGVyLmF1ZGlvW3RyYWNrXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHRyYWNrTmFtZSwgbG9vcCB9ID0gdHJhY2s7XG4gICAgICAgICAgICAgICAgYWNjW3RyYWNrTmFtZV0gPSBuZXcgQXVkaW8oYXNzZXRzSG9sZGVyLmF1ZGlvW3RyYWNrTmFtZV0pO1xuICAgICAgICAgICAgICAgIGFjY1t0cmFja05hbWVdLmxvb3AgPSBsb29wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30pO1xuICAgIH1cbiAgICBwbGF5KHRyYWNrTmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFja3NbdHJhY2tOYW1lXS5wbGF5KCk7XG4gICAgfVxuICAgIHBhdXNlKHRyYWNrTmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFja3NbdHJhY2tOYW1lXS5wYXVzZSgpO1xuICAgIH1cbiAgICBwYXVzZUFsbCgpIHtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLnRyYWNrcykuZm9yRWFjaCh0cmFjayA9PiB0cmFjay5wYXVzZSgpKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Tb3VuZE1hbmFnZXIuanMubWFwIiwiZXhwb3J0IGNsYXNzIFRpbWVNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50aW1lcnMgPSB7fTtcbiAgICB9XG4gICAgc2V0VGltZXIodGltZXJOYW1lLCBmcmFtZUxlbmd0aCkge1xuICAgICAgICB0aGlzLnRpbWVyc1t0aW1lck5hbWVdID0gZnJhbWVMZW5ndGg7XG4gICAgfVxuICAgIGdldFRpbWVyKHRpbWVyTmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lcnNbdGltZXJOYW1lXTtcbiAgICB9XG4gICAgc29tZSh0aW1lcnMpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHRoaXMudGltZXJzKS5zb21lKGVudHJ5ID0+IHRpbWVycy5pbmNsdWRlcyhlbnRyeVswXSkgJiYgZW50cnlbMV0gPj0gMCk7XG4gICAgfVxuICAgIGRlY3JlbWVudFRpbWVycygpIHtcbiAgICAgICAgY29uc3QgdG9SZW1vdmUgPSBPYmplY3QuZW50cmllcyh0aGlzLnRpbWVycykuZmlsdGVyKGVudHJ5ID0+IGVudHJ5WzFdID09PSAwKTtcbiAgICAgICAgaWYgKHRvUmVtb3ZlLmxlbmd0aCkge1xuICAgICAgICAgICAgdG9SZW1vdmUuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudGltZXJzW2VudHJ5WzBdXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMudGltZXJzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRpbWVyc1trZXldIC09IDE7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbWVNYW5hZ2VyLmpzLm1hcCIsImV4cG9ydCBjbGFzcyBFbnRpdHkge1xuICAgIGNvbnN0cnVjdG9yKHBvc2l0aW9uLCBzaXplKSB7XG4gICAgICAgIHRoaXMuaWQgPSBFbnRpdHkubnVtYmVyR2VuO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgICAgIEVudGl0eS5udW1iZXJHZW4gKz0gMTtcbiAgICB9XG4gICAgdXBkYXRlKCkgeyB9XG4gICAgcmVuZGVyKCkgeyB9XG4gICAgcmVzb2x2ZUVudGl0eUNvbGxpc2lvbihvdGhlcikgeyB9XG4gICAgZ2V0Qm91bmRpbmdCb3goKSB7XG4gICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcy5wb3NpdGlvbjtcbiAgICAgICAgY29uc3QgeyB4OiB3aWR0aCwgeTogaGVpZ2h0IH0gPSB0aGlzLnNpemU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4MTogeCxcbiAgICAgICAgICAgIHgyOiB4ICsgd2lkdGgsXG4gICAgICAgICAgICB5MTogeSxcbiAgICAgICAgICAgIHkyOiB5ICsgaGVpZ2h0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBkZWNvbnN0cnVjdCgpIHsgfVxufVxuRW50aXR5Lm51bWJlckdlbiA9IDA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FbnRpdHkuanMubWFwIiwiaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnLi9FbnRpdHknO1xuaW1wb3J0IHsgREVMVEFfVElNRSB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBEaXJlY3Rpb24gfSBmcm9tICcuLi90eXBlcyc7XG5leHBvcnQgY2xhc3MgTW92YWJsZSBleHRlbmRzIEVudGl0eSB7XG4gICAgY29uc3RydWN0b3IocG9zaXRpb24sIHNpemUsIGRpcmVjdGlvbikge1xuICAgICAgICBzdXBlcihwb3NpdGlvbiwgc2l6ZSk7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgICAgICB0aGlzLnByZXZQb3NpdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIHBvc2l0aW9uKTtcbiAgICB9XG4gICAgcmVzb2x2ZUVkZ2VDb2xsaXNpb24oKSB7IH1cbiAgICByZXNvbHZlVGlsZUNvbGxpc2lvbih0aWxlcywgdGlsZU1hcCkgeyB9XG4gICAgcmVzb2x2ZUVudGl0eUNvbGxpc2lvbihvdGhlcikgeyB9XG4gICAgbW92ZSh2ZWxvY2l0eSkge1xuICAgICAgICB0aGlzLnByZXZQb3NpdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMucG9zaXRpb24pO1xuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Ub3ApIHtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueSAtPSB2ZWxvY2l0eSAqIERFTFRBX1RJTUU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Cb3R0b20pIHtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueSArPSB2ZWxvY2l0eSAqIERFTFRBX1RJTUU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5MZWZ0KSB7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnggLT0gdmVsb2NpdHkgKiBERUxUQV9USU1FO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uUmlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueCArPSB2ZWxvY2l0eSAqIERFTFRBX1RJTUU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ29CYWNrKCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wcmV2UG9zaXRpb24pO1xuICAgIH1cbiAgICBhbmltYXRlTW92ZW1lbnQoc3ByaXRlcykge1xuICAgICAgICBsZXQgZGlzdGFuY2U7XG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkxlZnQgfHwgdGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5SaWdodCkge1xuICAgICAgICAgICAgZGlzdGFuY2UgPSB0aGlzLnBvc2l0aW9uLng7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkaXN0YW5jZSA9IHRoaXMucG9zaXRpb24ueTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRleCA9IE1hdGguZmxvb3IoZGlzdGFuY2UgLyAwLjMpICUgc3ByaXRlcy5sZW5ndGg7XG4gICAgICAgIHNwcml0ZXNbaW5kZXhdKHRoaXMucG9zaXRpb24sIHRoaXMuc2l6ZSk7XG4gICAgfVxuICAgIGlzT3V0T2ZTY3JlZW4oKSB7XG4gICAgICAgIGNvbnN0IGJveCA9IHRoaXMuZ2V0Qm91bmRpbmdCb3goKTtcbiAgICAgICAgcmV0dXJuIGJveC55MSA8IDAgfHwgYm94LnkyID4gNjAwIHx8IGJveC54MSA8IDAgfHwgYm94LngyID4gNjAwO1xuICAgIH1cbiAgICBnZXRGcm9udENvbGxpc2lvblBvaW50cygpIHtcbiAgICAgICAgY29uc3QgeyB4MSwgeDIsIHkxLCB5MiB9ID0gdGhpcy5nZXRCb3VuZGluZ0JveCgpO1xuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Ub3ApIHtcbiAgICAgICAgICAgIHJldHVybiBbeyB4OiB4MSwgeTogeTEgfSwgeyB4OiB4MiwgeTogeTEgfV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5SaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuIFt7IHg6IHgyLCB5OiB5MSB9LCB7IHg6IHgyLCB5OiB5MiB9XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkJvdHRvbSkge1xuICAgICAgICAgICAgcmV0dXJuIFt7IHg6IHgxLCB5OiB5MiB9LCB7IHg6IHgyLCB5OiB5MiB9XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkxlZnQpIHtcbiAgICAgICAgICAgIHJldHVybiBbeyB4OiB4MSwgeTogeTEgfSwgeyB4OiB4MSwgeTogeTIgfV07XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Nb3ZhYmxlLmpzLm1hcCIsImltcG9ydCB7IE1vdmFibGUgfSBmcm9tICcuL01vdmFibGUnO1xuaW1wb3J0IHsgQlVMTEVUX1NJWkUsIERFQVRIX0ZSQU1FUywgVElMRV9TSURFIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB7IGVudGl0eU1hbmFnZXIgfSBmcm9tICcuLi9tYW5hZ2Vycyc7XG5pbXBvcnQgeyBEaXJlY3Rpb24gfSBmcm9tICcuLi90eXBlcyc7XG5leHBvcnQgY2xhc3MgVGFuayBleHRlbmRzIE1vdmFibGUge1xuICAgIGNvbnN0cnVjdG9yKHBvc2l0aW9uLCBzaXplLCBkaXJlY3Rpb24pIHtcbiAgICAgICAgc3VwZXIocG9zaXRpb24sIHNpemUsIGRpcmVjdGlvbik7XG4gICAgfVxuICAgIHNob3QoY2QpIHtcbiAgICAgICAgY29uc3Qgc2hvdENEID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignc2hvdENEJyk7XG4gICAgICAgIGlmIChzaG90Q0QpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBidWxsZXRQb3NpdGlvbjtcbiAgICAgICAgY29uc3QgeyB4OiB3aWR0aCwgeTogaGVpZ2h0IH0gPSBCVUxMRVRfU0laRTtcbiAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uVG9wKSB7XG4gICAgICAgICAgICBidWxsZXRQb3NpdGlvbiA9IHsgeDogdGhpcy5zaXplLnggLyAyICsgdGhpcy5wb3NpdGlvbi54IC0gd2lkdGggLyAyLCB5OiB0aGlzLnBvc2l0aW9uLnkgLSBoZWlnaHQgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlJpZ2h0KSB7XG4gICAgICAgICAgICBidWxsZXRQb3NpdGlvbiA9IHsgeDogdGhpcy5zaXplLnggKyB0aGlzLnBvc2l0aW9uLngsIHk6IHRoaXMuc2l6ZS55IC8gMiArIHRoaXMucG9zaXRpb24ueSAtIGhlaWdodCAvIDIgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkJvdHRvbSkge1xuICAgICAgICAgICAgYnVsbGV0UG9zaXRpb24gPSB7IHg6IHRoaXMuc2l6ZS54IC8gMiArIHRoaXMucG9zaXRpb24ueCAtIHdpZHRoIC8gMiwgeTogdGhpcy5zaXplLnkgKyB0aGlzLnBvc2l0aW9uLnkgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJ1bGxldFBvc2l0aW9uID0geyB4OiB0aGlzLnBvc2l0aW9uLnggLSB3aWR0aCwgeTogdGhpcy5zaXplLnkgLyAyICsgdGhpcy5wb3NpdGlvbi55IC0gaGVpZ2h0IC8gMiB9O1xuICAgICAgICB9XG4gICAgICAgIGVudGl0eU1hbmFnZXIuc3Bhd25FbnRpdHkoJ0J1bGxldCcsIGJ1bGxldFBvc2l0aW9uLCB0aGlzLmRpcmVjdGlvbiwgdGhpcyk7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ3Nob3RDRCcsIGNkKTtcbiAgICB9XG4gICAgZGllKCkge1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdkZWF0aCcsIERFQVRIX0ZSQU1FUyk7XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXkoJ2V4cGxvZGUnKTtcbiAgICAgICAgZW50aXR5TWFuYWdlci50b1JlbW92ZSh0aGlzLmlkKTtcbiAgICB9XG4gICAgZm9yZ2l2ZUNvbGxpc2lvbih0aWxlKSB7XG4gICAgICAgIGNvbnN0IFtwb2ludDEsIHBvaW50Ml0gPSB0aGlzLmdldEZyb250Q29sbGlzaW9uUG9pbnRzKCk7XG4gICAgICAgIGNvbnN0IHRpbGVQb3MgPSB0aWxlLnBvc2l0aW9uO1xuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Ub3AgfHwgdGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Cb3R0b20pIHtcbiAgICAgICAgICAgIGNvbnN0IGRpZmZQb2ludCA9IE1hdGgubWluKE1hdGguYWJzKHRpbGVQb3MueCAtIHBvaW50MS54KSwgTWF0aC5hYnModGlsZVBvcy54IC0gcG9pbnQyLngpKTtcbiAgICAgICAgICAgIGlmIChkaWZmUG9pbnQgPiAwICYmIGRpZmZQb2ludCA8IDUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXN0aW5hdGlvbiA9IHRoaXMucG9zaXRpb24ueCA+IHRpbGVQb3MueCA/IHRpbGVQb3MueCArIFRJTEVfU0lERSA6IHRpbGVQb3MueCAtIHRoaXMuc2l6ZS54O1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHg6IGRlc3RpbmF0aW9uLCB5OiB0aGlzLnByZXZQb3NpdGlvbi55IH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5MZWZ0IHx8IHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uUmlnaHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpZmZQb2ludCA9IE1hdGgubWluKE1hdGguYWJzKHRpbGVQb3MueSAtIHBvaW50MS55KSwgTWF0aC5hYnModGlsZVBvcy55IC0gcG9pbnQyLnkpKTtcbiAgICAgICAgICAgIGlmIChkaWZmUG9pbnQgPiAwICYmIGRpZmZQb2ludCA8IDUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXN0aW5hdGlvbiA9IHRoaXMucG9zaXRpb24ueSA+IHRpbGVQb3MueSA/IHRpbGVQb3MueSArIFRJTEVfU0lERSA6IHRpbGVQb3MueSAtIHRoaXMuc2l6ZS55O1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHg6IHRoaXMucHJldlBvc2l0aW9uLngsIHk6IGRlc3RpbmF0aW9uIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRhbmsuanMubWFwIiwiaW1wb3J0IHsgUGxheWVyLCBFbmVteSwgUG93ZXJ1cCwgRmxhZywgVGFuaywgQnVsbGV0IH0gZnJvbSAnLi8nO1xuZXhwb3J0IGZ1bmN0aW9uIGlzVGFuayhlbnRpdHkpIHtcbiAgICByZXR1cm4gZW50aXR5IGluc3RhbmNlb2YgVGFuaztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1BsYXllcihlbnRpdHkpIHtcbiAgICByZXR1cm4gZW50aXR5IGluc3RhbmNlb2YgUGxheWVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzRW5lbXkoZW50aXR5KSB7XG4gICAgcmV0dXJuIGVudGl0eSBpbnN0YW5jZW9mIEVuZW15O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQnVsbGV0KGVudGl0eSkge1xuICAgIHJldHVybiBlbnRpdHkgaW5zdGFuY2VvZiBCdWxsZXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNGbGFnKGVudGl0eSkge1xuICAgIHJldHVybiBlbnRpdHkgaW5zdGFuY2VvZiBGbGFnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzUG93ZXJ1cChlbnRpdHkpIHtcbiAgICByZXR1cm4gZW50aXR5IGluc3RhbmNlb2YgUG93ZXJ1cDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWd1YXJkcy5qcy5tYXAiLCJpbXBvcnQgeyBFbnRpdHkgfSBmcm9tICcuL0VudGl0eSc7XG5pbXBvcnQgeyBQT1dFUlVQX1NJWkUsIFBPV0VSVVBfU1BBV05fQ0QsIFBPV0VSVVBfQkxJTktfRlJBTUVTIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB7IFNvdW5kTWFuYWdlciwgZW50aXR5TWFuYWdlciwgVGltZU1hbmFnZXIgfSBmcm9tICcuLi9tYW5hZ2Vycyc7XG5pbXBvcnQgeyBhc3NldHNIb2xkZXIgfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgeyBpc1BsYXllciB9IGZyb20gJy4vZ3VhcmRzJztcbmV4cG9ydCBjbGFzcyBQb3dlcnVwRXZlbnRzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSB7fTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKGVudGl0eUlkLCBvYnNlcnZlcikge1xuICAgICAgICB0aGlzLm9ic2VydmVyc1tlbnRpdHlJZF0gPSBvYnNlcnZlcjtcbiAgICB9XG4gICAgdW5zdWJzY3JpYmUoZW50aXR5SWQpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMub2JzZXJ2ZXJzW2VudGl0eUlkXTtcbiAgICB9XG4gICAgbm90aWZ5KGV2ZW50VHlwZSkge1xuICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMub2JzZXJ2ZXJzKS5mb3JFYWNoKChvYnNlcnZlcikgPT4gb2JzZXJ2ZXIoZXZlbnRUeXBlKSk7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IHBvd2VydXBFdmVudHMgPSBuZXcgUG93ZXJ1cEV2ZW50cygpO1xuZXhwb3J0IGNsYXNzIFBvd2VydXAgZXh0ZW5kcyBFbnRpdHkge1xuICAgIGNvbnN0cnVjdG9yKHR5cGUsIHBvc2l0aW9uKSB7XG4gICAgICAgIHN1cGVyKHBvc2l0aW9uLCBPYmplY3QuYXNzaWduKHt9LCBQT1dFUlVQX1NJWkUpKTtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlciA9IG5ldyBUaW1lTWFuYWdlcigpO1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlciA9IG5ldyBTb3VuZE1hbmFnZXIoWydwb3dlcnVwJ10pO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdsaXZlJywgUE9XRVJVUF9TUEFXTl9DRCk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgY29uc3QgbGl2ZXNMZWZ0ID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignbGl2ZScpO1xuICAgICAgICBpZiAobGl2ZXNMZWZ0ID09PSAwKSB7XG4gICAgICAgICAgICBlbnRpdHlNYW5hZ2VyLnRvUmVtb3ZlKHRoaXMuaWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxpdmVzTGVmdCA9PT0gUE9XRVJVUF9CTElOS19GUkFNRVMpIHtcbiAgICAgICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ2JsaW5rJywgUE9XRVJVUF9CTElOS19GUkFNRVMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuZGVjcmVtZW50VGltZXJzKCk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgYmxpbmtMZWZ0ID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignYmxpbmsnKTtcbiAgICAgICAgaWYgKGJsaW5rTGVmdCAmJiBibGlua0xlZnQgJSA1MCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgYXNzZXRzSG9sZGVyLnNwcml0ZXMucG93ZXJ1cFt0aGlzLnR5cGVdKHRoaXMucG9zaXRpb24sIHRoaXMuc2l6ZSk7XG4gICAgfVxuICAgIHJlc29sdmVFbnRpdHlDb2xsaXNpb24ob3RoZXIpIHtcbiAgICAgICAgaWYgKGlzUGxheWVyKG90aGVyKSkge1xuICAgICAgICAgICAgZW50aXR5TWFuYWdlci50b1JlbW92ZSh0aGlzLmlkKTtcbiAgICAgICAgICAgIHBvd2VydXBFdmVudHMubm90aWZ5KHRoaXMudHlwZSk7XG4gICAgICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5KCdwb3dlcnVwJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb3dlcnVwLmpzLm1hcCIsImltcG9ydCB7IFRhbmsgfSBmcm9tICcuL1RhbmsnO1xuaW1wb3J0IHsgYXNzZXRzSG9sZGVyLCBhbmltYXRlVmFyaWFibGVTcHJpdGVzIH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHsgRGlyZWN0aW9uLCBQb3dlcnVwVHlwZXMsIFBsYXllclBvd2VyLCBDb250cm9sS2V5cyB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IFBMQVlFUl9TUEFXTl9QT1NJVElPTiwgVEFOS19TSVpFLCBQTEFZRVJfU1RBVFMsIFNQQVdOX0ZSQU1FUywgREVBVEhfRlJBTUVTLCBJTlZJTkNJQkxFX0ZSQU1FUywgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgcG93ZXJ1cEV2ZW50cyB9IGZyb20gJy4vUG93ZXJ1cCc7XG5pbXBvcnQgeyBrZXlib2FyZCB9IGZyb20gJy4uL2tleWJvYXJkJztcbmltcG9ydCB7IFNvdW5kTWFuYWdlciwgVGltZU1hbmFnZXIgfSBmcm9tICcuLi9tYW5hZ2Vycyc7XG5pbXBvcnQgeyBpc1Bvd2VydXAsIGlzQnVsbGV0IH0gZnJvbSAnLi9ndWFyZHMnO1xuZnVuY3Rpb24gcG93ZXJ1cE9ic2VydmVyKHBvd2VydXBUeXBlKSB7XG4gICAgaWYgKHBvd2VydXBUeXBlID09PSBQb3dlcnVwVHlwZXMuVGFuaykge1xuICAgICAgICB0aGlzLmxpdmVzICs9IDE7XG4gICAgfVxuICAgIGVsc2UgaWYgKHBvd2VydXBUeXBlID09PSBQb3dlcnVwVHlwZXMuSGVsbWV0KSB7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ2ludmluY2libGUnLCBJTlZJTkNJQkxFX0ZSQU1FUyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHBvd2VydXBUeXBlID09PSBQb3dlcnVwVHlwZXMuU3RhciAmJiB0aGlzLnBvd2VyIDwgUGxheWVyUG93ZXIuU2Vjb25kKSB7XG4gICAgICAgIHRoaXMucG93ZXIgKz0gMTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUGxheWVyIGV4dGVuZHMgVGFuayB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKE9iamVjdC5hc3NpZ24oe30sIFBMQVlFUl9TUEFXTl9QT1NJVElPTiksIE9iamVjdC5hc3NpZ24oe30sIFRBTktfU0laRSksIERpcmVjdGlvbi5Ub3ApO1xuICAgICAgICB0aGlzLmxpdmVzID0gMztcbiAgICAgICAgdGhpcy5wb3dlciA9IFBsYXllclBvd2VyLkRlZmF1bHQ7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIgPSBuZXcgVGltZU1hbmFnZXIoKTtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIgPSBuZXcgU291bmRNYW5hZ2VyKFtcbiAgICAgICAgICAgICdleHBsb2RlJyxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0cmFja05hbWU6ICduZXV0cmFsJyxcbiAgICAgICAgICAgICAgICBsb29wOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0cmFja05hbWU6ICdtb3ZlJyxcbiAgICAgICAgICAgICAgICBsb29wOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSk7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ3NwYXduJywgU1BBV05fRlJBTUVTKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignaW52aW5jaWJsZScsIElOVklOQ0lCTEVfRlJBTUVTKTtcbiAgICAgICAgcG93ZXJ1cEV2ZW50cy5zdWJzY3JpYmUodGhpcy5pZCwgcG93ZXJ1cE9ic2VydmVyLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuZGVjcmVtZW50VGltZXJzKCk7XG4gICAgICAgIGNvbnN0IGRlYXRoID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignZGVhdGgnKTtcbiAgICAgICAgY29uc3Qgc3Bhd24gPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdzcGF3bicpO1xuICAgICAgICBpZiAoZGVhdGgpIHtcbiAgICAgICAgICAgIGlmIChkZWF0aCA9PT0gMSlcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3Bhd24odHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3Bhd24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5KCduZXV0cmFsJyk7XG4gICAgICAgIHRoaXMucHJvY2Vzc0lucHV0KCk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qgc3Bhd24gPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdzcGF3bicpO1xuICAgICAgICBjb25zdCBkZWF0aCA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ2RlYXRoJyk7XG4gICAgICAgIGNvbnN0IGludmluY2libGUgPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdpbnZpbmNpYmxlJyk7XG4gICAgICAgIGlmIChzcGF3bikge1xuICAgICAgICAgICAgcmV0dXJuIGFuaW1hdGVWYXJpYWJsZVNwcml0ZXModGhpcy5wb3NpdGlvbiwgYXNzZXRzSG9sZGVyLnZhcmlhYmxlU3ByaXRlcy50YW5rU3Bhd24sIFNQQVdOX0ZSQU1FUywgc3Bhd24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlYXRoKSB7XG4gICAgICAgICAgICByZXR1cm4gYW5pbWF0ZVZhcmlhYmxlU3ByaXRlcyh0aGlzLnBvc2l0aW9uLCBhc3NldHNIb2xkZXIudmFyaWFibGVTcHJpdGVzLnRhbmtEZXN0cnVjdGlvbiwgREVBVEhfRlJBTUVTLCBkZWF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW52aW5jaWJsZSkge1xuICAgICAgICAgICAgY29uc3QgaW52aW5jaWJsZVNwcml0ZXMgPSBhc3NldHNIb2xkZXIuc3ByaXRlcy5pbnZpbmNpYmxlO1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBpbnZpbmNpYmxlICUgaW52aW5jaWJsZVNwcml0ZXMubGVuZ3RoO1xuICAgICAgICAgICAgaW52aW5jaWJsZVNwcml0ZXNbaW5kZXhdKHRoaXMucG9zaXRpb24sIHRoaXMuc2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hbmltYXRlTW92ZW1lbnQoYXNzZXRzSG9sZGVyLnNwcml0ZXMucGxheWVyW3RoaXMucG93ZXJdW3RoaXMuZGlyZWN0aW9uXSk7XG4gICAgfVxuICAgIHByb2Nlc3NJbnB1dCgpIHtcbiAgICAgICAgY29uc3Qga2V5ID0ga2V5Ym9hcmQuZ2V0S2V5KCk7XG4gICAgICAgIGxldCBpc01vdmluZyA9IHRydWU7XG4gICAgICAgIGlmIChrZXkgPT09IENvbnRyb2xLZXlzLkFycm93VXApIHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gRGlyZWN0aW9uLlRvcDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09IENvbnRyb2xLZXlzLkFycm93RG93bikge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBEaXJlY3Rpb24uQm90dG9tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gQ29udHJvbEtleXMuQXJyb3dMZWZ0KSB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IERpcmVjdGlvbi5MZWZ0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gQ29udHJvbEtleXMuQXJyb3dSaWdodCkge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBEaXJlY3Rpb24uUmlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wYXVzZSgnbW92ZScpO1xuICAgICAgICAgICAgaXNNb3ZpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5ID09PSBDb250cm9sS2V5cy5TcGFjZSkge1xuICAgICAgICAgICAgdGhpcy5zaG90KFBMQVlFUl9TVEFUU1t0aGlzLnBvd2VyXS5zaG90Q0QpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc01vdmluZykge1xuICAgICAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGF1c2UoJ25ldXRyYWwnKTtcbiAgICAgICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXkoJ21vdmUnKTtcbiAgICAgICAgICAgIHRoaXMubW92ZShQTEFZRVJfU1RBVFNbdGhpcy5wb3dlcl0udmVsb2NpdHkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc29sdmVFZGdlQ29sbGlzaW9uKCkge1xuICAgICAgICB0aGlzLmdvQmFjaygpO1xuICAgIH1cbiAgICByZXNvbHZlVGlsZUNvbGxpc2lvbih0aWxlcykge1xuICAgICAgICBpZiAodGlsZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdQb3MgPSB0aGlzLmZvcmdpdmVDb2xsaXNpb24odGlsZXNbMF0pO1xuICAgICAgICAgICAgaWYgKG5ld1BvcylcbiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgbmV3UG9zKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLmdvQmFjaygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5nb0JhY2soKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXNvbHZlRW50aXR5Q29sbGlzaW9uKG90aGVyKSB7XG4gICAgICAgIGNvbnN0IGRlYXRoID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignZGVhdGgnKTtcbiAgICAgICAgaWYgKGlzUG93ZXJ1cChvdGhlcikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0J1bGxldChvdGhlcikgJiYgIWRlYXRoKSB7XG4gICAgICAgICAgICBjb25zdCBpbnZpbmNpYmxlID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignaW52aW5jaWJsZScpO1xuICAgICAgICAgICAgaWYgKGludmluY2libGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignZGVhdGgnLCBERUFUSF9GUkFNRVMpO1xuICAgICAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheSgnZXhwbG9kZScpO1xuICAgICAgICAgICAgdGhpcy5saXZlcyAtPSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMubGl2ZXMgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5nb0JhY2soKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXNwYXduKGRlZmF1bHRQb3dlciA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChkZWZhdWx0UG93ZXIpXG4gICAgICAgICAgICB0aGlzLnBvd2VyID0gUGxheWVyUG93ZXIuRGVmYXVsdDtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGF1c2VBbGwoKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignc3Bhd24nLCBTUEFXTl9GUkFNRVMpO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdpbnZpbmNpYmxlJywgSU5WSU5DSUJMRV9GUkFNRVMpO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgUExBWUVSX1NQQVdOX1BPU0lUSU9OKTtcbiAgICAgICAgdGhpcy5wcmV2UG9zaXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBQTEFZRVJfU1BBV05fUE9TSVRJT04pO1xuICAgIH1cbiAgICBkZWNvbnN0cnVjdCgpIHtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGF1c2VBbGwoKTtcbiAgICAgICAgcG93ZXJ1cEV2ZW50cy51bnN1YnNjcmliZSh0aGlzLmlkKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1QbGF5ZXIuanMubWFwIiwiaW1wb3J0IHsgTW92YWJsZSB9IGZyb20gJy4vTW92YWJsZSc7XG5pbXBvcnQgeyBUaWxlcywgUGxheWVyUG93ZXIgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBCVUxMRVRfVkVMT0NJVFksIEJVTExFVF9TSVpFIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB7IFNvdW5kTWFuYWdlciwgZW50aXR5TWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzLyc7XG5pbXBvcnQgeyBidWxsZXRUaHJvdWdoIH0gZnJvbSAnLi4vVGlsZU1hcCc7XG5pbXBvcnQgeyBpc1BsYXllciwgaXNFbmVteSwgaXNQb3dlcnVwIH0gZnJvbSAnLi9ndWFyZHMnO1xuaW1wb3J0IHsgYXNzZXRzSG9sZGVyIH0gZnJvbSAnLi4vdXRpbHMnO1xuZXhwb3J0IGNsYXNzIEJ1bGxldCBleHRlbmRzIE1vdmFibGUge1xuICAgIGNvbnN0cnVjdG9yKHBvc2l0aW9uLCBkaXJlY3Rpb24sIHNob290ZXIpIHtcbiAgICAgICAgc3VwZXIocG9zaXRpb24sIE9iamVjdC5hc3NpZ24oe30sIEJVTExFVF9TSVpFKSwgZGlyZWN0aW9uKTtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgICAgIHRoaXMuc2hvb3RlciA9IHNob290ZXI7XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyID0gbmV3IFNvdW5kTWFuYWdlcihbJ2hpdCcsICdoaXRkbWcnXSk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5tb3ZlKEJVTExFVF9WRUxPQ0lUWSk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5hbmltYXRlTW92ZW1lbnQoYXNzZXRzSG9sZGVyLnNwcml0ZXMuYnVsbGV0W3RoaXMuZGlyZWN0aW9uXSk7XG4gICAgfVxuICAgIHJlc29sdmVFZGdlQ29sbGlzaW9uKCkge1xuICAgICAgICBlbnRpdHlNYW5hZ2VyLnRvUmVtb3ZlKHRoaXMuaWQpO1xuICAgIH1cbiAgICByZXNvbHZlVGlsZUNvbGxpc2lvbih0aWxlcywgdGlsZU1hcCkge1xuICAgICAgICBpZiAodGlsZXMuZXZlcnkodGlsZSA9PiBidWxsZXRUaHJvdWdoLmluY2x1ZGVzKHRpbGUudHlwZSkpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBlbnRpdHlNYW5hZ2VyLnRvUmVtb3ZlKHRoaXMuaWQpO1xuICAgICAgICBjb25zdCBjYW5EZXN0cm95U3RlZWwgPSBpc1BsYXllcih0aGlzLnNob290ZXIpICYmIHRoaXMuc2hvb3Rlci5wb3dlciA9PT0gUGxheWVyUG93ZXIuU2Vjb25kO1xuICAgICAgICBjb25zdCBoYXNTdGVlbCA9IHRpbGVzLnNvbWUodGlsZSA9PiB0aWxlLnR5cGUgPT09IFRpbGVzLlN0ZWVsKTtcbiAgICAgICAgaWYgKGhhc1N0ZWVsKSB7XG4gICAgICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5KCdoaXQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXkoJ2hpdGRtZycpO1xuICAgICAgICB9XG4gICAgICAgIHRpbGVzLmZvckVhY2godGlsZSA9PiB7XG4gICAgICAgICAgICBpZiAoYnVsbGV0VGhyb3VnaC5pbmNsdWRlcyh0aWxlLnR5cGUpIHx8ICh0aWxlLnR5cGUgPT09IFRpbGVzLlN0ZWVsICYmICFjYW5EZXN0cm95U3RlZWwpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRpbGVNYXAuZGVzdHJveSh0aWxlLnBvc2l0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlc29sdmVFbnRpdHlDb2xsaXNpb24ob3RoZXIpIHtcbiAgICAgICAgaWYgKGlzUG93ZXJ1cChvdGhlcikpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChpc1BsYXllcih0aGlzLnNob290ZXIpICYmIGlzRW5lbXkob3RoZXIpICYmIG90aGVyLnR5cGUgPj0gMSkge1xuICAgICAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheSgnaGl0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZW50aXR5TWFuYWdlci50b1JlbW92ZSh0aGlzLmlkKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1CdWxsZXQuanMubWFwIiwiaW1wb3J0IHsgVGFuayB9IGZyb20gJy4vVGFuayc7XG5pbXBvcnQgeyBhc3NldHNIb2xkZXIsIGFuaW1hdGVWYXJpYWJsZVNwcml0ZXMsIGNoZWNrRW50aXR5Q29sbGlzaW9uIH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHsgRGlyZWN0aW9uLCBQb3dlcnVwVHlwZXMsIFRhbmtUeXBlcyB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IFRBTktfU0laRSwgU1BBV05fRlJBTUVTLCBERUFUSF9GUkFNRVMsIEZSRUVaRV9GUkFNRVMsIEVORU1ZX1NUQVRTIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB7IFNvdW5kTWFuYWdlciwgVGltZU1hbmFnZXIsIGVudGl0eU1hbmFnZXIgfSBmcm9tICcuLi9tYW5hZ2Vycyc7XG5pbXBvcnQgeyBwb3dlcnVwRXZlbnRzIH0gZnJvbSAnLi9Qb3dlcnVwJztcbmltcG9ydCB7IGlzUGxheWVyLCBpc0VuZW15LCBpc0J1bGxldCwgaXNQb3dlcnVwIH0gZnJvbSAnLi9ndWFyZHMnO1xuZnVuY3Rpb24gcG93ZXJ1cE9ic2VydmVyKHBvd2VydXBUeXBlKSB7XG4gICAgaWYgKHBvd2VydXBUeXBlID09PSBQb3dlcnVwVHlwZXMuU3RvcHdhdGNoKSB7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ2ZyZWV6ZScsIEZSRUVaRV9GUkFNRVMpO1xuICAgIH1cbiAgICBlbHNlIGlmIChwb3dlcnVwVHlwZSA9PT0gUG93ZXJ1cFR5cGVzLkdyZW5hZGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRpbWVNYW5hZ2VyLnNvbWUoWydkZWF0aCcsICdzcGF3biddKSlcbiAgICAgICAgICAgIHRoaXMuZGllKCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEVuZW15IGV4dGVuZHMgVGFuayB7XG4gICAgY29uc3RydWN0b3IodHlwZSwgcG9zaXRpb24pIHtcbiAgICAgICAgc3VwZXIocG9zaXRpb24sIE9iamVjdC5hc3NpZ24oe30sIFRBTktfU0laRSksIERpcmVjdGlvbi5Cb3R0b20pO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLmxpdmVzID0gRU5FTVlfU1RBVFNbdHlwZV0ubGl2ZXM7XG4gICAgICAgIHRoaXMucHJldlRpbGUgPSBPYmplY3QuYXNzaWduKHt9LCBwb3NpdGlvbik7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIgPSBuZXcgVGltZU1hbmFnZXIoKTtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIgPSBuZXcgU291bmRNYW5hZ2VyKFsnZXhwbG9kZSddKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignc3Bhd24nLCBTUEFXTl9GUkFNRVMpO1xuICAgICAgICBwb3dlcnVwRXZlbnRzLnN1YnNjcmliZSh0aGlzLmlkLCBwb3dlcnVwT2JzZXJ2ZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgY29uc3Qgc3Bhd24gPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdzcGF3bicpO1xuICAgICAgICBjb25zdCBkZWF0aCA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ2RlYXRoJyk7XG4gICAgICAgIGNvbnN0IGZyZWV6ZSA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ2ZyZWV6ZScpO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLmRlY3JlbWVudFRpbWVycygpO1xuICAgICAgICBpZiAoc3Bhd24pIHtcbiAgICAgICAgICAgIGNvbnN0IGlzSW50ZXJzZWN0aW5nID0gdGhpcy5pc1NwYXduU3BvdENsZWFyKCk7XG4gICAgICAgICAgICBpZiAoaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdzcGF3bicsIFNQQVdOX0ZSQU1FUyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlYXRoIHx8IGZyZWV6ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5haU1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMuc2hvdChFTkVNWV9TVEFUU1t0aGlzLnR5cGVdLnNob3RDRCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBzcGF3biA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ3NwYXduJyk7XG4gICAgICAgIGNvbnN0IGRlYXRoID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignZGVhdGgnKTtcbiAgICAgICAgaWYgKHNwYXduKSB7XG4gICAgICAgICAgICByZXR1cm4gYW5pbWF0ZVZhcmlhYmxlU3ByaXRlcyh0aGlzLnBvc2l0aW9uLCBhc3NldHNIb2xkZXIudmFyaWFibGVTcHJpdGVzLnRhbmtTcGF3biwgU1BBV05fRlJBTUVTLCBzcGF3bik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVhdGgpIHtcbiAgICAgICAgICAgIHJldHVybiBhbmltYXRlVmFyaWFibGVTcHJpdGVzKHRoaXMucG9zaXRpb24sIGFzc2V0c0hvbGRlci52YXJpYWJsZVNwcml0ZXMudGFua0Rlc3RydWN0aW9uLCBERUFUSF9GUkFNRVMsIGRlYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50eXBlID09PSBUYW5rVHlwZXMuQXJtb3JlZCkge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRlTW92ZW1lbnQoYXNzZXRzSG9sZGVyLnNwcml0ZXMuZW5lbXlbdGhpcy50eXBlXVt0aGlzLmxpdmVzXVt0aGlzLmRpcmVjdGlvbl0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRlTW92ZW1lbnQoYXNzZXRzSG9sZGVyLnNwcml0ZXMuZW5lbXlbdGhpcy50eXBlXVt0aGlzLmRpcmVjdGlvbl0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFpTW92ZSgpIHtcbiAgICAgICAgY29uc3QgeyB2ZWxvY2l0eSB9ID0gRU5FTVlfU1RBVFNbdGhpcy50eXBlXTtcbiAgICAgICAgaWYgKE1hdGguYWJzKE1hdGguZmxvb3IodGhpcy5wcmV2VGlsZS54IC0gdGhpcy5wb3NpdGlvbi54KSkgPiAxMjAgfHxcbiAgICAgICAgICAgIE1hdGguYWJzKE1hdGguZmxvb3IodGhpcy5wcmV2VGlsZS55IC0gdGhpcy5wb3NpdGlvbi55KSkgPiAxMjApIHtcbiAgICAgICAgICAgIHRoaXMucHJldlRpbGUgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnBvc2l0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuc2V0UmFuZG9tRGlyZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLm1vdmUodmVsb2NpdHkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5tb3ZlKHZlbG9jaXR5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXNvbHZlRWRnZUNvbGxpc2lvbigpIHtcbiAgICAgICAgdGhpcy5nb0JhY2soKTtcbiAgICAgICAgdGhpcy5zZXRSYW5kb21EaXJlY3Rpb24oKTtcbiAgICAgICAgLy8gdGhpcy5zZXRPcG9zaXRlRGlyZWN0aW9uKCk7XG4gICAgfVxuICAgIHJlc29sdmVUaWxlQ29sbGlzaW9uKHRpbGVzKSB7XG4gICAgICAgIGlmICh0aWxlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1BvcyA9IHRoaXMuZm9yZ2l2ZUNvbGxpc2lvbih0aWxlc1swXSk7XG4gICAgICAgICAgICBpZiAobmV3UG9zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIG5ld1Bvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJhbmRvbURpcmVjdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ29CYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldFJhbmRvbURpcmVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5nb0JhY2soKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXNvbHZlRW50aXR5Q29sbGlzaW9uKG90aGVyKSB7XG4gICAgICAgIGlmIChpc1Bvd2VydXAob3RoZXIpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNCdWxsZXQob3RoZXIpICYmIGlzUGxheWVyKG90aGVyLnNob290ZXIpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5saXZlcyA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGllKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpdmVzIC09IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNFbmVteShvdGhlcikpIHtcbiAgICAgICAgICAgIHRoaXMuZ29CYWNrKCk7XG4gICAgICAgICAgICB0aGlzLnNldE9wb3NpdGVEaXJlY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1BsYXllcihvdGhlcikpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdzaG90Q0QnKSA+IDEwKVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0T3Bvc2l0ZURpcmVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5nb0JhY2soKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRSYW5kb21EaXJlY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gW0RpcmVjdGlvbi5Ub3AsIERpcmVjdGlvbi5SaWdodCwgRGlyZWN0aW9uLkJvdHRvbSwgRGlyZWN0aW9uLkxlZnRdLmZpbHRlcihkaXJlY3Rpb24gPT4gZGlyZWN0aW9uICE9PSB0aGlzLmRpcmVjdGlvbik7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogaXRlbXMubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBpdGVtc1tpbmRleF07XG4gICAgfVxuICAgIHNldE9wb3NpdGVEaXJlY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlRvcCkge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBEaXJlY3Rpb24uQm90dG9tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uQm90dG9tKSB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IERpcmVjdGlvbi5Ub3A7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5SaWdodCkge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBEaXJlY3Rpb24uTGVmdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gRGlyZWN0aW9uLlJpZ2h0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzU3Bhd25TcG90Q2xlYXIoKSB7XG4gICAgICAgIHJldHVybiBlbnRpdHlNYW5hZ2VyLmVudGl0aWVzXG4gICAgICAgICAgICAuZmlsdGVyKGVudGl0eSA9PiBlbnRpdHkuaWQgIT09IHRoaXMuaWQgJiYgIWlzQnVsbGV0KGVudGl0eSkpXG4gICAgICAgICAgICAuZmlsdGVyKGVudGl0eSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNFbmVteShlbnRpdHkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFlbnRpdHkudGltZU1hbmFnZXIuZ2V0VGltZXIoJ3NwYXduJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5zb21lKGVudGl0eSA9PiBjaGVja0VudGl0eUNvbGxpc2lvbihlbnRpdHkuZ2V0Qm91bmRpbmdCb3goKSwgdGhpcy5nZXRCb3VuZGluZ0JveCgpKSk7XG4gICAgfVxuICAgIGRlY29uc3RydWN0KCkge1xuICAgICAgICBwb3dlcnVwRXZlbnRzLnVuc3Vic2NyaWJlKHRoaXMuaWQpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVuZW15LmpzLm1hcCIsImltcG9ydCB7IEVudGl0eSB9IGZyb20gJy4vRW50aXR5JztcbmltcG9ydCB7IGFzc2V0c0hvbGRlciB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7IEZMQUdfU0laRSwgRkxBR19QT1NJVElPTiB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBpc0J1bGxldCB9IGZyb20gJy4vZ3VhcmRzJztcbmV4cG9ydCBjbGFzcyBGbGFnIGV4dGVuZHMgRW50aXR5IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoRkxBR19QT1NJVElPTiwgRkxBR19TSVpFKTtcbiAgICAgICAgdGhpcy5pc0Rlc3Ryb3llZCA9IGZhbHNlO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICBhc3NldHNIb2xkZXIuc3ByaXRlcy5mbGFnRGVhdGgodGhpcy5wb3NpdGlvbiwgdGhpcy5zaXplKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2V0c0hvbGRlci5zcHJpdGVzLmZsYWcodGhpcy5wb3NpdGlvbiwgdGhpcy5zaXplKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXNvbHZlRW50aXR5Q29sbGlzaW9uKG90aGVyKSB7XG4gICAgICAgIGlmIChpc0J1bGxldChvdGhlcikpIHtcbiAgICAgICAgICAgIHRoaXMuaXNEZXN0cm95ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RmxhZy5qcy5tYXAiLCJpbXBvcnQgKiBhcyBlbnRpdGllcyBmcm9tICcuLi9lbnRpdGllcyc7XG5pbXBvcnQgeyBjaGVja0VudGl0eUNvbGxpc2lvbiB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7IHJpZ2lkIH0gZnJvbSAnLi4vVGlsZU1hcCc7XG5pbXBvcnQgeyBpc1BsYXllciwgaXNFbmVteSwgaXNUYW5rLCBpc0ZsYWcsIGlzUG93ZXJ1cCB9IGZyb20gJy4uL2VudGl0aWVzL2d1YXJkcyc7XG5pbXBvcnQgeyBUSUxFX1NJREUgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuZXhwb3J0IGNsYXNzIEVudGl0eU1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnRvUmVtb3ZlID0gKGlkKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRvUmVtb3ZlUXVldWUuYWRkKGlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZW1vdmVGcm9tUXVldWUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRvUmVtb3ZlUXVldWUuZm9yRWFjaChlbnRpdHlJZCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZW50aXR5ID0gdGhpcy5wb29sW2VudGl0eUlkXTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWF0aExlZnQgPSB0aGlzLl9jaGVja0RlYXRoKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgaWYgKCFkZWF0aExlZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucG9vbFtlbnRpdHlJZF07XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5kZWNvbnN0cnVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvUmVtb3ZlUXVldWUuZGVsZXRlKGVudGl0eUlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wb29sID0ge307XG4gICAgICAgIHRoaXMudG9SZW1vdmVRdWV1ZSA9IG5ldyBTZXQoKTtcbiAgICB9XG4gICAgc3Bhd25FbnRpdHkodHlwZSwgLi4uYXJncykge1xuICAgICAgICBjb25zdCBlbnRpdHkgPSBuZXcgZW50aXRpZXNbdHlwZV0oLi4uYXJncyk7XG4gICAgICAgIHRoaXMucG9vbFtlbnRpdHkuaWRdID0gZW50aXR5O1xuICAgIH1cbiAgICBnZXRFbmVtaWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbnRpdGllcy5maWx0ZXIoaXNFbmVteSk7XG4gICAgfVxuICAgIGdldFBsYXllcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW50aXRpZXMuZmluZChpc1BsYXllcik7XG4gICAgfVxuICAgIGdldEZsYWcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVudGl0aWVzLmZpbmQoaXNGbGFnKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICB0aGlzLmVudGl0aWVzLmZvckVhY2goZW50aXR5ID0+IGVudGl0eS5yZW5kZXIoKSk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5lbnRpdGllcy5mb3JFYWNoKGVudGl0eSA9PiBlbnRpdHkudXBkYXRlKCkpO1xuICAgIH1cbiAgICBjaGVja0NvbGxpc2lvbnModGlsZU1hcCkge1xuICAgICAgICBjb25zdCBzZWVuID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLmVudGl0aWVzLmZvckVhY2goZW50aXR5ID0+IHtcbiAgICAgICAgICAgIGlmIChpc1Bvd2VydXAoZW50aXR5KSB8fCBpc0ZsYWcoZW50aXR5KSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmNoZWNrVGlsZUNvbGxpc2lvbihlbnRpdHksIHRpbGVNYXApO1xuICAgICAgICAgICAgdGhpcy5jaGVja0VudGl0aWVzQ29sbGlzaW9uKGVudGl0eSwgc2Vlbik7XG4gICAgICAgICAgICBzZWVuLmFkZChlbnRpdHkuaWQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2hlY2tUaWxlQ29sbGlzaW9uKGVudGl0eSwgdGlsZU1hcCkge1xuICAgICAgICBpZiAoZW50aXR5LmlzT3V0T2ZTY3JlZW4oKSkge1xuICAgICAgICAgICAgZW50aXR5LnJlc29sdmVFZGdlQ29sbGlzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBbZmlyc3QsIHNlY29uZF0gPSBlbnRpdHkuZ2V0RnJvbnRDb2xsaXNpb25Qb2ludHMoKTtcbiAgICAgICAgICAgIGNvbnN0IHRpbGVzID0gdGlsZU1hcC5sb29rdXBSYW5nZShmaXJzdCwgc2Vjb25kKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbGxpZGFibGUgPSB0aWxlc1xuICAgICAgICAgICAgICAgIC5maWx0ZXIodGlsZSA9PiByaWdpZC5pbmNsdWRlcyh0aWxlLnR5cGUpKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIodGlsZSA9PiBjaGVja0VudGl0eUNvbGxpc2lvbihlbnRpdHkuZ2V0Qm91bmRpbmdCb3goKSwge1xuICAgICAgICAgICAgICAgIHgxOiB0aWxlLnBvc2l0aW9uLngsXG4gICAgICAgICAgICAgICAgeDI6IHRpbGUucG9zaXRpb24ueCArIFRJTEVfU0lERSxcbiAgICAgICAgICAgICAgICB5MTogdGlsZS5wb3NpdGlvbi55LFxuICAgICAgICAgICAgICAgIHkyOiB0aWxlLnBvc2l0aW9uLnkgKyBUSUxFX1NJREUsXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBpZiAoY29sbGlkYWJsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBlbnRpdHkucmVzb2x2ZVRpbGVDb2xsaXNpb24oY29sbGlkYWJsZSwgdGlsZU1hcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hlY2tFbnRpdGllc0NvbGxpc2lvbihlbnRpdHksIHNlZW4pIHtcbiAgICAgICAgdGhpcy5lbnRpdGllcy5mb3JFYWNoKG90aGVyID0+IHtcbiAgICAgICAgICAgIGlmIChlbnRpdHkuaWQgPT09IG90aGVyLmlkIHx8IHNlZW4uaGFzKG90aGVyLmlkKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAodGhpcy5faXNJbnRlcmFjdGl2ZShvdGhlcikgJiYgY2hlY2tFbnRpdHlDb2xsaXNpb24oZW50aXR5LmdldEJvdW5kaW5nQm94KCksIG90aGVyLmdldEJvdW5kaW5nQm94KCkpKSB7XG4gICAgICAgICAgICAgICAgZW50aXR5LnJlc29sdmVFbnRpdHlDb2xsaXNpb24ob3RoZXIpO1xuICAgICAgICAgICAgICAgIG90aGVyLnJlc29sdmVFbnRpdHlDb2xsaXNpb24oZW50aXR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNsZWFyKGNsZWFyUGxheWVyID0gdHJ1ZSkge1xuICAgICAgICBpZiAoIWNsZWFyUGxheWVyKSB7XG4gICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSB0aGlzLmdldFBsYXllcigpO1xuICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLnBvb2wpXG4gICAgICAgICAgICAgICAgLmZpbHRlcihlbnRpdHkgPT4gZW50aXR5LmlkICE9PSBwbGF5ZXIuaWQpXG4gICAgICAgICAgICAgICAgLmZvckVhY2goZW50aXR5ID0+IGVudGl0eS5kZWNvbnN0cnVjdCgpKTtcbiAgICAgICAgICAgIHRoaXMucG9vbCA9IHsgW3BsYXllci5pZF06IHBsYXllciB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLnBvb2wpLmZvckVhY2goZW50aXR5ID0+IGVudGl0eS5kZWNvbnN0cnVjdCgpKTtcbiAgICAgICAgICAgIHRoaXMucG9vbCA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9SZW1vdmVRdWV1ZSA9IG5ldyBTZXQoKTtcbiAgICB9XG4gICAgX2lzSW50ZXJhY3RpdmUoZW50aXR5KSB7XG4gICAgICAgIGlmIChpc1RhbmsoZW50aXR5KSkge1xuICAgICAgICAgICAgcmV0dXJuICFlbnRpdHkudGltZU1hbmFnZXIuc29tZShbJ3NwYXduJywgJ2RlYXRoJ10pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBfY2hlY2tEZWF0aChlbnRpdHkpIHtcbiAgICAgICAgaWYgKGlzVGFuayhlbnRpdHkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZW50aXR5LnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdkZWF0aCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbnRpdGllcygpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5wb29sKTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgZW50aXR5TWFuYWdlciA9IG5ldyBFbnRpdHlNYW5hZ2VyKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbnRpdHlNYW5hZ2VyLmpzLm1hcCIsImltcG9ydCB7IFBvd2VydXBUeXBlcywgTGF5ZXJzIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBQT1dFUlVQX1NQQVdOX0NELCBFTkVNWV9TUEFXTl9DRCwgRU5FTVlfU1BBV05fUE9TSVRJT04gfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBUaW1lTWFuYWdlciwgU291bmRNYW5hZ2VyLCBlbnRpdHlNYW5hZ2VyIH0gZnJvbSAnLi9tYW5hZ2Vycyc7XG5pbXBvcnQgeyByYW5kb21JbnQgfSBmcm9tICcuL3V0aWxzJztcbmV4cG9ydCBjbGFzcyBTdGFnZSB7XG4gICAgY29uc3RydWN0b3IobnVtYmVyLCBtYXAsIHRhbmtzKSB7XG4gICAgICAgIHRoaXMubnVtYmVyID0gbnVtYmVyO1xuICAgICAgICB0aGlzLm1hcCA9IG1hcDtcbiAgICAgICAgdGhpcy50YW5rcyA9IFsuLi50YW5rc107XG4gICAgICAgIHRoaXMucG93ZXJ1cHNBdmFpbGFibGUgPSA1O1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyID0gbmV3IFRpbWVNYW5hZ2VyKCk7XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyID0gbmV3IFNvdW5kTWFuYWdlcihbJ3N0YXJ0J10pO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdwb3dlcnVwU3Bhd25DRCcsIFBPV0VSVVBfU1BBV05fQ0QpO1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5KCdzdGFydCcpO1xuICAgICAgICBlbnRpdHlNYW5hZ2VyLnNwYXduRW50aXR5KCdGbGFnJyk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5kZWNyZW1lbnRUaW1lcnMoKTtcbiAgICAgICAgdGhpcy5zcGF3bkVuZW15KCk7XG4gICAgICAgIHRoaXMuc3Bhd25Qb3dlcnVwKCk7XG4gICAgfVxuICAgIGlzRmluaXNoKCkge1xuICAgICAgICBjb25zdCBlbmVtaWVzID0gZW50aXR5TWFuYWdlci5nZXRFbmVtaWVzKCk7XG4gICAgICAgIHJldHVybiAhdGhpcy50YW5rcy5sZW5ndGggJiYgIWVuZW1pZXMubGVuZ3RoO1xuICAgIH1cbiAgICBzcGF3bkVuZW15KCkge1xuICAgICAgICBjb25zdCBlbmVteVNwYXduQ0QgPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdlbmVteVNwYXduQ0QnKTtcbiAgICAgICAgY29uc3QgZW5lbWllcyA9IGVudGl0eU1hbmFnZXIuZ2V0RW5lbWllcygpO1xuICAgICAgICBpZiAoIXRoaXMudGFua3MubGVuZ3RoIHx8IGVuZW1pZXMubGVuZ3RoID4gNCB8fCBlbmVteVNwYXduQ0QpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGluZGV4ID0gcmFuZG9tSW50KDIpO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdlbmVteVNwYXduQ0QnLCBFTkVNWV9TUEFXTl9DRCk7XG4gICAgICAgIGVudGl0eU1hbmFnZXIuc3Bhd25FbnRpdHkoJ0VuZW15JywgdGhpcy50YW5rcy5wb3AoKSwgT2JqZWN0LmFzc2lnbih7fSwgRU5FTVlfU1BBV05fUE9TSVRJT05baW5kZXhdKSk7XG4gICAgfVxuICAgIHNwYXduUG93ZXJ1cCgpIHtcbiAgICAgICAgY29uc3QgcG93ZXJ1cFNwYXduQ0QgPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdwb3dlcnVwU3Bhd25DRCcpO1xuICAgICAgICBpZiAocG93ZXJ1cFNwYXduQ0QgfHwgIXRoaXMucG93ZXJ1cHNBdmFpbGFibGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGluZGV4ID0gcmFuZG9tSW50KE9iamVjdC5rZXlzKFBvd2VydXBUeXBlcykubGVuZ3RoIC8gMik7XG4gICAgICAgIGVudGl0eU1hbmFnZXIuc3Bhd25FbnRpdHkoJ1Bvd2VydXAnLCBQb3dlcnVwVHlwZXNbUG93ZXJ1cFR5cGVzW2luZGV4XV0sIHsgeDogcmFuZG9tSW50KDUwMCksIHk6IHJhbmRvbUludCg1MDApIH0pO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdwb3dlcnVwU3Bhd25DRCcsIFBPV0VSVVBfU1BBV05fQ0QpO1xuICAgICAgICB0aGlzLnBvd2VydXBzQXZhaWxhYmxlIC09IDE7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5tYXAucmVuZGVyTGF5ZXIoTGF5ZXJzLnVuZGVyKTtcbiAgICAgICAgdGhpcy5tYXAucmVuZGVyTGF5ZXIoTGF5ZXJzLm1haW4pO1xuICAgICAgICBlbnRpdHlNYW5hZ2VyLnJlbmRlcigpO1xuICAgICAgICB0aGlzLm1hcC5yZW5kZXJMYXllcihMYXllcnMub3Zlcik7XG4gICAgfVxuICAgIGdldCBzY3JlZW5OdW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bWJlciArIDE7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3RhZ2UuanMubWFwIiwiaW1wb3J0IHsgbWFwcywgdGFua3MgYXMgdGFua3NDb25maWcgfSBmcm9tICcuL3N0YWdlQ29uZmlnJztcbmltcG9ydCB7IERFTFRBX1RJTUUsIFNDUkVFTl9GQURFX0ZSQU1FUyB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IFRpbGVNYXAgfSBmcm9tICcuL1RpbGVNYXAnO1xuaW1wb3J0IHsgU3RhZ2UgfSBmcm9tICcuL1N0YWdlJztcbmltcG9ydCB7IG1haW4gYXMgbWFpblNjcmVlbiwgZGFzaGJvYXJkIH0gZnJvbSAnLi9zY3JlZW5zJztcbmltcG9ydCB7IFRpbWVNYW5hZ2VyLCBTb3VuZE1hbmFnZXIsIGVudGl0eU1hbmFnZXIgfSBmcm9tICcuL21hbmFnZXJzJztcbmV4cG9ydCBjbGFzcyBHYW1lIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5pc1N0YXJ0U2NyZWVuID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pc0xvc3QgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlciA9IG5ldyBUaW1lTWFuYWdlcigpO1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlciA9IG5ldyBTb3VuZE1hbmFnZXIoWydnYW1lb3ZlciddKTtcbiAgICB9XG4gICAgY3JlYXRlTG9vcCgpIHtcbiAgICAgICAgbGV0IGFjY3VtdWxhdGVkVGltZSA9IDA7XG4gICAgICAgIGxldCBsYXN0VGltZSA9IDA7XG4gICAgICAgIGNvbnN0IGxvb3AgPSB0aW1lID0+IHtcbiAgICAgICAgICAgIGFjY3VtdWxhdGVkVGltZSArPSAodGltZSAtIGxhc3RUaW1lKSAvIDEwMDA7XG4gICAgICAgICAgICB3aGlsZSAoYWNjdW11bGF0ZWRUaW1lID4gREVMVEFfVElNRSkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRUaW1lIC09IERFTFRBX1RJTUU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgbGFzdFRpbWUgPSB0aW1lO1xuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xuICAgICAgICB9O1xuICAgICAgICBsb29wKDApO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuZGVjcmVtZW50VGltZXJzKCk7XG4gICAgICAgIGNvbnN0IHNyZWVuRmFkZUxlZnQgPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdzY3JlZW5GYWRlJyk7XG4gICAgICAgIGlmICh0aGlzLmlzTG9zdCB8fCB0aGlzLmlzU3RhcnRTY3JlZW4gfHwgc3JlZW5GYWRlTGVmdClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5zdGFnZS51cGRhdGUoKTtcbiAgICAgICAgZW50aXR5TWFuYWdlci51cGRhdGUoKTtcbiAgICAgICAgZW50aXR5TWFuYWdlci5jaGVja0NvbGxpc2lvbnModGhpcy5zdGFnZS5tYXApO1xuICAgICAgICBlbnRpdHlNYW5hZ2VyLnJlbW92ZUZyb21RdWV1ZSgpO1xuICAgICAgICBjb25zdCBwbGF5ZXIgPSBlbnRpdHlNYW5hZ2VyLmdldFBsYXllcigpO1xuICAgICAgICBjb25zdCBmbGFnID0gZW50aXR5TWFuYWdlci5nZXRGbGFnKCk7XG4gICAgICAgIGlmICghcGxheWVyIHx8IGZsYWcuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIGlmIChwbGF5ZXIpXG4gICAgICAgICAgICAgICAgcGxheWVyLnNvdW5kTWFuYWdlci5wYXVzZUFsbCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2FtZU92ZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGFnZS5pc0ZpbmlzaCgpKSB7XG4gICAgICAgICAgICB0aGlzLnRvTmV4dFN0YWdlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBtYWluU2NyZWVuLmNsZWFyU2NyZWVuKCk7XG4gICAgICAgIGRhc2hib2FyZC5jbGVhclNjcmVlbigpO1xuICAgICAgICBpZiAodGhpcy5pc1N0YXJ0U2NyZWVuKSB7XG4gICAgICAgICAgICBtYWluU2NyZWVuLnJlbmRlclN0YXJ0U2NyZWVuKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckdhbWUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXJHYW1lKCkge1xuICAgICAgICBjb25zdCBzcmVlbkZhZGVMZWZ0ID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignc2NyZWVuRmFkZScpO1xuICAgICAgICB0aGlzLnN0YWdlLnJlbmRlcigpO1xuICAgICAgICBpZiAodGhpcy5pc0xvc3QpIHtcbiAgICAgICAgICAgIG1haW5TY3JlZW4ucmVuZGVyR2FtZU92ZXIoc3JlZW5GYWRlTGVmdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3JlZW5GYWRlTGVmdCkge1xuICAgICAgICAgICAgbWFpblNjcmVlbi5yZW5kZXJDaGFpbmdpbmdTdGFnZShzcmVlbkZhZGVMZWZ0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBsYXllciA9IGVudGl0eU1hbmFnZXIuZ2V0UGxheWVyKCk7XG4gICAgICAgICAgICBkYXNoYm9hcmQucmVuZGVyKHBsYXllci5saXZlcywgdGhpcy5zdGFnZS5zY3JlZW5OdW0sIHRoaXMuc3RhZ2UudGFua3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdhbWVPdmVyKCkge1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5KCdnYW1lb3ZlcicpO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdzY3JlZW5GYWRlJywgU0NSRUVOX0ZBREVfRlJBTUVTKTtcbiAgICAgICAgdGhpcy5pc0xvc3QgPSB0cnVlO1xuICAgIH1cbiAgICBpc1dhaXRpbmdGb3JSZXN0YXJ0KCkge1xuICAgICAgICBjb25zdCBnYW1lT3ZlclRpbWUgPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdzY3JlZW5GYWRlJyk7XG4gICAgICAgIHJldHVybiAhZ2FtZU92ZXJUaW1lICYmIHRoaXMuaXNMb3N0O1xuICAgIH1cbiAgICBnZXROZXh0U3RhZ2VOdW0oKSB7XG4gICAgICAgIGxldCBuZXdOdW0gPSB0aGlzLnN0YWdlLm51bWJlciArIDE7XG4gICAgICAgIGlmIChuZXdOdW0gPiBtYXBzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIG5ld051bSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld051bTtcbiAgICB9XG4gICAgdG9OZXh0U3RhZ2UoKSB7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ3NjcmVlbkZhZGUnLCBTQ1JFRU5fRkFERV9GUkFNRVMpO1xuICAgICAgICBlbnRpdHlNYW5hZ2VyLmNsZWFyKGZhbHNlKTtcbiAgICAgICAgY29uc3Qgc3RhZ2VOdW0gPSB0aGlzLmdldE5leHRTdGFnZU51bSgpO1xuICAgICAgICBjb25zdCBwbGF5ZXIgPSBlbnRpdHlNYW5hZ2VyLmdldFBsYXllcigpO1xuICAgICAgICB0aGlzLnN0YWdlID0gbmV3IFN0YWdlKHN0YWdlTnVtLCBuZXcgVGlsZU1hcChtYXBzW3N0YWdlTnVtXSksIHRhbmtzQ29uZmlnW3N0YWdlTnVtXSk7XG4gICAgICAgIHBsYXllci5yZXNwYXduKCk7XG4gICAgfVxuICAgIHBsYXkoKSB7XG4gICAgICAgIHRoaXMuaXNTdGFydFNjcmVlbiA9IGZhbHNlO1xuICAgICAgICBlbnRpdHlNYW5hZ2VyLnNwYXduRW50aXR5KCdQbGF5ZXInKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignc2NyZWVuRmFkZScsIFNDUkVFTl9GQURFX0ZSQU1FUyk7XG4gICAgICAgIHRoaXMuc3RhZ2UgPSBuZXcgU3RhZ2UoMCwgbmV3IFRpbGVNYXAobWFwc1swXSksIHRhbmtzQ29uZmlnWzBdKTtcbiAgICB9XG4gICAgcmVzdGFydCgpIHtcbiAgICAgICAgdGhpcy5pc0xvc3QgPSBmYWxzZTtcbiAgICAgICAgZW50aXR5TWFuYWdlci5jbGVhcigpO1xuICAgICAgICB0aGlzLnBsYXkoKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1HYW1lLmpzLm1hcCIsImltcG9ydCBzcHJpdGUgZnJvbSAnLi4vYXNzZXRzL3Nwcml0ZXMucG5nJztcbmltcG9ydCBleHBsb2RlIGZyb20gJy4uL2Fzc2V0cy9hdWRpby9leHBsb2RlLndhdic7XG5pbXBvcnQgaGl0IGZyb20gJy4uL2Fzc2V0cy9hdWRpby9oaXQud2F2JztcbmltcG9ydCBoaXRkbWcgZnJvbSAnLi4vYXNzZXRzL2F1ZGlvL2hpdGRtZy53YXYnO1xuaW1wb3J0IG5ldXRyYWwgZnJvbSAnLi4vYXNzZXRzL2F1ZGlvL25ldXRyYWwud2F2JztcbmltcG9ydCBwb3dlcnVwIGZyb20gJy4uL2Fzc2V0cy9hdWRpby9wb3dlcnVwLndhdic7XG5pbXBvcnQgbW92ZSBmcm9tICcuLi9hc3NldHMvYXVkaW8vbW92ZS53YXYnO1xuaW1wb3J0IHN0YXJ0IGZyb20gJy4uL2Fzc2V0cy9hdWRpby9zdGFydC53YXYnO1xuaW1wb3J0IGdhbWVvdmVyIGZyb20gJy4uL2Fzc2V0cy9hdWRpby9nYW1lb3Zlci53YXYnO1xuaW1wb3J0IHsgYXNzZXRzSG9sZGVyIH0gZnJvbSAnLi91dGlscy9hc3NldHNIb2xkZXInO1xuaW1wb3J0IHsga2V5Ym9hcmQgfSBmcm9tICcuL2tleWJvYXJkJztcbmltcG9ydCB7IEdhbWUgfSBmcm9tICcuL0dhbWUnO1xuYXN5bmMgZnVuY3Rpb24gbWFpbigpIHtcbiAgICBhd2FpdCBhc3NldHNIb2xkZXIubG9hZFNwcml0ZShzcHJpdGUpO1xuICAgIGFzc2V0c0hvbGRlci5sb2FkQXVkaW8oeyBleHBsb2RlLCBoaXQsIGhpdGRtZywgbmV1dHJhbCwgcG93ZXJ1cCwgbW92ZSwgc3RhcnQsIGdhbWVvdmVyIH0pO1xuICAgIGNvbnN0IGdhbWUgPSBuZXcgR2FtZSgpO1xuICAgIGtleWJvYXJkLmxpc3RlblRvRXZlbnRzKGdhbWUpO1xuICAgIHJldHVybiBnYW1lLmNyZWF0ZUxvb3AoKTtcbn1cbm1haW4oKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJzb3VyY2VSb290IjoiIn0=