!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=9)}([function(e,t,i){e.exports=i.p+"ab65c472c6b592afe8757bb8be8c6267.png"},function(e,t,i){e.exports=i.p+"5c078847978a138d64371531f48bbdbd.wav"},function(e,t,i){e.exports=i.p+"84c22dc339b5f57e4b15287e0125a9e7.wav"},function(e,t,i){e.exports=i.p+"d4d17f1f4a0eee511856bf90569911c0.wav"},function(e,t,i){e.exports=i.p+"17f99c4e1534406164b4d67012374629.wav"},function(e,t,i){e.exports=i.p+"f912610ac78e8270b6341ec4e6d08d83.wav"},function(e,t,i){e.exports=i.p+"54af95b7b45424485b6ebf0361d019a3.wav"},function(e,t,i){e.exports=i.p+"aa8c51850c09e89bb9a47fb31ee31a38.wav"},function(e,t,i){e.exports=i.p+"9af88a6ac9cfbc392a941b4ed520d5f8.wav"},function(e,t,i){"use strict";i.r(t);var s={};i.r(s),i.d(s,"Player",function(){return De}),i.d(s,"Bullet",function(){return Oe}),i.d(s,"Enemy",function(){return Pe}),i.d(s,"Flag",function(){return Le}),i.d(s,"PowerupEvents",function(){return Ee}),i.d(s,"powerupEvents",function(){return Ce}),i.d(s,"Powerup",function(){return Re}),i.d(s,"Tank",function(){return we}),i.d(s,"Movable",function(){return xe});var n=i(0),r=i.n(n),o=i(1),a=i.n(o),h=i(2),c=i.n(h),l=i(3),p=i.n(l),u=i(4),d=i.n(u),m=i(5),g=i.n(m),y=i(6),f=i.n(y),v=i(7),x=i.n(v),w=i(8),b=i.n(w);function M(e,t){return e.x1<t.x2&&e.x2>t.x1&&e.y1<t.y2&&e.y2>t.y1}const T=e=>Math.floor(Math.random()*e);function S(e,t,i){const s=t/e;return Math.floor(i/s)}function k(e,t,i,s){const n=Math.min(S(t.length,i,s),t.length-1),{sprite:r,size:o}=t[n];return r(e,o)}var B,E,C,R,D,O,P;!function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom",e[e.Right=2]="Right",e[e.Left=3]="Left"}(B||(B={})),function(e){e[e.Default=0]="Default",e[e.Fast=1]="Fast",e[e.Armored=2]="Armored",e[e.Armored2=3]="Armored2",e[e.Armored3=4]="Armored3"}(E||(E={})),function(e){e[e.Helmet=0]="Helmet",e[e.Star=1]="Star",e[e.Stopwatch=2]="Stopwatch",e[e.Grenade=3]="Grenade",e[e.Tank=4]="Tank"}(C||(C={})),function(e){e[e.Default=0]="Default",e[e.First=1]="First",e[e.Second=2]="Second"}(R||(R={})),function(e){e[e.None=0]="None",e[e.Brick1=1]="Brick1",e[e.Brick2=2]="Brick2",e[e.Brick3=3]="Brick3",e[e.Brick4=4]="Brick4",e[e.Steel=5]="Steel",e[e.Ice=6]="Ice",e[e.Grass=7]="Grass",e[e.Water=8]="Water"}(D||(D={})),function(e){e[e.under=0]="under",e[e.main=1]="main",e[e.over=2]="over"}(O||(O={})),function(e){e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.Space="Space"}(P||(P={}));const L=1/60,A={x:40,y:40},j={x:40,y:40},F={x:280,y:560},z={x:210,y:560},I={x:10,y:10},N=300,G={x:40,y:40},_={[R.Default]:{velocity:100,shotCD:50},[R.First]:{velocity:120,shotCD:40},[R.Second]:{velocity:150,shotCD:30}},W={[E.Default]:{velocity:100,shotCD:70,lives:1},[E.Fast]:{velocity:200,shotCD:60,lives:1},[E.Armored]:{velocity:120,shotCD:70,lives:3}},Q=35,q=35,H=200,U=200,K=600,$=200,J=400,V=300,X=[{x:0,y:0},{x:560,y:0}],Y=20,Z=document.getElementById("root"),ee=Z.getContext("2d");ee.font="30px Arial",ee.textAlign="center";const te={canvas:Z,context:ee,clearScreen(){ee.clearRect(0,0,Z.width,Z.height),ee.beginPath()},renderChaingingStage(e){const t=S(V,V,e);ee.fillRect(0,0,600,t),ee.fillRect(0,600-t,600,t)},renderGameOver(e=0){const t=S(V,V,e);ee.fillRect(0,0,600,300-t),ee.fillRect(0,300+t,600,300-t),e||he.sprites.gameOver({x:275,y:275},{x:50,y:50})},renderStartScreen(){he.sprites.logo({x:100,y:200},{x:400,y:200}),ee.strokeText("Press any key",300,500)},showPreloader(e){this.clearScreen(),ee.strokeText(`Loading...${e}`,300,300)}},ie=document.getElementById("dashboard"),se=ie.getContext("2d"),ne={canvas:ie,context:se,render(e,t,i){const{numberIcons:s,flagIcon:n,playerIcon:r,tankIcon:o}=he.sprites;((e,t)=>{if(!e.length)return;let i=70,s=0;e.forEach((e,n)=>{t(n%2==0?{x:695,y:i}:{x:670,y:i},{x:15,y:15}),2===s?(i+=20,s=0):s+=1})})(i,o),n({x:670,y:450},{x:50,y:40}),r({x:670,y:380},{x:20,y:20}),s[t]({x:690,y:485},{x:20,y:20}),s[e]({x:700,y:380},{x:20,y:20})},clearScreen(){se.clearRect(0,0,ie.width,ie.height),se.beginPath()}},re=(e,t)=>(i,s,n,r)=>(o,a)=>{t.drawImage(e,i,s,n,r,o.x,o.y,a.x,a.y)},oe=e=>{const t=re(e,te.context),i=re(e,ne.context);return{player:{[R.Default]:{[B.Top]:[t(0,0,16,15),t(16,0,16,15)],[B.Bottom]:[t(64,0,16,15),t(80,0,16,15)],[B.Right]:[t(96,0,16,15),t(112,0,16,15)],[B.Left]:[t(32,0,16,15),t(48,0,16,15)]},[R.First]:{[B.Top]:[t(0,32.3,16,15),t(15.7,32.5,16,15)],[B.Bottom]:[t(64,32.3,16,15),t(80,32.5,16,15)],[B.Right]:[t(96,32.3,16,15),t(112.3,32,16,15)],[B.Left]:[t(31.7,32,16,15),t(48,32,16,15)]},[R.Second]:{[B.Top]:[t(0,48,16,15),t(15.7,48,16,15)],[B.Bottom]:[t(64,48,16,15),t(80,48,16,15)],[B.Right]:[t(96,48,16,15),t(112.3,48,16,15)],[B.Left]:[t(31.7,48,16,15),t(48,48,16,15)]}},enemy:{[E.Default]:{[B.Top]:[t(128,0,16,15),t(144,0,16,15)],[B.Bottom]:[t(192,0,16,15),t(208,0,16,15)],[B.Right]:[t(223.7,0,16,15),t(239.7,0,16,15)],[B.Left]:[t(160,0,16,15),t(176,0,16,15)]},[E.Fast]:{[B.Top]:[t(128,80,16,15),t(144,80,16,15)],[B.Bottom]:[t(192,80,16,15),t(208,80,16,15)],[B.Right]:[t(224,80,16,15),t(240,80,16,15)],[B.Left]:[t(160,80,16,15),t(176,80,16,15)]},[E.Armored]:{1:{[B.Top]:[t(128.5,111.75,14.75,16),t(144.25,111.75,14.75,16)],[B.Bottom]:[t(191.75,111.75,15.25,16),t(207.5,111.75,15.25,16)],[B.Right]:[t(222.75,111.75,16,16),t(239,111.75,14.75,16)],[B.Left]:[t(159,111.75,16,16),t(174.75,111.75,16,16)]},2:{[B.Top]:[t(0,240,14.75,16),t(16,240,14.75,16)],[B.Bottom]:[t(64,240,15.25,16),t(80,240,15.25,16)],[B.Right]:[t(96,240,16,16),t(112,240,14.75,16)],[B.Left]:[t(32,240,16,16),t(48,240,16,16)]},3:{[B.Top]:[t(128,240,14.75,16),t(144,240,14.75,16)],[B.Bottom]:[t(192,240,15.25,16),t(208,240,15.25,16)],[B.Right]:[t(224,240,16,16),t(240,240,14.75,16)],[B.Left]:[t(160,240,16,16),t(176,240,16,16)]}}},bullet:{[B.Top]:[t(322.25,101.5,5,5.7)],[B.Bottom]:[t(338.5,101.5,5,5.7)],[B.Right]:[t(345.75,101.5,5,5.7)],[B.Left]:[t(329.5,101.5,5,5.7)]},flag:t(304.5,33,16,15.25),flagDeath:t(320,33,16,15.25),tankIcon:i(320.25,192.75,8.5,7.75),flagIcon:i(375.5,184,17,15),playerIcon:i(376.5,144.5,8,8.5),numberIcons:[i(328.5,184,8,7),i(336.5,184,8,7),i(344.5,184,8,7),i(352.5,184,8,7),i(360.5,184,8,7),i(328.5,192,8,7),i(336.5,192,8,7),i(344.5,192,8,7),i(352.5,192,8,7),i(360.5,192,8,7)],logo:t(0,260,375,137),tiles:{[D.Brick1]:t(256,0,8,7),[D.Brick2]:t(264,0,8,7),[D.Brick3]:t(256,8,8,7),[D.Brick4]:t(264,8,8,7),[D.Steel]:t(256,16,8,7),[D.Ice]:t(288,32,8,7),[D.Grass]:t(272,32,8,7),[D.Water]:t(256,40,8,7)},gameOver:t(288.5,184,31.2,16),powerup:{[C.Helmet]:t(255.5,112,16,14),[C.Stopwatch]:t(271.5,112,16,14),[C.Star]:t(303.5,112,16,14),[C.Grenade]:t(319.5,112,16,14),[C.Tank]:t(335.5,112,16,14)},invincible:[t(256,144,15.7,16),t(272.2,144,15.7,16)]}},ae=e=>{const t=re(e,te.context);return{tankSpawn:[{sprite:t(303,97,15,14),size:{x:35,y:35}},{sprite:t(303,97,15,14),size:{x:35,y:35}},{sprite:t(288,97,15,14),size:{x:35,y:35}},{sprite:t(273,97,15,14),size:{x:30,y:30}},{sprite:t(257,97,15,14),size:{x:30,y:30}}],tankDestruction:[{sprite:t(336,128.75,32,32),size:{x:60,y:60}},{sprite:t(304.5,128.75,30.5,31.25),size:{x:60,y:60}},{sprite:t(288.25,128.75,16,15.5),size:{x:40,y:40}},{sprite:t(272.25,128.75,15.75,14.25),size:{x:37,y:37}},{sprite:t(258,128.75,13.75,13.25),size:{x:35,y:35}}]}};const he=new class{constructor(){this.prelaoderState={persentage:0,isRunning:!0}}runPreloader(){if(this.prelaoderState.isRunning)return te.showPreloader(this.prelaoderState.persentage),requestAnimationFrame(this.runPreloader.bind(this))}stopPreloader(){this.prelaoderState.isRunning=!1}loadSprite(e){return new Promise((t,i)=>{const s=new Image;s.src=e,s.addEventListener("load",()=>{this.image=s,this.sprites=oe(s),this.variableSprites=ae(s),t()})})}loadAudio(e){this.audio={};const t=Object.keys(e),i=Math.floor(100/t.length),s=t.map(t=>new Promise((s,n)=>{const r=new Audio;r.src=e[t],r.addEventListener("canplaythrough",()=>{this.audio[t]=r,this.prelaoderState.persentage+=i,s()})}));return Promise.all(s)}};const ce=new class{constructor(){this.queue=new Set}handleEvent(e,t){const{code:i,type:s}=e;return t.isWaitingForRestart()?t.restart():t.isStartScreen?t.play():void(P[i]&&("keydown"===s?this.queue.add(P[i]):this.queue.delete(P[i])))}getKey(){return Array.from(this.queue).pop()}listenToEvents(e){["keydown","keyup"].forEach(t=>{window.addEventListener(t,t=>{this.handleEvent(t,e)})})}},le=[[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,5,5,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,5,5,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,0,0,0,0,0,0,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,3,4,0,0,3,4,0,0,0,0,0,0,0,0,0,0,0,0],[1,2,0,0,1,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,1,2,0,0,1,2],[5,5,0,0,3,4,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,3,4,0,0,5,5],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,1,2,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,3,4,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,0,0,0,0,0,0,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,0,1,2,1,2,0,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,1,2,5,5,1,2,1,2,5,5,1,2,5,5,1,2,1,2,5,5,1,2,0,0,0,0],[0,0,0,0,3,4,5,5,3,4,3,4,5,5,3,4,5,5,3,4,3,4,5,5,3,4,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,5,5,0,0,1,2,0,0,5,5,1,2,5,5,0,0,1,2,0,0,1,2,0,0,0,0],[0,0,0,0,5,5,0,0,3,4,0,0,5,5,3,4,5,5,0,0,3,4,0,0,3,4,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,2,0,0,7,7,7,7,7,7,7,7,7,7,7,7,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,7,7,0,7,0,7,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,1,2,0,0,7,0,7,0,7,0,7,0,7,0,7,0,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,7,7,0,7,0,7,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,1,2,0,0,7,0,7,0,7,0,7,0,7,0,7,0,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,7,7,0,7,0,7,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,0,0,0,0,5,0,6,6,6,6,6,0,7,0,7,0,7,7,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,5,7,6,6,6,6,6,7,0,7,0,7,0,7,0,0,0,0,0,0,0,0],[0,0,0,0,1,2,0,0,5,0,6,6,6,6,7,0,7,0,7,0,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,5,7,6,6,6,6,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,1,2,0,0,7,0,6,6,7,0,7,0,7,0,7,0,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,7,7,6,6,0,7,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,0,0,0,0,7,0,7,0,7,0,7,0,7,0,7,0,7,7,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,7,7,7,7,7,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,5,5,1,2,5,5,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,5,5,3,4,5,5,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0]]],pe=[[2,2,0,0,1,2,1,0,0,0],[2,2,0,0,1,2,1,0,0,0]],ue=[D.Brick1,D.Brick2,D.Brick3,D.Brick4,D.Steel,D.Water],de=[D.Grass,D.Water,D.None],me={[O.under]:[D.Ice,D.Water],[O.main]:[D.Brick1,D.Brick2,D.Brick3,D.Brick4,D.Steel],[O.over]:[D.Grass]};class ge{constructor(e){this.tiles=e.map(e=>[...e])}destroy(e){const t=Math.max(0,Math.floor(e.x/Y)),i=Math.max(0,Math.floor(e.y/Y));this.tiles[i][t]=D.None}lookup(e){const t=Math.min(Math.max(0,Math.floor(e.x/Y)),29),i=Math.min(Math.max(0,Math.floor(e.y/Y)),29);return{type:this.tiles[i][t],position:{x:t*Y,y:i*Y}}}lookupRange(e,t){let i=[];const s=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return s>0&&s>Y?i.push({x:e.x+Y,y:e.y}):n>0&&n>Y&&i.push({x:e.x,y:e.y+Y}),[e,...i,t].map(e=>this.lookup(e))}renderLayer(e){this.tiles.forEach((t,i)=>{t.forEach((t,s)=>{me[e].includes(t)&&he.sprites.tiles[t]({x:s*Y,y:i*Y},{x:Y,y:Y})})})}}class ye{constructor(e){this.setupTracks(e)}setupTracks(e){this.tracks=e.reduce((e,t)=>{if("string"==typeof t)e[t]=he.audio[t].cloneNode();else{const{trackName:i,loop:s}=t;e[i]=he.audio[i].cloneNode(),e[i].loop=s}return e},{})}play(e){return this.tracks[e].play()}pause(e){return this.tracks[e].pause()}pauseAll(){Object.values(this.tracks).forEach(e=>e.pause())}}class fe{constructor(){this.timers={}}setTimer(e,t){this.timers[e]=t}getTimer(e){return this.timers[e]}some(e){return Object.entries(this.timers).some(t=>e.includes(t[0])&&t[1]>=0)}decrementTimers(){const e=Object.entries(this.timers).filter(e=>0===e[1]);e.length&&e.forEach(e=>{delete this.timers[e[0]]}),Object.keys(this.timers).forEach(e=>{this.timers[e]-=1})}}class ve{constructor(e,t){this.id=ve.numberGen,this.position=e,this.size=t,ve.numberGen+=1}update(){}render(){}resolveEntityCollision(e){}getBoundingBox(){const{x:e,y:t}=this.position,{x:i,y:s}=this.size;return{x1:e,x2:e+i,y1:t,y2:t+s}}deconstruct(){}}ve.numberGen=0;class xe extends ve{constructor(e,t,i){super(e,t),this.direction=i,this.prevPosition=Object.assign({},e)}resolveEdgeCollision(){}resolveTileCollision(e,t){}resolveEntityCollision(e){}move(e){this.prevPosition=Object.assign({},this.position),this.direction===B.Top?this.position.y-=e*L:this.direction===B.Bottom?this.position.y+=e*L:this.direction===B.Left?this.position.x-=e*L:this.direction===B.Right&&(this.position.x+=e*L)}goBack(){this.position=Object.assign({},this.prevPosition)}animateMovement(e){let t;t=this.direction===B.Left||this.direction===B.Right?this.position.x:this.position.y,e[Math.floor(t/.3)%e.length](this.position,this.size)}isOutOfScreen(){const e=this.getBoundingBox();return e.y1<0||e.y2>600||e.x1<0||e.x2>600}getFrontCollisionPoints(){const{x1:e,x2:t,y1:i,y2:s}=this.getBoundingBox();return this.direction===B.Top?[{x:e,y:i},{x:t,y:i}]:this.direction===B.Right?[{x:t,y:i},{x:t,y:s}]:this.direction===B.Bottom?[{x:e,y:s},{x:t,y:s}]:this.direction===B.Left?[{x:e,y:i},{x:e,y:s}]:void 0}}class we extends xe{constructor(e,t,i){super(e,t,i)}shot(e){if(this.timeManager.getTimer("shotCD"))return;let t;const{x:i,y:s}=I;t=this.direction===B.Top?{x:this.size.x/2+this.position.x-i/2,y:this.position.y-s}:this.direction===B.Right?{x:this.size.x+this.position.x,y:this.size.y/2+this.position.y-s/2}:this.direction===B.Bottom?{x:this.size.x/2+this.position.x-i/2,y:this.size.y+this.position.y}:{x:this.position.x-i,y:this.size.y/2+this.position.y-s/2},Ae.spawnEntity("Bullet",t,this.direction,this),this.timeManager.setTimer("shotCD",e)}die(){this.timeManager.setTimer("death",Q),this.soundManager.play("explode"),Ae.toRemove(this.id)}forgiveCollision(e){const[t,i]=this.getFrontCollisionPoints(),s=e.position;if(this.direction===B.Top||this.direction===B.Bottom){const e=Math.min(Math.abs(s.x-t.x),Math.abs(s.x-i.x));if(e>0&&e<5){return{x:this.position.x>s.x?s.x+Y:s.x-this.size.x,y:this.prevPosition.y}}}else if(this.direction===B.Left||this.direction===B.Right){const e=Math.min(Math.abs(s.y-t.y),Math.abs(s.y-i.y));if(e>0&&e<5){const e=this.position.y>s.y?s.y+Y:s.y-this.size.y;return{x:this.prevPosition.x,y:e}}}}}function be(e){return e instanceof we}function Me(e){return e instanceof De}function Te(e){return e instanceof Pe}function Se(e){return e instanceof Oe}function ke(e){return e instanceof Le}function Be(e){return e instanceof Re}class Ee{constructor(){this.observers={}}subscribe(e,t){this.observers[e]=t}unsubscribe(e){delete this.observers[e]}notify(e){Object.values(this.observers).forEach(t=>t(e))}}const Ce=new Ee;class Re extends ve{constructor(e,t){super(t,Object.assign({},G)),this.type=e,this.timeManager=new fe,this.soundManager=new ye(["powerup"]),this.timeManager.setTimer("live",K)}update(){const e=this.timeManager.getTimer("live");0===e?Ae.toRemove(this.id):e===$&&this.timeManager.setTimer("blink",$),this.timeManager.decrementTimers()}render(){const e=this.timeManager.getTimer("blink");e&&e%50==0||he.sprites.powerup[this.type](this.position,this.size)}resolveEntityCollision(e){Me(e)&&(Ae.toRemove(this.id),Ce.notify(this.type),this.soundManager.play("powerup"))}}class De extends we{constructor(){super(Object.assign({},z),Object.assign({},A),B.Top),this.lives=3,this.power=R.Default,this.timeManager=new fe,this.soundManager=new ye(["explode",{trackName:"neutral",loop:!0},{trackName:"move",loop:!0}]),this.timeManager.setTimer("spawn",q),this.timeManager.setTimer("invincible",H),Ce.subscribe(this.id,function(e){e===C.Tank?this.lives+=1:e===C.Helmet?this.timeManager.setTimer("invincible",H):e===C.Star&&this.power<R.Second&&(this.power+=1)}.bind(this))}update(){this.timeManager.decrementTimers();const e=this.timeManager.getTimer("death"),t=this.timeManager.getTimer("spawn");e?1===e&&this.respawn(!0):t||(this.soundManager.play("neutral"),this.processInput())}render(){const e=this.timeManager.getTimer("spawn"),t=this.timeManager.getTimer("death"),i=this.timeManager.getTimer("invincible");if(e)return k(this.position,he.variableSprites.tankSpawn,q,e);if(t)return k(this.position,he.variableSprites.tankDestruction,Q,t);if(i){const e=he.sprites.invincible;e[i%e.length](this.position,this.size)}this.animateMovement(he.sprites.player[this.power][this.direction])}processInput(){const e=ce.getKey();let t=!0;e===P.ArrowUp?this.direction=B.Top:e===P.ArrowDown?this.direction=B.Bottom:e===P.ArrowLeft?this.direction=B.Left:e===P.ArrowRight?this.direction=B.Right:(this.soundManager.pause("move"),t=!1),e===P.Space&&this.shot(_[this.power].shotCD),t&&(this.soundManager.pause("neutral"),this.soundManager.play("move"),this.move(_[this.power].velocity))}resolveEdgeCollision(){this.goBack()}resolveTileCollision(e){if(1===e.length){const t=this.forgiveCollision(e[0]);t?this.position=Object.assign({},t):this.goBack()}else this.goBack()}resolveEntityCollision(e){const t=this.timeManager.getTimer("death");if(!Be(e))if(Se(e)&&!t){if(this.timeManager.getTimer("invincible"))return;this.timeManager.setTimer("death",Q),this.soundManager.play("explode"),this.lives-=1,0===this.lives&&this.die()}else this.goBack()}respawn(e=!1){e&&(this.power=R.Default),this.soundManager.pauseAll(),this.timeManager.setTimer("spawn",q),this.timeManager.setTimer("invincible",H),this.position=Object.assign({},z),this.prevPosition=Object.assign({},z)}deconstruct(){this.soundManager.pauseAll(),Ce.unsubscribe(this.id)}}class Oe extends xe{constructor(e,t,i){super(e,Object.assign({},I),t),this.direction=t,this.shooter=i,this.soundManager=new ye(["hit","hitdmg"])}update(){this.move(N)}render(){this.animateMovement(he.sprites.bullet[this.direction])}resolveEdgeCollision(){Ae.toRemove(this.id)}resolveTileCollision(e,t){if(e.every(e=>de.includes(e.type)))return;Ae.toRemove(this.id);const i=Me(this.shooter)&&this.shooter.power===R.Second;e.some(e=>e.type===D.Steel)?this.soundManager.play("hit"):this.soundManager.play("hitdmg"),e.forEach(e=>{de.includes(e.type)||e.type===D.Steel&&!i||t.destroy(e.position)})}resolveEntityCollision(e){Be(e)||(Me(this.shooter)&&Te(e)&&e.type>=1&&this.soundManager.play("hit"),Ae.toRemove(this.id))}}class Pe extends we{constructor(e,t){super(t,Object.assign({},A),B.Bottom),this.type=e,this.lives=W[e].lives,this.prevTile=Object.assign({},t),this.timeManager=new fe,this.soundManager=new ye(["explode"]),this.timeManager.setTimer("spawn",q),Ce.subscribe(this.id,function(e){e===C.Stopwatch?this.timeManager.setTimer("freeze",U):e===C.Grenade&&(this.timeManager.some(["death","spawn"])||this.die())}.bind(this))}update(){const e=this.timeManager.getTimer("spawn"),t=this.timeManager.getTimer("death"),i=this.timeManager.getTimer("freeze");if(this.timeManager.decrementTimers(),e){if(this.isSpawnSpotClear())return void this.timeManager.setTimer("spawn",q)}else{if(t||i)return;this.aiMove(),this.shot(W[this.type].shotCD)}}render(){const e=this.timeManager.getTimer("spawn"),t=this.timeManager.getTimer("death");return e?k(this.position,he.variableSprites.tankSpawn,q,e):t?k(this.position,he.variableSprites.tankDestruction,Q,t):void(this.type===E.Armored?this.animateMovement(he.sprites.enemy[this.type][this.lives][this.direction]):this.animateMovement(he.sprites.enemy[this.type][this.direction]))}aiMove(){const{velocity:e}=W[this.type];Math.abs(Math.floor(this.prevTile.x-this.position.x))>120||Math.abs(Math.floor(this.prevTile.y-this.position.y))>120?(this.prevTile=Object.assign({},this.position),this.setRandomDirection(),this.move(e)):this.move(e)}resolveEdgeCollision(){this.goBack(),this.setRandomDirection()}resolveTileCollision(e){if(1===e.length){const t=this.forgiveCollision(e[0]);t?this.position=Object.assign({},t):(this.setRandomDirection(),this.goBack())}else this.setRandomDirection(),this.goBack()}resolveEntityCollision(e){Be(e)||(Se(e)&&Me(e.shooter)?1===this.lives?this.die():this.lives-=1:Te(e)?(this.goBack(),this.setOpositeDirection()):Me(e)&&(this.timeManager.getTimer("shotCD")>10&&this.setOpositeDirection(),this.goBack()))}setRandomDirection(){const e=[B.Top,B.Right,B.Bottom,B.Left].filter(e=>e!==this.direction),t=Math.floor(Math.random()*e.length);this.direction=e[t]}setOpositeDirection(){this.direction===B.Top?this.direction=B.Bottom:this.direction===B.Bottom?this.direction=B.Top:this.direction===B.Right?this.direction=B.Left:this.direction=B.Right}isSpawnSpotClear(){return Ae.entities.filter(e=>e.id!==this.id&&!Se(e)).filter(e=>!Te(e)||!e.timeManager.getTimer("spawn")).some(e=>M(e.getBoundingBox(),this.getBoundingBox()))}deconstruct(){Ce.unsubscribe(this.id)}}class Le extends ve{constructor(){super(F,j),this.isDestroyed=!1}render(){this.isDestroyed?he.sprites.flagDeath(this.position,this.size):he.sprites.flag(this.position,this.size)}resolveEntityCollision(e){Se(e)&&(this.isDestroyed=!0)}}const Ae=new class{constructor(){this.toRemove=(e=>{this.toRemoveQueue.add(e)}),this.removeFromQueue=(()=>{this.toRemoveQueue.forEach(e=>{const t=this.pool[e];this._checkDeath(t)||(delete this.pool[e],t.deconstruct(),this.toRemoveQueue.delete(e))})}),this.pool={},this.toRemoveQueue=new Set}spawnEntity(e,...t){const i=new s[e](...t);this.pool[i.id]=i}getEnemies(){return this.entities.filter(Te)}getPlayer(){return this.entities.find(Me)}getFlag(){return this.entities.find(ke)}render(){this.entities.forEach(e=>e.render())}update(){this.entities.forEach(e=>e.update())}checkCollisions(e){const t=new Set;this.entities.forEach(i=>{Be(i)||ke(i)||(this.checkTileCollision(i,e),this.checkEntitiesCollision(i,t),t.add(i.id))})}checkTileCollision(e,t){if(e.isOutOfScreen())e.resolveEdgeCollision();else{const[i,s]=e.getFrontCollisionPoints(),n=t.lookupRange(i,s).filter(e=>ue.includes(e.type)).filter(t=>M(e.getBoundingBox(),{x1:t.position.x,x2:t.position.x+Y,y1:t.position.y,y2:t.position.y+Y}));n.length&&e.resolveTileCollision(n,t)}}checkEntitiesCollision(e,t){this.entities.forEach(i=>{e.id===i.id||t.has(i.id)||this._isInteractive(i)&&M(e.getBoundingBox(),i.getBoundingBox())&&(e.resolveEntityCollision(i),i.resolveEntityCollision(e))})}clear(e=!0){if(e)Object.values(this.pool).forEach(e=>e.deconstruct()),this.pool={};else{const e=this.getPlayer();Object.values(this.pool).filter(t=>t.id!==e.id).forEach(e=>e.deconstruct()),this.pool={[e.id]:e}}this.toRemoveQueue=new Set}_isInteractive(e){return!be(e)||!e.timeManager.some(["spawn","death"])}_checkDeath(e){if(be(e))return e.timeManager.getTimer("death")}get entities(){return Object.values(this.pool)}};class je{constructor(e,t,i){this.number=e,this.map=t,this.tanks=[...i],this.powerupsAvailable=5,this.timeManager=new fe,this.soundManager=new ye(["start"]),this.timeManager.setTimer("powerupSpawnCD",K),this.soundManager.play("start"),Ae.spawnEntity("Flag")}update(){this.timeManager.decrementTimers(),this.spawnEnemy(),this.spawnPowerup()}isFinish(){const e=Ae.getEnemies();return!this.tanks.length&&!e.length}spawnEnemy(){const e=this.timeManager.getTimer("enemySpawnCD"),t=Ae.getEnemies();if(!this.tanks.length||t.length>4||e)return;const i=T(2);this.timeManager.setTimer("enemySpawnCD",J),Ae.spawnEntity("Enemy",this.tanks.pop(),Object.assign({},X[i]))}spawnPowerup(){if(this.timeManager.getTimer("powerupSpawnCD")||!this.powerupsAvailable)return;const e=T(Object.keys(C).length/2);Ae.spawnEntity("Powerup",C[C[e]],{x:T(500),y:T(500)}),this.timeManager.setTimer("powerupSpawnCD",K),this.powerupsAvailable-=1}render(){this.map.renderLayer(O.under),this.map.renderLayer(O.main),Ae.render(),this.map.renderLayer(O.over)}get screenNum(){return this.number+1}}class Fe{constructor(){this.isStartScreen=!0,this.isLost=!1,this.timeManager=new fe,this.soundManager=new ye(["gameover"])}createLoop(){let e=0,t=0;const i=s=>{for(e+=(s-t)/1e3;e>L;)this.update(),e-=L;this.render(),t=s,requestAnimationFrame(i)};i(0)}update(){this.timeManager.decrementTimers();const e=this.timeManager.getTimer("screenFade");if(this.isLost||this.isStartScreen||e)return;this.stage.update(),Ae.update(),Ae.checkCollisions(this.stage.map),Ae.removeFromQueue();const t=Ae.getPlayer(),i=Ae.getFlag();if(!t||i.isDestroyed)return t&&t.soundManager.pauseAll(),this.gameOver();this.stage.isFinish()&&this.toNextStage()}render(){te.clearScreen(),ne.clearScreen(),this.isStartScreen?te.renderStartScreen():this.renderGame()}renderGame(){const e=this.timeManager.getTimer("screenFade");if(this.stage.render(),this.isLost)te.renderGameOver(e);else if(e)te.renderChaingingStage(e);else{const e=Ae.getPlayer();ne.render(e.lives,this.stage.screenNum,this.stage.tanks)}}gameOver(){this.soundManager.play("gameover"),this.timeManager.setTimer("screenFade",V),this.isLost=!0}isWaitingForRestart(){return!this.timeManager.getTimer("screenFade")&&this.isLost}getNextStageNum(){let e=this.stage.number+1;return e>le.length-1&&(e=0),e}toNextStage(){this.timeManager.setTimer("screenFade",V),Ae.clear(!1);const e=this.getNextStageNum(),t=Ae.getPlayer();this.stage=new je(e,new ge(le[e]),pe[e]),t.respawn()}play(){this.isStartScreen=!1,Ae.spawnEntity("Player"),this.timeManager.setTimer("screenFade",V),this.stage=new je(0,new ge(le[0]),pe[0])}restart(){this.isLost=!1,Ae.clear(),this.play()}}!async function(){he.runPreloader(),await Promise.all([he.loadSprite(r.a),he.loadAudio({explode:a.a,hit:c.a,hitdmg:p.a,neutral:d.a,powerup:g.a,move:f.a,start:x.a,gameover:b.a})]),he.stopPreloader();const e=new Fe;ce.listenToEvents(e),e.createLoop()}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL3Nwcml0ZXMucG5nIiwid2VicGFjazovLy8uL2Fzc2V0cy9hdWRpby9leHBsb2RlLndhdiIsIndlYnBhY2s6Ly8vLi9hc3NldHMvYXVkaW8vaGl0LndhdiIsIndlYnBhY2s6Ly8vLi9hc3NldHMvYXVkaW8vaGl0ZG1nLndhdiIsIndlYnBhY2s6Ly8vLi9hc3NldHMvYXVkaW8vbmV1dHJhbC53YXYiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2F1ZGlvL3Bvd2VydXAud2F2Iiwid2VicGFjazovLy8uL2Fzc2V0cy9hdWRpby9tb3ZlLndhdiIsIndlYnBhY2s6Ly8vLi9hc3NldHMvYXVkaW8vc3RhcnQud2F2Iiwid2VicGFjazovLy8uL2Fzc2V0cy9hdWRpby9nYW1lb3Zlci53YXYiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvdXRpbHMvY2hlY2tFbnRpdHlDb2xsaXNpb24uanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvdXRpbHMvcmFuZG9tLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3V0aWxzL2FuaW1hdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC90eXBlcy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc2NyZWVucy9tYWluLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NjcmVlbnMvZGFzaGJvYXJkLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3V0aWxzL2Fzc2V0c0hvbGRlci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9rZXlib2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zdGFnZUNvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9UaWxlTWFwLmpzIiwid2VicGFjazovLy8uL2J1aWxkL21hbmFnZXJzL1NvdW5kTWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9tYW5hZ2Vycy9UaW1lTWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9lbnRpdGllcy9FbnRpdHkuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvZW50aXRpZXMvTW92YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9lbnRpdGllcy9UYW5rLmpzIiwid2VicGFjazovLy8uL2J1aWxkL2VudGl0aWVzL2d1YXJkcy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9lbnRpdGllcy9Qb3dlcnVwLmpzIiwid2VicGFjazovLy8uL2J1aWxkL2VudGl0aWVzL1BsYXllci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9lbnRpdGllcy9CdWxsZXQuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvZW50aXRpZXMvRW5lbXkuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvZW50aXRpZXMvRmxhZy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9tYW5hZ2Vycy9lbnRpdHlNYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL2J1aWxkL1N0YWdlLmpzIiwid2VicGFjazovLy8uL2J1aWxkL0dhbWUuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjaGVja0VudGl0eUNvbGxpc2lvbiIsImJveDEiLCJib3gyIiwieDEiLCJ4MiIsInkxIiwieTIiLCJyYW5kb21JbnQiLCJsaW1pdCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImdldEFuaW1hdGlvbkluZGV4IiwiYW5pbWF0aW9uTGVuZ3RoIiwiZnJhbWVzVG90YWwiLCJmcmFtZXNMZWZ0Iiwic3RlcCIsImFuaW1hdGVWYXJpYWJsZVNwcml0ZXMiLCJwb3NpdGlvbiIsImFuaW1hdGlvbiIsImluZGV4IiwibWluIiwibGVuZ3RoIiwic3ByaXRlIiwic2l6ZSIsIkRpcmVjdGlvbiIsIlRhbmtUeXBlcyIsIlBvd2VydXBUeXBlcyIsIlBsYXllclBvd2VyIiwiVGlsZXMiLCJMYXllcnMiLCJDb250cm9sS2V5cyIsIkRFTFRBX1RJTUUiLCJUQU5LX1NJWkUiLCJ4IiwieSIsIkZMQUdfU0laRSIsIkZMQUdfUE9TSVRJT04iLCJQTEFZRVJfU1BBV05fUE9TSVRJT04iLCJCVUxMRVRfU0laRSIsIkJVTExFVF9WRUxPQ0lUWSIsIlBPV0VSVVBfU0laRSIsIlBMQVlFUl9TVEFUUyIsIltvYmplY3QgT2JqZWN0XSIsIkRlZmF1bHQiLCJ2ZWxvY2l0eSIsInNob3RDRCIsIkZpcnN0IiwiU2Vjb25kIiwiRU5FTVlfU1RBVFMiLCJsaXZlcyIsIkZhc3QiLCJBcm1vcmVkIiwiREVBVEhfRlJBTUVTIiwiU1BBV05fRlJBTUVTIiwiSU5WSU5DSUJMRV9GUkFNRVMiLCJGUkVFWkVfRlJBTUVTIiwiUE9XRVJVUF9TUEFXTl9DRCIsIlBPV0VSVVBfQkxJTktfRlJBTUVTIiwiRU5FTVlfU1BBV05fQ0QiLCJTQ1JFRU5fRkFERV9GUkFNRVMiLCJFTkVNWV9TUEFXTl9QT1NJVElPTiIsIlRJTEVfU0lERSIsImNhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImZvbnQiLCJ0ZXh0QWxpZ24iLCJtYWluIiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJiZWdpblBhdGgiLCJsZWZ0IiwiZmlsbFJlY3QiLCJhc3NldHNIb2xkZXIiLCJzcHJpdGVzIiwiZ2FtZU92ZXIiLCJsb2dvIiwic3Ryb2tlVGV4dCIsInBlcmNlbnRhZ2UiLCJ0aGlzIiwiY2xlYXJTY3JlZW4iLCJkYXNoYm9hcmRfY2FudmFzIiwiZGFzaGJvYXJkX2NvbnRleHQiLCJkYXNoYm9hcmQiLCJwbGF5ZXJMaXZlcyIsInN0YWdlTnVtIiwidGFua3MiLCJudW1iZXJJY29ucyIsImZsYWdJY29uIiwicGxheWVySWNvbiIsInRhbmtJY29uIiwidGFua1Nwcml0ZSIsImNvdW50ZXIiLCJmb3JFYWNoIiwiXyIsImlkeCIsImRyYXdUYW5rcyIsImNyZWF0ZVNwcml0ZSIsImltYWdlIiwiZHgiLCJkeSIsImRXaWR0aCIsImRIZWlnaHQiLCJkcmF3SW1hZ2UiLCJzZXR1cFNwcml0ZXMiLCJtYWluU3ByaXRlIiwiZGFzaGJvYXJkU3ByaXRlIiwicGxheWVyIiwiVG9wIiwiQm90dG9tIiwiUmlnaHQiLCJMZWZ0IiwiZW5lbXkiLCIxIiwiMiIsIjMiLCJidWxsZXQiLCJmbGFnIiwiZmxhZ0RlYXRoIiwidGlsZXMiLCJCcmljazEiLCJCcmljazIiLCJCcmljazMiLCJCcmljazQiLCJTdGVlbCIsIkljZSIsIkdyYXNzIiwiV2F0ZXIiLCJwb3dlcnVwIiwiSGVsbWV0IiwiU3RvcHdhdGNoIiwiU3RhciIsIkdyZW5hZGUiLCJUYW5rIiwiaW52aW5jaWJsZSIsInNldHVwVmFyaWFibGVTcHJpdGVzIiwidGFua1NwYXduIiwidGFua0Rlc3RydWN0aW9uIiwicHJlbGFvZGVyU3RhdGUiLCJwZXJzZW50YWdlIiwiaXNSdW5uaW5nIiwic2hvd1ByZWxvYWRlciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInJ1blByZWxvYWRlciIsInNyYyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiSW1hZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwidmFyaWFibGVTcHJpdGVzIiwiYXVkaW9TcmMiLCJhdWRpbyIsInRyYWNrTmFtZXMiLCJrZXlzIiwiY2h1bmsiLCJsb2FkZXJzIiwibWFwIiwidHJhY2tOYW1lIiwiQXVkaW8iLCJhbGwiLCJrZXlib2FyZCIsInF1ZXVlIiwiU2V0IiwiZXZlbnQiLCJnYW1lIiwiY29kZSIsInR5cGUiLCJpc1dhaXRpbmdGb3JSZXN0YXJ0IiwicmVzdGFydCIsImlzU3RhcnRTY3JlZW4iLCJwbGF5IiwiYWRkIiwiZGVsZXRlIiwiQXJyYXkiLCJmcm9tIiwicG9wIiwiZXZlbnROYW1lIiwid2luZG93IiwiaGFuZGxlRXZlbnQiLCJtYXBzIiwic3RhZ2VDb25maWdfdGFua3MiLCJyaWdpZCIsImJ1bGxldFRocm91Z2giLCJOb25lIiwibGF5ZXNyTWFwIiwidW5kZXIiLCJvdmVyIiwiVGlsZU1hcF9UaWxlTWFwIiwicm93IiwicG9pbnQiLCJ4SW5kZXgiLCJtYXgiLCJ5SW5kZXgiLCJwb2ludDEiLCJwb2ludDIiLCJpbkJldHdlZW5Qb2ludHMiLCJyYW5nZVgiLCJhYnMiLCJyYW5nZVkiLCJwdXNoIiwibG9va3VwIiwidGlsZSIsImluY2x1ZGVzIiwiU291bmRNYW5hZ2VyX1NvdW5kTWFuYWdlciIsInNldHVwVHJhY2tzIiwidHJhY2tzIiwicmVkdWNlIiwiYWNjIiwidHJhY2siLCJjbG9uZU5vZGUiLCJsb29wIiwicGF1c2UiLCJ2YWx1ZXMiLCJUaW1lTWFuYWdlciIsInRpbWVycyIsInRpbWVyTmFtZSIsImZyYW1lTGVuZ3RoIiwiZW50cmllcyIsInNvbWUiLCJlbnRyeSIsInRvUmVtb3ZlIiwiZmlsdGVyIiwiRW50aXR5IiwiaWQiLCJudW1iZXJHZW4iLCJvdGhlciIsIk1vdmFibGVfTW92YWJsZSIsImRpcmVjdGlvbiIsInN1cGVyIiwicHJldlBvc2l0aW9uIiwiYXNzaWduIiwidGlsZU1hcCIsImRpc3RhbmNlIiwiYm94IiwiZ2V0Qm91bmRpbmdCb3giLCJUYW5rX1RhbmsiLCJjZCIsInRpbWVNYW5hZ2VyIiwiZ2V0VGltZXIiLCJidWxsZXRQb3NpdGlvbiIsImVudGl0eU1hbmFnZXIiLCJzcGF3bkVudGl0eSIsInNldFRpbWVyIiwic291bmRNYW5hZ2VyIiwiZ2V0RnJvbnRDb2xsaXNpb25Qb2ludHMiLCJ0aWxlUG9zIiwiZGlmZlBvaW50IiwiZGVzdGluYXRpb24iLCJpc1RhbmsiLCJlbnRpdHkiLCJpc1BsYXllciIsIlBsYXllcl9QbGF5ZXIiLCJpc0VuZW15IiwiRW5lbXlfRW5lbXkiLCJpc0J1bGxldCIsIkJ1bGxldF9CdWxsZXQiLCJpc0ZsYWciLCJGbGFnX0ZsYWciLCJpc1Bvd2VydXAiLCJQb3dlcnVwX1Bvd2VydXAiLCJQb3dlcnVwRXZlbnRzIiwib2JzZXJ2ZXJzIiwiZW50aXR5SWQiLCJvYnNlcnZlciIsImV2ZW50VHlwZSIsInBvd2VydXBFdmVudHMiLCJsaXZlc0xlZnQiLCJkZWNyZW1lbnRUaW1lcnMiLCJibGlua0xlZnQiLCJub3RpZnkiLCJwb3dlciIsInN1YnNjcmliZSIsInBvd2VydXBUeXBlIiwiZGVhdGgiLCJzcGF3biIsInJlc3Bhd24iLCJwcm9jZXNzSW5wdXQiLCJpbnZpbmNpYmxlU3ByaXRlcyIsImFuaW1hdGVNb3ZlbWVudCIsImdldEtleSIsImlzTW92aW5nIiwiQXJyb3dVcCIsIkFycm93RG93biIsIkFycm93TGVmdCIsIkFycm93UmlnaHQiLCJTcGFjZSIsInNob3QiLCJtb3ZlIiwiZ29CYWNrIiwibmV3UG9zIiwiZm9yZ2l2ZUNvbGxpc2lvbiIsImRpZSIsImRlZmF1bHRQb3dlciIsInBhdXNlQWxsIiwidW5zdWJzY3JpYmUiLCJzaG9vdGVyIiwiZXZlcnkiLCJjYW5EZXN0cm95U3RlZWwiLCJkZXN0cm95IiwicHJldlRpbGUiLCJmcmVlemUiLCJpc1NwYXduU3BvdENsZWFyIiwiYWlNb3ZlIiwic2V0UmFuZG9tRGlyZWN0aW9uIiwic2V0T3Bvc2l0ZURpcmVjdGlvbiIsIml0ZW1zIiwiZW50aXRpZXMiLCJpc0Rlc3Ryb3llZCIsInRvUmVtb3ZlUXVldWUiLCJyZW1vdmVGcm9tUXVldWUiLCJwb29sIiwiX2NoZWNrRGVhdGgiLCJkZWNvbnN0cnVjdCIsImFyZ3MiLCJlbnRpdGllc19uYW1lc3BhY2VPYmplY3QiLCJmaW5kIiwicmVuZGVyIiwidXBkYXRlIiwic2VlbiIsImNoZWNrVGlsZUNvbGxpc2lvbiIsImNoZWNrRW50aXRpZXNDb2xsaXNpb24iLCJpc091dE9mU2NyZWVuIiwicmVzb2x2ZUVkZ2VDb2xsaXNpb24iLCJmaXJzdCIsInNlY29uZCIsImNvbGxpZGFibGUiLCJsb29rdXBSYW5nZSIsInJlc29sdmVUaWxlQ29sbGlzaW9uIiwiaGFzIiwiX2lzSW50ZXJhY3RpdmUiLCJyZXNvbHZlRW50aXR5Q29sbGlzaW9uIiwiY2xlYXJQbGF5ZXIiLCJnZXRQbGF5ZXIiLCJTdGFnZV9TdGFnZSIsIm51bWJlciIsInBvd2VydXBzQXZhaWxhYmxlIiwic3Bhd25FbmVteSIsInNwYXduUG93ZXJ1cCIsImVuZW1pZXMiLCJnZXRFbmVtaWVzIiwiZW5lbXlTcGF3bkNEIiwicmVuZGVyTGF5ZXIiLCJzY3JlZW5OdW0iLCJHYW1lX0dhbWUiLCJpc0xvc3QiLCJhY2N1bXVsYXRlZFRpbWUiLCJsYXN0VGltZSIsInRpbWUiLCJzcmVlbkZhZGVMZWZ0Iiwic3RhZ2UiLCJjaGVja0NvbGxpc2lvbnMiLCJnZXRGbGFnIiwiaXNGaW5pc2giLCJ0b05leHRTdGFnZSIsInJlbmRlclN0YXJ0U2NyZWVuIiwicmVuZGVyR2FtZSIsInJlbmRlckdhbWVPdmVyIiwicmVuZGVyQ2hhaW5naW5nU3RhZ2UiLCJuZXdOdW0iLCJjbGVhciIsImdldE5leHRTdGFnZU51bSIsImFzeW5jIiwibG9hZFNwcml0ZSIsInNwcml0ZXNfZGVmYXVsdCIsImEiLCJsb2FkQXVkaW8iLCJleHBsb2RlIiwiZXhwbG9kZV9kZWZhdWx0IiwiaGl0IiwiaGl0X2RlZmF1bHQiLCJoaXRkbWciLCJoaXRkbWdfZGVmYXVsdCIsIm5ldXRyYWwiLCJuZXV0cmFsX2RlZmF1bHQiLCJwb3dlcnVwX2RlZmF1bHQiLCJtb3ZlX2RlZmF1bHQiLCJzdGFydCIsInN0YXJ0X2RlZmF1bHQiLCJnYW1lb3ZlciIsImdhbWVvdmVyX2RlZmF1bHQiLCJzdG9wUHJlbG9hZGVyIiwibGlzdGVuVG9FdmVudHMiLCJjcmVhdGVMb29wIiwiYnVpbGRfbWFpbiJdLCJtYXBw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YUFFQUMiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYWI2NWM0NzJjNmI1OTJhZmU4NzU3YmI4YmU4YzYyNjcucG5nXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiNWMwNzg4NDc5NzhhMTM4ZDY0MzcxNTMxZjQ4YmJkYmQud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiODRjMjJkYzMzOWI1ZjU3ZTRiMTUyODdlMDEyNWE5ZTcud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZDRkMTdmMWY0YTBlZWU1MTE4NTZiZjkwNTY5OTExYzAud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiMTdmOTljNGUxNTM0NDA2MTY0YjRkNjcwMTIzNzQ2Mjkud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZjkxMjYxMGFjNzhlODI3MGI2MzQxZWM0ZTZkMDhkODMud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiNTRhZjk1YjdiNDU0MjQ0ODViNmViZjAzNjFkMDE5YTMud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYWE4YzUxODUwYzA5ZTg5YmI5YTQ3ZmIzMWVlMzFhMzgud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiOWFmODhhNmFjOWNmYmMzOTJhOTQxYjRlZDUyMGQ1Zjgud2F2XCI7IiwiZnVuY3Rpb24gY2hlY2tFbnRpdHlDb2xsaXNpb24oYm94MSwgYm94Mikge1xuICAgIHJldHVybiBib3gxLngxIDwgYm94Mi54MiAmJiBib3gxLngyID4gYm94Mi54MSAmJiBib3gxLnkxIDwgYm94Mi55MiAmJiBib3gxLnkyID4gYm94Mi55MTtcbn1cbmV4cG9ydCB7IGNoZWNrRW50aXR5Q29sbGlzaW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaGVja0VudGl0eUNvbGxpc2lvbi5qcy5tYXAiLCJjb25zdCByYW5kb21JbnQgPSAobGltaXQpID0+IHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbGltaXQpO1xufTtcbmV4cG9ydCB7IHJhbmRvbUludCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmFuZG9tLmpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBnZXRBbmltYXRpb25JbmRleChhbmltYXRpb25MZW5ndGgsIGZyYW1lc1RvdGFsLCBmcmFtZXNMZWZ0KSB7XG4gICAgY29uc3Qgc3RlcCA9IGZyYW1lc1RvdGFsIC8gYW5pbWF0aW9uTGVuZ3RoO1xuICAgIHJldHVybiBNYXRoLmZsb29yKGZyYW1lc0xlZnQgLyBzdGVwKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhbmltYXRlVmFyaWFibGVTcHJpdGVzKHBvc2l0aW9uLCBhbmltYXRpb24sIGZyYW1lc1RvdGFsLCBmcmFtZXNMZWZ0KSB7XG4gICAgY29uc3QgaW5kZXggPSBNYXRoLm1pbihnZXRBbmltYXRpb25JbmRleChhbmltYXRpb24ubGVuZ3RoLCBmcmFtZXNUb3RhbCwgZnJhbWVzTGVmdCksIGFuaW1hdGlvbi5sZW5ndGggLSAxKTtcbiAgICBjb25zdCB7IHNwcml0ZSwgc2l6ZSB9ID0gYW5pbWF0aW9uW2luZGV4XTtcbiAgICByZXR1cm4gc3ByaXRlKHBvc2l0aW9uLCBzaXplKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuaW1hdGlvbi5qcy5tYXAiLCJleHBvcnQgdmFyIERpcmVjdGlvbjtcbihmdW5jdGlvbiAoRGlyZWN0aW9uKSB7XG4gICAgRGlyZWN0aW9uW0RpcmVjdGlvbltcIlRvcFwiXSA9IDBdID0gXCJUb3BcIjtcbiAgICBEaXJlY3Rpb25bRGlyZWN0aW9uW1wiQm90dG9tXCJdID0gMV0gPSBcIkJvdHRvbVwiO1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJSaWdodFwiXSA9IDJdID0gXCJSaWdodFwiO1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJMZWZ0XCJdID0gM10gPSBcIkxlZnRcIjtcbn0pKERpcmVjdGlvbiB8fCAoRGlyZWN0aW9uID0ge30pKTtcbmV4cG9ydCB2YXIgVGFua1R5cGVzO1xuKGZ1bmN0aW9uIChUYW5rVHlwZXMpIHtcbiAgICBUYW5rVHlwZXNbVGFua1R5cGVzW1wiRGVmYXVsdFwiXSA9IDBdID0gXCJEZWZhdWx0XCI7XG4gICAgVGFua1R5cGVzW1RhbmtUeXBlc1tcIkZhc3RcIl0gPSAxXSA9IFwiRmFzdFwiO1xuICAgIFRhbmtUeXBlc1tUYW5rVHlwZXNbXCJBcm1vcmVkXCJdID0gMl0gPSBcIkFybW9yZWRcIjtcbiAgICBUYW5rVHlwZXNbVGFua1R5cGVzW1wiQXJtb3JlZDJcIl0gPSAzXSA9IFwiQXJtb3JlZDJcIjtcbiAgICBUYW5rVHlwZXNbVGFua1R5cGVzW1wiQXJtb3JlZDNcIl0gPSA0XSA9IFwiQXJtb3JlZDNcIjtcbn0pKFRhbmtUeXBlcyB8fCAoVGFua1R5cGVzID0ge30pKTtcbmV4cG9ydCB2YXIgUG93ZXJ1cFR5cGVzO1xuKGZ1bmN0aW9uIChQb3dlcnVwVHlwZXMpIHtcbiAgICBQb3dlcnVwVHlwZXNbUG93ZXJ1cFR5cGVzW1wiSGVsbWV0XCJdID0gMF0gPSBcIkhlbG1ldFwiO1xuICAgIFBvd2VydXBUeXBlc1tQb3dlcnVwVHlwZXNbXCJTdGFyXCJdID0gMV0gPSBcIlN0YXJcIjtcbiAgICBQb3dlcnVwVHlwZXNbUG93ZXJ1cFR5cGVzW1wiU3RvcHdhdGNoXCJdID0gMl0gPSBcIlN0b3B3YXRjaFwiO1xuICAgIFBvd2VydXBUeXBlc1tQb3dlcnVwVHlwZXNbXCJHcmVuYWRlXCJdID0gM10gPSBcIkdyZW5hZGVcIjtcbiAgICBQb3dlcnVwVHlwZXNbUG93ZXJ1cFR5cGVzW1wiVGFua1wiXSA9IDRdID0gXCJUYW5rXCI7XG59KShQb3dlcnVwVHlwZXMgfHwgKFBvd2VydXBUeXBlcyA9IHt9KSk7XG5leHBvcnQgdmFyIFBsYXllclBvd2VyO1xuKGZ1bmN0aW9uIChQbGF5ZXJQb3dlcikge1xuICAgIFBsYXllclBvd2VyW1BsYXllclBvd2VyW1wiRGVmYXVsdFwiXSA9IDBdID0gXCJEZWZhdWx0XCI7XG4gICAgUGxheWVyUG93ZXJbUGxheWVyUG93ZXJbXCJGaXJzdFwiXSA9IDFdID0gXCJGaXJzdFwiO1xuICAgIFBsYXllclBvd2VyW1BsYXllclBvd2VyW1wiU2Vjb25kXCJdID0gMl0gPSBcIlNlY29uZFwiO1xufSkoUGxheWVyUG93ZXIgfHwgKFBsYXllclBvd2VyID0ge30pKTtcbmV4cG9ydCB2YXIgVGlsZXM7XG4oZnVuY3Rpb24gKFRpbGVzKSB7XG4gICAgVGlsZXNbVGlsZXNbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcbiAgICBUaWxlc1tUaWxlc1tcIkJyaWNrMVwiXSA9IDFdID0gXCJCcmljazFcIjtcbiAgICBUaWxlc1tUaWxlc1tcIkJyaWNrMlwiXSA9IDJdID0gXCJCcmljazJcIjtcbiAgICBUaWxlc1tUaWxlc1tcIkJyaWNrM1wiXSA9IDNdID0gXCJCcmljazNcIjtcbiAgICBUaWxlc1tUaWxlc1tcIkJyaWNrNFwiXSA9IDRdID0gXCJCcmljazRcIjtcbiAgICBUaWxlc1tUaWxlc1tcIlN0ZWVsXCJdID0gNV0gPSBcIlN0ZWVsXCI7XG4gICAgVGlsZXNbVGlsZXNbXCJJY2VcIl0gPSA2XSA9IFwiSWNlXCI7XG4gICAgVGlsZXNbVGlsZXNbXCJHcmFzc1wiXSA9IDddID0gXCJHcmFzc1wiO1xuICAgIFRpbGVzW1RpbGVzW1wiV2F0ZXJcIl0gPSA4XSA9IFwiV2F0ZXJcIjtcbn0pKFRpbGVzIHx8IChUaWxlcyA9IHt9KSk7XG5leHBvcnQgdmFyIExheWVycztcbihmdW5jdGlvbiAoTGF5ZXJzKSB7XG4gICAgTGF5ZXJzW0xheWVyc1tcInVuZGVyXCJdID0gMF0gPSBcInVuZGVyXCI7XG4gICAgTGF5ZXJzW0xheWVyc1tcIm1haW5cIl0gPSAxXSA9IFwibWFpblwiO1xuICAgIExheWVyc1tMYXllcnNbXCJvdmVyXCJdID0gMl0gPSBcIm92ZXJcIjtcbn0pKExheWVycyB8fCAoTGF5ZXJzID0ge30pKTtcbmV4cG9ydCB2YXIgQ29udHJvbEtleXM7XG4oZnVuY3Rpb24gKENvbnRyb2xLZXlzKSB7XG4gICAgQ29udHJvbEtleXNbXCJBcnJvd1VwXCJdID0gXCJBcnJvd1VwXCI7XG4gICAgQ29udHJvbEtleXNbXCJBcnJvd1JpZ2h0XCJdID0gXCJBcnJvd1JpZ2h0XCI7XG4gICAgQ29udHJvbEtleXNbXCJBcnJvd0Rvd25cIl0gPSBcIkFycm93RG93blwiO1xuICAgIENvbnRyb2xLZXlzW1wiQXJyb3dMZWZ0XCJdID0gXCJBcnJvd0xlZnRcIjtcbiAgICBDb250cm9sS2V5c1tcIlNwYWNlXCJdID0gXCJTcGFjZVwiO1xufSkoQ29udHJvbEtleXMgfHwgKENvbnRyb2xLZXlzID0ge30pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGVzLmpzLm1hcCIsImltcG9ydCAqIGFzIHR5cGVzIGZyb20gJy4vdHlwZXMnO1xuLy8gR2FtZVxuZXhwb3J0IGNvbnN0IERFTFRBX1RJTUUgPSAxIC8gNjA7XG4vLyBFbnRpdGllc1xuZXhwb3J0IGNvbnN0IFRBTktfU0laRSA9IHsgeDogNDAsIHk6IDQwIH07XG5leHBvcnQgY29uc3QgRkxBR19TSVpFID0geyB4OiA0MCwgeTogNDAgfTtcbmV4cG9ydCBjb25zdCBGTEFHX1BPU0lUSU9OID0geyB4OiAyODAsIHk6IDU2MCB9O1xuZXhwb3J0IGNvbnN0IFBMQVlFUl9TUEFXTl9QT1NJVElPTiA9IHsgeDogMjEwLCB5OiA1NjAgfTtcbmV4cG9ydCBjb25zdCBCVUxMRVRfU0laRSA9IHsgeDogMTAsIHk6IDEwIH07XG5leHBvcnQgY29uc3QgQlVMTEVUX1ZFTE9DSVRZID0gMzAwO1xuZXhwb3J0IGNvbnN0IFBPV0VSVVBfU0laRSA9IHsgeDogNDAsIHk6IDQwIH07XG5leHBvcnQgY29uc3QgUExBWUVSX1NUQVRTID0ge1xuICAgIFt0eXBlcy5QbGF5ZXJQb3dlci5EZWZhdWx0XToge1xuICAgICAgICB2ZWxvY2l0eTogMTAwLFxuICAgICAgICBzaG90Q0Q6IDUwLFxuICAgIH0sXG4gICAgW3R5cGVzLlBsYXllclBvd2VyLkZpcnN0XToge1xuICAgICAgICB2ZWxvY2l0eTogMTIwLFxuICAgICAgICBzaG90Q0Q6IDQwLFxuICAgIH0sXG4gICAgW3R5cGVzLlBsYXllclBvd2VyLlNlY29uZF06IHtcbiAgICAgICAgdmVsb2NpdHk6IDE1MCxcbiAgICAgICAgc2hvdENEOiAzMCxcbiAgICB9LFxufTtcbmV4cG9ydCBjb25zdCBFTkVNWV9TVEFUUyA9IHtcbiAgICBbdHlwZXMuVGFua1R5cGVzLkRlZmF1bHRdOiB7XG4gICAgICAgIHZlbG9jaXR5OiAxMDAsXG4gICAgICAgIHNob3RDRDogNzAsXG4gICAgICAgIGxpdmVzOiAxLFxuICAgIH0sXG4gICAgW3R5cGVzLlRhbmtUeXBlcy5GYXN0XToge1xuICAgICAgICB2ZWxvY2l0eTogMjAwLFxuICAgICAgICBzaG90Q0Q6IDYwLFxuICAgICAgICBsaXZlczogMSxcbiAgICB9LFxuICAgIFt0eXBlcy5UYW5rVHlwZXMuQXJtb3JlZF06IHtcbiAgICAgICAgdmVsb2NpdHk6IDEyMCxcbiAgICAgICAgc2hvdENEOiA3MCxcbiAgICAgICAgbGl2ZXM6IDMsXG4gICAgfSxcbn07XG4vLyBUaW1lcnNcbmV4cG9ydCBjb25zdCBERUFUSF9GUkFNRVMgPSAzNTtcbmV4cG9ydCBjb25zdCBTUEFXTl9GUkFNRVMgPSAzNTtcbmV4cG9ydCBjb25zdCBJTlZJTkNJQkxFX0ZSQU1FUyA9IDIwMDtcbmV4cG9ydCBjb25zdCBGUkVFWkVfRlJBTUVTID0gMjAwO1xuZXhwb3J0IGNvbnN0IFBPV0VSVVBfU1BBV05fQ0QgPSA2MDA7XG5leHBvcnQgY29uc3QgUE9XRVJVUF9CTElOS19GUkFNRVMgPSAyMDA7XG5leHBvcnQgY29uc3QgRU5FTVlfU1BBV05fQ0QgPSA0MDA7XG5leHBvcnQgY29uc3QgU0NSRUVOX0ZBREVfRlJBTUVTID0gMzAwO1xuLy8gU3RhZ2VcbmV4cG9ydCBjb25zdCBFTkVNWV9TUEFXTl9QT1NJVElPTiA9IFt7IHg6IDAsIHk6IDAgfSwgeyB4OiA1NjAsIHk6IDAgfV07XG4vLyBNYXBcbmV4cG9ydCBjb25zdCBUSUxFX1NJREUgPSAyMDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnN0YW50cy5qcy5tYXAiLCJpbXBvcnQgeyBnZXRBbmltYXRpb25JbmRleCB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7IFNDUkVFTl9GQURFX0ZSQU1FUyB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBhc3NldHNIb2xkZXIgfSBmcm9tICcuLi91dGlscyc7XG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpO1xuY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuY29udGV4dC5mb250ID0gJzMwcHggQXJpYWwnO1xuY29udGV4dC50ZXh0QWxpZ24gPSAnY2VudGVyJztcbmV4cG9ydCBjb25zdCBnZXRBbmltSW5kZXggPSAoYW5pbWF0aW9uTGVuZ3RoLCBmcmFtZXNMZWZ0LCBzcHJpdGVzTGVuZ3RoKSA9PiB7XG4gICAgY29uc3Qgc3RlcCA9IGFuaW1hdGlvbkxlbmd0aCAvIHNwcml0ZXNMZW5ndGg7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoZnJhbWVzTGVmdCAvIHN0ZXApO1xufTtcbmV4cG9ydCBjb25zdCBtYWluID0ge1xuICAgIGNhbnZhcyxcbiAgICBjb250ZXh0LFxuICAgIGNsZWFyU2NyZWVuKCkge1xuICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgIH0sXG4gICAgcmVuZGVyQ2hhaW5naW5nU3RhZ2UobGVmdCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IGdldEFuaW1hdGlvbkluZGV4KFNDUkVFTl9GQURFX0ZSQU1FUywgU0NSRUVOX0ZBREVfRlJBTUVTLCBsZWZ0KTtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCA2MDAsIGluZGV4KTtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCA2MDAgLSBpbmRleCwgNjAwLCBpbmRleCk7XG4gICAgfSxcbiAgICByZW5kZXJHYW1lT3ZlcihsZWZ0ID0gMCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IGdldEFuaW1hdGlvbkluZGV4KFNDUkVFTl9GQURFX0ZSQU1FUywgU0NSRUVOX0ZBREVfRlJBTUVTLCBsZWZ0KTtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCA2MDAsIDMwMCAtIGluZGV4KTtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAzMDAgKyBpbmRleCwgNjAwLCAzMDAgLSBpbmRleCk7XG4gICAgICAgIGlmICghbGVmdCkge1xuICAgICAgICAgICAgYXNzZXRzSG9sZGVyLnNwcml0ZXMuZ2FtZU92ZXIoeyB4OiAyNzUsIHk6IDI3NSB9LCB7IHg6IDUwLCB5OiA1MCB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcmVuZGVyU3RhcnRTY3JlZW4oKSB7XG4gICAgICAgIGFzc2V0c0hvbGRlci5zcHJpdGVzLmxvZ28oeyB4OiAxMDAsIHk6IDIwMCB9LCB7IHg6IDQwMCwgeTogMjAwIH0pO1xuICAgICAgICBjb250ZXh0LnN0cm9rZVRleHQoJ1ByZXNzIGFueSBrZXknLCAzMDAsIDUwMCk7XG4gICAgfSxcbiAgICBzaG93UHJlbG9hZGVyKHBlcmNlbnRhZ2UpIHtcbiAgICAgICAgdGhpcy5jbGVhclNjcmVlbigpO1xuICAgICAgICBjb250ZXh0LnN0cm9rZVRleHQoYExvYWRpbmcuLi4ke3BlcmNlbnRhZ2V9YCwgMzAwLCAzMDApO1xuICAgIH0sXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFpbi5qcy5tYXAiLCJpbXBvcnQgeyBhc3NldHNIb2xkZXIgfSBmcm9tICcuLi91dGlscyc7XG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaGJvYXJkJyk7XG5jb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5jb25zdCBkcmF3VGFua3MgPSAodGFua3MsIHRhbmtTcHJpdGUpID0+IHtcbiAgICBpZiAoIXRhbmtzLmxlbmd0aClcbiAgICAgICAgcmV0dXJuO1xuICAgIGxldCB5ID0gNzA7XG4gICAgbGV0IGNvdW50ZXIgPSAwO1xuICAgIHRhbmtzLmZvckVhY2goKF8sIGlkeCkgPT4ge1xuICAgICAgICBpZiAoaWR4ICUgMiA9PT0gMCkge1xuICAgICAgICAgICAgdGFua1Nwcml0ZSh7IHg6IDY5NSwgeSB9LCB7IHg6IDE1LCB5OiAxNSB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRhbmtTcHJpdGUoeyB4OiA2NzAsIHkgfSwgeyB4OiAxNSwgeTogMTUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvdW50ZXIgPT09IDIpIHtcbiAgICAgICAgICAgIHkgKz0gMjA7XG4gICAgICAgICAgICBjb3VudGVyID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvdW50ZXIgKz0gMTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBkYXNoYm9hcmQgPSB7XG4gICAgY2FudmFzLFxuICAgIGNvbnRleHQsXG4gICAgcmVuZGVyKHBsYXllckxpdmVzLCBzdGFnZU51bSwgdGFua3MpIHtcbiAgICAgICAgY29uc3QgeyBudW1iZXJJY29ucywgZmxhZ0ljb24sIHBsYXllckljb24sIHRhbmtJY29uIH0gPSBhc3NldHNIb2xkZXIuc3ByaXRlcztcbiAgICAgICAgZHJhd1RhbmtzKHRhbmtzLCB0YW5rSWNvbik7XG4gICAgICAgIGZsYWdJY29uKHsgeDogNjcwLCB5OiA0NTAgfSwgeyB4OiA1MCwgeTogNDAgfSk7XG4gICAgICAgIHBsYXllckljb24oeyB4OiA2NzAsIHk6IDM4MCB9LCB7IHg6IDIwLCB5OiAyMCB9KTtcbiAgICAgICAgbnVtYmVySWNvbnNbc3RhZ2VOdW1dKHsgeDogNjkwLCB5OiA0ODUgfSwgeyB4OiAyMCwgeTogMjAgfSk7XG4gICAgICAgIG51bWJlckljb25zW3BsYXllckxpdmVzXSh7IHg6IDcwMCwgeTogMzgwIH0sIHsgeDogMjAsIHk6IDIwIH0pO1xuICAgIH0sXG4gICAgY2xlYXJTY3JlZW4oKSB7XG4gICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXNoYm9hcmQuanMubWFwIiwiaW1wb3J0IHsgbWFpbiwgZGFzaGJvYXJkIH0gZnJvbSAnLi4vc2NyZWVucyc7XG5pbXBvcnQgeyBQbGF5ZXJQb3dlciwgRGlyZWN0aW9uLCBUYW5rVHlwZXMsIFBvd2VydXBUeXBlcywgVGlsZXMsIH0gZnJvbSAnLi4vdHlwZXMnO1xuY29uc3QgY3JlYXRlU3ByaXRlID0gKGltYWdlLCBjb250ZXh0KSA9PiAoZHgsIGR5LCBkV2lkdGgsIGRIZWlnaHQpID0+IChwb3NpdGlvbiwgc2l6ZSkgPT4ge1xuICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCBkeCwgZHksIGRXaWR0aCwgZEhlaWdodCwgcG9zaXRpb24ueCwgcG9zaXRpb24ueSwgc2l6ZS54LCBzaXplLnkpO1xufTtcbmNvbnN0IHNldHVwU3ByaXRlcyA9IChpbWFnZSkgPT4ge1xuICAgIGNvbnN0IG1haW5TcHJpdGUgPSBjcmVhdGVTcHJpdGUoaW1hZ2UsIG1haW4uY29udGV4dCk7XG4gICAgY29uc3QgZGFzaGJvYXJkU3ByaXRlID0gY3JlYXRlU3ByaXRlKGltYWdlLCBkYXNoYm9hcmQuY29udGV4dCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcGxheWVyOiB7XG4gICAgICAgICAgICBbUGxheWVyUG93ZXIuRGVmYXVsdF06IHtcbiAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlRvcF06IFttYWluU3ByaXRlKDAsIDAsIDE2LCAxNSksIG1haW5TcHJpdGUoMTYsIDAsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uQm90dG9tXTogW21haW5TcHJpdGUoNjQsIDAsIDE2LCAxNSksIG1haW5TcHJpdGUoODAsIDAsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uUmlnaHRdOiBbbWFpblNwcml0ZSg5NiwgMCwgMTYsIDE1KSwgbWFpblNwcml0ZSgxMTIsIDAsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uTGVmdF06IFttYWluU3ByaXRlKDMyLCAwLCAxNiwgMTUpLCBtYWluU3ByaXRlKDQ4LCAwLCAxNiwgMTUpXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbUGxheWVyUG93ZXIuRmlyc3RdOiB7XG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Ub3BdOiBbbWFpblNwcml0ZSgwLCAzMi4zLCAxNiwgMTUpLCBtYWluU3ByaXRlKDE1LjcsIDMyLjUsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uQm90dG9tXTogW21haW5TcHJpdGUoNjQsIDMyLjMsIDE2LCAxNSksIG1haW5TcHJpdGUoODAsIDMyLjUsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uUmlnaHRdOiBbbWFpblNwcml0ZSg5NiwgMzIuMywgMTYsIDE1KSwgbWFpblNwcml0ZSgxMTIuMywgMzIsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uTGVmdF06IFttYWluU3ByaXRlKDMxLjcsIDMyLCAxNiwgMTUpLCBtYWluU3ByaXRlKDQ4LCAzMiwgMTYsIDE1KV0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW1BsYXllclBvd2VyLlNlY29uZF06IHtcbiAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlRvcF06IFttYWluU3ByaXRlKDAsIDQ4LCAxNiwgMTUpLCBtYWluU3ByaXRlKDE1LjcsIDQ4LCAxNiwgMTUpXSxcbiAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLkJvdHRvbV06IFttYWluU3ByaXRlKDY0LCA0OCwgMTYsIDE1KSwgbWFpblNwcml0ZSg4MCwgNDgsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uUmlnaHRdOiBbbWFpblNwcml0ZSg5NiwgNDgsIDE2LCAxNSksIG1haW5TcHJpdGUoMTEyLjMsIDQ4LCAxNiwgMTUpXSxcbiAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLkxlZnRdOiBbbWFpblNwcml0ZSgzMS43LCA0OCwgMTYsIDE1KSwgbWFpblNwcml0ZSg0OCwgNDgsIDE2LCAxNSldLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgZW5lbXk6IHtcbiAgICAgICAgICAgIFtUYW5rVHlwZXMuRGVmYXVsdF06IHtcbiAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlRvcF06IFttYWluU3ByaXRlKDEyOCwgMCwgMTYsIDE1KSwgbWFpblNwcml0ZSgxNDQsIDAsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uQm90dG9tXTogW21haW5TcHJpdGUoMTkyLCAwLCAxNiwgMTUpLCBtYWluU3ByaXRlKDIwOCwgMCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDIyMy43LCAwLCAxNiwgMTUpLCBtYWluU3ByaXRlKDIzOS43LCAwLCAxNiwgMTUpXSxcbiAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLkxlZnRdOiBbbWFpblNwcml0ZSgxNjAsIDAsIDE2LCAxNSksIG1haW5TcHJpdGUoMTc2LCAwLCAxNiwgMTUpXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbVGFua1R5cGVzLkZhc3RdOiB7XG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Ub3BdOiBbbWFpblNwcml0ZSgxMjgsIDgwLCAxNiwgMTUpLCBtYWluU3ByaXRlKDE0NCwgODAsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uQm90dG9tXTogW21haW5TcHJpdGUoMTkyLCA4MCwgMTYsIDE1KSwgbWFpblNwcml0ZSgyMDgsIDgwLCAxNiwgMTUpXSxcbiAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlJpZ2h0XTogW21haW5TcHJpdGUoMjI0LCA4MCwgMTYsIDE1KSwgbWFpblNwcml0ZSgyNDAsIDgwLCAxNiwgMTUpXSxcbiAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLkxlZnRdOiBbbWFpblNwcml0ZSgxNjAsIDgwLCAxNiwgMTUpLCBtYWluU3ByaXRlKDE3NiwgODAsIDE2LCAxNSldLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtUYW5rVHlwZXMuQXJtb3JlZF06IHtcbiAgICAgICAgICAgICAgICAnMSc6IHtcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Ub3BdOiBbbWFpblNwcml0ZSgxMjguNSwgMTExLjc1LCAxNC43NSwgMTYpLCBtYWluU3ByaXRlKDE0NC4yNSwgMTExLjc1LCAxNC43NSwgMTYpXSxcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Cb3R0b21dOiBbbWFpblNwcml0ZSgxOTEuNzUsIDExMS43NSwgMTUuMjUsIDE2KSwgbWFpblNwcml0ZSgyMDcuNSwgMTExLjc1LCAxNS4yNSwgMTYpXSxcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDIyMi43NSwgMTExLjc1LCAxNiwgMTYpLCBtYWluU3ByaXRlKDIzOSwgMTExLjc1LCAxNC43NSwgMTYpXSxcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5MZWZ0XTogW21haW5TcHJpdGUoMTU5LCAxMTEuNzUsIDE2LCAxNiksIG1haW5TcHJpdGUoMTc0Ljc1LCAxMTEuNzUsIDE2LCAxNildLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJzInOiB7XG4gICAgICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uVG9wXTogW21haW5TcHJpdGUoMCwgMjQwLCAxNC43NSwgMTYpLCBtYWluU3ByaXRlKDE2LCAyNDAsIDE0Ljc1LCAxNildLFxuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLkJvdHRvbV06IFttYWluU3ByaXRlKDY0LCAyNDAsIDE1LjI1LCAxNiksIG1haW5TcHJpdGUoODAsIDI0MCwgMTUuMjUsIDE2KV0sXG4gICAgICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uUmlnaHRdOiBbbWFpblNwcml0ZSg5NiwgMjQwLCAxNiwgMTYpLCBtYWluU3ByaXRlKDExMiwgMjQwLCAxNC43NSwgMTYpXSxcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5MZWZ0XTogW21haW5TcHJpdGUoMzIsIDI0MCwgMTYsIDE2KSwgbWFpblNwcml0ZSg0OCwgMjQwLCAxNiwgMTYpXSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICczJzoge1xuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlRvcF06IFttYWluU3ByaXRlKDEyOCwgMjQwLCAxNC43NSwgMTYpLCBtYWluU3ByaXRlKDE0NCwgMjQwLCAxNC43NSwgMTYpXSxcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Cb3R0b21dOiBbbWFpblNwcml0ZSgxOTIsIDI0MCwgMTUuMjUsIDE2KSwgbWFpblNwcml0ZSgyMDgsIDI0MCwgMTUuMjUsIDE2KV0sXG4gICAgICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uUmlnaHRdOiBbbWFpblNwcml0ZSgyMjQsIDI0MCwgMTYsIDE2KSwgbWFpblNwcml0ZSgyNDAsIDI0MCwgMTQuNzUsIDE2KV0sXG4gICAgICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uTGVmdF06IFttYWluU3ByaXRlKDE2MCwgMjQwLCAxNiwgMTYpLCBtYWluU3ByaXRlKDE3NiwgMjQwLCAxNiwgMTYpXSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgYnVsbGV0OiB7XG4gICAgICAgICAgICBbRGlyZWN0aW9uLlRvcF06IFttYWluU3ByaXRlKDMyMi4yNSwgMTAxLjUsIDUsIDUuNyldLFxuICAgICAgICAgICAgW0RpcmVjdGlvbi5Cb3R0b21dOiBbbWFpblNwcml0ZSgzMzguNSwgMTAxLjUsIDUsIDUuNyldLFxuICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDM0NS43NSwgMTAxLjUsIDUsIDUuNyldLFxuICAgICAgICAgICAgW0RpcmVjdGlvbi5MZWZ0XTogW21haW5TcHJpdGUoMzI5LjUsIDEwMS41LCA1LCA1LjcpXSxcbiAgICAgICAgfSxcbiAgICAgICAgZmxhZzogbWFpblNwcml0ZSgzMDQuNSwgMzMsIDE2LCAxNS4yNSksXG4gICAgICAgIGZsYWdEZWF0aDogbWFpblNwcml0ZSgzMjAsIDMzLCAxNiwgMTUuMjUpLFxuICAgICAgICB0YW5rSWNvbjogZGFzaGJvYXJkU3ByaXRlKDMyMC4yNSwgMTkyLjc1LCA4LjUsIDcuNzUpLFxuICAgICAgICBmbGFnSWNvbjogZGFzaGJvYXJkU3ByaXRlKDM3NS41LCAxODQsIDE3LCAxNSksXG4gICAgICAgIHBsYXllckljb246IGRhc2hib2FyZFNwcml0ZSgzNzYuNSwgMTQ0LjUsIDgsIDguNSksXG4gICAgICAgIG51bWJlckljb25zOiBbXG4gICAgICAgICAgICBkYXNoYm9hcmRTcHJpdGUoMzI4LjUsIDE4NCwgOCwgNyksXG4gICAgICAgICAgICBkYXNoYm9hcmRTcHJpdGUoMzM2LjUsIDE4NCwgOCwgNyksXG4gICAgICAgICAgICBkYXNoYm9hcmRTcHJpdGUoMzQ0LjUsIDE4NCwgOCwgNyksXG4gICAgICAgICAgICBkYXNoYm9hcmRTcHJpdGUoMzUyLjUsIDE4NCwgOCwgNyksXG4gICAgICAgICAgICBkYXNoYm9hcmRTcHJpdGUoMzYwLjUsIDE4NCwgOCwgNyksXG4gICAgICAgICAgICBkYXNoYm9hcmRTcHJpdGUoMzI4LjUsIDE5MiwgOCwgNyksXG4gICAgICAgICAgICBkYXNoYm9hcmRTcHJpdGUoMzM2LjUsIDE5MiwgOCwgNyksXG4gICAgICAgICAgICBkYXNoYm9hcmRTcHJpdGUoMzQ0LjUsIDE5MiwgOCwgNyksXG4gICAgICAgICAgICBkYXNoYm9hcmRTcHJpdGUoMzUyLjUsIDE5MiwgOCwgNyksXG4gICAgICAgICAgICBkYXNoYm9hcmRTcHJpdGUoMzYwLjUsIDE5MiwgOCwgNyksXG4gICAgICAgIF0sXG4gICAgICAgIGxvZ286IG1haW5TcHJpdGUoMCwgMjYwLCAzNzUsIDEzNyksXG4gICAgICAgIHRpbGVzOiB7XG4gICAgICAgICAgICBbVGlsZXMuQnJpY2sxXTogbWFpblNwcml0ZSgyNTYsIDAsIDgsIDcpLFxuICAgICAgICAgICAgW1RpbGVzLkJyaWNrMl06IG1haW5TcHJpdGUoMjY0LCAwLCA4LCA3KSxcbiAgICAgICAgICAgIFtUaWxlcy5CcmljazNdOiBtYWluU3ByaXRlKDI1NiwgOCwgOCwgNyksXG4gICAgICAgICAgICBbVGlsZXMuQnJpY2s0XTogbWFpblNwcml0ZSgyNjQsIDgsIDgsIDcpLFxuICAgICAgICAgICAgW1RpbGVzLlN0ZWVsXTogbWFpblNwcml0ZSgyNTYsIDE2LCA4LCA3KSxcbiAgICAgICAgICAgIFtUaWxlcy5JY2VdOiBtYWluU3ByaXRlKDI4OCwgMzIsIDgsIDcpLFxuICAgICAgICAgICAgW1RpbGVzLkdyYXNzXTogbWFpblNwcml0ZSgyNzIsIDMyLCA4LCA3KSxcbiAgICAgICAgICAgIFtUaWxlcy5XYXRlcl06IG1haW5TcHJpdGUoMjU2LCA0MCwgOCwgNyksXG4gICAgICAgIH0sXG4gICAgICAgIGdhbWVPdmVyOiBtYWluU3ByaXRlKDI4OC41LCAxODQsIDMxLjIsIDE2KSxcbiAgICAgICAgcG93ZXJ1cDoge1xuICAgICAgICAgICAgW1Bvd2VydXBUeXBlcy5IZWxtZXRdOiBtYWluU3ByaXRlKDI1NS41LCAxMTIsIDE2LCAxNCksXG4gICAgICAgICAgICBbUG93ZXJ1cFR5cGVzLlN0b3B3YXRjaF06IG1haW5TcHJpdGUoMjcxLjUsIDExMiwgMTYsIDE0KSxcbiAgICAgICAgICAgIFtQb3dlcnVwVHlwZXMuU3Rhcl06IG1haW5TcHJpdGUoMzAzLjUsIDExMiwgMTYsIDE0KSxcbiAgICAgICAgICAgIFtQb3dlcnVwVHlwZXMuR3JlbmFkZV06IG1haW5TcHJpdGUoMzE5LjUsIDExMiwgMTYsIDE0KSxcbiAgICAgICAgICAgIFtQb3dlcnVwVHlwZXMuVGFua106IG1haW5TcHJpdGUoMzM1LjUsIDExMiwgMTYsIDE0KSxcbiAgICAgICAgfSxcbiAgICAgICAgaW52aW5jaWJsZTogW21haW5TcHJpdGUoMjU2LCAxNDQsIDE1LjcsIDE2KSwgbWFpblNwcml0ZSgyNzIuMiwgMTQ0LCAxNS43LCAxNildLFxuICAgIH07XG59O1xuY29uc3Qgc2V0dXBWYXJpYWJsZVNwcml0ZXMgPSAoaW1hZ2UpID0+IHtcbiAgICBjb25zdCBtYWluU3ByaXRlID0gY3JlYXRlU3ByaXRlKGltYWdlLCBtYWluLmNvbnRleHQpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHRhbmtTcGF3bjogW1xuICAgICAgICAgICAgeyBzcHJpdGU6IG1haW5TcHJpdGUoMzAzLCA5NywgMTUsIDE0KSwgc2l6ZTogeyB4OiAzNSwgeTogMzUgfSB9LFxuICAgICAgICAgICAgeyBzcHJpdGU6IG1haW5TcHJpdGUoMzAzLCA5NywgMTUsIDE0KSwgc2l6ZTogeyB4OiAzNSwgeTogMzUgfSB9LFxuICAgICAgICAgICAgeyBzcHJpdGU6IG1haW5TcHJpdGUoMjg4LCA5NywgMTUsIDE0KSwgc2l6ZTogeyB4OiAzNSwgeTogMzUgfSB9LFxuICAgICAgICAgICAgeyBzcHJpdGU6IG1haW5TcHJpdGUoMjczLCA5NywgMTUsIDE0KSwgc2l6ZTogeyB4OiAzMCwgeTogMzAgfSB9LFxuICAgICAgICAgICAgeyBzcHJpdGU6IG1haW5TcHJpdGUoMjU3LCA5NywgMTUsIDE0KSwgc2l6ZTogeyB4OiAzMCwgeTogMzAgfSB9LFxuICAgICAgICBdLFxuICAgICAgICB0YW5rRGVzdHJ1Y3Rpb246IFtcbiAgICAgICAgICAgIHsgc3ByaXRlOiBtYWluU3ByaXRlKDMzNiwgMTI4Ljc1LCAzMiwgMzIpLCBzaXplOiB7IHg6IDYwLCB5OiA2MCB9IH0sXG4gICAgICAgICAgICB7IHNwcml0ZTogbWFpblNwcml0ZSgzMDQuNSwgMTI4Ljc1LCAzMC41LCAzMS4yNSksIHNpemU6IHsgeDogNjAsIHk6IDYwIH0gfSxcbiAgICAgICAgICAgIHsgc3ByaXRlOiBtYWluU3ByaXRlKDI4OC4yNSwgMTI4Ljc1LCAxNiwgMTUuNSksIHNpemU6IHsgeDogNDAsIHk6IDQwIH0gfSxcbiAgICAgICAgICAgIHsgc3ByaXRlOiBtYWluU3ByaXRlKDI3Mi4yNSwgMTI4Ljc1LCAxNS43NSwgMTQuMjUpLCBzaXplOiB7IHg6IDM3LCB5OiAzNyB9IH0sXG4gICAgICAgICAgICB7IHNwcml0ZTogbWFpblNwcml0ZSgyNTgsIDEyOC43NSwgMTMuNzUsIDEzLjI1KSwgc2l6ZTogeyB4OiAzNSwgeTogMzUgfSB9LFxuICAgICAgICBdLFxuICAgIH07XG59O1xuY2xhc3MgQXNzZXRzSG9sZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wcmVsYW9kZXJTdGF0ZSA9IHtcbiAgICAgICAgICAgIHBlcnNlbnRhZ2U6IDAsXG4gICAgICAgICAgICBpc1J1bm5pbmc6IHRydWUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJ1blByZWxvYWRlcigpIHtcbiAgICAgICAgaWYgKHRoaXMucHJlbGFvZGVyU3RhdGUuaXNSdW5uaW5nKSB7XG4gICAgICAgICAgICBtYWluLnNob3dQcmVsb2FkZXIodGhpcy5wcmVsYW9kZXJTdGF0ZS5wZXJzZW50YWdlKTtcbiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5ydW5QcmVsb2FkZXIuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RvcFByZWxvYWRlcigpIHtcbiAgICAgICAgdGhpcy5wcmVsYW9kZXJTdGF0ZS5pc1J1bm5pbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgbG9hZFNwcml0ZShzcmMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICBpbWFnZS5zcmMgPSBzcmM7XG4gICAgICAgICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNwcml0ZXMgPSBzZXR1cFNwcml0ZXMoaW1hZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMudmFyaWFibGVTcHJpdGVzID0gc2V0dXBWYXJpYWJsZVNwcml0ZXMoaW1hZ2UpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbG9hZEF1ZGlvKGF1ZGlvU3JjKSB7XG4gICAgICAgIHRoaXMuYXVkaW8gPSB7fTtcbiAgICAgICAgY29uc3QgdHJhY2tOYW1lcyA9IE9iamVjdC5rZXlzKGF1ZGlvU3JjKTtcbiAgICAgICAgY29uc3QgY2h1bmsgPSBNYXRoLmZsb29yKDEwMCAvIHRyYWNrTmFtZXMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgbG9hZGVycyA9IHRyYWNrTmFtZXMubWFwKHRyYWNrTmFtZSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbygpO1xuICAgICAgICAgICAgYXVkaW8uc3JjID0gYXVkaW9TcmNbdHJhY2tOYW1lXTtcbiAgICAgICAgICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXl0aHJvdWdoJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9bdHJhY2tOYW1lXSA9IGF1ZGlvO1xuICAgICAgICAgICAgICAgIHRoaXMucHJlbGFvZGVyU3RhdGUucGVyc2VudGFnZSArPSBjaHVuaztcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwobG9hZGVycyk7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IGFzc2V0c0hvbGRlciA9IG5ldyBBc3NldHNIb2xkZXIoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzc2V0c0hvbGRlci5qcy5tYXAiLCJpbXBvcnQgeyBDb250cm9sS2V5cyB9IGZyb20gJy4vdHlwZXMnO1xuZXhwb3J0IGNsYXNzIEtleWJvYXJkIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IG5ldyBTZXQoKTtcbiAgICB9XG4gICAgaGFuZGxlRXZlbnQoZXZlbnQsIGdhbWUpIHtcbiAgICAgICAgY29uc3QgeyBjb2RlLCB0eXBlIH0gPSBldmVudDtcbiAgICAgICAgaWYgKGdhbWUuaXNXYWl0aW5nRm9yUmVzdGFydCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2FtZS5yZXN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWUuaXNTdGFydFNjcmVlbikge1xuICAgICAgICAgICAgcmV0dXJuIGdhbWUucGxheSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghQ29udHJvbEtleXNbY29kZV0pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0eXBlID09PSAna2V5ZG93bicpIHtcbiAgICAgICAgICAgIHRoaXMucXVldWUuYWRkKENvbnRyb2xLZXlzW2NvZGVdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucXVldWUuZGVsZXRlKENvbnRyb2xLZXlzW2NvZGVdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRLZXkoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucXVldWUpLnBvcCgpO1xuICAgIH1cbiAgICBsaXN0ZW5Ub0V2ZW50cyhnYW1lKSB7XG4gICAgICAgIFsna2V5ZG93bicsICdrZXl1cCddLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFdmVudChldmVudCwgZ2FtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IGtleWJvYXJkID0gbmV3IEtleWJvYXJkKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1rZXlib2FyZC5qcy5tYXAiLCJjb25zdCBtYXBzID0gW1xuICAgIFtcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAzLCA0LCA1LCA1LCAzLCA0LCAwLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDUsIDUsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFsxLCAyLCAwLCAwLCAxLCAyLCAxLCAyLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAyLCAxLCAyLCAwLCAwLCAxLCAyXSxcbiAgICAgICAgWzUsIDUsIDAsIDAsIDMsIDQsIDMsIDQsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDMsIDQsIDMsIDQsIDAsIDAsIDUsIDVdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMywgNCwgMSwgMiwgMywgNCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAzLCA0LCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDAsIDEsIDIsIDEsIDIsIDAsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMywgMCwgMCwgNCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAyLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgWzAsIDAsIDAsIDAsIDEsIDIsIDUsIDUsIDEsIDIsIDEsIDIsIDUsIDUsIDEsIDIsIDUsIDUsIDEsIDIsIDEsIDIsIDUsIDUsIDEsIDIsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMywgNCwgNSwgNSwgMywgNCwgMywgNCwgNSwgNSwgMywgNCwgNSwgNSwgMywgNCwgMywgNCwgNSwgNSwgMywgNCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgNSwgNSwgMCwgMCwgMSwgMiwgMCwgMCwgNSwgNSwgMSwgMiwgNSwgNSwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCA1LCA1LCAwLCAwLCAzLCA0LCAwLCAwLCA1LCA1LCAzLCA0LCA1LCA1LCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDcsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgNywgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAzLCA0LCAwLCAwLCA3LCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDcsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgNywgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgMCwgMywgNCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCA1LCAwLCA2LCA2LCA2LCA2LCA2LCAwLCA3LCAwLCA3LCAwLCA3LCA3LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDUsIDcsIDYsIDYsIDYsIDYsIDYsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgNSwgMCwgNiwgNiwgNiwgNiwgNywgMCwgNywgMCwgNywgMCwgNywgNywgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAzLCA0LCAwLCAwLCA1LCA3LCA2LCA2LCA2LCA2LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDcsIDAsIDYsIDYsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDcsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgNywgNywgNiwgNiwgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgMCwgMywgNCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCA3LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCA1LCA1LCAxLCAyLCA1LCA1LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDUsIDUsIDMsIDQsIDUsIDUsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDIsIDEsIDIsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMywgMCwgMCwgNCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAyLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICBdLFxuXTtcbmNvbnN0IHRhbmtzID0gW1syLCAyLCAwLCAwLCAxLCAyLCAxLCAwLCAwLCAwXSwgWzIsIDIsIDAsIDAsIDEsIDIsIDEsIDAsIDAsIDBdXTtcbmV4cG9ydCB7IG1hcHMsIHRhbmtzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdGFnZUNvbmZpZy5qcy5tYXAiLCJpbXBvcnQgeyBUaWxlcywgTGF5ZXJzIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBUSUxFX1NJREUgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBhc3NldHNIb2xkZXIgfSBmcm9tICcuL3V0aWxzJztcbmV4cG9ydCBjb25zdCByaWdpZCA9IFtUaWxlcy5CcmljazEsIFRpbGVzLkJyaWNrMiwgVGlsZXMuQnJpY2szLCBUaWxlcy5CcmljazQsIFRpbGVzLlN0ZWVsLCBUaWxlcy5XYXRlcl07XG5leHBvcnQgY29uc3QgYnVsbGV0VGhyb3VnaCA9IFtUaWxlcy5HcmFzcywgVGlsZXMuV2F0ZXIsIFRpbGVzLk5vbmVdO1xuY29uc3QgbGF5ZXNyTWFwID0ge1xuICAgIFtMYXllcnMudW5kZXJdOiBbVGlsZXMuSWNlLCBUaWxlcy5XYXRlcl0sXG4gICAgW0xheWVycy5tYWluXTogW1RpbGVzLkJyaWNrMSwgVGlsZXMuQnJpY2syLCBUaWxlcy5CcmljazMsIFRpbGVzLkJyaWNrNCwgVGlsZXMuU3RlZWxdLFxuICAgIFtMYXllcnMub3Zlcl06IFtUaWxlcy5HcmFzc10sXG59O1xuZXhwb3J0IGNsYXNzIFRpbGVNYXAge1xuICAgIGNvbnN0cnVjdG9yKHRpbGVzKSB7XG4gICAgICAgIHRoaXMudGlsZXMgPSB0aWxlcy5tYXAocm93ID0+IFsuLi5yb3ddKTtcbiAgICB9XG4gICAgZGVzdHJveShwb2ludCkge1xuICAgICAgICBjb25zdCB4SW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKHBvaW50LnggLyBUSUxFX1NJREUpKTtcbiAgICAgICAgY29uc3QgeUluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihwb2ludC55IC8gVElMRV9TSURFKSk7XG4gICAgICAgIHRoaXMudGlsZXNbeUluZGV4XVt4SW5kZXhdID0gVGlsZXMuTm9uZTtcbiAgICB9XG4gICAgbG9va3VwKHBvaW50KSB7XG4gICAgICAgIGNvbnN0IHhJbmRleCA9IE1hdGgubWluKE1hdGgubWF4KDAsIE1hdGguZmxvb3IocG9pbnQueCAvIFRJTEVfU0lERSkpLCAyOSk7XG4gICAgICAgIGNvbnN0IHlJbmRleCA9IE1hdGgubWluKE1hdGgubWF4KDAsIE1hdGguZmxvb3IocG9pbnQueSAvIFRJTEVfU0lERSkpLCAyOSk7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IHRoaXMudGlsZXNbeUluZGV4XVt4SW5kZXhdLCBwb3NpdGlvbjogeyB4OiB4SW5kZXggKiBUSUxFX1NJREUsIHk6IHlJbmRleCAqIFRJTEVfU0lERSB9IH07XG4gICAgfVxuICAgIGxvb2t1cFJhbmdlKHBvaW50MSwgcG9pbnQyKSB7XG4gICAgICAgIGxldCBpbkJldHdlZW5Qb2ludHMgPSBbXTtcbiAgICAgICAgY29uc3QgcmFuZ2VYID0gTWF0aC5hYnMocG9pbnQxLnggLSBwb2ludDIueCk7XG4gICAgICAgIGNvbnN0IHJhbmdlWSA9IE1hdGguYWJzKHBvaW50MS55IC0gcG9pbnQyLnkpO1xuICAgICAgICBpZiAocmFuZ2VYID4gMCAmJiByYW5nZVggPiBUSUxFX1NJREUpIHtcbiAgICAgICAgICAgIC8vIENoZWNrcyB0aWxlIGluIGJldHdlZW4gdGFuayBlZGdlc1xuICAgICAgICAgICAgaW5CZXR3ZWVuUG9pbnRzLnB1c2goeyB4OiBwb2ludDEueCArIFRJTEVfU0lERSwgeTogcG9pbnQxLnkgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmFuZ2VZID4gMCAmJiByYW5nZVkgPiBUSUxFX1NJREUpIHtcbiAgICAgICAgICAgIGluQmV0d2VlblBvaW50cy5wdXNoKHsgeDogcG9pbnQxLngsIHk6IHBvaW50MS55ICsgVElMRV9TSURFIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbcG9pbnQxLCAuLi5pbkJldHdlZW5Qb2ludHMsIHBvaW50Ml0ubWFwKHBvaW50ID0+IHRoaXMubG9va3VwKHBvaW50KSk7XG4gICAgfVxuICAgIHJlbmRlckxheWVyKG5hbWUpIHtcbiAgICAgICAgdGhpcy50aWxlcy5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh0aWxlLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXllc3JNYXBbbmFtZV0uaW5jbHVkZXModGlsZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBhc3NldHNIb2xkZXIuc3ByaXRlcy50aWxlc1t0aWxlXSh7IHg6IHggKiBUSUxFX1NJREUsIHk6IHkgKiBUSUxFX1NJREUgfSwgeyB4OiBUSUxFX1NJREUsIHk6IFRJTEVfU0lERSB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlTWFwLmpzLm1hcCIsImltcG9ydCB7IGFzc2V0c0hvbGRlciB9IGZyb20gJy4uL3V0aWxzJztcbmV4cG9ydCBjbGFzcyBTb3VuZE1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHRyYWNrTmFtZXMpIHtcbiAgICAgICAgdGhpcy5zZXR1cFRyYWNrcyh0cmFja05hbWVzKTtcbiAgICB9XG4gICAgc2V0dXBUcmFja3ModHJhY2tOYW1lcykge1xuICAgICAgICB0aGlzLnRyYWNrcyA9IHRyYWNrTmFtZXMucmVkdWNlKChhY2MsIHRyYWNrKSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRyYWNrID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGFjY1t0cmFja10gPSBhc3NldHNIb2xkZXIuYXVkaW9bdHJhY2tdLmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB0cmFja05hbWUsIGxvb3AgfSA9IHRyYWNrO1xuICAgICAgICAgICAgICAgIGFjY1t0cmFja05hbWVdID0gYXNzZXRzSG9sZGVyLmF1ZGlvW3RyYWNrTmFtZV0uY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICAgICAgYWNjW3RyYWNrTmFtZV0ubG9vcCA9IGxvb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSk7XG4gICAgfVxuICAgIHBsYXkodHJhY2tOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYWNrc1t0cmFja05hbWVdLnBsYXkoKTtcbiAgICB9XG4gICAgcGF1c2UodHJhY2tOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYWNrc1t0cmFja05hbWVdLnBhdXNlKCk7XG4gICAgfVxuICAgIHBhdXNlQWxsKCkge1xuICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMudHJhY2tzKS5mb3JFYWNoKHRyYWNrID0+IHRyYWNrLnBhdXNlKCkpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNvdW5kTWFuYWdlci5qcy5tYXAiLCJleHBvcnQgY2xhc3MgVGltZU1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnRpbWVycyA9IHt9O1xuICAgIH1cbiAgICBzZXRUaW1lcih0aW1lck5hbWUsIGZyYW1lTGVuZ3RoKSB7XG4gICAgICAgIHRoaXMudGltZXJzW3RpbWVyTmFtZV0gPSBmcmFtZUxlbmd0aDtcbiAgICB9XG4gICAgZ2V0VGltZXIodGltZXJOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVyc1t0aW1lck5hbWVdO1xuICAgIH1cbiAgICBzb21lKHRpbWVycykge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy50aW1lcnMpLnNvbWUoZW50cnkgPT4gdGltZXJzLmluY2x1ZGVzKGVudHJ5WzBdKSAmJiBlbnRyeVsxXSA+PSAwKTtcbiAgICB9XG4gICAgZGVjcmVtZW50VGltZXJzKCkge1xuICAgICAgICBjb25zdCB0b1JlbW92ZSA9IE9iamVjdC5lbnRyaWVzKHRoaXMudGltZXJzKS5maWx0ZXIoZW50cnkgPT4gZW50cnlbMV0gPT09IDApO1xuICAgICAgICBpZiAodG9SZW1vdmUubGVuZ3RoKSB7XG4gICAgICAgICAgICB0b1JlbW92ZS5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy50aW1lcnNbZW50cnlbMF1dO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmtleXModGhpcy50aW1lcnMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIHRoaXMudGltZXJzW2tleV0gLT0gMTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGltZU1hbmFnZXIuanMubWFwIiwiZXhwb3J0IGNsYXNzIEVudGl0eSB7XG4gICAgY29uc3RydWN0b3IocG9zaXRpb24sIHNpemUpIHtcbiAgICAgICAgdGhpcy5pZCA9IEVudGl0eS5udW1iZXJHZW47XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICAgICAgRW50aXR5Lm51bWJlckdlbiArPSAxO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7IH1cbiAgICByZW5kZXIoKSB7IH1cbiAgICByZXNvbHZlRW50aXR5Q29sbGlzaW9uKG90aGVyKSB7IH1cbiAgICBnZXRCb3VuZGluZ0JveCgpIHtcbiAgICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLnBvc2l0aW9uO1xuICAgICAgICBjb25zdCB7IHg6IHdpZHRoLCB5OiBoZWlnaHQgfSA9IHRoaXMuc2l6ZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHgxOiB4LFxuICAgICAgICAgICAgeDI6IHggKyB3aWR0aCxcbiAgICAgICAgICAgIHkxOiB5LFxuICAgICAgICAgICAgeTI6IHkgKyBoZWlnaHQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGRlY29uc3RydWN0KCkgeyB9XG59XG5FbnRpdHkubnVtYmVyR2VuID0gMDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVudGl0eS5qcy5tYXAiLCJpbXBvcnQgeyBFbnRpdHkgfSBmcm9tICcuL0VudGl0eSc7XG5pbXBvcnQgeyBERUxUQV9USU1FIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB7IERpcmVjdGlvbiB9IGZyb20gJy4uL3R5cGVzJztcbmV4cG9ydCBjbGFzcyBNb3ZhYmxlIGV4dGVuZHMgRW50aXR5IHtcbiAgICBjb25zdHJ1Y3Rvcihwb3NpdGlvbiwgc2l6ZSwgZGlyZWN0aW9uKSB7XG4gICAgICAgIHN1cGVyKHBvc2l0aW9uLCBzaXplKTtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgICAgIHRoaXMucHJldlBvc2l0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgcG9zaXRpb24pO1xuICAgIH1cbiAgICByZXNvbHZlRWRnZUNvbGxpc2lvbigpIHsgfVxuICAgIHJlc29sdmVUaWxlQ29sbGlzaW9uKHRpbGVzLCB0aWxlTWFwKSB7IH1cbiAgICByZXNvbHZlRW50aXR5Q29sbGlzaW9uKG90aGVyKSB7IH1cbiAgICBtb3ZlKHZlbG9jaXR5KSB7XG4gICAgICAgIHRoaXMucHJldlBvc2l0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wb3NpdGlvbik7XG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlRvcCkge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi55IC09IHZlbG9jaXR5ICogREVMVEFfVElNRTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkJvdHRvbSkge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi55ICs9IHZlbG9jaXR5ICogREVMVEFfVElNRTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkxlZnQpIHtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueCAtPSB2ZWxvY2l0eSAqIERFTFRBX1RJTUU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5SaWdodCkge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi54ICs9IHZlbG9jaXR5ICogREVMVEFfVElNRTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnb0JhY2soKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByZXZQb3NpdGlvbik7XG4gICAgfVxuICAgIGFuaW1hdGVNb3ZlbWVudChzcHJpdGVzKSB7XG4gICAgICAgIGxldCBkaXN0YW5jZTtcbiAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uTGVmdCB8fCB0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlJpZ2h0KSB7XG4gICAgICAgICAgICBkaXN0YW5jZSA9IHRoaXMucG9zaXRpb24ueDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRpc3RhbmNlID0gdGhpcy5wb3NpdGlvbi55O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gTWF0aC5mbG9vcihkaXN0YW5jZSAvIDAuMykgJSBzcHJpdGVzLmxlbmd0aDtcbiAgICAgICAgc3ByaXRlc1tpbmRleF0odGhpcy5wb3NpdGlvbiwgdGhpcy5zaXplKTtcbiAgICB9XG4gICAgaXNPdXRPZlNjcmVlbigpIHtcbiAgICAgICAgY29uc3QgYm94ID0gdGhpcy5nZXRCb3VuZGluZ0JveCgpO1xuICAgICAgICByZXR1cm4gYm94LnkxIDwgMCB8fCBib3gueTIgPiA2MDAgfHwgYm94LngxIDwgMCB8fCBib3gueDIgPiA2MDA7XG4gICAgfVxuICAgIGdldEZyb250Q29sbGlzaW9uUG9pbnRzKCkge1xuICAgICAgICBjb25zdCB7IHgxLCB4MiwgeTEsIHkyIH0gPSB0aGlzLmdldEJvdW5kaW5nQm94KCk7XG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlRvcCkge1xuICAgICAgICAgICAgcmV0dXJuIFt7IHg6IHgxLCB5OiB5MSB9LCB7IHg6IHgyLCB5OiB5MSB9XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlJpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gW3sgeDogeDIsIHk6IHkxIH0sIHsgeDogeDIsIHk6IHkyIH1dO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uQm90dG9tKSB7XG4gICAgICAgICAgICByZXR1cm4gW3sgeDogeDEsIHk6IHkyIH0sIHsgeDogeDIsIHk6IHkyIH1dO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uTGVmdCkge1xuICAgICAgICAgICAgcmV0dXJuIFt7IHg6IHgxLCB5OiB5MSB9LCB7IHg6IHgxLCB5OiB5MiB9XTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1vdmFibGUuanMubWFwIiwiaW1wb3J0IHsgTW92YWJsZSB9IGZyb20gJy4vTW92YWJsZSc7XG5pbXBvcnQgeyBCVUxMRVRfU0laRSwgREVBVEhfRlJBTUVTLCBUSUxFX1NJREUgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgZW50aXR5TWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzJztcbmltcG9ydCB7IERpcmVjdGlvbiB9IGZyb20gJy4uL3R5cGVzJztcbmV4cG9ydCBjbGFzcyBUYW5rIGV4dGVuZHMgTW92YWJsZSB7XG4gICAgY29uc3RydWN0b3IocG9zaXRpb24sIHNpemUsIGRpcmVjdGlvbikge1xuICAgICAgICBzdXBlcihwb3NpdGlvbiwgc2l6ZSwgZGlyZWN0aW9uKTtcbiAgICB9XG4gICAgc2hvdChjZCkge1xuICAgICAgICBjb25zdCBzaG90Q0QgPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdzaG90Q0QnKTtcbiAgICAgICAgaWYgKHNob3RDRClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGJ1bGxldFBvc2l0aW9uO1xuICAgICAgICBjb25zdCB7IHg6IHdpZHRoLCB5OiBoZWlnaHQgfSA9IEJVTExFVF9TSVpFO1xuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Ub3ApIHtcbiAgICAgICAgICAgIGJ1bGxldFBvc2l0aW9uID0geyB4OiB0aGlzLnNpemUueCAvIDIgKyB0aGlzLnBvc2l0aW9uLnggLSB3aWR0aCAvIDIsIHk6IHRoaXMucG9zaXRpb24ueSAtIGhlaWdodCB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uUmlnaHQpIHtcbiAgICAgICAgICAgIGJ1bGxldFBvc2l0aW9uID0geyB4OiB0aGlzLnNpemUueCArIHRoaXMucG9zaXRpb24ueCwgeTogdGhpcy5zaXplLnkgLyAyICsgdGhpcy5wb3NpdGlvbi55IC0gaGVpZ2h0IC8gMiB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uQm90dG9tKSB7XG4gICAgICAgICAgICBidWxsZXRQb3NpdGlvbiA9IHsgeDogdGhpcy5zaXplLnggLyAyICsgdGhpcy5wb3NpdGlvbi54IC0gd2lkdGggLyAyLCB5OiB0aGlzLnNpemUueSArIHRoaXMucG9zaXRpb24ueSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYnVsbGV0UG9zaXRpb24gPSB7IHg6IHRoaXMucG9zaXRpb24ueCAtIHdpZHRoLCB5OiB0aGlzLnNpemUueSAvIDIgKyB0aGlzLnBvc2l0aW9uLnkgLSBoZWlnaHQgLyAyIH07XG4gICAgICAgIH1cbiAgICAgICAgZW50aXR5TWFuYWdlci5zcGF3bkVudGl0eSgnQnVsbGV0JywgYnVsbGV0UG9zaXRpb24sIHRoaXMuZGlyZWN0aW9uLCB0aGlzKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignc2hvdENEJywgY2QpO1xuICAgIH1cbiAgICBkaWUoKSB7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ2RlYXRoJywgREVBVEhfRlJBTUVTKTtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheSgnZXhwbG9kZScpO1xuICAgICAgICBlbnRpdHlNYW5hZ2VyLnRvUmVtb3ZlKHRoaXMuaWQpO1xuICAgIH1cbiAgICBmb3JnaXZlQ29sbGlzaW9uKHRpbGUpIHtcbiAgICAgICAgY29uc3QgW3BvaW50MSwgcG9pbnQyXSA9IHRoaXMuZ2V0RnJvbnRDb2xsaXNpb25Qb2ludHMoKTtcbiAgICAgICAgY29uc3QgdGlsZVBvcyA9IHRpbGUucG9zaXRpb247XG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlRvcCB8fCB0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkJvdHRvbSkge1xuICAgICAgICAgICAgY29uc3QgZGlmZlBvaW50ID0gTWF0aC5taW4oTWF0aC5hYnModGlsZVBvcy54IC0gcG9pbnQxLngpLCBNYXRoLmFicyh0aWxlUG9zLnggLSBwb2ludDIueCkpO1xuICAgICAgICAgICAgaWYgKGRpZmZQb2ludCA+IDAgJiYgZGlmZlBvaW50IDwgNSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gdGhpcy5wb3NpdGlvbi54ID4gdGlsZVBvcy54ID8gdGlsZVBvcy54ICsgVElMRV9TSURFIDogdGlsZVBvcy54IC0gdGhpcy5zaXplLng7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgeDogZGVzdGluYXRpb24sIHk6IHRoaXMucHJldlBvc2l0aW9uLnkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkxlZnQgfHwgdGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5SaWdodCkge1xuICAgICAgICAgICAgY29uc3QgZGlmZlBvaW50ID0gTWF0aC5taW4oTWF0aC5hYnModGlsZVBvcy55IC0gcG9pbnQxLnkpLCBNYXRoLmFicyh0aWxlUG9zLnkgLSBwb2ludDIueSkpO1xuICAgICAgICAgICAgaWYgKGRpZmZQb2ludCA+IDAgJiYgZGlmZlBvaW50IDwgNSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gdGhpcy5wb3NpdGlvbi55ID4gdGlsZVBvcy55ID8gdGlsZVBvcy55ICsgVElMRV9TSURFIDogdGlsZVBvcy55IC0gdGhpcy5zaXplLnk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgeDogdGhpcy5wcmV2UG9zaXRpb24ueCwgeTogZGVzdGluYXRpb24gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGFuay5qcy5tYXAiLCJpbXBvcnQgeyBQbGF5ZXIsIEVuZW15LCBQb3dlcnVwLCBGbGFnLCBUYW5rLCBCdWxsZXQgfSBmcm9tICcuLyc7XG5leHBvcnQgZnVuY3Rpb24gaXNUYW5rKGVudGl0eSkge1xuICAgIHJldHVybiBlbnRpdHkgaW5zdGFuY2VvZiBUYW5rO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzUGxheWVyKGVudGl0eSkge1xuICAgIHJldHVybiBlbnRpdHkgaW5zdGFuY2VvZiBQbGF5ZXI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNFbmVteShlbnRpdHkpIHtcbiAgICByZXR1cm4gZW50aXR5IGluc3RhbmNlb2YgRW5lbXk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCdWxsZXQoZW50aXR5KSB7XG4gICAgcmV0dXJuIGVudGl0eSBpbnN0YW5jZW9mIEJ1bGxldDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0ZsYWcoZW50aXR5KSB7XG4gICAgcmV0dXJuIGVudGl0eSBpbnN0YW5jZW9mIEZsYWc7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNQb3dlcnVwKGVudGl0eSkge1xuICAgIHJldHVybiBlbnRpdHkgaW5zdGFuY2VvZiBQb3dlcnVwO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3VhcmRzLmpzLm1hcCIsImltcG9ydCB7IEVudGl0eSB9IGZyb20gJy4vRW50aXR5JztcbmltcG9ydCB7IFBPV0VSVVBfU0laRSwgUE9XRVJVUF9TUEFXTl9DRCwgUE9XRVJVUF9CTElOS19GUkFNRVMgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgU291bmRNYW5hZ2VyLCBlbnRpdHlNYW5hZ2VyLCBUaW1lTWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzJztcbmltcG9ydCB7IGFzc2V0c0hvbGRlciB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7IGlzUGxheWVyIH0gZnJvbSAnLi9ndWFyZHMnO1xuZXhwb3J0IGNsYXNzIFBvd2VydXBFdmVudHMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm9ic2VydmVycyA9IHt9O1xuICAgIH1cbiAgICBzdWJzY3JpYmUoZW50aXR5SWQsIG9ic2VydmVyKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzW2VudGl0eUlkXSA9IG9ic2VydmVyO1xuICAgIH1cbiAgICB1bnN1YnNjcmliZShlbnRpdHlJZCkge1xuICAgICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbZW50aXR5SWRdO1xuICAgIH1cbiAgICBub3RpZnkoZXZlbnRUeXBlKSB7XG4gICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5vYnNlcnZlcnMpLmZvckVhY2goKG9ic2VydmVyKSA9PiBvYnNlcnZlcihldmVudFR5cGUpKTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgcG93ZXJ1cEV2ZW50cyA9IG5ldyBQb3dlcnVwRXZlbnRzKCk7XG5leHBvcnQgY2xhc3MgUG93ZXJ1cCBleHRlbmRzIEVudGl0eSB7XG4gICAgY29uc3RydWN0b3IodHlwZSwgcG9zaXRpb24pIHtcbiAgICAgICAgc3VwZXIocG9zaXRpb24sIE9iamVjdC5hc3NpZ24oe30sIFBPV0VSVVBfU0laRSkpO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyID0gbmV3IFRpbWVNYW5hZ2VyKCk7XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyID0gbmV3IFNvdW5kTWFuYWdlcihbJ3Bvd2VydXAnXSk7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ2xpdmUnLCBQT1dFUlVQX1NQQVdOX0NEKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBjb25zdCBsaXZlc0xlZnQgPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdsaXZlJyk7XG4gICAgICAgIGlmIChsaXZlc0xlZnQgPT09IDApIHtcbiAgICAgICAgICAgIGVudGl0eU1hbmFnZXIudG9SZW1vdmUodGhpcy5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGl2ZXNMZWZ0ID09PSBQT1dFUlVQX0JMSU5LX0ZSQU1FUykge1xuICAgICAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignYmxpbmsnLCBQT1dFUlVQX0JMSU5LX0ZSQU1FUyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5kZWNyZW1lbnRUaW1lcnMoKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBibGlua0xlZnQgPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdibGluaycpO1xuICAgICAgICBpZiAoYmxpbmtMZWZ0ICYmIGJsaW5rTGVmdCAlIDUwID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBhc3NldHNIb2xkZXIuc3ByaXRlcy5wb3dlcnVwW3RoaXMudHlwZV0odGhpcy5wb3NpdGlvbiwgdGhpcy5zaXplKTtcbiAgICB9XG4gICAgcmVzb2x2ZUVudGl0eUNvbGxpc2lvbihvdGhlcikge1xuICAgICAgICBpZiAoaXNQbGF5ZXIob3RoZXIpKSB7XG4gICAgICAgICAgICBlbnRpdHlNYW5hZ2VyLnRvUmVtb3ZlKHRoaXMuaWQpO1xuICAgICAgICAgICAgcG93ZXJ1cEV2ZW50cy5ub3RpZnkodGhpcy50eXBlKTtcbiAgICAgICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXkoJ3Bvd2VydXAnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvd2VydXAuanMubWFwIiwiaW1wb3J0IHsgVGFuayB9IGZyb20gJy4vVGFuayc7XG5pbXBvcnQgeyBhc3NldHNIb2xkZXIsIGFuaW1hdGVWYXJpYWJsZVNwcml0ZXMgfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgeyBEaXJlY3Rpb24sIFBvd2VydXBUeXBlcywgUGxheWVyUG93ZXIsIENvbnRyb2xLZXlzIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgUExBWUVSX1NQQVdOX1BPU0lUSU9OLCBUQU5LX1NJWkUsIFBMQVlFUl9TVEFUUywgU1BBV05fRlJBTUVTLCBERUFUSF9GUkFNRVMsIElOVklOQ0lCTEVfRlJBTUVTLCB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBwb3dlcnVwRXZlbnRzIH0gZnJvbSAnLi9Qb3dlcnVwJztcbmltcG9ydCB7IGtleWJvYXJkIH0gZnJvbSAnLi4va2V5Ym9hcmQnO1xuaW1wb3J0IHsgU291bmRNYW5hZ2VyLCBUaW1lTWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzJztcbmltcG9ydCB7IGlzUG93ZXJ1cCwgaXNCdWxsZXQgfSBmcm9tICcuL2d1YXJkcyc7XG5mdW5jdGlvbiBwb3dlcnVwT2JzZXJ2ZXIocG93ZXJ1cFR5cGUpIHtcbiAgICBpZiAocG93ZXJ1cFR5cGUgPT09IFBvd2VydXBUeXBlcy5UYW5rKSB7XG4gICAgICAgIHRoaXMubGl2ZXMgKz0gMTtcbiAgICB9XG4gICAgZWxzZSBpZiAocG93ZXJ1cFR5cGUgPT09IFBvd2VydXBUeXBlcy5IZWxtZXQpIHtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignaW52aW5jaWJsZScsIElOVklOQ0lCTEVfRlJBTUVTKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocG93ZXJ1cFR5cGUgPT09IFBvd2VydXBUeXBlcy5TdGFyICYmIHRoaXMucG93ZXIgPCBQbGF5ZXJQb3dlci5TZWNvbmQpIHtcbiAgICAgICAgdGhpcy5wb3dlciArPSAxO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBQbGF5ZXIgZXh0ZW5kcyBUYW5rIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoT2JqZWN0LmFzc2lnbih7fSwgUExBWUVSX1NQQVdOX1BPU0lUSU9OKSwgT2JqZWN0LmFzc2lnbih7fSwgVEFOS19TSVpFKSwgRGlyZWN0aW9uLlRvcCk7XG4gICAgICAgIHRoaXMubGl2ZXMgPSAzO1xuICAgICAgICB0aGlzLnBvd2VyID0gUGxheWVyUG93ZXIuRGVmYXVsdDtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlciA9IG5ldyBUaW1lTWFuYWdlcigpO1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlciA9IG5ldyBTb3VuZE1hbmFnZXIoW1xuICAgICAgICAgICAgJ2V4cGxvZGUnLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRyYWNrTmFtZTogJ25ldXRyYWwnLFxuICAgICAgICAgICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRyYWNrTmFtZTogJ21vdmUnLFxuICAgICAgICAgICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignc3Bhd24nLCBTUEFXTl9GUkFNRVMpO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdpbnZpbmNpYmxlJywgSU5WSU5DSUJMRV9GUkFNRVMpO1xuICAgICAgICBwb3dlcnVwRXZlbnRzLnN1YnNjcmliZSh0aGlzLmlkLCBwb3dlcnVwT2JzZXJ2ZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5kZWNyZW1lbnRUaW1lcnMoKTtcbiAgICAgICAgY29uc3QgZGVhdGggPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdkZWF0aCcpO1xuICAgICAgICBjb25zdCBzcGF3biA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ3NwYXduJyk7XG4gICAgICAgIGlmIChkZWF0aCkge1xuICAgICAgICAgICAgaWYgKGRlYXRoID09PSAxKVxuICAgICAgICAgICAgICAgIHRoaXMucmVzcGF3bih0cnVlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzcGF3bikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXkoJ25ldXRyYWwnKTtcbiAgICAgICAgdGhpcy5wcm9jZXNzSW5wdXQoKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBzcGF3biA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ3NwYXduJyk7XG4gICAgICAgIGNvbnN0IGRlYXRoID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignZGVhdGgnKTtcbiAgICAgICAgY29uc3QgaW52aW5jaWJsZSA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ2ludmluY2libGUnKTtcbiAgICAgICAgaWYgKHNwYXduKSB7XG4gICAgICAgICAgICByZXR1cm4gYW5pbWF0ZVZhcmlhYmxlU3ByaXRlcyh0aGlzLnBvc2l0aW9uLCBhc3NldHNIb2xkZXIudmFyaWFibGVTcHJpdGVzLnRhbmtTcGF3biwgU1BBV05fRlJBTUVTLCBzcGF3bik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVhdGgpIHtcbiAgICAgICAgICAgIHJldHVybiBhbmltYXRlVmFyaWFibGVTcHJpdGVzKHRoaXMucG9zaXRpb24sIGFzc2V0c0hvbGRlci52YXJpYWJsZVNwcml0ZXMudGFua0Rlc3RydWN0aW9uLCBERUFUSF9GUkFNRVMsIGRlYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbnZpbmNpYmxlKSB7XG4gICAgICAgICAgICBjb25zdCBpbnZpbmNpYmxlU3ByaXRlcyA9IGFzc2V0c0hvbGRlci5zcHJpdGVzLmludmluY2libGU7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGludmluY2libGUgJSBpbnZpbmNpYmxlU3ByaXRlcy5sZW5ndGg7XG4gICAgICAgICAgICBpbnZpbmNpYmxlU3ByaXRlc1tpbmRleF0odGhpcy5wb3NpdGlvbiwgdGhpcy5zaXplKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW1hdGVNb3ZlbWVudChhc3NldHNIb2xkZXIuc3ByaXRlcy5wbGF5ZXJbdGhpcy5wb3dlcl1bdGhpcy5kaXJlY3Rpb25dKTtcbiAgICB9XG4gICAgcHJvY2Vzc0lucHV0KCkge1xuICAgICAgICBjb25zdCBrZXkgPSBrZXlib2FyZC5nZXRLZXkoKTtcbiAgICAgICAgbGV0IGlzTW92aW5nID0gdHJ1ZTtcbiAgICAgICAgaWYgKGtleSA9PT0gQ29udHJvbEtleXMuQXJyb3dVcCkge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBEaXJlY3Rpb24uVG9wO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gQ29udHJvbEtleXMuQXJyb3dEb3duKSB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IERpcmVjdGlvbi5Cb3R0b207XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBDb250cm9sS2V5cy5BcnJvd0xlZnQpIHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gRGlyZWN0aW9uLkxlZnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBDb250cm9sS2V5cy5BcnJvd1JpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IERpcmVjdGlvbi5SaWdodDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBhdXNlKCdtb3ZlJyk7XG4gICAgICAgICAgICBpc01vdmluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrZXkgPT09IENvbnRyb2xLZXlzLlNwYWNlKSB7XG4gICAgICAgICAgICB0aGlzLnNob3QoUExBWUVSX1NUQVRTW3RoaXMucG93ZXJdLnNob3RDRCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTW92aW5nKSB7XG4gICAgICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wYXVzZSgnbmV1dHJhbCcpO1xuICAgICAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheSgnbW92ZScpO1xuICAgICAgICAgICAgdGhpcy5tb3ZlKFBMQVlFUl9TVEFUU1t0aGlzLnBvd2VyXS52ZWxvY2l0eSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzb2x2ZUVkZ2VDb2xsaXNpb24oKSB7XG4gICAgICAgIHRoaXMuZ29CYWNrKCk7XG4gICAgfVxuICAgIHJlc29sdmVUaWxlQ29sbGlzaW9uKHRpbGVzKSB7XG4gICAgICAgIGlmICh0aWxlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1BvcyA9IHRoaXMuZm9yZ2l2ZUNvbGxpc2lvbih0aWxlc1swXSk7XG4gICAgICAgICAgICBpZiAobmV3UG9zKVxuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBuZXdQb3MpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMuZ29CYWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmdvQmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc29sdmVFbnRpdHlDb2xsaXNpb24ob3RoZXIpIHtcbiAgICAgICAgY29uc3QgZGVhdGggPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdkZWF0aCcpO1xuICAgICAgICBpZiAoaXNQb3dlcnVwKG90aGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzQnVsbGV0KG90aGVyKSAmJiAhZGVhdGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGludmluY2libGUgPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdpbnZpbmNpYmxlJyk7XG4gICAgICAgICAgICBpZiAoaW52aW5jaWJsZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdkZWF0aCcsIERFQVRIX0ZSQU1FUyk7XG4gICAgICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5KCdleHBsb2RlJyk7XG4gICAgICAgICAgICB0aGlzLmxpdmVzIC09IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5saXZlcyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGllKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmdvQmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc3Bhd24oZGVmYXVsdFBvd2VyID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKGRlZmF1bHRQb3dlcilcbiAgICAgICAgICAgIHRoaXMucG93ZXIgPSBQbGF5ZXJQb3dlci5EZWZhdWx0O1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wYXVzZUFsbCgpO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdzcGF3bicsIFNQQVdOX0ZSQU1FUyk7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ2ludmluY2libGUnLCBJTlZJTkNJQkxFX0ZSQU1FUyk7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBQTEFZRVJfU1BBV05fUE9TSVRJT04pO1xuICAgICAgICB0aGlzLnByZXZQb3NpdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIFBMQVlFUl9TUEFXTl9QT1NJVElPTik7XG4gICAgfVxuICAgIGRlY29uc3RydWN0KCkge1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wYXVzZUFsbCgpO1xuICAgICAgICBwb3dlcnVwRXZlbnRzLnVuc3Vic2NyaWJlKHRoaXMuaWQpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBsYXllci5qcy5tYXAiLCJpbXBvcnQgeyBNb3ZhYmxlIH0gZnJvbSAnLi9Nb3ZhYmxlJztcbmltcG9ydCB7IFRpbGVzLCBQbGF5ZXJQb3dlciB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IEJVTExFVF9WRUxPQ0lUWSwgQlVMTEVUX1NJWkUgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgU291bmRNYW5hZ2VyLCBlbnRpdHlNYW5hZ2VyIH0gZnJvbSAnLi4vbWFuYWdlcnMvJztcbmltcG9ydCB7IGJ1bGxldFRocm91Z2ggfSBmcm9tICcuLi9UaWxlTWFwJztcbmltcG9ydCB7IGlzUGxheWVyLCBpc0VuZW15LCBpc1Bvd2VydXAgfSBmcm9tICcuL2d1YXJkcyc7XG5pbXBvcnQgeyBhc3NldHNIb2xkZXIgfSBmcm9tICcuLi91dGlscyc7XG5leHBvcnQgY2xhc3MgQnVsbGV0IGV4dGVuZHMgTW92YWJsZSB7XG4gICAgY29uc3RydWN0b3IocG9zaXRpb24sIGRpcmVjdGlvbiwgc2hvb3Rlcikge1xuICAgICAgICBzdXBlcihwb3NpdGlvbiwgT2JqZWN0LmFzc2lnbih7fSwgQlVMTEVUX1NJWkUpLCBkaXJlY3Rpb24pO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbiAgICAgICAgdGhpcy5zaG9vdGVyID0gc2hvb3RlcjtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIgPSBuZXcgU291bmRNYW5hZ2VyKFsnaGl0JywgJ2hpdGRtZyddKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLm1vdmUoQlVMTEVUX1ZFTE9DSVRZKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICB0aGlzLmFuaW1hdGVNb3ZlbWVudChhc3NldHNIb2xkZXIuc3ByaXRlcy5idWxsZXRbdGhpcy5kaXJlY3Rpb25dKTtcbiAgICB9XG4gICAgcmVzb2x2ZUVkZ2VDb2xsaXNpb24oKSB7XG4gICAgICAgIGVudGl0eU1hbmFnZXIudG9SZW1vdmUodGhpcy5pZCk7XG4gICAgfVxuICAgIHJlc29sdmVUaWxlQ29sbGlzaW9uKHRpbGVzLCB0aWxlTWFwKSB7XG4gICAgICAgIGlmICh0aWxlcy5ldmVyeSh0aWxlID0+IGJ1bGxldFRocm91Z2guaW5jbHVkZXModGlsZS50eXBlKSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGVudGl0eU1hbmFnZXIudG9SZW1vdmUodGhpcy5pZCk7XG4gICAgICAgIGNvbnN0IGNhbkRlc3Ryb3lTdGVlbCA9IGlzUGxheWVyKHRoaXMuc2hvb3RlcikgJiYgdGhpcy5zaG9vdGVyLnBvd2VyID09PSBQbGF5ZXJQb3dlci5TZWNvbmQ7XG4gICAgICAgIGNvbnN0IGhhc1N0ZWVsID0gdGlsZXMuc29tZSh0aWxlID0+IHRpbGUudHlwZSA9PT0gVGlsZXMuU3RlZWwpO1xuICAgICAgICBpZiAoaGFzU3RlZWwpIHtcbiAgICAgICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXkoJ2hpdCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheSgnaGl0ZG1nJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGlsZXMuZm9yRWFjaCh0aWxlID0+IHtcbiAgICAgICAgICAgIGlmIChidWxsZXRUaHJvdWdoLmluY2x1ZGVzKHRpbGUudHlwZSkgfHwgKHRpbGUudHlwZSA9PT0gVGlsZXMuU3RlZWwgJiYgIWNhbkRlc3Ryb3lTdGVlbCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGlsZU1hcC5kZXN0cm95KHRpbGUucG9zaXRpb24pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVzb2x2ZUVudGl0eUNvbGxpc2lvbihvdGhlcikge1xuICAgICAgICBpZiAoaXNQb3dlcnVwKG90aGVyKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGlzUGxheWVyKHRoaXMuc2hvb3RlcikgJiYgaXNFbmVteShvdGhlcikgJiYgb3RoZXIudHlwZSA+PSAxKSB7XG4gICAgICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5KCdoaXQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbnRpdHlNYW5hZ2VyLnRvUmVtb3ZlKHRoaXMuaWQpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJ1bGxldC5qcy5tYXAiLCJpbXBvcnQgeyBUYW5rIH0gZnJvbSAnLi9UYW5rJztcbmltcG9ydCB7IGFzc2V0c0hvbGRlciwgYW5pbWF0ZVZhcmlhYmxlU3ByaXRlcywgY2hlY2tFbnRpdHlDb2xsaXNpb24gfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgeyBEaXJlY3Rpb24sIFBvd2VydXBUeXBlcywgVGFua1R5cGVzIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgVEFOS19TSVpFLCBTUEFXTl9GUkFNRVMsIERFQVRIX0ZSQU1FUywgRlJFRVpFX0ZSQU1FUywgRU5FTVlfU1RBVFMgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgU291bmRNYW5hZ2VyLCBUaW1lTWFuYWdlciwgZW50aXR5TWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzJztcbmltcG9ydCB7IHBvd2VydXBFdmVudHMgfSBmcm9tICcuL1Bvd2VydXAnO1xuaW1wb3J0IHsgaXNQbGF5ZXIsIGlzRW5lbXksIGlzQnVsbGV0LCBpc1Bvd2VydXAgfSBmcm9tICcuL2d1YXJkcyc7XG5mdW5jdGlvbiBwb3dlcnVwT2JzZXJ2ZXIocG93ZXJ1cFR5cGUpIHtcbiAgICBpZiAocG93ZXJ1cFR5cGUgPT09IFBvd2VydXBUeXBlcy5TdG9wd2F0Y2gpIHtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignZnJlZXplJywgRlJFRVpFX0ZSQU1FUyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHBvd2VydXBUeXBlID09PSBQb3dlcnVwVHlwZXMuR3JlbmFkZSkge1xuICAgICAgICBpZiAoIXRoaXMudGltZU1hbmFnZXIuc29tZShbJ2RlYXRoJywgJ3NwYXduJ10pKVxuICAgICAgICAgICAgdGhpcy5kaWUoKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgRW5lbXkgZXh0ZW5kcyBUYW5rIHtcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBwb3NpdGlvbikge1xuICAgICAgICBzdXBlcihwb3NpdGlvbiwgT2JqZWN0LmFzc2lnbih7fSwgVEFOS19TSVpFKSwgRGlyZWN0aW9uLkJvdHRvbSk7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMubGl2ZXMgPSBFTkVNWV9TVEFUU1t0eXBlXS5saXZlcztcbiAgICAgICAgdGhpcy5wcmV2VGlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlciA9IG5ldyBUaW1lTWFuYWdlcigpO1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlciA9IG5ldyBTb3VuZE1hbmFnZXIoWydleHBsb2RlJ10pO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdzcGF3bicsIFNQQVdOX0ZSQU1FUyk7XG4gICAgICAgIHBvd2VydXBFdmVudHMuc3Vic2NyaWJlKHRoaXMuaWQsIHBvd2VydXBPYnNlcnZlci5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBjb25zdCBzcGF3biA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ3NwYXduJyk7XG4gICAgICAgIGNvbnN0IGRlYXRoID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignZGVhdGgnKTtcbiAgICAgICAgY29uc3QgZnJlZXplID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignZnJlZXplJyk7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuZGVjcmVtZW50VGltZXJzKCk7XG4gICAgICAgIGlmIChzcGF3bikge1xuICAgICAgICAgICAgY29uc3QgaXNJbnRlcnNlY3RpbmcgPSB0aGlzLmlzU3Bhd25TcG90Q2xlYXIoKTtcbiAgICAgICAgICAgIGlmIChpc0ludGVyc2VjdGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ3NwYXduJywgU1BBV05fRlJBTUVTKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVhdGggfHwgZnJlZXplKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFpTW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5zaG90KEVORU1ZX1NUQVRTW3RoaXMudHlwZV0uc2hvdENEKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHNwYXduID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignc3Bhd24nKTtcbiAgICAgICAgY29uc3QgZGVhdGggPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdkZWF0aCcpO1xuICAgICAgICBpZiAoc3Bhd24pIHtcbiAgICAgICAgICAgIHJldHVybiBhbmltYXRlVmFyaWFibGVTcHJpdGVzKHRoaXMucG9zaXRpb24sIGFzc2V0c0hvbGRlci52YXJpYWJsZVNwcml0ZXMudGFua1NwYXduLCBTUEFXTl9GUkFNRVMsIHNwYXduKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZWF0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGFuaW1hdGVWYXJpYWJsZVNwcml0ZXModGhpcy5wb3NpdGlvbiwgYXNzZXRzSG9sZGVyLnZhcmlhYmxlU3ByaXRlcy50YW5rRGVzdHJ1Y3Rpb24sIERFQVRIX0ZSQU1FUywgZGVhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnR5cGUgPT09IFRhbmtUeXBlcy5Bcm1vcmVkKSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGVNb3ZlbWVudChhc3NldHNIb2xkZXIuc3ByaXRlcy5lbmVteVt0aGlzLnR5cGVdW3RoaXMubGl2ZXNdW3RoaXMuZGlyZWN0aW9uXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGVNb3ZlbWVudChhc3NldHNIb2xkZXIuc3ByaXRlcy5lbmVteVt0aGlzLnR5cGVdW3RoaXMuZGlyZWN0aW9uXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWlNb3ZlKCkge1xuICAgICAgICBjb25zdCB7IHZlbG9jaXR5IH0gPSBFTkVNWV9TVEFUU1t0aGlzLnR5cGVdO1xuICAgICAgICBpZiAoTWF0aC5hYnMoTWF0aC5mbG9vcih0aGlzLnByZXZUaWxlLnggLSB0aGlzLnBvc2l0aW9uLngpKSA+IDEyMCB8fFxuICAgICAgICAgICAgTWF0aC5hYnMoTWF0aC5mbG9vcih0aGlzLnByZXZUaWxlLnkgLSB0aGlzLnBvc2l0aW9uLnkpKSA+IDEyMCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2VGlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMucG9zaXRpb24pO1xuICAgICAgICAgICAgdGhpcy5zZXRSYW5kb21EaXJlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMubW92ZSh2ZWxvY2l0eSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1vdmUodmVsb2NpdHkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc29sdmVFZGdlQ29sbGlzaW9uKCkge1xuICAgICAgICB0aGlzLmdvQmFjaygpO1xuICAgICAgICB0aGlzLnNldFJhbmRvbURpcmVjdGlvbigpO1xuICAgICAgICAvLyB0aGlzLnNldE9wb3NpdGVEaXJlY3Rpb24oKTtcbiAgICB9XG4gICAgcmVzb2x2ZVRpbGVDb2xsaXNpb24odGlsZXMpIHtcbiAgICAgICAgaWYgKHRpbGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgY29uc3QgbmV3UG9zID0gdGhpcy5mb3JnaXZlQ29sbGlzaW9uKHRpbGVzWzBdKTtcbiAgICAgICAgICAgIGlmIChuZXdQb3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgbmV3UG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UmFuZG9tRGlyZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5nb0JhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UmFuZG9tRGlyZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLmdvQmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc29sdmVFbnRpdHlDb2xsaXNpb24ob3RoZXIpIHtcbiAgICAgICAgaWYgKGlzUG93ZXJ1cChvdGhlcikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0J1bGxldChvdGhlcikgJiYgaXNQbGF5ZXIob3RoZXIuc2hvb3RlcikpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmxpdmVzID09PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubGl2ZXMgLT0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0VuZW15KG90aGVyKSkge1xuICAgICAgICAgICAgdGhpcy5nb0JhY2soKTtcbiAgICAgICAgICAgIHRoaXMuc2V0T3Bvc2l0ZURpcmVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzUGxheWVyKG90aGVyKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ3Nob3RDRCcpID4gMTApXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRPcG9zaXRlRGlyZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLmdvQmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldFJhbmRvbURpcmVjdGlvbigpIHtcbiAgICAgICAgY29uc3QgaXRlbXMgPSBbRGlyZWN0aW9uLlRvcCwgRGlyZWN0aW9uLlJpZ2h0LCBEaXJlY3Rpb24uQm90dG9tLCBEaXJlY3Rpb24uTGVmdF0uZmlsdGVyKGRpcmVjdGlvbiA9PiBkaXJlY3Rpb24gIT09IHRoaXMuZGlyZWN0aW9uKTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBpdGVtcy5sZW5ndGgpO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGl0ZW1zW2luZGV4XTtcbiAgICB9XG4gICAgc2V0T3Bvc2l0ZURpcmVjdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uVG9wKSB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IERpcmVjdGlvbi5Cb3R0b207XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Cb3R0b20pIHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gRGlyZWN0aW9uLlRvcDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlJpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IERpcmVjdGlvbi5MZWZ0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBEaXJlY3Rpb24uUmlnaHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNTcGF3blNwb3RDbGVhcigpIHtcbiAgICAgICAgcmV0dXJuIGVudGl0eU1hbmFnZXIuZW50aXRpZXNcbiAgICAgICAgICAgIC5maWx0ZXIoZW50aXR5ID0+IGVudGl0eS5pZCAhPT0gdGhpcy5pZCAmJiAhaXNCdWxsZXQoZW50aXR5KSlcbiAgICAgICAgICAgIC5maWx0ZXIoZW50aXR5ID0+IHtcbiAgICAgICAgICAgIGlmIChpc0VuZW15KGVudGl0eSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIWVudGl0eS50aW1lTWFuYWdlci5nZXRUaW1lcignc3Bhd24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnNvbWUoZW50aXR5ID0+IGNoZWNrRW50aXR5Q29sbGlzaW9uKGVudGl0eS5nZXRCb3VuZGluZ0JveCgpLCB0aGlzLmdldEJvdW5kaW5nQm94KCkpKTtcbiAgICB9XG4gICAgZGVjb25zdHJ1Y3QoKSB7XG4gICAgICAgIHBvd2VydXBFdmVudHMudW5zdWJzY3JpYmUodGhpcy5pZCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RW5lbXkuanMubWFwIiwiaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnLi9FbnRpdHknO1xuaW1wb3J0IHsgYXNzZXRzSG9sZGVyIH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHsgRkxBR19TSVpFLCBGTEFHX1BPU0lUSU9OIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB7IGlzQnVsbGV0IH0gZnJvbSAnLi9ndWFyZHMnO1xuZXhwb3J0IGNsYXNzIEZsYWcgZXh0ZW5kcyBFbnRpdHkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihGTEFHX1BPU0lUSU9OLCBGTEFHX1NJWkUpO1xuICAgICAgICB0aGlzLmlzRGVzdHJveWVkID0gZmFsc2U7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIGFzc2V0c0hvbGRlci5zcHJpdGVzLmZsYWdEZWF0aCh0aGlzLnBvc2l0aW9uLCB0aGlzLnNpemUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXNzZXRzSG9sZGVyLnNwcml0ZXMuZmxhZyh0aGlzLnBvc2l0aW9uLCB0aGlzLnNpemUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc29sdmVFbnRpdHlDb2xsaXNpb24ob3RoZXIpIHtcbiAgICAgICAgaWYgKGlzQnVsbGV0KG90aGVyKSkge1xuICAgICAgICAgICAgdGhpcy5pc0Rlc3Ryb3llZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1GbGFnLmpzLm1hcCIsImltcG9ydCAqIGFzIGVudGl0aWVzIGZyb20gJy4uL2VudGl0aWVzJztcbmltcG9ydCB7IGNoZWNrRW50aXR5Q29sbGlzaW9uIH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHsgcmlnaWQgfSBmcm9tICcuLi9UaWxlTWFwJztcbmltcG9ydCB7IGlzUGxheWVyLCBpc0VuZW15LCBpc1RhbmssIGlzRmxhZywgaXNQb3dlcnVwIH0gZnJvbSAnLi4vZW50aXRpZXMvZ3VhcmRzJztcbmltcG9ydCB7IFRJTEVfU0lERSB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5leHBvcnQgY2xhc3MgRW50aXR5TWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudG9SZW1vdmUgPSAoaWQpID0+IHtcbiAgICAgICAgICAgIHRoaXMudG9SZW1vdmVRdWV1ZS5hZGQoaWQpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlbW92ZUZyb21RdWV1ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudG9SZW1vdmVRdWV1ZS5mb3JFYWNoKGVudGl0eUlkID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLnBvb2xbZW50aXR5SWRdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlYXRoTGVmdCA9IHRoaXMuX2NoZWNrRGVhdGgoZW50aXR5KTtcbiAgICAgICAgICAgICAgICBpZiAoIWRlYXRoTGVmdCkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wb29sW2VudGl0eUlkXTtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LmRlY29uc3RydWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9SZW1vdmVRdWV1ZS5kZWxldGUoZW50aXR5SWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBvb2wgPSB7fTtcbiAgICAgICAgdGhpcy50b1JlbW92ZVF1ZXVlID0gbmV3IFNldCgpO1xuICAgIH1cbiAgICBzcGF3bkVudGl0eSh0eXBlLCAuLi5hcmdzKSB7XG4gICAgICAgIGNvbnN0IGVudGl0eSA9IG5ldyBlbnRpdGllc1t0eXBlXSguLi5hcmdzKTtcbiAgICAgICAgdGhpcy5wb29sW2VudGl0eS5pZF0gPSBlbnRpdHk7XG4gICAgfVxuICAgIGdldEVuZW1pZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVudGl0aWVzLmZpbHRlcihpc0VuZW15KTtcbiAgICB9XG4gICAgZ2V0UGxheWVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbnRpdGllcy5maW5kKGlzUGxheWVyKTtcbiAgICB9XG4gICAgZ2V0RmxhZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW50aXRpZXMuZmluZChpc0ZsYWcpO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHRoaXMuZW50aXRpZXMuZm9yRWFjaChlbnRpdHkgPT4gZW50aXR5LnJlbmRlcigpKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLmVudGl0aWVzLmZvckVhY2goZW50aXR5ID0+IGVudGl0eS51cGRhdGUoKSk7XG4gICAgfVxuICAgIGNoZWNrQ29sbGlzaW9ucyh0aWxlTWFwKSB7XG4gICAgICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMuZW50aXRpZXMuZm9yRWFjaChlbnRpdHkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzUG93ZXJ1cChlbnRpdHkpIHx8IGlzRmxhZyhlbnRpdHkpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tUaWxlQ29sbGlzaW9uKGVudGl0eSwgdGlsZU1hcCk7XG4gICAgICAgICAgICB0aGlzLmNoZWNrRW50aXRpZXNDb2xsaXNpb24oZW50aXR5LCBzZWVuKTtcbiAgICAgICAgICAgIHNlZW4uYWRkKGVudGl0eS5pZCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjaGVja1RpbGVDb2xsaXNpb24oZW50aXR5LCB0aWxlTWFwKSB7XG4gICAgICAgIGlmIChlbnRpdHkuaXNPdXRPZlNjcmVlbigpKSB7XG4gICAgICAgICAgICBlbnRpdHkucmVzb2x2ZUVkZ2VDb2xsaXNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IFtmaXJzdCwgc2Vjb25kXSA9IGVudGl0eS5nZXRGcm9udENvbGxpc2lvblBvaW50cygpO1xuICAgICAgICAgICAgY29uc3QgdGlsZXMgPSB0aWxlTWFwLmxvb2t1cFJhbmdlKGZpcnN0LCBzZWNvbmQpO1xuICAgICAgICAgICAgY29uc3QgY29sbGlkYWJsZSA9IHRpbGVzXG4gICAgICAgICAgICAgICAgLmZpbHRlcih0aWxlID0+IHJpZ2lkLmluY2x1ZGVzKHRpbGUudHlwZSkpXG4gICAgICAgICAgICAgICAgLmZpbHRlcih0aWxlID0+IGNoZWNrRW50aXR5Q29sbGlzaW9uKGVudGl0eS5nZXRCb3VuZGluZ0JveCgpLCB7XG4gICAgICAgICAgICAgICAgeDE6IHRpbGUucG9zaXRpb24ueCxcbiAgICAgICAgICAgICAgICB4MjogdGlsZS5wb3NpdGlvbi54ICsgVElMRV9TSURFLFxuICAgICAgICAgICAgICAgIHkxOiB0aWxlLnBvc2l0aW9uLnksXG4gICAgICAgICAgICAgICAgeTI6IHRpbGUucG9zaXRpb24ueSArIFRJTEVfU0lERSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGlmIChjb2xsaWRhYmxlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGVudGl0eS5yZXNvbHZlVGlsZUNvbGxpc2lvbihjb2xsaWRhYmxlLCB0aWxlTWFwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjaGVja0VudGl0aWVzQ29sbGlzaW9uKGVudGl0eSwgc2Vlbikge1xuICAgICAgICB0aGlzLmVudGl0aWVzLmZvckVhY2gob3RoZXIgPT4ge1xuICAgICAgICAgICAgaWYgKGVudGl0eS5pZCA9PT0gb3RoZXIuaWQgfHwgc2Vlbi5oYXMob3RoZXIuaWQpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc0ludGVyYWN0aXZlKG90aGVyKSAmJiBjaGVja0VudGl0eUNvbGxpc2lvbihlbnRpdHkuZ2V0Qm91bmRpbmdCb3goKSwgb3RoZXIuZ2V0Qm91bmRpbmdCb3goKSkpIHtcbiAgICAgICAgICAgICAgICBlbnRpdHkucmVzb2x2ZUVudGl0eUNvbGxpc2lvbihvdGhlcik7XG4gICAgICAgICAgICAgICAgb3RoZXIucmVzb2x2ZUVudGl0eUNvbGxpc2lvbihlbnRpdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2xlYXIoY2xlYXJQbGF5ZXIgPSB0cnVlKSB7XG4gICAgICAgIGlmICghY2xlYXJQbGF5ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHBsYXllciA9IHRoaXMuZ2V0UGxheWVyKCk7XG4gICAgICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMucG9vbClcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGVudGl0eSA9PiBlbnRpdHkuaWQgIT09IHBsYXllci5pZClcbiAgICAgICAgICAgICAgICAuZm9yRWFjaChlbnRpdHkgPT4gZW50aXR5LmRlY29uc3RydWN0KCkpO1xuICAgICAgICAgICAgdGhpcy5wb29sID0geyBbcGxheWVyLmlkXTogcGxheWVyIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMucG9vbCkuZm9yRWFjaChlbnRpdHkgPT4gZW50aXR5LmRlY29uc3RydWN0KCkpO1xuICAgICAgICAgICAgdGhpcy5wb29sID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b1JlbW92ZVF1ZXVlID0gbmV3IFNldCgpO1xuICAgIH1cbiAgICBfaXNJbnRlcmFjdGl2ZShlbnRpdHkpIHtcbiAgICAgICAgaWYgKGlzVGFuayhlbnRpdHkpKSB7XG4gICAgICAgICAgICByZXR1cm4gIWVudGl0eS50aW1lTWFuYWdlci5zb21lKFsnc3Bhd24nLCAnZGVhdGgnXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIF9jaGVja0RlYXRoKGVudGl0eSkge1xuICAgICAgICBpZiAoaXNUYW5rKGVudGl0eSkpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHkudGltZU1hbmFnZXIuZ2V0VGltZXIoJ2RlYXRoJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGVudGl0aWVzKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyh0aGlzLnBvb2wpO1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBlbnRpdHlNYW5hZ2VyID0gbmV3IEVudGl0eU1hbmFnZXIoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVudGl0eU1hbmFnZXIuanMubWFwIiwiaW1wb3J0IHsgUG93ZXJ1cFR5cGVzLCBMYXllcnMgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IFBPV0VSVVBfU1BBV05fQ0QsIEVORU1ZX1NQQVdOX0NELCBFTkVNWV9TUEFXTl9QT1NJVElPTiB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IFRpbWVNYW5hZ2VyLCBTb3VuZE1hbmFnZXIsIGVudGl0eU1hbmFnZXIgfSBmcm9tICcuL21hbmFnZXJzJztcbmltcG9ydCB7IHJhbmRvbUludCB9IGZyb20gJy4vdXRpbHMnO1xuZXhwb3J0IGNsYXNzIFN0YWdlIHtcbiAgICBjb25zdHJ1Y3RvcihudW1iZXIsIG1hcCwgdGFua3MpIHtcbiAgICAgICAgdGhpcy5udW1iZXIgPSBudW1iZXI7XG4gICAgICAgIHRoaXMubWFwID0gbWFwO1xuICAgICAgICB0aGlzLnRhbmtzID0gWy4uLnRhbmtzXTtcbiAgICAgICAgdGhpcy5wb3dlcnVwc0F2YWlsYWJsZSA9IDU7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIgPSBuZXcgVGltZU1hbmFnZXIoKTtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIgPSBuZXcgU291bmRNYW5hZ2VyKFsnc3RhcnQnXSk7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ3Bvd2VydXBTcGF3bkNEJywgUE9XRVJVUF9TUEFXTl9DRCk7XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXkoJ3N0YXJ0Jyk7XG4gICAgICAgIGVudGl0eU1hbmFnZXIuc3Bhd25FbnRpdHkoJ0ZsYWcnKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLmRlY3JlbWVudFRpbWVycygpO1xuICAgICAgICB0aGlzLnNwYXduRW5lbXkoKTtcbiAgICAgICAgdGhpcy5zcGF3blBvd2VydXAoKTtcbiAgICB9XG4gICAgaXNGaW5pc2goKSB7XG4gICAgICAgIGNvbnN0IGVuZW1pZXMgPSBlbnRpdHlNYW5hZ2VyLmdldEVuZW1pZXMoKTtcbiAgICAgICAgcmV0dXJuICF0aGlzLnRhbmtzLmxlbmd0aCAmJiAhZW5lbWllcy5sZW5ndGg7XG4gICAgfVxuICAgIHNwYXduRW5lbXkoKSB7XG4gICAgICAgIGNvbnN0IGVuZW15U3Bhd25DRCA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ2VuZW15U3Bhd25DRCcpO1xuICAgICAgICBjb25zdCBlbmVtaWVzID0gZW50aXR5TWFuYWdlci5nZXRFbmVtaWVzKCk7XG4gICAgICAgIGlmICghdGhpcy50YW5rcy5sZW5ndGggfHwgZW5lbWllcy5sZW5ndGggPiA0IHx8IGVuZW15U3Bhd25DRClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgaW5kZXggPSByYW5kb21JbnQoMik7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ2VuZW15U3Bhd25DRCcsIEVORU1ZX1NQQVdOX0NEKTtcbiAgICAgICAgZW50aXR5TWFuYWdlci5zcGF3bkVudGl0eSgnRW5lbXknLCB0aGlzLnRhbmtzLnBvcCgpLCBPYmplY3QuYXNzaWduKHt9LCBFTkVNWV9TUEFXTl9QT1NJVElPTltpbmRleF0pKTtcbiAgICB9XG4gICAgc3Bhd25Qb3dlcnVwKCkge1xuICAgICAgICBjb25zdCBwb3dlcnVwU3Bhd25DRCA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ3Bvd2VydXBTcGF3bkNEJyk7XG4gICAgICAgIGlmIChwb3dlcnVwU3Bhd25DRCB8fCAhdGhpcy5wb3dlcnVwc0F2YWlsYWJsZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgaW5kZXggPSByYW5kb21JbnQoT2JqZWN0LmtleXMoUG93ZXJ1cFR5cGVzKS5sZW5ndGggLyAyKTtcbiAgICAgICAgZW50aXR5TWFuYWdlci5zcGF3bkVudGl0eSgnUG93ZXJ1cCcsIFBvd2VydXBUeXBlc1tQb3dlcnVwVHlwZXNbaW5kZXhdXSwgeyB4OiByYW5kb21JbnQoNTAwKSwgeTogcmFuZG9tSW50KDUwMCkgfSk7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ3Bvd2VydXBTcGF3bkNEJywgUE9XRVJVUF9TUEFXTl9DRCk7XG4gICAgICAgIHRoaXMucG93ZXJ1cHNBdmFpbGFibGUgLT0gMTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICB0aGlzLm1hcC5yZW5kZXJMYXllcihMYXllcnMudW5kZXIpO1xuICAgICAgICB0aGlzLm1hcC5yZW5kZXJMYXllcihMYXllcnMubWFpbik7XG4gICAgICAgIGVudGl0eU1hbmFnZXIucmVuZGVyKCk7XG4gICAgICAgIHRoaXMubWFwLnJlbmRlckxheWVyKExheWVycy5vdmVyKTtcbiAgICB9XG4gICAgZ2V0IHNjcmVlbk51bSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVtYmVyICsgMTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdGFnZS5qcy5tYXAiLCJpbXBvcnQgeyBtYXBzLCB0YW5rcyBhcyB0YW5rc0NvbmZpZyB9IGZyb20gJy4vc3RhZ2VDb25maWcnO1xuaW1wb3J0IHsgREVMVEFfVElNRSwgU0NSRUVOX0ZBREVfRlJBTUVTIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgVGlsZU1hcCB9IGZyb20gJy4vVGlsZU1hcCc7XG5pbXBvcnQgeyBTdGFnZSB9IGZyb20gJy4vU3RhZ2UnO1xuaW1wb3J0IHsgbWFpbiBhcyBtYWluU2NyZWVuLCBkYXNoYm9hcmQgfSBmcm9tICcuL3NjcmVlbnMnO1xuaW1wb3J0IHsgVGltZU1hbmFnZXIsIFNvdW5kTWFuYWdlciwgZW50aXR5TWFuYWdlciB9IGZyb20gJy4vbWFuYWdlcnMnO1xuZXhwb3J0IGNsYXNzIEdhbWUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmlzU3RhcnRTY3JlZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLmlzTG9zdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyID0gbmV3IFRpbWVNYW5hZ2VyKCk7XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyID0gbmV3IFNvdW5kTWFuYWdlcihbJ2dhbWVvdmVyJ10pO1xuICAgIH1cbiAgICBjcmVhdGVMb29wKCkge1xuICAgICAgICBsZXQgYWNjdW11bGF0ZWRUaW1lID0gMDtcbiAgICAgICAgbGV0IGxhc3RUaW1lID0gMDtcbiAgICAgICAgY29uc3QgbG9vcCA9IHRpbWUgPT4ge1xuICAgICAgICAgICAgYWNjdW11bGF0ZWRUaW1lICs9ICh0aW1lIC0gbGFzdFRpbWUpIC8gMTAwMDtcbiAgICAgICAgICAgIHdoaWxlIChhY2N1bXVsYXRlZFRpbWUgPiBERUxUQV9USU1FKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZFRpbWUgLT0gREVMVEFfVElNRTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICBsYXN0VGltZSA9IHRpbWU7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG4gICAgICAgIH07XG4gICAgICAgIGxvb3AoMCk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5kZWNyZW1lbnRUaW1lcnMoKTtcbiAgICAgICAgY29uc3Qgc3JlZW5GYWRlTGVmdCA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ3NjcmVlbkZhZGUnKTtcbiAgICAgICAgaWYgKHRoaXMuaXNMb3N0IHx8IHRoaXMuaXNTdGFydFNjcmVlbiB8fCBzcmVlbkZhZGVMZWZ0KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnN0YWdlLnVwZGF0ZSgpO1xuICAgICAgICBlbnRpdHlNYW5hZ2VyLnVwZGF0ZSgpO1xuICAgICAgICBlbnRpdHlNYW5hZ2VyLmNoZWNrQ29sbGlzaW9ucyh0aGlzLnN0YWdlLm1hcCk7XG4gICAgICAgIGVudGl0eU1hbmFnZXIucmVtb3ZlRnJvbVF1ZXVlKCk7XG4gICAgICAgIGNvbnN0IHBsYXllciA9IGVudGl0eU1hbmFnZXIuZ2V0UGxheWVyKCk7XG4gICAgICAgIGNvbnN0IGZsYWcgPSBlbnRpdHlNYW5hZ2VyLmdldEZsYWcoKTtcbiAgICAgICAgaWYgKCFwbGF5ZXIgfHwgZmxhZy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgaWYgKHBsYXllcilcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc291bmRNYW5hZ2VyLnBhdXNlQWxsKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nYW1lT3ZlcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0YWdlLmlzRmluaXNoKCkpIHtcbiAgICAgICAgICAgIHRoaXMudG9OZXh0U3RhZ2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIG1haW5TY3JlZW4uY2xlYXJTY3JlZW4oKTtcbiAgICAgICAgZGFzaGJvYXJkLmNsZWFyU2NyZWVuKCk7XG4gICAgICAgIGlmICh0aGlzLmlzU3RhcnRTY3JlZW4pIHtcbiAgICAgICAgICAgIG1haW5TY3JlZW4ucmVuZGVyU3RhcnRTY3JlZW4oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyR2FtZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbmRlckdhbWUoKSB7XG4gICAgICAgIGNvbnN0IHNyZWVuRmFkZUxlZnQgPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdzY3JlZW5GYWRlJyk7XG4gICAgICAgIHRoaXMuc3RhZ2UucmVuZGVyKCk7XG4gICAgICAgIGlmICh0aGlzLmlzTG9zdCkge1xuICAgICAgICAgICAgbWFpblNjcmVlbi5yZW5kZXJHYW1lT3ZlcihzcmVlbkZhZGVMZWZ0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzcmVlbkZhZGVMZWZ0KSB7XG4gICAgICAgICAgICBtYWluU2NyZWVuLnJlbmRlckNoYWluZ2luZ1N0YWdlKHNyZWVuRmFkZUxlZnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcGxheWVyID0gZW50aXR5TWFuYWdlci5nZXRQbGF5ZXIoKTtcbiAgICAgICAgICAgIGRhc2hib2FyZC5yZW5kZXIocGxheWVyLmxpdmVzLCB0aGlzLnN0YWdlLnNjcmVlbk51bSwgdGhpcy5zdGFnZS50YW5rcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2FtZU92ZXIoKSB7XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXkoJ2dhbWVvdmVyJyk7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ3NjcmVlbkZhZGUnLCBTQ1JFRU5fRkFERV9GUkFNRVMpO1xuICAgICAgICB0aGlzLmlzTG9zdCA9IHRydWU7XG4gICAgfVxuICAgIGlzV2FpdGluZ0ZvclJlc3RhcnQoKSB7XG4gICAgICAgIGNvbnN0IGdhbWVPdmVyVGltZSA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ3NjcmVlbkZhZGUnKTtcbiAgICAgICAgcmV0dXJuICFnYW1lT3ZlclRpbWUgJiYgdGhpcy5pc0xvc3Q7XG4gICAgfVxuICAgIGdldE5leHRTdGFnZU51bSgpIHtcbiAgICAgICAgbGV0IG5ld051bSA9IHRoaXMuc3RhZ2UubnVtYmVyICsgMTtcbiAgICAgICAgaWYgKG5ld051bSA+IG1hcHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgbmV3TnVtID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3TnVtO1xuICAgIH1cbiAgICB0b05leHRTdGFnZSgpIHtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignc2NyZWVuRmFkZScsIFNDUkVFTl9GQURFX0ZSQU1FUyk7XG4gICAgICAgIGVudGl0eU1hbmFnZXIuY2xlYXIoZmFsc2UpO1xuICAgICAgICBjb25zdCBzdGFnZU51bSA9IHRoaXMuZ2V0TmV4dFN0YWdlTnVtKCk7XG4gICAgICAgIGNvbnN0IHBsYXllciA9IGVudGl0eU1hbmFnZXIuZ2V0UGxheWVyKCk7XG4gICAgICAgIHRoaXMuc3RhZ2UgPSBuZXcgU3RhZ2Uoc3RhZ2VOdW0sIG5ldyBUaWxlTWFwKG1hcHNbc3RhZ2VOdW1dKSwgdGFua3NDb25maWdbc3RhZ2VOdW1dKTtcbiAgICAgICAgcGxheWVyLnJlc3Bhd24oKTtcbiAgICB9XG4gICAgcGxheSgpIHtcbiAgICAgICAgdGhpcy5pc1N0YXJ0U2NyZWVuID0gZmFsc2U7XG4gICAgICAgIGVudGl0eU1hbmFnZXIuc3Bhd25FbnRpdHkoJ1BsYXllcicpO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdzY3JlZW5GYWRlJywgU0NSRUVOX0ZBREVfRlJBTUVTKTtcbiAgICAgICAgdGhpcy5zdGFnZSA9IG5ldyBTdGFnZSgwLCBuZXcgVGlsZU1hcChtYXBzWzBdKSwgdGFua3NDb25maWdbMF0pO1xuICAgIH1cbiAgICByZXN0YXJ0KCkge1xuICAgICAgICB0aGlzLmlzTG9zdCA9IGZhbHNlO1xuICAgICAgICBlbnRpdHlNYW5hZ2VyLmNsZWFyKCk7XG4gICAgICAgIHRoaXMucGxheSgpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdhbWUuanMubWFwIiwiaW1wb3J0IHNwcml0ZSBmcm9tICcuLi9hc3NldHMvc3ByaXRlcy5wbmcnO1xuaW1wb3J0IGV4cGxvZGUgZnJvbSAnLi4vYXNzZXRzL2F1ZGlvL2V4cGxvZGUud2F2JztcbmltcG9ydCBoaXQgZnJvbSAnLi4vYXNzZXRzL2F1ZGlvL2hpdC53YXYnO1xuaW1wb3J0IGhpdGRtZyBmcm9tICcuLi9hc3NldHMvYXVkaW8vaGl0ZG1nLndhdic7XG5pbXBvcnQgbmV1dHJhbCBmcm9tICcuLi9hc3NldHMvYXVkaW8vbmV1dHJhbC53YXYnO1xuaW1wb3J0IHBvd2VydXAgZnJvbSAnLi4vYXNzZXRzL2F1ZGlvL3Bvd2VydXAud2F2JztcbmltcG9ydCBtb3ZlIGZyb20gJy4uL2Fzc2V0cy9hdWRpby9tb3ZlLndhdic7XG5pbXBvcnQgc3RhcnQgZnJvbSAnLi4vYXNzZXRzL2F1ZGlvL3N0YXJ0Lndhdic7XG5pbXBvcnQgZ2FtZW92ZXIgZnJvbSAnLi4vYXNzZXRzL2F1ZGlvL2dhbWVvdmVyLndhdic7XG5pbXBvcnQgeyBhc3NldHNIb2xkZXIgfSBmcm9tICcuL3V0aWxzL2Fzc2V0c0hvbGRlcic7XG5pbXBvcnQgeyBrZXlib2FyZCB9IGZyb20gJy4va2V5Ym9hcmQnO1xuaW1wb3J0IHsgR2FtZSB9IGZyb20gJy4vR2FtZSc7XG5hc3luYyBmdW5jdGlvbiBtYWluKCkge1xuICAgIGFzc2V0c0hvbGRlci5ydW5QcmVsb2FkZXIoKTtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGFzc2V0c0hvbGRlci5sb2FkU3ByaXRlKHNwcml0ZSksXG4gICAgICAgIGFzc2V0c0hvbGRlci5sb2FkQXVkaW8oeyBleHBsb2RlLCBoaXQsIGhpdGRtZywgbmV1dHJhbCwgcG93ZXJ1cCwgbW92ZSwgc3RhcnQsIGdhbWVvdmVyIH0pLFxuICAgIF0pO1xuICAgIGFzc2V0c0hvbGRlci5zdG9wUHJlbG9hZGVyKCk7XG4gICAgY29uc3QgZ2FtZSA9IG5ldyBHYW1lKCk7XG4gICAga2V5Ym9hcmQubGlzdGVuVG9FdmVudHMoZ2FtZSk7XG4gICAgcmV0dXJuIGdhbWUuY3JlYXRlTG9vcCgpO1xufVxubWFpbigpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sInNvdXJjZVJvb3QiOiIifQ==