!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=9)}([function(e,t,i){e.exports=i.p+"ab65c472c6b592afe8757bb8be8c6267.png"},function(e,t,i){e.exports=i.p+"5c078847978a138d64371531f48bbdbd.wav"},function(e,t,i){e.exports=i.p+"84c22dc339b5f57e4b15287e0125a9e7.wav"},function(e,t,i){e.exports=i.p+"d4d17f1f4a0eee511856bf90569911c0.wav"},function(e,t,i){e.exports=i.p+"17f99c4e1534406164b4d67012374629.wav"},function(e,t,i){e.exports=i.p+"f912610ac78e8270b6341ec4e6d08d83.wav"},function(e,t,i){e.exports=i.p+"54af95b7b45424485b6ebf0361d019a3.wav"},function(e,t,i){e.exports=i.p+"aa8c51850c09e89bb9a47fb31ee31a38.wav"},function(e,t,i){e.exports=i.p+"9af88a6ac9cfbc392a941b4ed520d5f8.wav"},function(e,t,i){"use strict";i.r(t);var s={};i.r(s),i.d(s,"Player",function(){return De}),i.d(s,"Bullet",function(){return Oe}),i.d(s,"Enemy",function(){return Le}),i.d(s,"Flag",function(){return Ae}),i.d(s,"PowerupEvents",function(){return Ee}),i.d(s,"powerupEvents",function(){return Ce}),i.d(s,"Powerup",function(){return Re}),i.d(s,"Tank",function(){return we}),i.d(s,"Movable",function(){return xe});var n=i(0),o=i.n(n),r=i(1),a=i.n(r),h=i(2),c=i.n(h),l=i(3),p=i.n(l),u=i(4),d=i.n(u),m=i(5),g=i.n(m),y=i(6),f=i.n(y),v=i(7),x=i.n(v),w=i(8),b=i.n(w);function M(e,t){return e.x1<t.x2&&e.x2>t.x1&&e.y1<t.y2&&e.y2>t.y1}const T=e=>Math.floor(Math.random()*e);function k(e,t,i){const s=t/e;return Math.floor(i/s)}function S(e,t,i,s){const n=Math.min(k(t.length,i,s),t.length-1),{sprite:o,size:r}=t[n];return o(e,r)}var B,E,C,R,D,O,L;!function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom",e[e.Right=2]="Right",e[e.Left=3]="Left"}(B||(B={})),function(e){e[e.Default=0]="Default",e[e.Fast=1]="Fast",e[e.Armored=2]="Armored",e[e.Armored2=3]="Armored2",e[e.Armored3=4]="Armored3"}(E||(E={})),function(e){e[e.Helmet=0]="Helmet",e[e.Star=1]="Star",e[e.Stopwatch=2]="Stopwatch",e[e.Grenade=3]="Grenade",e[e.Tank=4]="Tank"}(C||(C={})),function(e){e[e.Default=0]="Default",e[e.First=1]="First",e[e.Second=2]="Second"}(R||(R={})),function(e){e[e.None=0]="None",e[e.Brick1=1]="Brick1",e[e.Brick2=2]="Brick2",e[e.Brick3=3]="Brick3",e[e.Brick4=4]="Brick4",e[e.Steel=5]="Steel",e[e.Ice=6]="Ice",e[e.Grass=7]="Grass",e[e.Water=8]="Water"}(D||(D={})),function(e){e[e.under=0]="under",e[e.main=1]="main",e[e.over=2]="over"}(O||(O={})),function(e){e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.Space="Space"}(L||(L={}));const A=1/60,P={x:40,y:40},j={x:40,y:40},z={x:280,y:560},F={x:210,y:560},I={x:10,y:10},N=300,G={x:40,y:40},_={[R.Default]:{velocity:100,shotCD:50},[R.First]:{velocity:120,shotCD:40},[R.Second]:{velocity:150,shotCD:30}},W={[E.Default]:{velocity:100,shotCD:70,lives:1},[E.Fast]:{velocity:200,shotCD:60,lives:1},[E.Armored]:{velocity:120,shotCD:70,lives:3}},Q=35,q=35,H=200,U=200,K=600,J=200,V=400,X=300,Y=[{x:0,y:0},{x:560,y:0}],Z=20,$=document.getElementById("root"),ee=$.getContext("2d");ee.font="30px Arial",ee.textAlign="center";const te={canvas:$,context:ee,clearScreen(){ee.clearRect(0,0,$.width,$.height),ee.beginPath()},renderChaingingStage(e){const t=k(X,X,e);ee.fillRect(0,0,600,t),ee.fillRect(0,600-t,600,t)},renderGameOver(e=0){const t=k(X,X,e);ee.fillRect(0,0,600,300-t),ee.fillRect(0,300+t,600,300-t),e||he.sprites.gameOver({x:275,y:275},{x:50,y:50})},renderStartScreen(){he.sprites.logo({x:100,y:200},{x:400,y:200}),ee.strokeText("Press any key",300,500)}},ie=document.getElementById("dashboard"),se=ie.getContext("2d"),ne={canvas:ie,context:se,render(e,t,i){const{numberIcons:s,flagIcon:n,playerIcon:o,tankIcon:r}=he.sprites;((e,t)=>{if(!e.length)return;let i=70,s=0;e.forEach((e,n)=>{t(n%2==0?{x:695,y:i}:{x:670,y:i},{x:15,y:15}),2===s?(i+=20,s=0):s+=1})})(i,r),n({x:670,y:450},{x:50,y:40}),o({x:670,y:380},{x:20,y:20}),s[t]({x:690,y:485},{x:20,y:20}),s[e]({x:700,y:380},{x:20,y:20})},clearScreen(){se.clearRect(0,0,ie.width,ie.height),se.beginPath()}},oe=(e,t)=>(i,s,n,o)=>(r,a)=>{t.drawImage(e,i,s,n,o,r.x,r.y,a.x,a.y)},re=e=>{const t=oe(e,te.context),i=oe(e,ne.context);return{player:{[R.Default]:{[B.Top]:[t(0,0,16,15),t(16,0,16,15)],[B.Bottom]:[t(64,0,16,15),t(80,0,16,15)],[B.Right]:[t(96,0,16,15),t(112,0,16,15)],[B.Left]:[t(32,0,16,15),t(48,0,16,15)]},[R.First]:{[B.Top]:[t(0,32.3,16,15),t(15.7,32.5,16,15)],[B.Bottom]:[t(64,32.3,16,15),t(80,32.5,16,15)],[B.Right]:[t(96,32.3,16,15),t(112.3,32,16,15)],[B.Left]:[t(31.7,32,16,15),t(48,32,16,15)]},[R.Second]:{[B.Top]:[t(0,48,16,15),t(15.7,48,16,15)],[B.Bottom]:[t(64,48,16,15),t(80,48,16,15)],[B.Right]:[t(96,48,16,15),t(112.3,48,16,15)],[B.Left]:[t(31.7,48,16,15),t(48,48,16,15)]}},enemy:{[E.Default]:{[B.Top]:[t(128,0,16,15),t(144,0,16,15)],[B.Bottom]:[t(192,0,16,15),t(208,0,16,15)],[B.Right]:[t(223.7,0,16,15),t(239.7,0,16,15)],[B.Left]:[t(160,0,16,15),t(176,0,16,15)]},[E.Fast]:{[B.Top]:[t(128,80,16,15),t(144,80,16,15)],[B.Bottom]:[t(192,80,16,15),t(208,80,16,15)],[B.Right]:[t(224,80,16,15),t(240,80,16,15)],[B.Left]:[t(160,80,16,15),t(176,80,16,15)]},[E.Armored]:{1:{[B.Top]:[t(128.5,111.75,14.75,16),t(144.25,111.75,14.75,16)],[B.Bottom]:[t(191.75,111.75,15.25,16),t(207.5,111.75,15.25,16)],[B.Right]:[t(222.75,111.75,16,16),t(239,111.75,14.75,16)],[B.Left]:[t(159,111.75,16,16),t(174.75,111.75,16,16)]},2:{[B.Top]:[t(0,240,14.75,16),t(16,240,14.75,16)],[B.Bottom]:[t(64,240,15.25,16),t(80,240,15.25,16)],[B.Right]:[t(96,240,16,16),t(112,240,14.75,16)],[B.Left]:[t(32,240,16,16),t(48,240,16,16)]},3:{[B.Top]:[t(128,240,14.75,16),t(144,240,14.75,16)],[B.Bottom]:[t(192,240,15.25,16),t(208,240,15.25,16)],[B.Right]:[t(224,240,16,16),t(240,240,14.75,16)],[B.Left]:[t(160,240,16,16),t(176,240,16,16)]}}},bullet:{[B.Top]:[t(322.25,101.5,5,5.7)],[B.Bottom]:[t(338.5,101.5,5,5.7)],[B.Right]:[t(345.75,101.5,5,5.7)],[B.Left]:[t(329.5,101.5,5,5.7)]},flag:t(304.5,33,16,15.25),flagDeath:t(320,33,16,15.25),tankIcon:i(320.25,192.75,8.5,7.75),flagIcon:i(375.5,184,17,15),playerIcon:i(376.5,144.5,8,8.5),numberIcons:[i(328.5,184,8,7),i(336.5,184,8,7),i(344.5,184,8,7),i(352.5,184,8,7),i(360.5,184,8,7),i(328.5,192,8,7),i(336.5,192,8,7),i(344.5,192,8,7),i(352.5,192,8,7),i(360.5,192,8,7)],logo:t(0,260,375,137),tiles:{[D.Brick1]:t(256,0,8,7),[D.Brick2]:t(264,0,8,7),[D.Brick3]:t(256,8,8,7),[D.Brick4]:t(264,8,8,7),[D.Steel]:t(256,16,8,7),[D.Ice]:t(288,32,8,7),[D.Grass]:t(272,32,8,7),[D.Water]:t(256,40,8,7)},gameOver:t(288.5,184,31.2,16),powerup:{[C.Helmet]:t(255.5,112,16,14),[C.Stopwatch]:t(271.5,112,16,14),[C.Star]:t(303.5,112,16,14),[C.Grenade]:t(319.5,112,16,14),[C.Tank]:t(335.5,112,16,14)},invincible:[t(256,144,15.7,16),t(272.2,144,15.7,16)]}},ae=e=>{const t=oe(e,te.context);return{tankSpawn:[{sprite:t(303,97,15,14),size:{x:35,y:35}},{sprite:t(303,97,15,14),size:{x:35,y:35}},{sprite:t(288,97,15,14),size:{x:35,y:35}},{sprite:t(273,97,15,14),size:{x:30,y:30}},{sprite:t(257,97,15,14),size:{x:30,y:30}}],tankDestruction:[{sprite:t(336,128.75,32,32),size:{x:60,y:60}},{sprite:t(304.5,128.75,30.5,31.25),size:{x:60,y:60}},{sprite:t(288.25,128.75,16,15.5),size:{x:40,y:40}},{sprite:t(272.25,128.75,15.75,14.25),size:{x:37,y:37}},{sprite:t(258,128.75,13.75,13.25),size:{x:35,y:35}}]}};const he=new class{loadSprite(e){return new Promise((t,i)=>{const s=new Image;s.src=e,s.addEventListener("load",()=>{this.image=s,this.sprites=re(s),this.variableSprites=ae(s),t()})})}loadAudio(e){this.audio={};const t=Object.keys(e).map(t=>new Promise((i,s)=>{const n=new Audio;n.src=e[t],n.addEventListener("canplaythrough",()=>{this.audio[t]=n,i()})}));return Promise.all(t)}};const ce=new class{constructor(){this.queue=new Set}handleEvent(e,t){const{code:i,type:s}=e;return t.isWaitingForRestart()?t.restart():t.isStartScreen?t.play():void(L[i]&&("keydown"===s?this.queue.add(L[i]):this.queue.delete(L[i])))}getKey(){return Array.from(this.queue).pop()}listenToEvents(e){["keydown","keyup"].forEach(t=>{window.addEventListener(t,t=>{this.handleEvent(t,e)})})}},le=[[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,5,5,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,5,5,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,0,0,0,0,0,0,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,3,4,0,0,3,4,0,0,0,0,0,0,0,0,0,0,0,0],[1,2,0,0,1,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,1,2,0,0,1,2],[5,5,0,0,3,4,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,3,4,0,0,5,5],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,1,2,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,3,4,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,0,0,0,0,0,0,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,0,1,2,1,2,0,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,1,2,5,5,1,2,1,2,5,5,1,2,5,5,1,2,1,2,5,5,1,2,0,0,0,0],[0,0,0,0,3,4,5,5,3,4,3,4,5,5,3,4,5,5,3,4,3,4,5,5,3,4,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,5,5,0,0,1,2,0,0,5,5,1,2,5,5,0,0,1,2,0,0,1,2,0,0,0,0],[0,0,0,0,5,5,0,0,3,4,0,0,5,5,3,4,5,5,0,0,3,4,0,0,3,4,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,2,0,0,7,7,7,7,7,7,7,7,7,7,7,7,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,7,7,0,7,0,7,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,1,2,0,0,7,0,7,0,7,0,7,0,7,0,7,0,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,7,7,0,7,0,7,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,1,2,0,0,7,0,7,0,7,0,7,0,7,0,7,0,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,7,7,0,7,0,7,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,0,0,0,0,5,0,6,6,6,6,6,0,7,0,7,0,7,7,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,5,7,6,6,6,6,6,7,0,7,0,7,0,7,0,0,0,0,0,0,0,0],[0,0,0,0,1,2,0,0,5,0,6,6,6,6,7,0,7,0,7,0,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,5,7,6,6,6,6,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,1,2,0,0,7,0,6,6,7,0,7,0,7,0,7,0,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,7,7,6,6,0,7,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,0,0,0,0,7,0,7,0,7,0,7,0,7,0,7,0,7,7,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,7,7,7,7,7,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,5,5,1,2,5,5,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,5,5,3,4,5,5,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0]]],pe=[[2,2,0,0,1,2,1,0,0,0],[2,2,0,0,1,2,1,0,0,0]],ue=[D.Brick1,D.Brick2,D.Brick3,D.Brick4,D.Steel,D.Water],de=[D.Grass,D.Water,D.None],me={[O.under]:[D.Ice,D.Water],[O.main]:[D.Brick1,D.Brick2,D.Brick3,D.Brick4,D.Steel],[O.over]:[D.Grass]};class ge{constructor(e){this.tiles=e.map(e=>[...e])}destroy(e){const t=Math.max(0,Math.floor(e.x/Z)),i=Math.max(0,Math.floor(e.y/Z));this.tiles[i][t]=D.None}lookup(e){const t=Math.min(Math.max(0,Math.floor(e.x/Z)),29),i=Math.min(Math.max(0,Math.floor(e.y/Z)),29);return{type:this.tiles[i][t],position:{x:t*Z,y:i*Z}}}lookupRange(e,t){let i=[];const s=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return s>0&&s>Z?i.push({x:e.x+Z,y:e.y}):n>0&&n>Z&&i.push({x:e.x,y:e.y+Z}),[e,...i,t].map(e=>this.lookup(e))}renderLayer(e){this.tiles.forEach((t,i)=>{t.forEach((t,s)=>{me[e].includes(t)&&he.sprites.tiles[t]({x:s*Z,y:i*Z},{x:Z,y:Z})})})}}class ye{constructor(e){this.setupTracks(e)}setupTracks(e){this.tracks=e.reduce((e,t)=>{if("string"==typeof t)e[t]=he.audio[t].cloneNode();else{const{trackName:i,loop:s}=t;e[i]=he.audio[i].cloneNode(),e[i].loop=s}return e},{})}play(e){return this.tracks[e].play()}pause(e){return this.tracks[e].pause()}pauseAll(){Object.values(this.tracks).forEach(e=>e.pause())}}class fe{constructor(){this.timers={}}setTimer(e,t){this.timers[e]=t}getTimer(e){return this.timers[e]}some(e){return Object.entries(this.timers).some(t=>e.includes(t[0])&&t[1]>=0)}decrementTimers(){const e=Object.entries(this.timers).filter(e=>0===e[1]);e.length&&e.forEach(e=>{delete this.timers[e[0]]}),Object.keys(this.timers).forEach(e=>{this.timers[e]-=1})}}class ve{constructor(e,t){this.id=ve.numberGen,this.position=e,this.size=t,ve.numberGen+=1}update(){}render(){}resolveEntityCollision(e){}getBoundingBox(){const{x:e,y:t}=this.position,{x:i,y:s}=this.size;return{x1:e,x2:e+i,y1:t,y2:t+s}}deconstruct(){}}ve.numberGen=0;class xe extends ve{constructor(e,t,i){super(e,t),this.direction=i,this.prevPosition=Object.assign({},e)}resolveEdgeCollision(){}resolveTileCollision(e,t){}resolveEntityCollision(e){}move(e){this.prevPosition=Object.assign({},this.position),this.direction===B.Top?this.position.y-=e*A:this.direction===B.Bottom?this.position.y+=e*A:this.direction===B.Left?this.position.x-=e*A:this.direction===B.Right&&(this.position.x+=e*A)}goBack(){this.position=Object.assign({},this.prevPosition)}animateMovement(e){let t;t=this.direction===B.Left||this.direction===B.Right?this.position.x:this.position.y,e[Math.floor(t/.3)%e.length](this.position,this.size)}isOutOfScreen(){const e=this.getBoundingBox();return e.y1<0||e.y2>600||e.x1<0||e.x2>600}getFrontCollisionPoints(){const{x1:e,x2:t,y1:i,y2:s}=this.getBoundingBox();return this.direction===B.Top?[{x:e,y:i},{x:t,y:i}]:this.direction===B.Right?[{x:t,y:i},{x:t,y:s}]:this.direction===B.Bottom?[{x:e,y:s},{x:t,y:s}]:this.direction===B.Left?[{x:e,y:i},{x:e,y:s}]:void 0}}class we extends xe{constructor(e,t,i){super(e,t,i)}shot(e){if(this.timeManager.getTimer("shotCD"))return;let t;const{x:i,y:s}=I;t=this.direction===B.Top?{x:this.size.x/2+this.position.x-i/2,y:this.position.y-s}:this.direction===B.Right?{x:this.size.x+this.position.x,y:this.size.y/2+this.position.y-s/2}:this.direction===B.Bottom?{x:this.size.x/2+this.position.x-i/2,y:this.size.y+this.position.y}:{x:this.position.x-i,y:this.size.y/2+this.position.y-s/2},Pe.spawnEntity("Bullet",t,this.direction,this),this.timeManager.setTimer("shotCD",e)}die(){this.timeManager.setTimer("death",Q),this.soundManager.play("explode"),Pe.toRemove(this.id)}forgiveCollision(e){const[t,i]=this.getFrontCollisionPoints(),s=e.position;if(this.direction===B.Top||this.direction===B.Bottom){const e=Math.min(Math.abs(s.x-t.x),Math.abs(s.x-i.x));if(e>0&&e<5){return{x:this.position.x>s.x?s.x+Z:s.x-this.size.x,y:this.prevPosition.y}}}else if(this.direction===B.Left||this.direction===B.Right){const e=Math.min(Math.abs(s.y-t.y),Math.abs(s.y-i.y));if(e>0&&e<5){const e=this.position.y>s.y?s.y+Z:s.y-this.size.y;return{x:this.prevPosition.x,y:e}}}}}function be(e){return e instanceof we}function Me(e){return e instanceof De}function Te(e){return e instanceof Le}function ke(e){return e instanceof Oe}function Se(e){return e instanceof Ae}function Be(e){return e instanceof Re}class Ee{constructor(){this.observers={}}subscribe(e,t){this.observers[e]=t}unsubscribe(e){delete this.observers[e]}notify(e){Object.values(this.observers).forEach(t=>t(e))}}const Ce=new Ee;class Re extends ve{constructor(e,t){super(t,Object.assign({},G)),this.type=e,this.timeManager=new fe,this.soundManager=new ye(["powerup"]),this.timeManager.setTimer("live",K)}update(){const e=this.timeManager.getTimer("live");0===e?Pe.toRemove(this.id):e===J&&this.timeManager.setTimer("blink",J),this.timeManager.decrementTimers()}render(){const e=this.timeManager.getTimer("blink");e&&e%50==0||he.sprites.powerup[this.type](this.position,this.size)}resolveEntityCollision(e){Me(e)&&(Pe.toRemove(this.id),Ce.notify(this.type),this.soundManager.play("powerup"))}}class De extends we{constructor(){super(Object.assign({},F),Object.assign({},P),B.Top),this.lives=3,this.power=R.Default,this.timeManager=new fe,this.soundManager=new ye(["explode",{trackName:"neutral",loop:!0},{trackName:"move",loop:!0}]),this.timeManager.setTimer("spawn",q),this.timeManager.setTimer("invincible",H),Ce.subscribe(this.id,function(e){e===C.Tank?this.lives+=1:e===C.Helmet?this.timeManager.setTimer("invincible",H):e===C.Star&&this.power<R.Second&&(this.power+=1)}.bind(this))}update(){this.timeManager.decrementTimers();const e=this.timeManager.getTimer("death"),t=this.timeManager.getTimer("spawn");e?1===e&&this.respawn(!0):t||(this.soundManager.play("neutral"),this.processInput())}render(){const e=this.timeManager.getTimer("spawn"),t=this.timeManager.getTimer("death"),i=this.timeManager.getTimer("invincible");if(e)return S(this.position,he.variableSprites.tankSpawn,q,e);if(t)return S(this.position,he.variableSprites.tankDestruction,Q,t);if(i){const e=he.sprites.invincible;e[i%e.length](this.position,this.size)}this.animateMovement(he.sprites.player[this.power][this.direction])}processInput(){const e=ce.getKey();let t=!0;e===L.ArrowUp?this.direction=B.Top:e===L.ArrowDown?this.direction=B.Bottom:e===L.ArrowLeft?this.direction=B.Left:e===L.ArrowRight?this.direction=B.Right:(this.soundManager.pause("move"),t=!1),e===L.Space&&this.shot(_[this.power].shotCD),t&&(this.soundManager.pause("neutral"),this.soundManager.play("move"),this.move(_[this.power].velocity))}resolveEdgeCollision(){this.goBack()}resolveTileCollision(e){if(1===e.length){const t=this.forgiveCollision(e[0]);t?this.position=Object.assign({},t):this.goBack()}else this.goBack()}resolveEntityCollision(e){const t=this.timeManager.getTimer("death");if(!Be(e))if(ke(e)&&!t){if(this.timeManager.getTimer("invincible"))return;this.timeManager.setTimer("death",Q),this.soundManager.play("explode"),this.lives-=1,0===this.lives&&this.die()}else this.goBack()}respawn(e=!1){e&&(this.power=R.Default),this.soundManager.pauseAll(),this.timeManager.setTimer("spawn",q),this.timeManager.setTimer("invincible",H),this.position=Object.assign({},F),this.prevPosition=Object.assign({},F)}deconstruct(){this.soundManager.pauseAll(),Ce.unsubscribe(this.id)}}class Oe extends xe{constructor(e,t,i){super(e,Object.assign({},I),t),this.direction=t,this.shooter=i,this.soundManager=new ye(["hit","hitdmg"])}update(){this.move(N)}render(){this.animateMovement(he.sprites.bullet[this.direction])}resolveEdgeCollision(){Pe.toRemove(this.id)}resolveTileCollision(e,t){if(e.every(e=>de.includes(e.type)))return;Pe.toRemove(this.id);const i=Me(this.shooter)&&this.shooter.power===R.Second;e.some(e=>e.type===D.Steel)?this.soundManager.play("hit"):this.soundManager.play("hitdmg"),e.forEach(e=>{de.includes(e.type)||e.type===D.Steel&&!i||t.destroy(e.position)})}resolveEntityCollision(e){Be(e)||(Me(this.shooter)&&Te(e)&&e.type>=1&&this.soundManager.play("hit"),Pe.toRemove(this.id))}}class Le extends we{constructor(e,t){super(t,Object.assign({},P),B.Bottom),this.type=e,this.lives=W[e].lives,this.prevTile=Object.assign({},t),this.timeManager=new fe,this.soundManager=new ye(["explode"]),this.timeManager.setTimer("spawn",q),Ce.subscribe(this.id,function(e){e===C.Stopwatch?this.timeManager.setTimer("freeze",U):e===C.Grenade&&(this.timeManager.some(["death","spawn"])||this.die())}.bind(this))}update(){const e=this.timeManager.getTimer("spawn"),t=this.timeManager.getTimer("death"),i=this.timeManager.getTimer("freeze");if(this.timeManager.decrementTimers(),e){if(this.isSpawnSpotClear())return void this.timeManager.setTimer("spawn",q)}else{if(t||i)return;this.aiMove(),this.shot(W[this.type].shotCD)}}render(){const e=this.timeManager.getTimer("spawn"),t=this.timeManager.getTimer("death");return e?S(this.position,he.variableSprites.tankSpawn,q,e):t?S(this.position,he.variableSprites.tankDestruction,Q,t):void(this.type===E.Armored?this.animateMovement(he.sprites.enemy[this.type][this.lives][this.direction]):this.animateMovement(he.sprites.enemy[this.type][this.direction]))}aiMove(){const{velocity:e}=W[this.type];Math.abs(Math.floor(this.prevTile.x-this.position.x))>120||Math.abs(Math.floor(this.prevTile.y-this.position.y))>120?(this.prevTile=Object.assign({},this.position),this.setRandomDirection(),this.move(e)):this.move(e)}resolveEdgeCollision(){this.goBack(),this.setRandomDirection()}resolveTileCollision(e){if(1===e.length){const t=this.forgiveCollision(e[0]);t?this.position=Object.assign({},t):(this.setRandomDirection(),this.goBack())}else this.setRandomDirection(),this.goBack()}resolveEntityCollision(e){Be(e)||(ke(e)&&Me(e.shooter)?1===this.lives?this.die():this.lives-=1:Te(e)?(this.goBack(),this.setOpositeDirection()):Me(e)&&(this.timeManager.getTimer("shotCD")>10&&this.setOpositeDirection(),this.goBack()))}setRandomDirection(){const e=[B.Top,B.Right,B.Bottom,B.Left].filter(e=>e!==this.direction),t=Math.floor(Math.random()*e.length);this.direction=e[t]}setOpositeDirection(){this.direction===B.Top?this.direction=B.Bottom:this.direction===B.Bottom?this.direction=B.Top:this.direction===B.Right?this.direction=B.Left:this.direction=B.Right}isSpawnSpotClear(){return Pe.entities.filter(e=>e.id!==this.id&&!ke(e)).filter(e=>!Te(e)||!e.timeManager.getTimer("spawn")).some(e=>M(e.getBoundingBox(),this.getBoundingBox()))}deconstruct(){Ce.unsubscribe(this.id)}}class Ae extends ve{constructor(){super(z,j),this.isDestroyed=!1}render(){this.isDestroyed?he.sprites.flagDeath(this.position,this.size):he.sprites.flag(this.position,this.size)}resolveEntityCollision(e){ke(e)&&(this.isDestroyed=!0)}}const Pe=new class{constructor(){this.toRemove=(e=>{this.toRemoveQueue.add(e)}),this.removeFromQueue=(()=>{this.toRemoveQueue.forEach(e=>{const t=this.pool[e];this._checkDeath(t)||(delete this.pool[e],t.deconstruct(),this.toRemoveQueue.delete(e))})}),this.pool={},this.toRemoveQueue=new Set}spawnEntity(e,...t){const i=new s[e](...t);this.pool[i.id]=i}getEnemies(){return this.entities.filter(Te)}getPlayer(){return this.entities.find(Me)}getFlag(){return this.entities.find(Se)}render(){this.entities.forEach(e=>e.render())}update(){this.entities.forEach(e=>e.update())}checkCollisions(e){const t=new Set;this.entities.forEach(i=>{Be(i)||Se(i)||(this.checkTileCollision(i,e),this.checkEntitiesCollision(i,t),t.add(i.id))})}checkTileCollision(e,t){if(e.isOutOfScreen())e.resolveEdgeCollision();else{const[i,s]=e.getFrontCollisionPoints(),n=t.lookupRange(i,s).filter(e=>ue.includes(e.type)).filter(t=>M(e.getBoundingBox(),{x1:t.position.x,x2:t.position.x+Z,y1:t.position.y,y2:t.position.y+Z}));n.length&&e.resolveTileCollision(n,t)}}checkEntitiesCollision(e,t){this.entities.forEach(i=>{e.id===i.id||t.has(i.id)||this._isInteractive(i)&&M(e.getBoundingBox(),i.getBoundingBox())&&(e.resolveEntityCollision(i),i.resolveEntityCollision(e))})}clear(e=!0){if(e)Object.values(this.pool).forEach(e=>e.deconstruct()),this.pool={};else{const e=this.getPlayer();Object.values(this.pool).filter(t=>t.id!==e.id).forEach(e=>e.deconstruct()),this.pool={[e.id]:e}}this.toRemoveQueue=new Set}_isInteractive(e){return!be(e)||!e.timeManager.some(["spawn","death"])}_checkDeath(e){if(be(e))return e.timeManager.getTimer("death")}get entities(){return Object.values(this.pool)}};class je{constructor(e,t,i){this.number=e,this.map=t,this.tanks=[...i],this.powerupsAvailable=5,this.timeManager=new fe,this.soundManager=new ye(["start"]),this.timeManager.setTimer("powerupSpawnCD",K),this.soundManager.play("start"),Pe.spawnEntity("Flag")}update(){this.timeManager.decrementTimers(),this.spawnEnemy(),this.spawnPowerup()}isFinish(){const e=Pe.getEnemies();return!this.tanks.length&&!e.length}spawnEnemy(){const e=this.timeManager.getTimer("enemySpawnCD"),t=Pe.getEnemies();if(!this.tanks.length||t.length>4||e)return;const i=T(2);this.timeManager.setTimer("enemySpawnCD",V),Pe.spawnEntity("Enemy",this.tanks.pop(),Object.assign({},Y[i]))}spawnPowerup(){if(this.timeManager.getTimer("powerupSpawnCD")||!this.powerupsAvailable)return;const e=T(Object.keys(C).length/2);Pe.spawnEntity("Powerup",C[C[e]],{x:T(500),y:T(500)}),this.timeManager.setTimer("powerupSpawnCD",K),this.powerupsAvailable-=1}render(){this.map.renderLayer(O.under),this.map.renderLayer(O.main),Pe.render(),this.map.renderLayer(O.over)}get screenNum(){return this.number+1}}class ze{constructor(){this.isStartScreen=!0,this.isLost=!1,this.timeManager=new fe,this.soundManager=new ye(["gameover"])}createLoop(){let e=0,t=0;const i=s=>{for(e+=(s-t)/1e3;e>A;)this.update(),e-=A;this.render(),t=s,requestAnimationFrame(i)};i(0)}update(){this.timeManager.decrementTimers();const e=this.timeManager.getTimer("screenFade");if(this.isLost||this.isStartScreen||e)return;this.stage.update(),Pe.update(),Pe.checkCollisions(this.stage.map),Pe.removeFromQueue();const t=Pe.getPlayer(),i=Pe.getFlag();if(!t||i.isDestroyed)return t&&t.soundManager.pauseAll(),this.gameOver();this.stage.isFinish()&&this.toNextStage()}render(){te.clearScreen(),ne.clearScreen(),this.isStartScreen?te.renderStartScreen():this.renderGame()}renderGame(){const e=this.timeManager.getTimer("screenFade");if(this.stage.render(),this.isLost)te.renderGameOver(e);else if(e)te.renderChaingingStage(e);else{const e=Pe.getPlayer();ne.render(e.lives,this.stage.screenNum,this.stage.tanks)}}gameOver(){this.soundManager.play("gameover"),this.timeManager.setTimer("screenFade",X),this.isLost=!0}isWaitingForRestart(){return!this.timeManager.getTimer("screenFade")&&this.isLost}getNextStageNum(){let e=this.stage.number+1;return e>le.length-1&&(e=0),e}toNextStage(){this.timeManager.setTimer("screenFade",X),Pe.clear(!1);const e=this.getNextStageNum(),t=Pe.getPlayer();this.stage=new je(e,new ge(le[e]),pe[e]),t.respawn()}play(){this.isStartScreen=!1,Pe.spawnEntity("Player"),this.timeManager.setTimer("screenFade",X),this.stage=new je(0,new ge(le[0]),pe[0])}restart(){this.isLost=!1,Pe.clear(),this.play()}}!async function(){await Promise.all([he.loadSprite(o.a),he.loadAudio({explode:a.a,hit:c.a,hitdmg:p.a,neutral:d.a,powerup:g.a,move:f.a,start:x.a,gameover:b.a})]);const e=new ze;ce.listenToEvents(e),e.createLoop()}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL3Nwcml0ZXMucG5nIiwid2VicGFjazovLy8uL2Fzc2V0cy9hdWRpby9leHBsb2RlLndhdiIsIndlYnBhY2s6Ly8vLi9hc3NldHMvYXVkaW8vaGl0LndhdiIsIndlYnBhY2s6Ly8vLi9hc3NldHMvYXVkaW8vaGl0ZG1nLndhdiIsIndlYnBhY2s6Ly8vLi9hc3NldHMvYXVkaW8vbmV1dHJhbC53YXYiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2F1ZGlvL3Bvd2VydXAud2F2Iiwid2VicGFjazovLy8uL2Fzc2V0cy9hdWRpby9tb3ZlLndhdiIsIndlYnBhY2s6Ly8vLi9hc3NldHMvYXVkaW8vc3RhcnQud2F2Iiwid2VicGFjazovLy8uL2Fzc2V0cy9hdWRpby9nYW1lb3Zlci53YXYiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvdXRpbHMvY2hlY2tFbnRpdHlDb2xsaXNpb24uanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvdXRpbHMvcmFuZG9tLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3V0aWxzL2FuaW1hdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC90eXBlcy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc2NyZWVucy9tYWluLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NjcmVlbnMvZGFzaGJvYXJkLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3V0aWxzL2Fzc2V0c0hvbGRlci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9rZXlib2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zdGFnZUNvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9UaWxlTWFwLmpzIiwid2VicGFjazovLy8uL2J1aWxkL21hbmFnZXJzL1NvdW5kTWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9tYW5hZ2Vycy9UaW1lTWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9lbnRpdGllcy9FbnRpdHkuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvZW50aXRpZXMvTW92YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9lbnRpdGllcy9UYW5rLmpzIiwid2VicGFjazovLy8uL2J1aWxkL2VudGl0aWVzL2d1YXJkcy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9lbnRpdGllcy9Qb3dlcnVwLmpzIiwid2VicGFjazovLy8uL2J1aWxkL2VudGl0aWVzL1BsYXllci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9lbnRpdGllcy9CdWxsZXQuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvZW50aXRpZXMvRW5lbXkuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvZW50aXRpZXMvRmxhZy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9tYW5hZ2Vycy9lbnRpdHlNYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL2J1aWxkL1N0YWdlLmpzIiwid2VicGFjazovLy8uL2J1aWxkL0dhbWUuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjaGVja0VudGl0eUNvbGxpc2lvbiIsImJveDEiLCJib3gyIiwieDEiLCJ4MiIsInkxIiwieTIiLCJyYW5kb21JbnQiLCJsaW1pdCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImdldEFuaW1hdGlvbkluZGV4IiwiYW5pbWF0aW9uTGVuZ3RoIiwiZnJhbWVzVG90YWwiLCJmcmFtZXNMZWZ0Iiwic3RlcCIsImFuaW1hdGVWYXJpYWJsZVNwcml0ZXMiLCJwb3NpdGlvbiIsImFuaW1hdGlvbiIsImluZGV4IiwibWluIiwibGVuZ3RoIiwic3ByaXRlIiwic2l6ZSIsIkRpcmVjdGlvbiIsIlRhbmtUeXBlcyIsIlBvd2VydXBUeXBlcyIsIlBsYXllclBvd2VyIiwiVGlsZXMiLCJMYXllcnMiLCJDb250cm9sS2V5cyIsIkRFTFRBX1RJTUUiLCJUQU5LX1NJWkUiLCJ4IiwieSIsIkZMQUdfU0laRSIsIkZMQUdfUE9TSVRJT04iLCJQTEFZRVJfU1BBV05fUE9TSVRJT04iLCJCVUxMRVRfU0laRSIsIkJVTExFVF9WRUxPQ0lUWSIsIlBPV0VSVVBfU0laRSIsIlBMQVlFUl9TVEFUUyIsIltvYmplY3QgT2JqZWN0XSIsIkRlZmF1bHQiLCJ2ZWxvY2l0eSIsInNob3RDRCIsIkZpcnN0IiwiU2Vjb25kIiwiRU5FTVlfU1RBVFMiLCJsaXZlcyIsIkZhc3QiLCJBcm1vcmVkIiwiREVBVEhfRlJBTUVTIiwiU1BBV05fRlJBTUVTIiwiSU5WSU5DSUJMRV9GUkFNRVMiLCJGUkVFWkVfRlJBTUVTIiwiUE9XRVJVUF9TUEFXTl9DRCIsIlBPV0VSVVBfQkxJTktfRlJBTUVTIiwiRU5FTVlfU1BBV05fQ0QiLCJTQ1JFRU5fRkFERV9GUkFNRVMiLCJFTkVNWV9TUEFXTl9QT1NJVElPTiIsIlRJTEVfU0lERSIsImNhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImZvbnQiLCJ0ZXh0QWxpZ24iLCJtYWluIiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJiZWdpblBhdGgiLCJsZWZ0IiwiZmlsbFJlY3QiLCJhc3NldHNIb2xkZXIiLCJzcHJpdGVzIiwiZ2FtZU92ZXIiLCJsb2dvIiwic3Ryb2tlVGV4dCIsImRhc2hib2FyZF9jYW52YXMiLCJkYXNoYm9hcmRfY29udGV4dCIsImRhc2hib2FyZCIsInBsYXllckxpdmVzIiwic3RhZ2VOdW0iLCJ0YW5rcyIsIm51bWJlckljb25zIiwiZmxhZ0ljb24iLCJwbGF5ZXJJY29uIiwidGFua0ljb24iLCJ0YW5rU3ByaXRlIiwiY291bnRlciIsImZvckVhY2giLCJfIiwiaWR4IiwiZHJhd1RhbmtzIiwiY3JlYXRlU3ByaXRlIiwiaW1hZ2UiLCJkeCIsImR5IiwiZFdpZHRoIiwiZEhlaWdodCIsImRyYXdJbWFnZSIsInNldHVwU3ByaXRlcyIsIm1haW5TcHJpdGUiLCJkYXNoYm9hcmRTcHJpdGUiLCJwbGF5ZXIiLCJUb3AiLCJCb3R0b20iLCJSaWdodCIsIkxlZnQiLCJlbmVteSIsIjEiLCIyIiwiMyIsImJ1bGxldCIsImZsYWciLCJmbGFnRGVhdGgiLCJ0aWxlcyIsIkJyaWNrMSIsIkJyaWNrMiIsIkJyaWNrMyIsIkJyaWNrNCIsIlN0ZWVsIiwiSWNlIiwiR3Jhc3MiLCJXYXRlciIsInBvd2VydXAiLCJIZWxtZXQiLCJTdG9wd2F0Y2giLCJTdGFyIiwiR3JlbmFkZSIsIlRhbmsiLCJpbnZpbmNpYmxlIiwic2V0dXBWYXJpYWJsZVNwcml0ZXMiLCJ0YW5rU3Bhd24iLCJ0YW5rRGVzdHJ1Y3Rpb24iLCJzcmMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIkltYWdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRoaXMiLCJ2YXJpYWJsZVNwcml0ZXMiLCJhdWRpb1NyYyIsImF1ZGlvIiwibG9hZGVycyIsImtleXMiLCJtYXAiLCJ0cmFja05hbWUiLCJBdWRpbyIsImFsbCIsImtleWJvYXJkIiwicXVldWUiLCJTZXQiLCJldmVudCIsImdhbWUiLCJjb2RlIiwidHlwZSIsImlzV2FpdGluZ0ZvclJlc3RhcnQiLCJyZXN0YXJ0IiwiaXNTdGFydFNjcmVlbiIsInBsYXkiLCJhZGQiLCJkZWxldGUiLCJBcnJheSIsImZyb20iLCJwb3AiLCJldmVudE5hbWUiLCJ3aW5kb3ciLCJoYW5kbGVFdmVudCIsIm1hcHMiLCJzdGFnZUNvbmZpZ190YW5rcyIsInJpZ2lkIiwiYnVsbGV0VGhyb3VnaCIsIk5vbmUiLCJsYXllc3JNYXAiLCJ1bmRlciIsIm92ZXIiLCJUaWxlTWFwX1RpbGVNYXAiLCJyb3ciLCJwb2ludCIsInhJbmRleCIsIm1heCIsInlJbmRleCIsInBvaW50MSIsInBvaW50MiIsImluQmV0d2VlblBvaW50cyIsInJhbmdlWCIsImFicyIsInJhbmdlWSIsInB1c2giLCJsb29rdXAiLCJ0aWxlIiwiaW5jbHVkZXMiLCJTb3VuZE1hbmFnZXJfU291bmRNYW5hZ2VyIiwidHJhY2tOYW1lcyIsInNldHVwVHJhY2tzIiwidHJhY2tzIiwicmVkdWNlIiwiYWNjIiwidHJhY2siLCJjbG9uZU5vZGUiLCJsb29wIiwicGF1c2UiLCJ2YWx1ZXMiLCJUaW1lTWFuYWdlciIsInRpbWVycyIsInRpbWVyTmFtZSIsImZyYW1lTGVuZ3RoIiwiZW50cmllcyIsInNvbWUiLCJlbnRyeSIsInRvUmVtb3ZlIiwiZmlsdGVyIiwiRW50aXR5IiwiaWQiLCJudW1iZXJHZW4iLCJvdGhlciIsIk1vdmFibGVfTW92YWJsZSIsImRpcmVjdGlvbiIsInN1cGVyIiwicHJldlBvc2l0aW9uIiwiYXNzaWduIiwidGlsZU1hcCIsImRpc3RhbmNlIiwiYm94IiwiZ2V0Qm91bmRpbmdCb3giLCJUYW5rX1RhbmsiLCJjZCIsInRpbWVNYW5hZ2VyIiwiZ2V0VGltZXIiLCJidWxsZXRQb3NpdGlvbiIsImVudGl0eU1hbmFnZXIiLCJzcGF3bkVudGl0eSIsInNldFRpbWVyIiwic291bmRNYW5hZ2VyIiwiZ2V0RnJvbnRDb2xsaXNpb25Qb2ludHMiLCJ0aWxlUG9zIiwiZGlmZlBvaW50IiwiZGVzdGluYXRpb24iLCJpc1RhbmsiLCJlbnRpdHkiLCJpc1BsYXllciIsIlBsYXllcl9QbGF5ZXIiLCJpc0VuZW15IiwiRW5lbXlfRW5lbXkiLCJpc0J1bGxldCIsIkJ1bGxldF9CdWxsZXQiLCJpc0ZsYWciLCJGbGFnX0ZsYWciLCJpc1Bvd2VydXAiLCJQb3dlcnVwX1Bvd2VydXAiLCJQb3dlcnVwRXZlbnRzIiwib2JzZXJ2ZXJzIiwiZW50aXR5SWQiLCJvYnNlcnZlciIsImV2ZW50VHlwZSIsInBvd2VydXBFdmVudHMiLCJsaXZlc0xlZnQiLCJkZWNyZW1lbnRUaW1lcnMiLCJibGlua0xlZnQiLCJub3RpZnkiLCJwb3dlciIsInN1YnNjcmliZSIsInBvd2VydXBUeXBlIiwiZGVhdGgiLCJzcGF3biIsInJlc3Bhd24iLCJwcm9jZXNzSW5wdXQiLCJpbnZpbmNpYmxlU3ByaXRlcyIsImFuaW1hdGVNb3ZlbWVudCIsImdldEtleSIsImlzTW92aW5nIiwiQXJyb3dVcCIsIkFycm93RG93biIsIkFycm93TGVmdCIsIkFycm93UmlnaHQiLCJTcGFjZSIsInNob3QiLCJtb3ZlIiwiZ29CYWNrIiwibmV3UG9zIiwiZm9yZ2l2ZUNvbGxpc2lvbiIsImRpZSIsImRlZmF1bHRQb3dlciIsInBhdXNlQWxsIiwidW5zdWJzY3JpYmUiLCJzaG9vdGVyIiwiZXZlcnkiLCJjYW5EZXN0cm95U3RlZWwiLCJkZXN0cm95IiwicHJldlRpbGUiLCJmcmVlemUiLCJpc1NwYXduU3BvdENsZWFyIiwiYWlNb3ZlIiwic2V0UmFuZG9tRGlyZWN0aW9uIiwic2V0T3Bvc2l0ZURpcmVjdGlvbiIsIml0ZW1zIiwiZW50aXRpZXMiLCJpc0Rlc3Ryb3llZCIsInRvUmVtb3ZlUXVldWUiLCJyZW1vdmVGcm9tUXVldWUiLCJwb29sIiwiX2NoZWNrRGVhdGgiLCJkZWNvbnN0cnVjdCIsImFyZ3MiLCJlbnRpdGllc19uYW1lc3BhY2VPYmplY3QiLCJmaW5kIiwicmVuZGVyIiwidXBkYXRlIiwic2VlbiIsImNoZWNrVGlsZUNvbGxpc2lvbiIsImNoZWNrRW50aXRpZXNDb2xsaXNpb24iLCJpc091dE9mU2NyZWVuIiwicmVzb2x2ZUVkZ2VDb2xsaXNpb24iLCJmaXJzdCIsInNlY29uZCIsImNvbGxpZGFibGUiLCJsb29rdXBSYW5nZSIsInJlc29sdmVUaWxlQ29sbGlzaW9uIiwiaGFzIiwiX2lzSW50ZXJhY3RpdmUiLCJyZXNvbHZlRW50aXR5Q29sbGlzaW9uIiwiY2xlYXJQbGF5ZXIiLCJnZXRQbGF5ZXIiLCJTdGFnZV9TdGFnZSIsIm51bWJlciIsInBvd2VydXBzQXZhaWxhYmxlIiwic3Bhd25FbmVteSIsInNwYXduUG93ZXJ1cCIsImVuZW1pZXMiLCJnZXRFbmVtaWVzIiwiZW5lbXlTcGF3bkNEIiwicmVuZGVyTGF5ZXIiLCJzY3JlZW5OdW0iLCJHYW1lX0dhbWUiLCJpc0xvc3QiLCJhY2N1bXVsYXRlZFRpbWUiLCJsYXN0VGltZSIsInRpbWUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzcmVlbkZhZGVMZWZ0Iiwic3RhZ2UiLCJjaGVja0NvbGxpc2lvbnMiLCJnZXRGbGFnIiwiaXNGaW5pc2giLCJ0b05leHRTdGFnZSIsImNsZWFyU2NyZWVuIiwicmVuZGVyU3RhcnRTY3JlZW4iLCJyZW5kZXJHYW1lIiwicmVuZGVyR2FtZU92ZXIiLCJyZW5kZXJDaGFpbmdpbmdTdGFnZSIsIm5ld051bSIsImNsZWFyIiwiZ2V0TmV4dFN0YWdlTnVtIiwiYXN5bmMiLCJsb2FkU3ByaXRlIiwic3ByaXRlc19kZWZhdWx0IiwiYSIsImxvYWRBdWRpbyIsImV4cGxvZGUiLCJleHBsb2RlX2RlZmF1bHQiLCJoaXQiLCJoaXRfZGVmYXVsdCIsImhpdGRtZyIsImhpdGRtZ19kZWZhdWx0IiwibmV1dHJhbCIsIm5ldXRyYWxfZGVmYXVsdCIsInBvd2VydXBfZGVmYXVsdCIsIm1vdmVfZGVmYXVsdCIsInN0YXJ0Iiwic3RhcnRfZGVmYXVsdCIsImdhbWVvdmVyIiwiZ2FtZW92ZXJfZGVmYXVsdCIsImxpc3RlblRvRXZlbnRzIiwiY3JlYXRlTG9vcCIsImJ1aWxkX21haW4iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFDekMsRUFBQUUsR0FBQSxpQkFBQUYsRUFBQSxRQUFBTSxLQUFBTixFQUFBckIsRUFBQVUsRUFBQWUsRUFBQUUsRUFBQSxTQUFBQSxHQUFnSCxPQUFBTixFQUFBTSxJQUFxQkMsS0FBQSxLQUFBRCxJQUNySSxPQUFBRixHQUlBekIsRUFBQTZCLEVBQUEsU0FBQTFCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQXFCLFdBQ0EsV0FBMkIsT0FBQXJCLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWixFQUFBYSxFQUFBLFNBQUFpQixFQUFBQyxHQUFzRCxPQUFBakIsT0FBQWtCLFVBQUFDLGVBQUExQixLQUFBdUIsRUFBQUMsSUFHdEQvQixFQUFBa0MsRUFBQSxHQUlBbEMsSUFBQW1DLEVBQUEscUJDbEZBaEMsRUFBQUQsUUFBaUJGLEVBQUFrQyxFQUF1Qix3RENBeEMvQixFQUFBRCxRQUFpQkYsRUFBQWtDLEVBQXVCLHdEQ0F4Qy9CLEVBQUFELFFBQWlCRixFQUFBa0MsRUFBdUIsd0RDQXhDL0IsRUFBQUQsUUFBaUJGLEVBQUFrQyxFQUF1Qix3RENBeEMvQixFQUFBRCxRQUFpQkYsRUFBQWtDLEVBQXVCLHdEQ0F4Qy9CLEVBQUFELFFBQWlCRixFQUFBa0MsRUFBdUIsd0RDQXhDL0IsRUFBQUQsUUFBaUJGLEVBQUFrQyxFQUF1Qix3RENBeEMvQixFQUFBRCxRQUFpQkYsRUFBQWtDLEVBQXVCLHdEQ0F4Qy9CLEVBQUFELFFBQWlCRixFQUFBa0MsRUFBdUIsaWxCQ0F4QyxTQUFBRSxFQUFBQyxFQUFBQyxHQUNBLE9BQUFELEVBQUFFLEdBQUFELEVBQUFFLElBQUFILEVBQUFHLEdBQUFGLEVBQUFDLElBQUFGLEVBQUFJLEdBQUFILEVBQUFJLElBQUFMLEVBQUFLLEdBQUFKLEVBQUFHLEdDREEsTUFBQUUsRUFBQUMsR0FDQUMsS0FBQUMsTUFBQUQsS0FBQUUsU0FBQUgsR0NETyxTQUFBSSxFQUFBQyxFQUFBQyxFQUFBQyxHQUNQLE1BQUFDLEVBQUFGLEVBQUFELEVBQ0EsT0FBQUosS0FBQUMsTUFBQUssRUFBQUMsR0FFTyxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBTCxFQUFBQyxHQUNQLE1BQUFLLEVBQUFYLEtBQUFZLElBQUFULEVBQUFPLEVBQUFHLE9BQUFSLEVBQUFDLEdBQUFJLEVBQUFHLE9BQUEsSUFDQUMsT0FBV0EsRUFBQUMsUUFBZUwsRUFBQUMsR0FDMUIsT0FBQUcsRUFBQUwsRUFBQU0sR0NQTyxJQUFBQyxFQU9BQyxFQVFBQyxFQVFBQyxFQU1BQyxFQVlBQyxFQU1BQyxHQTlDUCxTQUFBTixHQUNBQSxJQUFBLGFBQ0FBLElBQUEsbUJBQ0FBLElBQUEsaUJBQ0FBLElBQUEsZUFKQSxDQUtDQSxXQUVELFNBQUFDLEdBQ0FBLElBQUEscUJBQ0FBLElBQUEsZUFDQUEsSUFBQSxxQkFDQUEsSUFBQSx1QkFDQUEsSUFBQSx1QkFMQSxDQU1DQSxXQUVELFNBQUFDLEdBQ0FBLElBQUEsbUJBQ0FBLElBQUEsZUFDQUEsSUFBQSx5QkFDQUEsSUFBQSxxQkFDQUEsSUFBQSxlQUxBLENBTUNBLFdBRUQsU0FBQUMsR0FDQUEsSUFBQSxxQkFDQUEsSUFBQSxpQkFDQUEsSUFBQSxtQkFIQSxDQUlDQSxXQUVELFNBQUFDLEdBQ0FBLElBQUEsZUFDQUEsSUFBQSxtQkFDQUEsSUFBQSxtQkFDQUEsSUFBQSxtQkFDQUEsSUFBQSxtQkFDQUEsSUFBQSxpQkFDQUEsSUFBQSxhQUNBQSxJQUFBLGlCQUNBQSxJQUFBLGlCQVRBLENBVUNBLFdBRUQsU0FBQUMsR0FDQUEsSUFBQSxpQkFDQUEsSUFBQSxlQUNBQSxJQUFBLGVBSEEsQ0FJQ0EsV0FFRCxTQUFBQyxHQUNBQSxFQUFBLGtCQUNBQSxFQUFBLHdCQUNBQSxFQUFBLHNCQUNBQSxFQUFBLHNCQUNBQSxFQUFBLGNBTEEsQ0FNQ0EsV0NwRE0sTUFBQUMsRUFBQSxLQUVBQyxHQUFtQkMsRUFBQSxHQUFBQyxFQUFBLElBQ25CQyxHQUFtQkYsRUFBQSxHQUFBQyxFQUFBLElBQ25CRSxHQUF1QkgsRUFBQSxJQUFBQyxFQUFBLEtBQ3ZCRyxHQUErQkosRUFBQSxJQUFBQyxFQUFBLEtBQy9CSSxHQUFxQkwsRUFBQSxHQUFBQyxFQUFBLElBQ3JCSyxFQUFBLElBQ0FDLEdBQXNCUCxFQUFBLEdBQUFDLEVBQUEsSUFDdEJPLEdBQ1BDLENBQUtmLEVBQWlCZ0IsVUFDdEJDLFNBQUEsSUFDQUMsT0FBQSxJQUVBSCxDQUFLZixFQUFpQm1CLFFBQ3RCRixTQUFBLElBQ0FDLE9BQUEsSUFFQUgsQ0FBS2YsRUFBaUJvQixTQUN0QkgsU0FBQSxJQUNBQyxPQUFBLEtBR09HLEdBQ1BOLENBQUtqQixFQUFla0IsVUFDcEJDLFNBQUEsSUFDQUMsT0FBQSxHQUNBSSxNQUFBLEdBRUFQLENBQUtqQixFQUFleUIsT0FDcEJOLFNBQUEsSUFDQUMsT0FBQSxHQUNBSSxNQUFBLEdBRUFQLENBQUtqQixFQUFlMEIsVUFDcEJQLFNBQUEsSUFDQUMsT0FBQSxHQUNBSSxNQUFBLElBSU9HLEVBQUEsR0FDQUMsRUFBQSxHQUNBQyxFQUFBLElBQ0FDLEVBQUEsSUFDQUMsRUFBQSxJQUNBQyxFQUFBLElBQ0FDLEVBQUEsSUFDQUMsRUFBQSxJQUVBQyxJQUErQjNCLEVBQUEsRUFBQUMsRUFBQSxJQUFnQkQsRUFBQSxJQUFBQyxFQUFBLElBRS9DMkIsRUFBQSxHQ25EUEMsRUFBQUMsU0FBQUMsZUFBQSxRQUNBQyxHQUFBSCxFQUFBSSxXQUFBLE1BQ0FELEdBQUFFLEtBQUEsYUFDQUYsR0FBQUcsVUFBQSxTQUNPLE1BSUFDLElBQ1BQLFNBQ0FHLFdBQ0F2QixjQUNBdUIsR0FBQUssVUFBQSxJQUFBUixFQUFBUyxNQUFBVCxFQUFBVSxRQUNBUCxHQUFBUSxhQUVBL0IscUJBQUFnQyxHQUNBLE1BQUF2RCxFQUFzQlIsRUFBa0JnRCxFQUFvQkEsRUFBa0JlLEdBQzlFVCxHQUFBVSxTQUFBLFFBQUF4RCxHQUNBOEMsR0FBQVUsU0FBQSxNQUFBeEQsRUFBQSxJQUFBQSxJQUVBdUIsZUFBQWdDLEVBQUEsR0FDQSxNQUFBdkQsRUFBc0JSLEVBQWtCZ0QsRUFBb0JBLEVBQWtCZSxHQUM5RVQsR0FBQVUsU0FBQSxZQUFBeEQsR0FDQThDLEdBQUFVLFNBQUEsTUFBQXhELEVBQUEsUUFBQUEsR0FDQXVELEdBQ1lFLEdBQVlDLFFBQUFDLFVBQW1CN0MsRUFBQSxJQUFBQyxFQUFBLE1BQW9CRCxFQUFBLEdBQUFDLEVBQUEsTUFHL0RRLG9CQUNRa0MsR0FBWUMsUUFBQUUsTUFBZTlDLEVBQUEsSUFBQUMsRUFBQSxNQUFvQkQsRUFBQSxJQUFBQyxFQUFBLE1BQ3ZEK0IsR0FBQWUsV0FBQSwyQkNoQ01DLEdBQU1sQixTQUFBQyxlQUFBLGFBQ05rQixHQUFVRCxHQUFNZixXQUFBLE1Bc0JmaUIsSUFDUHJCLE9BQVVtQixHQUNWaEIsUUFBV2lCLEdBQ1h4QyxPQUFBMEMsRUFBQUMsRUFBQUMsR0FDQSxNQUFBQyxZQUFlQSxFQUFBQyxXQUFBQyxhQUFBQyxZQUFpRGQsR0FBWUMsUUF6QjVFLEVBQUFTLEVBQUFLLEtBQ0EsSUFBQUwsRUFBQWpFLE9BQ0EsT0FDQSxJQUFBYSxFQUFBLEdBQ0EwRCxFQUFBLEVBQ0FOLEVBQUFPLFFBQUEsQ0FBQUMsRUFBQUMsS0FFQUosRUFEQUksRUFBQSxNQUN3QjlELEVBQUEsSUFBQUMsTUFHQUQsRUFBQSxJQUFBQyxNQUhlRCxFQUFBLEdBQUFDLEVBQUEsS0FLdkMsSUFBQTBELEdBQ0ExRCxHQUFBLEdBQ0EwRCxFQUFBLEdBR0FBLEdBQUEsS0FTQUksQ0FBQVYsRUFBQUksR0FDQUYsR0FBa0J2RCxFQUFBLElBQUFDLEVBQUEsTUFBb0JELEVBQUEsR0FBQUMsRUFBQSxLQUN0Q3VELEdBQW9CeEQsRUFBQSxJQUFBQyxFQUFBLE1BQW9CRCxFQUFBLEdBQUFDLEVBQUEsS0FDeENxRCxFQUFBRixJQUErQnBELEVBQUEsSUFBQUMsRUFBQSxNQUFvQkQsRUFBQSxHQUFBQyxFQUFBLEtBQ25EcUQsRUFBQUgsSUFBa0NuRCxFQUFBLElBQUFDLEVBQUEsTUFBb0JELEVBQUEsR0FBQUMsRUFBQSxNQUV0RFEsY0FDUXdDLEdBQU9aLFVBQUEsSUFBaUJXLEdBQU1WLE1BQVFVLEdBQU1ULFFBQzVDVSxHQUFPVCxjQ25DZndCLEdBQUEsQ0FBQUMsRUFBQWpDLElBQUEsQ0FBQWtDLEVBQUFDLEVBQUFDLEVBQUFDLElBQUEsQ0FBQXJGLEVBQUFNLEtBQ0EwQyxFQUFBc0MsVUFBQUwsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQXJGLEVBQUFnQixFQUFBaEIsRUFBQWlCLEVBQUFYLEVBQUFVLEVBQUFWLEVBQUFXLElBRUFzRSxHQUFBTixJQUNBLE1BQUFPLEVBQUFSLEdBQUFDLEVBQTJDN0IsR0FBSUosU0FDL0N5QyxFQUFBVCxHQUFBQyxFQUFnRGYsR0FBU2xCLFNBQ3pELE9BQ0EwQyxRQUNBakUsQ0FBYWYsRUFBV2dCLFVBQ3hCRCxDQUFpQmxCLEVBQVNvRixNQUFBSCxFQUFBLFdBQUFBLEVBQUEsYUFDMUIvRCxDQUFpQmxCLEVBQVNxRixTQUFBSixFQUFBLFlBQUFBLEVBQUEsYUFDMUIvRCxDQUFpQmxCLEVBQVNzRixRQUFBTCxFQUFBLFlBQUFBLEVBQUEsY0FDMUIvRCxDQUFpQmxCLEVBQVN1RixPQUFBTixFQUFBLFlBQUFBLEVBQUEsY0FFMUIvRCxDQUFhZixFQUFXbUIsUUFDeEJKLENBQWlCbEIsRUFBU29GLE1BQUFILEVBQUEsY0FBQUEsRUFBQSxrQkFDMUIvRCxDQUFpQmxCLEVBQVNxRixTQUFBSixFQUFBLGVBQUFBLEVBQUEsZ0JBQzFCL0QsQ0FBaUJsQixFQUFTc0YsUUFBQUwsRUFBQSxlQUFBQSxFQUFBLGlCQUMxQi9ELENBQWlCbEIsRUFBU3VGLE9BQUFOLEVBQUEsZUFBQUEsRUFBQSxlQUUxQi9ELENBQWFmLEVBQVdvQixTQUN4QkwsQ0FBaUJsQixFQUFTb0YsTUFBQUgsRUFBQSxZQUFBQSxFQUFBLGdCQUMxQi9ELENBQWlCbEIsRUFBU3FGLFNBQUFKLEVBQUEsYUFBQUEsRUFBQSxjQUMxQi9ELENBQWlCbEIsRUFBU3NGLFFBQUFMLEVBQUEsYUFBQUEsRUFBQSxpQkFDMUIvRCxDQUFpQmxCLEVBQVN1RixPQUFBTixFQUFBLGVBQUFBLEVBQUEsZ0JBRzFCTyxPQUNBdEUsQ0FBYWpCLEVBQVNrQixVQUN0QkQsQ0FBaUJsQixFQUFTb0YsTUFBQUgsRUFBQSxhQUFBQSxFQUFBLGNBQzFCL0QsQ0FBaUJsQixFQUFTcUYsU0FBQUosRUFBQSxhQUFBQSxFQUFBLGNBQzFCL0QsQ0FBaUJsQixFQUFTc0YsUUFBQUwsRUFBQSxlQUFBQSxFQUFBLGdCQUMxQi9ELENBQWlCbEIsRUFBU3VGLE9BQUFOLEVBQUEsYUFBQUEsRUFBQSxlQUUxQi9ELENBQWFqQixFQUFTeUIsT0FDdEJSLENBQWlCbEIsRUFBU29GLE1BQUFILEVBQUEsY0FBQUEsRUFBQSxlQUMxQi9ELENBQWlCbEIsRUFBU3FGLFNBQUFKLEVBQUEsY0FBQUEsRUFBQSxlQUMxQi9ELENBQWlCbEIsRUFBU3NGLFFBQUFMLEVBQUEsY0FBQUEsRUFBQSxlQUMxQi9ELENBQWlCbEIsRUFBU3VGLE9BQUFOLEVBQUEsY0FBQUEsRUFBQSxnQkFFMUIvRCxDQUFhakIsRUFBUzBCLFVBQ3RCOEQsR0FDQXZFLENBQXFCbEIsRUFBU29GLE1BQUFILEVBQUEsdUJBQUFBLEVBQUEseUJBQzlCL0QsQ0FBcUJsQixFQUFTcUYsU0FBQUosRUFBQSx3QkFBQUEsRUFBQSx3QkFDOUIvRCxDQUFxQmxCLEVBQVNzRixRQUFBTCxFQUFBLHFCQUFBQSxFQUFBLHNCQUM5Qi9ELENBQXFCbEIsRUFBU3VGLE9BQUFOLEVBQUEsa0JBQUFBLEVBQUEsdUJBRTlCUyxHQUNBeEUsQ0FBcUJsQixFQUFTb0YsTUFBQUgsRUFBQSxnQkFBQUEsRUFBQSxrQkFDOUIvRCxDQUFxQmxCLEVBQVNxRixTQUFBSixFQUFBLGlCQUFBQSxFQUFBLGtCQUM5Qi9ELENBQXFCbEIsRUFBU3NGLFFBQUFMLEVBQUEsY0FBQUEsRUFBQSxtQkFDOUIvRCxDQUFxQmxCLEVBQVN1RixPQUFBTixFQUFBLGNBQUFBLEVBQUEsZ0JBRTlCVSxHQUNBekUsQ0FBcUJsQixFQUFTb0YsTUFBQUgsRUFBQSxrQkFBQUEsRUFBQSxtQkFDOUIvRCxDQUFxQmxCLEVBQVNxRixTQUFBSixFQUFBLGtCQUFBQSxFQUFBLG1CQUM5Qi9ELENBQXFCbEIsRUFBU3NGLFFBQUFMLEVBQUEsZUFBQUEsRUFBQSxtQkFDOUIvRCxDQUFxQmxCLEVBQVN1RixPQUFBTixFQUFBLGVBQUFBLEVBQUEsbUJBSTlCVyxRQUNBMUUsQ0FBYWxCLEVBQVNvRixNQUFBSCxFQUFBLHFCQUN0Qi9ELENBQWFsQixFQUFTcUYsU0FBQUosRUFBQSxvQkFDdEIvRCxDQUFhbEIsRUFBU3NGLFFBQUFMLEVBQUEscUJBQ3RCL0QsQ0FBYWxCLEVBQVN1RixPQUFBTixFQUFBLHFCQUV0QlksS0FBQVosRUFBQSxtQkFDQWEsVUFBQWIsRUFBQSxpQkFDQWYsU0FBQWdCLEVBQUEsd0JBQ0FsQixTQUFBa0IsRUFBQSxpQkFDQWpCLFdBQUFpQixFQUFBLG1CQUNBbkIsYUFDQW1CLEVBQUEsZUFDQUEsRUFBQSxlQUNBQSxFQUFBLGVBQ0FBLEVBQUEsZUFDQUEsRUFBQSxlQUNBQSxFQUFBLGVBQ0FBLEVBQUEsZUFDQUEsRUFBQSxlQUNBQSxFQUFBLGVBQ0FBLEVBQUEsZ0JBRUEzQixLQUFBMEIsRUFBQSxlQUNBYyxPQUNBN0UsQ0FBYWQsRUFBSzRGLFFBQUFmLEVBQUEsV0FDbEIvRCxDQUFhZCxFQUFLNkYsUUFBQWhCLEVBQUEsV0FDbEIvRCxDQUFhZCxFQUFLOEYsUUFBQWpCLEVBQUEsV0FDbEIvRCxDQUFhZCxFQUFLK0YsUUFBQWxCLEVBQUEsV0FDbEIvRCxDQUFhZCxFQUFLZ0csT0FBQW5CLEVBQUEsWUFDbEIvRCxDQUFhZCxFQUFLaUcsS0FBQXBCLEVBQUEsWUFDbEIvRCxDQUFhZCxFQUFLa0csT0FBQXJCLEVBQUEsWUFDbEIvRCxDQUFhZCxFQUFLbUcsT0FBQXRCLEVBQUEsYUFFbEIzQixTQUFBMkIsRUFBQSxtQkFDQXVCLFNBQ0F0RixDQUFhaEIsRUFBWXVHLFFBQUF4QixFQUFBLGlCQUN6Qi9ELENBQWFoQixFQUFZd0csV0FBQXpCLEVBQUEsaUJBQ3pCL0QsQ0FBYWhCLEVBQVl5RyxNQUFBMUIsRUFBQSxpQkFDekIvRCxDQUFhaEIsRUFBWTBHLFNBQUEzQixFQUFBLGlCQUN6Qi9ELENBQWFoQixFQUFZMkcsTUFBQTVCLEVBQUEsa0JBRXpCNkIsWUFBQTdCLEVBQUEsaUJBQUFBLEVBQUEsc0JBR0E4QixHQUFBckMsSUFDQSxNQUFBTyxFQUFBUixHQUFBQyxFQUEyQzdCLEdBQUlKLFNBQy9DLE9BQ0F1RSxZQUNhbEgsT0FBQW1GLEVBQUEsY0FBQWxGLE1BQTZDVSxFQUFBLEdBQUFDLEVBQUEsTUFDN0NaLE9BQUFtRixFQUFBLGNBQUFsRixNQUE2Q1UsRUFBQSxHQUFBQyxFQUFBLE1BQzdDWixPQUFBbUYsRUFBQSxjQUFBbEYsTUFBNkNVLEVBQUEsR0FBQUMsRUFBQSxNQUM3Q1osT0FBQW1GLEVBQUEsY0FBQWxGLE1BQTZDVSxFQUFBLEdBQUFDLEVBQUEsTUFDN0NaLE9BQUFtRixFQUFBLGNBQUFsRixNQUE2Q1UsRUFBQSxHQUFBQyxFQUFBLE1BRTFEdUcsa0JBQ2FuSCxPQUFBbUYsRUFBQSxrQkFBQWxGLE1BQWlEVSxFQUFBLEdBQUFDLEVBQUEsTUFDakRaLE9BQUFtRixFQUFBLHlCQUFBbEYsTUFBd0RVLEVBQUEsR0FBQUMsRUFBQSxNQUN4RFosT0FBQW1GLEVBQUEsdUJBQUFsRixNQUFzRFUsRUFBQSxHQUFBQyxFQUFBLE1BQ3REWixPQUFBbUYsRUFBQSwyQkFBQWxGLE1BQTBEVSxFQUFBLEdBQUFDLEVBQUEsTUFDMURaLE9BQUFtRixFQUFBLHdCQUFBbEYsTUFBdURVLEVBQUEsR0FBQUMsRUFBQSxRQThCN0QsTUFBQTBDLEdBQUEsVUF6QlBsQyxXQUFBZ0csR0FDQSxXQUFBQyxRQUFBLENBQUFDLEVBQUFDLEtBQ0EsTUFBQTNDLEVBQUEsSUFBQTRDLE1BQ0E1QyxFQUFBd0MsTUFDQXhDLEVBQUE2QyxpQkFBQSxZQUNBQyxLQUFBOUMsUUFDQThDLEtBQUFuRSxRQUFBMkIsR0FBQU4sR0FDQThDLEtBQUFDLGdCQUFBVixHQUFBckMsR0FDQTBDLFFBSUFsRyxVQUFBd0csR0FDQUYsS0FBQUcsU0FDQSxNQUFBQyxFQUFBM0ssT0FBQTRLLEtBQUFILEdBQUFJLElBQUFDLEdBQUEsSUFBQVosUUFBQSxDQUFBQyxFQUFBQyxLQUNBLE1BQUFNLEVBQUEsSUFBQUssTUFDQUwsRUFBQVQsSUFBQVEsRUFBQUssR0FDQUosRUFBQUosaUJBQUEsc0JBQ0FDLEtBQUFHLE1BQUFJLEdBQUFKLEVBQ0FQLFNBR0EsT0FBQUQsUUFBQWMsSUFBQUwsS0NySE8sTUFBQU0sR0FBQSxVQS9CUGhILGNBQ0FzRyxLQUFBVyxNQUFBLElBQUFDLElBRUFsSCxZQUFBbUgsRUFBQUMsR0FDQSxNQUFBQyxLQUFlQSxFQUFBQyxRQUFhSCxFQUM1QixPQUFBQyxFQUFBRyxzQkFDQUgsRUFBQUksVUFFQUosRUFBQUssY0FDQUwsRUFBQU0sWUFFYXRJLEVBQVdpSSxLQUV4QixZQUFBQyxFQUNBaEIsS0FBQVcsTUFBQVUsSUFBMkJ2SSxFQUFXaUksSUFHdENmLEtBQUFXLE1BQUFXLE9BQThCeEksRUFBV2lJLE1BR3pDckgsU0FDQSxPQUFBNkgsTUFBQUMsS0FBQXhCLEtBQUFXLE9BQUFjLE1BRUEvSCxlQUFBb0gsSUFDQSxtQkFBQWpFLFFBQUE2RSxJQUNBQyxPQUFBNUIsaUJBQUEyQixFQUFBYixJQUNBYixLQUFBNEIsWUFBQWYsRUFBQUMsU0M1QkFlLE1BRUEsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsZ0VBR0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsOERBQ0EsK0RBR01DLEtBQUssNENDL0RKQyxJQUFlbkosRUFBSzRGLE9BQVM1RixFQUFLNkYsT0FBUzdGLEVBQUs4RixPQUFTOUYsRUFBSytGLE9BQVMvRixFQUFLZ0csTUFBUWhHLEVBQUttRyxPQUN6RmlELElBQXVCcEosRUFBS2tHLE1BQVFsRyxFQUFLbUcsTUFBUW5HLEVBQUtxSixNQUM3REMsSUFDQXhJLENBQUtiLEVBQU1zSixRQUFVdkosRUFBS2lHLElBQU1qRyxFQUFLbUcsT0FDckNyRixDQUFLYixFQUFNd0MsT0FBU3pDLEVBQUs0RixPQUFTNUYsRUFBSzZGLE9BQVM3RixFQUFLOEYsT0FBUzlGLEVBQUsrRixPQUFTL0YsRUFBS2dHLE9BQ2pGbEYsQ0FBS2IsRUFBTXVKLE9BQVN4SixFQUFLa0csY0FFWnVELEdBQ2IzSSxZQUFBNkUsR0FDQXlCLEtBQUF6QixRQUFBK0IsSUFBQWdDLFdBRUE1SSxRQUFBNkksR0FDQSxNQUFBQyxFQUFBaEwsS0FBQWlMLElBQUEsRUFBQWpMLEtBQUFDLE1BQUE4SyxFQUFBdEosRUFBd0Q0QixJQUN4RDZILEVBQUFsTCxLQUFBaUwsSUFBQSxFQUFBakwsS0FBQUMsTUFBQThLLEVBQUFySixFQUF3RDJCLElBQ3hEbUYsS0FBQXpCLE1BQUFtRSxHQUFBRixHQUFxQzVKLEVBQUtxSixLQUUxQ3ZJLE9BQUE2SSxHQUNBLE1BQUFDLEVBQUFoTCxLQUFBWSxJQUFBWixLQUFBaUwsSUFBQSxFQUFBakwsS0FBQUMsTUFBQThLLEVBQUF0SixFQUFpRTRCLElBQVMsSUFDMUU2SCxFQUFBbEwsS0FBQVksSUFBQVosS0FBQWlMLElBQUEsRUFBQWpMLEtBQUFDLE1BQUE4SyxFQUFBckosRUFBaUUyQixJQUFTLElBQzFFLE9BQWdCbUcsS0FBQWhCLEtBQUF6QixNQUFBbUUsR0FBQUYsR0FBQXZLLFVBQThDZ0IsRUFBQXVKLEVBQWEzSCxFQUFTM0IsRUFBQXdKLEVBQWM3SCxJQUVsR25CLFlBQUFpSixFQUFBQyxHQUNBLElBQUFDLEtBQ0EsTUFBQUMsRUFBQXRMLEtBQUF1TCxJQUFBSixFQUFBMUosRUFBQTJKLEVBQUEzSixHQUNBK0osRUFBQXhMLEtBQUF1TCxJQUFBSixFQUFBekosRUFBQTBKLEVBQUExSixHQVFBLE9BUEE0SixFQUFBLEdBQUFBLEVBQW1DakksRUFFbkNnSSxFQUFBSSxNQUFrQ2hLLEVBQUEwSixFQUFBMUosRUFBZTRCLEVBQVMzQixFQUFBeUosRUFBQXpKLElBRTFEOEosRUFBQSxHQUFBQSxFQUF3Q25JLEdBQ3hDZ0ksRUFBQUksTUFBa0NoSyxFQUFBMEosRUFBQTFKLEVBQUFDLEVBQUF5SixFQUFBekosRUFBNEIyQixLQUU5RDhILEtBQUFFLEVBQUFELEdBQUF0QyxJQUFBaUMsR0FBQXZDLEtBQUFrRCxPQUFBWCxJQUVBN0ksWUFBQXBFLEdBQ0EwSyxLQUFBekIsTUFBQTFCLFFBQUEsQ0FBQXlGLEVBQUFwSixLQUNBb0osRUFBQXpGLFFBQUEsQ0FBQXNHLEVBQUFsSyxLQUNBaUosR0FBQTVNLEdBQUE4TixTQUFBRCxJQUVnQnZILEdBQVlDLFFBQUEwQyxNQUFBNEUsSUFBc0JsSyxJQUFRNEIsRUFBUzNCLElBQVMyQixJQUFjNUIsRUFBSTRCLEVBQVMzQixFQUFLMkIsZUN6Qy9Gd0ksR0FDYjNKLFlBQUE0SixHQUNBdEQsS0FBQXVELFlBQUFELEdBRUE1SixZQUFBNEosR0FDQXRELEtBQUF3RCxPQUFBRixFQUFBRyxPQUFBLENBQUFDLEVBQUFDLEtBQ0Esb0JBQUFBLEVBQ0FELEVBQUFDLEdBQTZCL0gsR0FBWXVFLE1BQUF3RCxHQUFBQyxnQkFFekMsQ0FDQSxNQUFBckQsVUFBdUJBLEVBQUFzRCxRQUFrQkYsRUFDekNELEVBQUFuRCxHQUFpQzNFLEdBQVl1RSxNQUFBSSxHQUFBcUQsWUFDN0NGLEVBQUFuRCxHQUFBc0QsT0FFQSxPQUFBSCxPQUdBaEssS0FBQTZHLEdBQ0EsT0FBQVAsS0FBQXdELE9BQUFqRCxHQUFBYSxPQUVBMUgsTUFBQTZHLEdBQ0EsT0FBQVAsS0FBQXdELE9BQUFqRCxHQUFBdUQsUUFFQXBLLFdBQ0FqRSxPQUFBc08sT0FBQS9ELEtBQUF3RCxRQUFBM0csUUFBQThHLEtBQUFHLGdCQ3pCT0UsR0FDUHRLLGNBQ0FzRyxLQUFBaUUsVUFFQXZLLFNBQUF3SyxFQUFBQyxHQUNBbkUsS0FBQWlFLE9BQUFDLEdBQUFDLEVBRUF6SyxTQUFBd0ssR0FDQSxPQUFBbEUsS0FBQWlFLE9BQUFDLEdBRUF4SyxLQUFBdUssR0FDQSxPQUFBeE8sT0FBQTJPLFFBQUFwRSxLQUFBaUUsUUFBQUksS0FBQUMsR0FBQUwsRUFBQWIsU0FBQWtCLEVBQUEsS0FBQUEsRUFBQSxPQUVBNUssa0JBQ0EsTUFBQTZLLEVBQUE5TyxPQUFBMk8sUUFBQXBFLEtBQUFpRSxRQUFBTyxPQUFBRixHQUFBLElBQUFBLEVBQUEsSUFDQUMsRUFBQWxNLFFBQ0FrTSxFQUFBMUgsUUFBQXlILFdBQ0F0RSxLQUFBaUUsT0FBQUssRUFBQSxNQUdBN08sT0FBQTRLLEtBQUFMLEtBQUFpRSxRQUFBcEgsUUFBQXZHLElBQ0EwSixLQUFBaUUsT0FBQTNOLElBQUEsV0NyQk9tTyxHQUNQL0ssWUFBQXpCLEVBQUFNLEdBQ0F5SCxLQUFBMEUsR0FBQUQsR0FBQUUsVUFDQTNFLEtBQUEvSCxXQUNBK0gsS0FBQXpILE9BQ0FrTSxHQUFBRSxXQUFBLEVBRUFqTCxVQUNBQSxVQUNBQSx1QkFBQWtMLElBQ0FsTCxpQkFDQSxNQUFBVCxFQUFlQSxFQUFBQyxLQUFPOEcsS0FBQS9ILFVBQ1BnQixFQUFBc0MsRUFBQXJDLEVBQUFzQyxHQUFzQndFLEtBQUF6SCxLQUNyQyxPQUNBckIsR0FBQStCLEVBQ0E5QixHQUFBOEIsRUFBQXNDLEVBQ0FuRSxHQUFBOEIsRUFDQTdCLEdBQUE2QixFQUFBc0MsR0FHQTlCLGdCQUVBK0ssR0FBQUUsVUFBQSxRQ25CYUUsV0FBZ0JKLEdBQzdCL0ssWUFBQXpCLEVBQUFNLEVBQUF1TSxHQUNBQyxNQUFBOU0sRUFBQU0sR0FDQXlILEtBQUE4RSxZQUNBOUUsS0FBQWdGLGFBQUF2UCxPQUFBd1AsVUFBNENoTixHQUU1Q3lCLHdCQUNBQSxxQkFBQTZFLEVBQUEyRyxJQUNBeEwsdUJBQUFrTCxJQUNBbEwsS0FBQUUsR0FDQW9HLEtBQUFnRixhQUFBdlAsT0FBQXdQLFVBQTRDakYsS0FBQS9ILFVBQzVDK0gsS0FBQThFLFlBQStCdE0sRUFBU29GLElBQ3hDb0MsS0FBQS9ILFNBQUFpQixHQUFBVSxFQUEwQ2IsRUFFMUNpSCxLQUFBOEUsWUFBb0N0TSxFQUFTcUYsT0FDN0NtQyxLQUFBL0gsU0FBQWlCLEdBQUFVLEVBQTBDYixFQUUxQ2lILEtBQUE4RSxZQUFvQ3RNLEVBQVN1RixLQUM3Q2lDLEtBQUEvSCxTQUFBZ0IsR0FBQVcsRUFBMENiLEVBRTFDaUgsS0FBQThFLFlBQW9DdE0sRUFBU3NGLFFBQzdDa0MsS0FBQS9ILFNBQUFnQixHQUFBVyxFQUEwQ2IsR0FHMUNXLFNBQ0FzRyxLQUFBL0gsU0FBQXhDLE9BQUF3UCxVQUF3Q2pGLEtBQUFnRixjQUV4Q3RMLGdCQUFBbUMsR0FDQSxJQUFBc0osRUFFQUEsRUFEQW5GLEtBQUE4RSxZQUErQnRNLEVBQVN1RixNQUFBaUMsS0FBQThFLFlBQTRCdE0sRUFBU3NGLE1BQzdFa0MsS0FBQS9ILFNBQUFnQixFQUdBK0csS0FBQS9ILFNBQUFpQixFQUdBMkMsRUFEQXJFLEtBQUFDLE1BQUEwTixFQUFBLElBQUF0SixFQUFBeEQsUUFDQTJILEtBQUEvSCxTQUFBK0gsS0FBQXpILE1BRUFtQixnQkFDQSxNQUFBMEwsRUFBQXBGLEtBQUFxRixpQkFDQSxPQUFBRCxFQUFBaE8sR0FBQSxHQUFBZ08sRUFBQS9OLEdBQUEsS0FBQStOLEVBQUFsTyxHQUFBLEdBQUFrTyxFQUFBak8sR0FBQSxJQUVBdUMsMEJBQ0EsTUFBQXhDLEdBQWVBLEVBQUFDLEtBQUFDLEtBQUFDLE1BQWlCMkksS0FBQXFGLGlCQUNoQyxPQUFBckYsS0FBQThFLFlBQStCdE0sRUFBU29GLE1BQ25CM0UsRUFBQS9CLEVBQUFnQyxFQUFBOUIsSUFBa0I2QixFQUFBOUIsRUFBQStCLEVBQUE5QixJQUV2QzRJLEtBQUE4RSxZQUFvQ3RNLEVBQVNzRixRQUN4QjdFLEVBQUE5QixFQUFBK0IsRUFBQTlCLElBQWtCNkIsRUFBQTlCLEVBQUErQixFQUFBN0IsSUFFdkMySSxLQUFBOEUsWUFBb0N0TSxFQUFTcUYsU0FDeEI1RSxFQUFBL0IsRUFBQWdDLEVBQUE3QixJQUFrQjRCLEVBQUE5QixFQUFBK0IsRUFBQTdCLElBRXZDMkksS0FBQThFLFlBQW9DdE0sRUFBU3VGLE9BQ3hCOUUsRUFBQS9CLEVBQUFnQyxFQUFBOUIsSUFBa0I2QixFQUFBL0IsRUFBQWdDLEVBQUE3QixTQUR2QyxTQ3BEYWlPLFdBQWFULEdBQzFCbkwsWUFBQXpCLEVBQUFNLEVBQUF1TSxHQUNBQyxNQUFBOU0sRUFBQU0sRUFBQXVNLEdBRUFwTCxLQUFBNkwsR0FFQSxHQURBdkYsS0FBQXdGLFlBQUFDLFNBQUEsVUFFQSxPQUNBLElBQUFDLEVBQ0EsTUFBZXpNLEVBQUFzQyxFQUFBckMsRUFBQXNDLEdBQXlCbEMsRUFFeENvTSxFQURBMUYsS0FBQThFLFlBQStCdE0sRUFBU29GLEtBQ1YzRSxFQUFBK0csS0FBQXpILEtBQUFVLEVBQUEsRUFBQStHLEtBQUEvSCxTQUFBZ0IsRUFBQXNDLEVBQUEsRUFBQXJDLEVBQUE4RyxLQUFBL0gsU0FBQWlCLEVBQUFzQyxHQUU5QndFLEtBQUE4RSxZQUFvQ3RNLEVBQVNzRixPQUNmN0UsRUFBQStHLEtBQUF6SCxLQUFBVSxFQUFBK0csS0FBQS9ILFNBQUFnQixFQUFBQyxFQUFBOEcsS0FBQXpILEtBQUFXLEVBQUEsRUFBQThHLEtBQUEvSCxTQUFBaUIsRUFBQXNDLEVBQUEsR0FFOUJ3RSxLQUFBOEUsWUFBb0N0TSxFQUFTcUYsUUFDZjVFLEVBQUErRyxLQUFBekgsS0FBQVUsRUFBQSxFQUFBK0csS0FBQS9ILFNBQUFnQixFQUFBc0MsRUFBQSxFQUFBckMsRUFBQThHLEtBQUF6SCxLQUFBVyxFQUFBOEcsS0FBQS9ILFNBQUFpQixJQUdBRCxFQUFBK0csS0FBQS9ILFNBQUFnQixFQUFBc0MsRUFBQXJDLEVBQUE4RyxLQUFBekgsS0FBQVcsRUFBQSxFQUFBOEcsS0FBQS9ILFNBQUFpQixFQUFBc0MsRUFBQSxHQUV0Qm1LLEdBQWFDLFlBQUEsU0FBQUYsRUFBQTFGLEtBQUE4RSxVQUFBOUUsTUFDckJBLEtBQUF3RixZQUFBSyxTQUFBLFNBQUFOLEdBRUE3TCxNQUNBc0csS0FBQXdGLFlBQUFLLFNBQUEsUUFBMkN6TCxHQUMzQzRGLEtBQUE4RixhQUFBMUUsS0FBQSxXQUNRdUUsR0FBYXBCLFNBQUF2RSxLQUFBMEUsSUFFckJoTCxpQkFBQXlKLEdBQ0EsTUFBQVIsRUFBQUMsR0FBQTVDLEtBQUErRiwwQkFDQUMsRUFBQTdDLEVBQUFsTCxTQUNBLEdBQUErSCxLQUFBOEUsWUFBK0J0TSxFQUFTb0YsS0FBQW9DLEtBQUE4RSxZQUEyQnRNLEVBQVNxRixPQUFBLENBQzVFLE1BQUFvSSxFQUFBek8sS0FBQVksSUFBQVosS0FBQXVMLElBQUFpRCxFQUFBL00sRUFBQTBKLEVBQUExSixHQUFBekIsS0FBQXVMLElBQUFpRCxFQUFBL00sRUFBQTJKLEVBQUEzSixJQUNBLEdBQUFnTixFQUFBLEdBQUFBLEVBQUEsR0FFQSxPQUF3QmhOLEVBRHhCK0csS0FBQS9ILFNBQUFnQixFQUFBK00sRUFBQS9NLEVBQUErTSxFQUFBL00sRUFBOEU0QixFQUFTbUwsRUFBQS9NLEVBQUErRyxLQUFBekgsS0FBQVUsRUFDL0RDLEVBQUE4RyxLQUFBZ0YsYUFBQTlMLFNBR3hCLEdBQUE4RyxLQUFBOEUsWUFBb0N0TSxFQUFTdUYsTUFBQWlDLEtBQUE4RSxZQUE0QnRNLEVBQVNzRixNQUFBLENBQ2xGLE1BQUFtSSxFQUFBek8sS0FBQVksSUFBQVosS0FBQXVMLElBQUFpRCxFQUFBOU0sRUFBQXlKLEVBQUF6SixHQUFBMUIsS0FBQXVMLElBQUFpRCxFQUFBOU0sRUFBQTBKLEVBQUExSixJQUNBLEdBQUErTSxFQUFBLEdBQUFBLEVBQUEsR0FDQSxNQUFBQyxFQUFBbEcsS0FBQS9ILFNBQUFpQixFQUFBOE0sRUFBQTlNLEVBQUE4TSxFQUFBOU0sRUFBOEUyQixFQUFTbUwsRUFBQTlNLEVBQUE4RyxLQUFBekgsS0FBQVcsRUFDdkYsT0FBd0JELEVBQUErRyxLQUFBZ0YsYUFBQS9MLEVBQUFDLEVBQUFnTixNQy9DakIsU0FBQUMsR0FBQUMsR0FDUCxPQUFBQSxhQUE2QmQsR0FFdEIsU0FBQWUsR0FBQUQsR0FDUCxPQUFBQSxhQUE2QkUsR0FFdEIsU0FBQUMsR0FBQUgsR0FDUCxPQUFBQSxhQUE2QkksR0FFdEIsU0FBQUMsR0FBQUwsR0FDUCxPQUFBQSxhQUE2Qk0sR0FFdEIsU0FBQUMsR0FBQVAsR0FDUCxPQUFBQSxhQUE2QlEsR0FFdEIsU0FBQUMsR0FBQVQsR0FDUCxPQUFBQSxhQUE2QlUsU0NadEJDLEdBQ1ByTixjQUNBc0csS0FBQWdILGFBRUF0TixVQUFBdU4sRUFBQUMsR0FDQWxILEtBQUFnSCxVQUFBQyxHQUFBQyxFQUVBeE4sWUFBQXVOLFVBQ0FqSCxLQUFBZ0gsVUFBQUMsR0FFQXZOLE9BQUF5TixHQUNBMVIsT0FBQXNPLE9BQUEvRCxLQUFBZ0gsV0FBQW5LLFFBQUFxSyxLQUFBQyxLQUdPLE1BQUFDLEdBQUEsSUFBQUwsU0FDTUQsV0FBZ0JyQyxHQUM3Qi9LLFlBQUFzSCxFQUFBL0ksR0FDQThNLE1BQUE5TSxFQUFBeEMsT0FBQXdQLFVBQTBDekwsSUFDMUN3RyxLQUFBZ0IsT0FDQWhCLEtBQUF3RixZQUFBLElBQStCeEIsR0FDL0JoRSxLQUFBOEYsYUFBQSxJQUFnQ3pDLElBQVksWUFDNUNyRCxLQUFBd0YsWUFBQUssU0FBQSxPQUEwQ3JMLEdBRTFDZCxTQUNBLE1BQUEyTixFQUFBckgsS0FBQXdGLFlBQUFDLFNBQUEsUUFDQSxJQUFBNEIsRUFDWTFCLEdBQWFwQixTQUFBdkUsS0FBQTBFLElBRXpCMkMsSUFBK0I1TSxHQUMvQnVGLEtBQUF3RixZQUFBSyxTQUFBLFFBQStDcEwsR0FFL0N1RixLQUFBd0YsWUFBQThCLGtCQUVBNU4sU0FDQSxNQUFBNk4sRUFBQXZILEtBQUF3RixZQUFBQyxTQUFBLFNBQ0E4QixLQUFBLE9BRVEzTCxHQUFZQyxRQUFBbUQsUUFBQWdCLEtBQUFnQixNQUFBaEIsS0FBQS9ILFNBQUErSCxLQUFBekgsTUFFcEJtQix1QkFBQWtMLEdBQ1l5QixHQUFRekIsS0FDUmUsR0FBYXBCLFNBQUF2RSxLQUFBMEUsSUFDekIwQyxHQUFBSSxPQUFBeEgsS0FBQWdCLE1BQ0FoQixLQUFBOEYsYUFBQTFFLEtBQUEsbUJDN0Jha0YsV0FBZWhCLEdBQzVCNUwsY0FDQXFMLE1BQUF0UCxPQUFBd1AsVUFBZ0M1TCxHQUFxQjVELE9BQUF3UCxVQUFxQmpNLEdBQVlSLEVBQVNvRixLQUMvRm9DLEtBQUEvRixNQUFBLEVBQ0ErRixLQUFBeUgsTUFBcUI5TyxFQUFXZ0IsUUFDaENxRyxLQUFBd0YsWUFBQSxJQUErQnhCLEdBQy9CaEUsS0FBQThGLGFBQUEsSUFBZ0N6QyxJQUNoQyxXQUVBOUMsVUFBQSxVQUNBc0QsTUFBQSxJQUdBdEQsVUFBQSxPQUNBc0QsTUFBQSxLQUdBN0QsS0FBQXdGLFlBQUFLLFNBQUEsUUFBMkN4TCxHQUMzQzJGLEtBQUF3RixZQUFBSyxTQUFBLGFBQWdEdkwsR0FDeEM4TSxHQUFhTSxVQUFBMUgsS0FBQTBFLEdBOUJyQixTQUFBaUQsR0FDQUEsSUFBd0JqUCxFQUFZMkcsS0FDcENXLEtBQUEvRixPQUFBLEVBRUEwTixJQUE2QmpQLEVBQVl1RyxPQUN6Q2UsS0FBQXdGLFlBQUFLLFNBQUEsYUFBZ0R2TCxHQUVoRHFOLElBQTZCalAsRUFBWXlHLE1BQUFhLEtBQUF5SCxNQUFzQjlPLEVBQVdvQixTQUMxRWlHLEtBQUF5SCxPQUFBLElBc0JxQmxSLEtBQUF5SixPQUVyQnRHLFNBQ0FzRyxLQUFBd0YsWUFBQThCLGtCQUNBLE1BQUFNLEVBQUE1SCxLQUFBd0YsWUFBQUMsU0FBQSxTQUNBb0MsRUFBQTdILEtBQUF3RixZQUFBQyxTQUFBLFNBQ0FtQyxFQUNBLElBQUFBLEdBQ0E1SCxLQUFBOEgsU0FBQSxHQUdBRCxJQUdBN0gsS0FBQThGLGFBQUExRSxLQUFBLFdBQ0FwQixLQUFBK0gsZ0JBRUFyTyxTQUNBLE1BQUFtTyxFQUFBN0gsS0FBQXdGLFlBQUFDLFNBQUEsU0FDQW1DLEVBQUE1SCxLQUFBd0YsWUFBQUMsU0FBQSxTQUNBbkcsRUFBQVUsS0FBQXdGLFlBQUFDLFNBQUEsY0FDQSxHQUFBb0MsRUFDQSxPQUFtQjdQLEVBQXNCZ0ksS0FBQS9ILFNBQWdCMkQsR0FBWXFFLGdCQUFBVCxVQUE0Qm5GLEVBQVl3TixHQUU3RyxHQUFBRCxFQUNBLE9BQW1CNVAsRUFBc0JnSSxLQUFBL0gsU0FBZ0IyRCxHQUFZcUUsZ0JBQUFSLGdCQUFrQ3JGLEVBQVl3TixHQUVuSCxHQUFBdEksRUFBQSxDQUNBLE1BQUEwSSxFQUFzQ3BNLEdBQVlDLFFBQUF5RCxXQUVsRDBJLEVBREExSSxFQUFBMEksRUFBQTNQLFFBQ0EySCxLQUFBL0gsU0FBQStILEtBQUF6SCxNQUVBeUgsS0FBQWlJLGdCQUE2QnJNLEdBQVlDLFFBQUE4QixPQUFBcUMsS0FBQXlILE9BQUF6SCxLQUFBOEUsWUFFekNwTCxlQUNBLE1BQUFwRCxFQUFvQm9LLEdBQVF3SCxTQUM1QixJQUFBQyxHQUFBLEVBQ0E3UixJQUFvQndDLEVBQVdzUCxRQUMvQnBJLEtBQUE4RSxVQUE2QnRNLEVBQVNvRixJQUV0Q3RILElBQXlCd0MsRUFBV3VQLFVBQ3BDckksS0FBQThFLFVBQTZCdE0sRUFBU3FGLE9BRXRDdkgsSUFBeUJ3QyxFQUFXd1AsVUFDcEN0SSxLQUFBOEUsVUFBNkJ0TSxFQUFTdUYsS0FFdEN6SCxJQUF5QndDLEVBQVd5UCxXQUNwQ3ZJLEtBQUE4RSxVQUE2QnRNLEVBQVNzRixPQUd0Q2tDLEtBQUE4RixhQUFBaEMsTUFBQSxRQUNBcUUsR0FBQSxHQUVBN1IsSUFBb0J3QyxFQUFXMFAsT0FDL0J4SSxLQUFBeUksS0FBc0JoUCxFQUFZdUcsS0FBQXlILE9BQUE1TixRQUVsQ3NPLElBQ0FuSSxLQUFBOEYsYUFBQWhDLE1BQUEsV0FDQTlELEtBQUE4RixhQUFBMUUsS0FBQSxRQUNBcEIsS0FBQTBJLEtBQXNCalAsRUFBWXVHLEtBQUF5SCxPQUFBN04sV0FHbENGLHVCQUNBc0csS0FBQTJJLFNBRUFqUCxxQkFBQTZFLEdBQ0EsT0FBQUEsRUFBQWxHLE9BQUEsQ0FDQSxNQUFBdVEsRUFBQTVJLEtBQUE2SSxpQkFBQXRLLEVBQUEsSUFDQXFLLEVBQ0E1SSxLQUFBL0gsU0FBQXhDLE9BQUF3UCxVQUFnRDJELEdBRWhENUksS0FBQTJJLGNBR0EzSSxLQUFBMkksU0FHQWpQLHVCQUFBa0wsR0FDQSxNQUFBZ0QsRUFBQTVILEtBQUF3RixZQUFBQyxTQUFBLFNBQ0EsSUFBWW9CLEdBQVNqQyxHQUdyQixHQUFpQjZCLEdBQVE3QixLQUFBZ0QsRUFBQSxDQUV6QixHQURBNUgsS0FBQXdGLFlBQUFDLFNBQUEsY0FFQSxPQUNBekYsS0FBQXdGLFlBQUFLLFNBQUEsUUFBK0N6TCxHQUMvQzRGLEtBQUE4RixhQUFBMUUsS0FBQSxXQUNBcEIsS0FBQS9GLE9BQUEsRUFDQSxJQUFBK0YsS0FBQS9GLE9BQ0ErRixLQUFBOEksV0FJQTlJLEtBQUEySSxTQUdBalAsUUFBQXFQLEdBQUEsR0FDQUEsSUFDQS9JLEtBQUF5SCxNQUF5QjlPLEVBQVdnQixTQUNwQ3FHLEtBQUE4RixhQUFBa0QsV0FDQWhKLEtBQUF3RixZQUFBSyxTQUFBLFFBQTJDeEwsR0FDM0MyRixLQUFBd0YsWUFBQUssU0FBQSxhQUFnRHZMLEdBQ2hEMEYsS0FBQS9ILFNBQUF4QyxPQUFBd1AsVUFBMEM1TCxHQUMxQzJHLEtBQUFnRixhQUFBdlAsT0FBQXdQLFVBQThDNUwsR0FFOUNLLGNBQ0FzRyxLQUFBOEYsYUFBQWtELFdBQ1E1QixHQUFhNkIsWUFBQWpKLEtBQUEwRSxXQzNJUmdDLFdBQWU3QixHQUM1Qm5MLFlBQUF6QixFQUFBNk0sRUFBQW9FLEdBQ0FuRSxNQUFBOU0sRUFBQXhDLE9BQUF3UCxVQUEwQzNMLEdBQVd3TCxHQUNyRDlFLEtBQUE4RSxZQUNBOUUsS0FBQWtKLFVBQ0FsSixLQUFBOEYsYUFBQSxJQUFnQ3pDLElBQVksaUJBRTVDM0osU0FDQXNHLEtBQUEwSSxLQUFrQm5QLEdBRWxCRyxTQUNBc0csS0FBQWlJLGdCQUE2QnJNLEdBQVlDLFFBQUF1QyxPQUFBNEIsS0FBQThFLFlBRXpDcEwsdUJBQ1FpTSxHQUFhcEIsU0FBQXZFLEtBQUEwRSxJQUVyQmhMLHFCQUFBNkUsRUFBQTJHLEdBQ0EsR0FBQTNHLEVBQUE0SyxNQUFBaEcsR0FBZ0NuQixHQUFhb0IsU0FBQUQsRUFBQW5DLE9BQzdDLE9BQ1EyRSxHQUFhcEIsU0FBQXZFLEtBQUEwRSxJQUNyQixNQUFBMEUsRUFBZ0MvQyxHQUFRckcsS0FBQWtKLFVBQUFsSixLQUFBa0osUUFBQXpCLFFBQXlDOU8sRUFBV29CLE9BQzVGd0UsRUFBQThGLEtBQUFsQixLQUFBbkMsT0FBMERwSSxFQUFLZ0csT0FFL0RvQixLQUFBOEYsYUFBQTFFLEtBQUEsT0FHQXBCLEtBQUE4RixhQUFBMUUsS0FBQSxVQUVBN0MsRUFBQTFCLFFBQUFzRyxJQUNnQm5CLEdBQWFvQixTQUFBRCxFQUFBbkMsT0FBQW1DLEVBQUFuQyxPQUF1Q3BJLEVBQUtnRyxRQUFBd0ssR0FFekVsRSxFQUFBbUUsUUFBQWxHLEVBQUFsTCxZQUdBeUIsdUJBQUFrTCxHQUNZaUMsR0FBU2pDLEtBRVR5QixHQUFRckcsS0FBQWtKLFVBQWtCM0MsR0FBTzNCLE1BQUE1RCxNQUFBLEdBQzdDaEIsS0FBQThGLGFBQUExRSxLQUFBLE9BRVF1RSxHQUFhcEIsU0FBQXZFLEtBQUEwRSxZQy9CUjhCLFdBQWNsQixHQUMzQjVMLFlBQUFzSCxFQUFBL0ksR0FDQThNLE1BQUE5TSxFQUFBeEMsT0FBQXdQLFVBQTBDak0sR0FBWVIsRUFBU3FGLFFBQy9EbUMsS0FBQWdCLE9BQ0FoQixLQUFBL0YsTUFBcUJELEVBQVdnSCxHQUFBL0csTUFDaEMrRixLQUFBc0osU0FBQTdULE9BQUF3UCxVQUF3Q2hOLEdBQ3hDK0gsS0FBQXdGLFlBQUEsSUFBK0J4QixHQUMvQmhFLEtBQUE4RixhQUFBLElBQWdDekMsSUFBWSxZQUM1Q3JELEtBQUF3RixZQUFBSyxTQUFBLFFBQTJDeEwsR0FDbkMrTSxHQUFhTSxVQUFBMUgsS0FBQTBFLEdBbEJyQixTQUF3QmlELEdBQ3hCQSxJQUF3QmpQLEVBQVl3RyxVQUNwQ2MsS0FBQXdGLFlBQUFLLFNBQUEsU0FBNEN0TCxHQUU1Q29OLElBQTZCalAsRUFBWTBHLFVBQ3pDWSxLQUFBd0YsWUFBQW5CLE1BQUEsbUJBQ0FyRSxLQUFBOEksUUFZd0R2UyxLQUFBeUosT0FFeER0RyxTQUNBLE1BQUFtTyxFQUFBN0gsS0FBQXdGLFlBQUFDLFNBQUEsU0FDQW1DLEVBQUE1SCxLQUFBd0YsWUFBQUMsU0FBQSxTQUNBOEQsRUFBQXZKLEtBQUF3RixZQUFBQyxTQUFBLFVBRUEsR0FEQXpGLEtBQUF3RixZQUFBOEIsa0JBQ0FPLEVBQUEsQ0FFQSxHQURBN0gsS0FBQXdKLG1CQUdBLFlBREF4SixLQUFBd0YsWUFBQUssU0FBQSxRQUFtRHhMLE9BSW5ELElBQUF1TixHQUFBMkIsRUFDQSxPQUdBdkosS0FBQXlKLFNBQ0F6SixLQUFBeUksS0FBc0J6TyxFQUFXZ0csS0FBQWdCLE1BQUFuSCxTQUdqQ0gsU0FDQSxNQUFBbU8sRUFBQTdILEtBQUF3RixZQUFBQyxTQUFBLFNBQ0FtQyxFQUFBNUgsS0FBQXdGLFlBQUFDLFNBQUEsU0FDQSxPQUFBb0MsRUFDbUI3UCxFQUFzQmdJLEtBQUEvSCxTQUFnQjJELEdBQVlxRSxnQkFBQVQsVUFBNEJuRixFQUFZd04sR0FFN0dELEVBQ21CNVAsRUFBc0JnSSxLQUFBL0gsU0FBZ0IyRCxHQUFZcUUsZ0JBQUFSLGdCQUFrQ3JGLEVBQVl3TixRQUVuSDVILEtBQUFnQixPQUEwQnZJLEVBQVMwQixRQUNuQzZGLEtBQUFpSSxnQkFBaUNyTSxHQUFZQyxRQUFBbUMsTUFBQWdDLEtBQUFnQixNQUFBaEIsS0FBQS9GLE9BQUErRixLQUFBOEUsWUFHN0M5RSxLQUFBaUksZ0JBQWlDck0sR0FBWUMsUUFBQW1DLE1BQUFnQyxLQUFBZ0IsTUFBQWhCLEtBQUE4RSxhQUc3Q3BMLFNBQ0EsTUFBQUUsU0FBZUEsR0FBY0ksRUFBV2dHLEtBQUFnQixNQUN4Q3hKLEtBQUF1TCxJQUFBdkwsS0FBQUMsTUFBQXVJLEtBQUFzSixTQUFBclEsRUFBQStHLEtBQUEvSCxTQUFBZ0IsSUFBQSxLQUNBekIsS0FBQXVMLElBQUF2TCxLQUFBQyxNQUFBdUksS0FBQXNKLFNBQUFwUSxFQUFBOEcsS0FBQS9ILFNBQUFpQixJQUFBLEtBQ0E4RyxLQUFBc0osU0FBQTdULE9BQUF3UCxVQUE0Q2pGLEtBQUEvSCxVQUM1QytILEtBQUEwSixxQkFDQTFKLEtBQUEwSSxLQUFBOU8sSUFHQW9HLEtBQUEwSSxLQUFBOU8sR0FHQUYsdUJBQ0FzRyxLQUFBMkksU0FDQTNJLEtBQUEwSixxQkFHQWhRLHFCQUFBNkUsR0FDQSxPQUFBQSxFQUFBbEcsT0FBQSxDQUNBLE1BQUF1USxFQUFBNUksS0FBQTZJLGlCQUFBdEssRUFBQSxJQUNBcUssRUFDQTVJLEtBQUEvSCxTQUFBeEMsT0FBQXdQLFVBQWdEMkQsSUFHaEQ1SSxLQUFBMEoscUJBQ0ExSixLQUFBMkksZUFJQTNJLEtBQUEwSixxQkFDQTFKLEtBQUEySSxTQUdBalAsdUJBQUFrTCxHQUNZaUMsR0FBU2pDLEtBR0o2QixHQUFRN0IsSUFBV3lCLEdBQVF6QixFQUFBc0UsU0FDNUMsSUFBQWxKLEtBQUEvRixNQUNBK0YsS0FBQThJLE1BR0E5SSxLQUFBL0YsT0FBQSxFQUdpQnNNLEdBQU8zQixJQUN4QjVFLEtBQUEySSxTQUNBM0ksS0FBQTJKLHVCQUVpQnRELEdBQVF6QixLQUN6QjVFLEtBQUF3RixZQUFBQyxTQUFBLGNBQ0F6RixLQUFBMkosc0JBQ0EzSixLQUFBMkksV0FHQWpQLHFCQUNBLE1BQUFrUSxHQUF1QnBSLEVBQVNvRixJQUFNcEYsRUFBU3NGLE1BQVF0RixFQUFTcUYsT0FBU3JGLEVBQVN1RixNQUFBeUcsT0FBQU0sT0FBQTlFLEtBQUE4RSxXQUNsRjNNLEVBQUFYLEtBQUFDLE1BQUFELEtBQUFFLFNBQUFrUyxFQUFBdlIsUUFDQTJILEtBQUE4RSxVQUFBOEUsRUFBQXpSLEdBRUF1QixzQkFDQXNHLEtBQUE4RSxZQUErQnRNLEVBQVNvRixJQUN4Q29DLEtBQUE4RSxVQUE2QnRNLEVBQVNxRixPQUV0Q21DLEtBQUE4RSxZQUFvQ3RNLEVBQVNxRixPQUM3Q21DLEtBQUE4RSxVQUE2QnRNLEVBQVNvRixJQUV0Q29DLEtBQUE4RSxZQUFvQ3RNLEVBQVNzRixNQUM3Q2tDLEtBQUE4RSxVQUE2QnRNLEVBQVN1RixLQUd0Q2lDLEtBQUE4RSxVQUE2QnRNLEVBQVNzRixNQUd0Q3BFLG1CQUNBLE9BQWVpTSxHQUFha0UsU0FDNUJyRixPQUFBNEIsS0FBQTFCLEtBQUExRSxLQUFBMEUsS0FBd0QrQixHQUFRTCxJQUNoRTVCLE9BQUE0QixJQUNnQkcsR0FBT0gsS0FDdkJBLEVBQUFaLFlBQUFDLFNBQUEsVUFJQXBCLEtBQUErQixHQUE0QnJQLEVBQW9CcVAsRUFBQWYsaUJBQUFyRixLQUFBcUYsbUJBRWhEM0wsY0FDUTBOLEdBQWE2QixZQUFBakosS0FBQTBFLFdDakpSa0MsV0FBYW5DLEdBQzFCL0ssY0FDQXFMLE1BQWMzTCxFQUFlRCxHQUM3QjZHLEtBQUE4SixhQUFBLEVBRUFwUSxTQUNBc0csS0FBQThKLFlBQ1lsTyxHQUFZQyxRQUFBeUMsVUFBQTBCLEtBQUEvSCxTQUFBK0gsS0FBQXpILE1BR1pxRCxHQUFZQyxRQUFBd0MsS0FBQTJCLEtBQUEvSCxTQUFBK0gsS0FBQXpILE1BR3hCbUIsdUJBQUFrTCxHQUNZNkIsR0FBUTdCLEtBQ3BCNUUsS0FBQThKLGFBQUEsSUM2Rk8sTUFBQW5FLEdBQUEsVUExR1BqTSxjQUNBc0csS0FBQXVFLFNBQUEsQ0FBQUcsSUFDQTFFLEtBQUErSixjQUFBMUksSUFBQXFELEtBRUExRSxLQUFBZ0ssZ0JBQUEsTUFDQWhLLEtBQUErSixjQUFBbE4sUUFBQW9LLElBQ0EsTUFBQWIsRUFBQXBHLEtBQUFpSyxLQUFBaEQsR0FDQWpILEtBQUFrSyxZQUFBOUQsWUFFQXBHLEtBQUFpSyxLQUFBaEQsR0FDQWIsRUFBQStELGNBQ0FuSyxLQUFBK0osY0FBQXpJLE9BQUEyRixRQUlBakgsS0FBQWlLLFFBQ0FqSyxLQUFBK0osY0FBQSxJQUFBbkosSUFFQWxILFlBQUFzSCxLQUFBb0osR0FDQSxNQUFBaEUsRUFBQSxJQUEyQmlFLEVBQVFySixNQUFBb0osR0FDbkNwSyxLQUFBaUssS0FBQTdELEVBQUExQixJQUFBMEIsRUFFQTFNLGFBQ0EsT0FBQXNHLEtBQUE2SixTQUFBckYsT0FBb0MrQixJQUVwQzdNLFlBQ0EsT0FBQXNHLEtBQUE2SixTQUFBUyxLQUFrQ2pFLElBRWxDM00sVUFDQSxPQUFBc0csS0FBQTZKLFNBQUFTLEtBQWtDM0QsSUFFbENqTixTQUNBc0csS0FBQTZKLFNBQUFoTixRQUFBdUosS0FBQW1FLFVBRUE3USxTQUNBc0csS0FBQTZKLFNBQUFoTixRQUFBdUosS0FBQW9FLFVBRUE5USxnQkFBQXdMLEdBQ0EsTUFBQXVGLEVBQUEsSUFBQTdKLElBQ0FaLEtBQUE2SixTQUFBaE4sUUFBQXVKLElBQ2dCUyxHQUFTVCxJQUFZTyxHQUFNUCxLQUUzQ3BHLEtBQUEwSyxtQkFBQXRFLEVBQUFsQixHQUNBbEYsS0FBQTJLLHVCQUFBdkUsRUFBQXFFLEdBQ0FBLEVBQUFwSixJQUFBK0UsRUFBQTFCLE9BR0FoTCxtQkFBQTBNLEVBQUFsQixHQUNBLEdBQUFrQixFQUFBd0UsZ0JBQ0F4RSxFQUFBeUUsMkJBRUEsQ0FDQSxNQUFBQyxFQUFBQyxHQUFBM0UsRUFBQUwsMEJBRUFpRixFQURBOUYsRUFBQStGLFlBQUFILEVBQUFDLEdBRUF2RyxPQUFBckIsR0FBZ0NwQixHQUFLcUIsU0FBQUQsRUFBQW5DLE9BQ3JDd0QsT0FBQXJCLEdBQWdDcE0sRUFBb0JxUCxFQUFBZixrQkFDcERuTyxHQUFBaU0sRUFBQWxMLFNBQUFnQixFQUNBOUIsR0FBQWdNLEVBQUFsTCxTQUFBZ0IsRUFBc0M0QixFQUN0Q3pELEdBQUErTCxFQUFBbEwsU0FBQWlCLEVBQ0E3QixHQUFBOEwsRUFBQWxMLFNBQUFpQixFQUFzQzJCLEtBRXRDbVEsRUFBQTNTLFFBQ0ErTixFQUFBOEUscUJBQUFGLEVBQUE5RixJQUlBeEwsdUJBQUEwTSxFQUFBcUUsR0FDQXpLLEtBQUE2SixTQUFBaE4sUUFBQStILElBQ0F3QixFQUFBMUIsS0FBQUUsRUFBQUYsSUFBQStGLEVBQUFVLElBQUF2RyxFQUFBRixLQUVBMUUsS0FBQW9MLGVBQUF4RyxJQUE4QzdOLEVBQW9CcVAsRUFBQWYsaUJBQUFULEVBQUFTLG9CQUNsRWUsRUFBQWlGLHVCQUFBekcsR0FDQUEsRUFBQXlHLHVCQUFBakYsTUFJQTFNLE1BQUE0UixHQUFBLEdBQ0EsR0FBQUEsRUFRQTdWLE9BQUFzTyxPQUFBL0QsS0FBQWlLLE1BQUFwTixRQUFBdUosS0FBQStELGVBQ0FuSyxLQUFBaUssWUFUQSxDQUNBLE1BQUF0TSxFQUFBcUMsS0FBQXVMLFlBQ0E5VixPQUFBc08sT0FBQS9ELEtBQUFpSyxNQUNBekYsT0FBQTRCLEtBQUExQixLQUFBL0csRUFBQStHLElBQ0E3SCxRQUFBdUosS0FBQStELGVBQ0FuSyxLQUFBaUssTUFBeUJ2USxDQUFBaUUsRUFBQStHLElBQUEvRyxHQU16QnFDLEtBQUErSixjQUFBLElBQUFuSixJQUVBbEgsZUFBQTBNLEdBQ0EsT0FBWUQsR0FBTUMsS0FDbEJBLEVBQUFaLFlBQUFuQixNQUFBLGtCQUlBM0ssWUFBQTBNLEdBQ0EsR0FBWUQsR0FBTUMsR0FDbEIsT0FBQUEsRUFBQVosWUFBQUMsU0FBQSxTQUdBb0UsZUFDQSxPQUFBcFUsT0FBQXNPLE9BQUEvRCxLQUFBaUssY0N6R2F1QixHQUNiOVIsWUFBQStSLEVBQUFuTCxFQUFBaEUsR0FDQTBELEtBQUF5TCxTQUNBekwsS0FBQU0sTUFDQU4sS0FBQTFELGFBQ0EwRCxLQUFBMEwsa0JBQUEsRUFDQTFMLEtBQUF3RixZQUFBLElBQStCeEIsR0FDL0JoRSxLQUFBOEYsYUFBQSxJQUFnQ3pDLElBQVksVUFDNUNyRCxLQUFBd0YsWUFBQUssU0FBQSxpQkFBb0RyTCxHQUNwRHdGLEtBQUE4RixhQUFBMUUsS0FBQSxTQUNRdUUsR0FBYUMsWUFBQSxRQUVyQmxNLFNBQ0FzRyxLQUFBd0YsWUFBQThCLGtCQUNBdEgsS0FBQTJMLGFBQ0EzTCxLQUFBNEwsZUFFQWxTLFdBQ0EsTUFBQW1TLEVBQXdCbEcsR0FBYW1HLGFBQ3JDLE9BQUE5TCxLQUFBMUQsTUFBQWpFLFNBQUF3VCxFQUFBeFQsT0FFQXFCLGFBQ0EsTUFBQXFTLEVBQUEvTCxLQUFBd0YsWUFBQUMsU0FBQSxnQkFDQW9HLEVBQXdCbEcsR0FBYW1HLGFBQ3JDLElBQUE5TCxLQUFBMUQsTUFBQWpFLFFBQUF3VCxFQUFBeFQsT0FBQSxHQUFBMFQsRUFDQSxPQUNBLE1BQUE1VCxFQUFzQmIsRUFBUyxHQUMvQjBJLEtBQUF3RixZQUFBSyxTQUFBLGVBQWtEbkwsR0FDMUNpTCxHQUFhQyxZQUFBLFFBQUE1RixLQUFBMUQsTUFBQW1GLE1BQUFoTSxPQUFBd1AsVUFBMERySyxFQUFvQnpDLEtBRW5HdUIsZUFFQSxHQURBc0csS0FBQXdGLFlBQUFDLFNBQUEsb0JBQ0F6RixLQUFBMEwsa0JBQ0EsT0FDQSxNQUFBdlQsRUFBc0JiLEVBQVM3QixPQUFBNEssS0FBYTNILEdBQVlMLE9BQUEsR0FDaERzTixHQUFhQyxZQUFBLFVBQXdCbE4sRUFBYUEsRUFBWVAsS0FBV2MsRUFBSTNCLEVBQVMsS0FBQTRCLEVBQVU1QixFQUFTLE9BQ2pIMEksS0FBQXdGLFlBQUFLLFNBQUEsaUJBQW9EckwsR0FDcER3RixLQUFBMEwsbUJBQUEsRUFFQWhTLFNBQ0FzRyxLQUFBTSxJQUFBMEwsWUFBNkJuVCxFQUFNc0osT0FDbkNuQyxLQUFBTSxJQUFBMEwsWUFBNkJuVCxFQUFNd0MsTUFDM0JzSyxHQUFhNEUsU0FDckJ2SyxLQUFBTSxJQUFBMEwsWUFBNkJuVCxFQUFNdUosTUFFbkM2SixnQkFDQSxPQUFBak0sS0FBQXlMLE9BQUEsU0M1Q2FTLEdBQ2J4UyxjQUNBc0csS0FBQW1CLGVBQUEsRUFDQW5CLEtBQUFtTSxRQUFBLEVBQ0FuTSxLQUFBd0YsWUFBQSxJQUErQnhCLEdBQy9CaEUsS0FBQThGLGFBQUEsSUFBZ0N6QyxJQUFZLGFBRTVDM0osYUFDQSxJQUFBMFMsRUFBQSxFQUNBQyxFQUFBLEVBQ0EsTUFBQXhJLEVBQUF5SSxJQUVBLElBREFGLElBQUFFLEVBQUFELEdBQUEsSUFDQUQsRUFBcUNyVCxHQUNyQ2lILEtBQUF3SyxTQUNBNEIsR0FBbUNyVCxFQUVuQ2lILEtBQUF1SyxTQUNBOEIsRUFBQUMsRUFDQUMsc0JBQUExSSxJQUVBQSxFQUFBLEdBRUFuSyxTQUNBc0csS0FBQXdGLFlBQUE4QixrQkFDQSxNQUFBa0YsRUFBQXhNLEtBQUF3RixZQUFBQyxTQUFBLGNBQ0EsR0FBQXpGLEtBQUFtTSxRQUFBbk0sS0FBQW1CLGVBQUFxTCxFQUNBLE9BQ0F4TSxLQUFBeU0sTUFBQWpDLFNBQ1E3RSxHQUFhNkUsU0FDYjdFLEdBQWErRyxnQkFBQTFNLEtBQUF5TSxNQUFBbk0sS0FDYnFGLEdBQWFxRSxrQkFDckIsTUFBQXJNLEVBQXVCZ0ksR0FBYTRGLFlBQ3BDbE4sRUFBcUJzSCxHQUFhZ0gsVUFDbEMsSUFBQWhQLEdBQUFVLEVBQUF5TCxZQUdBLE9BRkFuTSxHQUNBQSxFQUFBbUksYUFBQWtELFdBQ0FoSixLQUFBbEUsV0FFQWtFLEtBQUF5TSxNQUFBRyxZQUNBNU0sS0FBQTZNLGNBR0FuVCxTQUNRMkIsR0FBVXlSLGNBQ1YzUSxHQUFTMlEsY0FDakI5TSxLQUFBbUIsY0FDWTlGLEdBQVUwUixvQkFHdEIvTSxLQUFBZ04sYUFHQXRULGFBQ0EsTUFBQThTLEVBQUF4TSxLQUFBd0YsWUFBQUMsU0FBQSxjQUVBLEdBREF6RixLQUFBeU0sTUFBQWxDLFNBQ0F2SyxLQUFBbU0sT0FDWTlRLEdBQVU0UixlQUFBVCxRQUV0QixHQUFBQSxFQUNZblIsR0FBVTZSLHFCQUFBVixPQUV0QixDQUNBLE1BQUE3TyxFQUEyQmdJLEdBQWE0RixZQUM1QnBQLEdBQVNvTyxPQUFBNU0sRUFBQTFELE1BQUErRixLQUFBeU0sTUFBQVIsVUFBQWpNLEtBQUF5TSxNQUFBblEsUUFHckI1QyxXQUNBc0csS0FBQThGLGFBQUExRSxLQUFBLFlBQ0FwQixLQUFBd0YsWUFBQUssU0FBQSxhQUFnRGxMLEdBQ2hEcUYsS0FBQW1NLFFBQUEsRUFFQXpTLHNCQUVBLE9BREFzRyxLQUFBd0YsWUFBQUMsU0FBQSxlQUNBekYsS0FBQW1NLE9BRUF6UyxrQkFDQSxJQUFBeVQsRUFBQW5OLEtBQUF5TSxNQUFBaEIsT0FBQSxFQUlBLE9BSEEwQixFQUFxQnRMLEdBQUl4SixPQUFBLElBQ3pCOFUsRUFBQSxHQUVBQSxFQUVBelQsY0FDQXNHLEtBQUF3RixZQUFBSyxTQUFBLGFBQWdEbEwsR0FDeENnTCxHQUFheUgsT0FBQSxHQUNyQixNQUFBL1EsRUFBQTJELEtBQUFxTixrQkFDQTFQLEVBQXVCZ0ksR0FBYTRGLFlBQ3BDdkwsS0FBQXlNLE1BQUEsSUFBeUJqQixHQUFLblAsRUFBQSxJQUFlZ0csR0FBUVIsR0FBSXhGLElBQWF5RixHQUFXekYsSUFDakZzQixFQUFBbUssVUFFQXBPLE9BQ0FzRyxLQUFBbUIsZUFBQSxFQUNRd0UsR0FBYUMsWUFBQSxVQUNyQjVGLEtBQUF3RixZQUFBSyxTQUFBLGFBQWdEbEwsR0FDaERxRixLQUFBeU0sTUFBQSxJQUF5QmpCLEdBQUssTUFBUW5KLEdBQVFSLEdBQUksSUFBTUMsR0FBVyxJQUVuRXBJLFVBQ0FzRyxLQUFBbU0sUUFBQSxFQUNReEcsR0FBYXlILFFBQ3JCcE4sS0FBQW9CLFNDN0ZBa00sdUJBQ0EzTixRQUFBYyxLQUNRN0UsR0FBWTJSLFdBQVlDLEVBQUFDLEdBQ3hCN1IsR0FBWThSLFdBQWFDLFFBQUFDLEVBQUFILEVBQVNJLElBQUFDLEVBQUFMLEVBQUtNLE9BQUFDLEVBQUFQLEVBQVFRLFFBQUFDLEVBQUFULEVBQVN6TyxRQUFBbVAsRUFBQVYsRUFBUy9FLEtBQUEwRixFQUFBWCxFQUFNWSxNQUFBQyxFQUFBYixFQUFPYyxTQUFBQyxFQUFBZixNQUV0RixNQUFBM00sRUFBQSxJQUFxQm9MLEdBQ2pCeEwsR0FBUStOLGVBQUEzTixHQUNaQSxFQUFBNE4sYUFFQUMiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYWI2NWM0NzJjNmI1OTJhZmU4NzU3YmI4YmU4YzYyNjcucG5nXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiNWMwNzg4NDc5NzhhMTM4ZDY0MzcxNTMxZjQ4YmJkYmQud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiODRjMjJkYzMzOWI1ZjU3ZTRiMTUyODdlMDEyNWE5ZTcud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZDRkMTdmMWY0YTBlZWU1MTE4NTZiZjkwNTY5OTExYzAud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiMTdmOTljNGUxNTM0NDA2MTY0YjRkNjcwMTIzNzQ2Mjkud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZjkxMjYxMGFjNzhlODI3MGI2MzQxZWM0ZTZkMDhkODMud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiNTRhZjk1YjdiNDU0MjQ0ODViNmViZjAzNjFkMDE5YTMud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYWE4YzUxODUwYzA5ZTg5YmI5YTQ3ZmIzMWVlMzFhMzgud2F2XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiOWFmODhhNmFjOWNmYmMzOTJhOTQxYjRlZDUyMGQ1Zjgud2F2XCI7IiwiZnVuY3Rpb24gY2hlY2tFbnRpdHlDb2xsaXNpb24oYm94MSwgYm94Mikge1xuICAgIHJldHVybiBib3gxLngxIDwgYm94Mi54MiAmJiBib3gxLngyID4gYm94Mi54MSAmJiBib3gxLnkxIDwgYm94Mi55MiAmJiBib3gxLnkyID4gYm94Mi55MTtcbn1cbmV4cG9ydCB7IGNoZWNrRW50aXR5Q29sbGlzaW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaGVja0VudGl0eUNvbGxpc2lvbi5qcy5tYXAiLCJjb25zdCByYW5kb21JbnQgPSAobGltaXQpID0+IHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbGltaXQpO1xufTtcbmV4cG9ydCB7IHJhbmRvbUludCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmFuZG9tLmpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBnZXRBbmltYXRpb25JbmRleChhbmltYXRpb25MZW5ndGgsIGZyYW1lc1RvdGFsLCBmcmFtZXNMZWZ0KSB7XG4gICAgY29uc3Qgc3RlcCA9IGZyYW1lc1RvdGFsIC8gYW5pbWF0aW9uTGVuZ3RoO1xuICAgIHJldHVybiBNYXRoLmZsb29yKGZyYW1lc0xlZnQgLyBzdGVwKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhbmltYXRlVmFyaWFibGVTcHJpdGVzKHBvc2l0aW9uLCBhbmltYXRpb24sIGZyYW1lc1RvdGFsLCBmcmFtZXNMZWZ0KSB7XG4gICAgY29uc3QgaW5kZXggPSBNYXRoLm1pbihnZXRBbmltYXRpb25JbmRleChhbmltYXRpb24ubGVuZ3RoLCBmcmFtZXNUb3RhbCwgZnJhbWVzTGVmdCksIGFuaW1hdGlvbi5sZW5ndGggLSAxKTtcbiAgICBjb25zdCB7IHNwcml0ZSwgc2l6ZSB9ID0gYW5pbWF0aW9uW2luZGV4XTtcbiAgICByZXR1cm4gc3ByaXRlKHBvc2l0aW9uLCBzaXplKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuaW1hdGlvbi5qcy5tYXAiLCJleHBvcnQgdmFyIERpcmVjdGlvbjtcbihmdW5jdGlvbiAoRGlyZWN0aW9uKSB7XG4gICAgRGlyZWN0aW9uW0RpcmVjdGlvbltcIlRvcFwiXSA9IDBdID0gXCJUb3BcIjtcbiAgICBEaXJlY3Rpb25bRGlyZWN0aW9uW1wiQm90dG9tXCJdID0gMV0gPSBcIkJvdHRvbVwiO1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJSaWdodFwiXSA9IDJdID0gXCJSaWdodFwiO1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJMZWZ0XCJdID0gM10gPSBcIkxlZnRcIjtcbn0pKERpcmVjdGlvbiB8fCAoRGlyZWN0aW9uID0ge30pKTtcbmV4cG9ydCB2YXIgVGFua1R5cGVzO1xuKGZ1bmN0aW9uIChUYW5rVHlwZXMpIHtcbiAgICBUYW5rVHlwZXNbVGFua1R5cGVzW1wiRGVmYXVsdFwiXSA9IDBdID0gXCJEZWZhdWx0XCI7XG4gICAgVGFua1R5cGVzW1RhbmtUeXBlc1tcIkZhc3RcIl0gPSAxXSA9IFwiRmFzdFwiO1xuICAgIFRhbmtUeXBlc1tUYW5rVHlwZXNbXCJBcm1vcmVkXCJdID0gMl0gPSBcIkFybW9yZWRcIjtcbiAgICBUYW5rVHlwZXNbVGFua1R5cGVzW1wiQXJtb3JlZDJcIl0gPSAzXSA9IFwiQXJtb3JlZDJcIjtcbiAgICBUYW5rVHlwZXNbVGFua1R5cGVzW1wiQXJtb3JlZDNcIl0gPSA0XSA9IFwiQXJtb3JlZDNcIjtcbn0pKFRhbmtUeXBlcyB8fCAoVGFua1R5cGVzID0ge30pKTtcbmV4cG9ydCB2YXIgUG93ZXJ1cFR5cGVzO1xuKGZ1bmN0aW9uIChQb3dlcnVwVHlwZXMpIHtcbiAgICBQb3dlcnVwVHlwZXNbUG93ZXJ1cFR5cGVzW1wiSGVsbWV0XCJdID0gMF0gPSBcIkhlbG1ldFwiO1xuICAgIFBvd2VydXBUeXBlc1tQb3dlcnVwVHlwZXNbXCJTdGFyXCJdID0gMV0gPSBcIlN0YXJcIjtcbiAgICBQb3dlcnVwVHlwZXNbUG93ZXJ1cFR5cGVzW1wiU3RvcHdhdGNoXCJdID0gMl0gPSBcIlN0b3B3YXRjaFwiO1xuICAgIFBvd2VydXBUeXBlc1tQb3dlcnVwVHlwZXNbXCJHcmVuYWRlXCJdID0gM10gPSBcIkdyZW5hZGVcIjtcbiAgICBQb3dlcnVwVHlwZXNbUG93ZXJ1cFR5cGVzW1wiVGFua1wiXSA9IDRdID0gXCJUYW5rXCI7XG59KShQb3dlcnVwVHlwZXMgfHwgKFBvd2VydXBUeXBlcyA9IHt9KSk7XG5leHBvcnQgdmFyIFBsYXllclBvd2VyO1xuKGZ1bmN0aW9uIChQbGF5ZXJQb3dlcikge1xuICAgIFBsYXllclBvd2VyW1BsYXllclBvd2VyW1wiRGVmYXVsdFwiXSA9IDBdID0gXCJEZWZhdWx0XCI7XG4gICAgUGxheWVyUG93ZXJbUGxheWVyUG93ZXJbXCJGaXJzdFwiXSA9IDFdID0gXCJGaXJzdFwiO1xuICAgIFBsYXllclBvd2VyW1BsYXllclBvd2VyW1wiU2Vjb25kXCJdID0gMl0gPSBcIlNlY29uZFwiO1xufSkoUGxheWVyUG93ZXIgfHwgKFBsYXllclBvd2VyID0ge30pKTtcbmV4cG9ydCB2YXIgVGlsZXM7XG4oZnVuY3Rpb24gKFRpbGVzKSB7XG4gICAgVGlsZXNbVGlsZXNbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcbiAgICBUaWxlc1tUaWxlc1tcIkJyaWNrMVwiXSA9IDFdID0gXCJCcmljazFcIjtcbiAgICBUaWxlc1tUaWxlc1tcIkJyaWNrMlwiXSA9IDJdID0gXCJCcmljazJcIjtcbiAgICBUaWxlc1tUaWxlc1tcIkJyaWNrM1wiXSA9IDNdID0gXCJCcmljazNcIjtcbiAgICBUaWxlc1tUaWxlc1tcIkJyaWNrNFwiXSA9IDRdID0gXCJCcmljazRcIjtcbiAgICBUaWxlc1tUaWxlc1tcIlN0ZWVsXCJdID0gNV0gPSBcIlN0ZWVsXCI7XG4gICAgVGlsZXNbVGlsZXNbXCJJY2VcIl0gPSA2XSA9IFwiSWNlXCI7XG4gICAgVGlsZXNbVGlsZXNbXCJHcmFzc1wiXSA9IDddID0gXCJHcmFzc1wiO1xuICAgIFRpbGVzW1RpbGVzW1wiV2F0ZXJcIl0gPSA4XSA9IFwiV2F0ZXJcIjtcbn0pKFRpbGVzIHx8IChUaWxlcyA9IHt9KSk7XG5leHBvcnQgdmFyIExheWVycztcbihmdW5jdGlvbiAoTGF5ZXJzKSB7XG4gICAgTGF5ZXJzW0xheWVyc1tcInVuZGVyXCJdID0gMF0gPSBcInVuZGVyXCI7XG4gICAgTGF5ZXJzW0xheWVyc1tcIm1haW5cIl0gPSAxXSA9IFwibWFpblwiO1xuICAgIExheWVyc1tMYXllcnNbXCJvdmVyXCJdID0gMl0gPSBcIm92ZXJcIjtcbn0pKExheWVycyB8fCAoTGF5ZXJzID0ge30pKTtcbmV4cG9ydCB2YXIgQ29udHJvbEtleXM7XG4oZnVuY3Rpb24gKENvbnRyb2xLZXlzKSB7XG4gICAgQ29udHJvbEtleXNbXCJBcnJvd1VwXCJdID0gXCJBcnJvd1VwXCI7XG4gICAgQ29udHJvbEtleXNbXCJBcnJvd1JpZ2h0XCJdID0gXCJBcnJvd1JpZ2h0XCI7XG4gICAgQ29udHJvbEtleXNbXCJBcnJvd0Rvd25cIl0gPSBcIkFycm93RG93blwiO1xuICAgIENvbnRyb2xLZXlzW1wiQXJyb3dMZWZ0XCJdID0gXCJBcnJvd0xlZnRcIjtcbiAgICBDb250cm9sS2V5c1tcIlNwYWNlXCJdID0gXCJTcGFjZVwiO1xufSkoQ29udHJvbEtleXMgfHwgKENvbnRyb2xLZXlzID0ge30pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGVzLmpzLm1hcCIsImltcG9ydCAqIGFzIHR5cGVzIGZyb20gJy4vdHlwZXMnO1xuLy8gR2FtZVxuZXhwb3J0IGNvbnN0IERFTFRBX1RJTUUgPSAxIC8gNjA7XG4vLyBFbnRpdGllc1xuZXhwb3J0IGNvbnN0IFRBTktfU0laRSA9IHsgeDogNDAsIHk6IDQwIH07XG5leHBvcnQgY29uc3QgRkxBR19TSVpFID0geyB4OiA0MCwgeTogNDAgfTtcbmV4cG9ydCBjb25zdCBGTEFHX1BPU0lUSU9OID0geyB4OiAyODAsIHk6IDU2MCB9O1xuZXhwb3J0IGNvbnN0IFBMQVlFUl9TUEFXTl9QT1NJVElPTiA9IHsgeDogMjEwLCB5OiA1NjAgfTtcbmV4cG9ydCBjb25zdCBCVUxMRVRfU0laRSA9IHsgeDogMTAsIHk6IDEwIH07XG5leHBvcnQgY29uc3QgQlVMTEVUX1ZFTE9DSVRZID0gMzAwO1xuZXhwb3J0IGNvbnN0IFBPV0VSVVBfU0laRSA9IHsgeDogNDAsIHk6IDQwIH07XG5leHBvcnQgY29uc3QgUExBWUVSX1NUQVRTID0ge1xuICAgIFt0eXBlcy5QbGF5ZXJQb3dlci5EZWZhdWx0XToge1xuICAgICAgICB2ZWxvY2l0eTogMTAwLFxuICAgICAgICBzaG90Q0Q6IDUwLFxuICAgIH0sXG4gICAgW3R5cGVzLlBsYXllclBvd2VyLkZpcnN0XToge1xuICAgICAgICB2ZWxvY2l0eTogMTIwLFxuICAgICAgICBzaG90Q0Q6IDQwLFxuICAgIH0sXG4gICAgW3R5cGVzLlBsYXllclBvd2VyLlNlY29uZF06IHtcbiAgICAgICAgdmVsb2NpdHk6IDE1MCxcbiAgICAgICAgc2hvdENEOiAzMCxcbiAgICB9LFxufTtcbmV4cG9ydCBjb25zdCBFTkVNWV9TVEFUUyA9IHtcbiAgICBbdHlwZXMuVGFua1R5cGVzLkRlZmF1bHRdOiB7XG4gICAgICAgIHZlbG9jaXR5OiAxMDAsXG4gICAgICAgIHNob3RDRDogNzAsXG4gICAgICAgIGxpdmVzOiAxLFxuICAgIH0sXG4gICAgW3R5cGVzLlRhbmtUeXBlcy5GYXN0XToge1xuICAgICAgICB2ZWxvY2l0eTogMjAwLFxuICAgICAgICBzaG90Q0Q6IDYwLFxuICAgICAgICBsaXZlczogMSxcbiAgICB9LFxuICAgIFt0eXBlcy5UYW5rVHlwZXMuQXJtb3JlZF06IHtcbiAgICAgICAgdmVsb2NpdHk6IDEyMCxcbiAgICAgICAgc2hvdENEOiA3MCxcbiAgICAgICAgbGl2ZXM6IDMsXG4gICAgfSxcbn07XG4vLyBUaW1lcnNcbmV4cG9ydCBjb25zdCBERUFUSF9GUkFNRVMgPSAzNTtcbmV4cG9ydCBjb25zdCBTUEFXTl9GUkFNRVMgPSAzNTtcbmV4cG9ydCBjb25zdCBJTlZJTkNJQkxFX0ZSQU1FUyA9IDIwMDtcbmV4cG9ydCBjb25zdCBGUkVFWkVfRlJBTUVTID0gMjAwO1xuZXhwb3J0IGNvbnN0IFBPV0VSVVBfU1BBV05fQ0QgPSA2MDA7XG5leHBvcnQgY29uc3QgUE9XRVJVUF9CTElOS19GUkFNRVMgPSAyMDA7XG5leHBvcnQgY29uc3QgRU5FTVlfU1BBV05fQ0QgPSA0MDA7XG5leHBvcnQgY29uc3QgU0NSRUVOX0ZBREVfRlJBTUVTID0gMzAwO1xuLy8gU3RhZ2VcbmV4cG9ydCBjb25zdCBFTkVNWV9TUEFXTl9QT1NJVElPTiA9IFt7IHg6IDAsIHk6IDAgfSwgeyB4OiA1NjAsIHk6IDAgfV07XG4vLyBNYXBcbmV4cG9ydCBjb25zdCBUSUxFX1NJREUgPSAyMDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnN0YW50cy5qcy5tYXAiLCJpbXBvcnQgeyBnZXRBbmltYXRpb25JbmRleCB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7IFNDUkVFTl9GQURFX0ZSQU1FUyB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBhc3NldHNIb2xkZXIgfSBmcm9tICcuLi91dGlscyc7XG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpO1xuY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuY29udGV4dC5mb250ID0gJzMwcHggQXJpYWwnO1xuY29udGV4dC50ZXh0QWxpZ24gPSAnY2VudGVyJztcbmV4cG9ydCBjb25zdCBnZXRBbmltSW5kZXggPSAoYW5pbWF0aW9uTGVuZ3RoLCBmcmFtZXNMZWZ0LCBzcHJpdGVzTGVuZ3RoKSA9PiB7XG4gICAgY29uc3Qgc3RlcCA9IGFuaW1hdGlvbkxlbmd0aCAvIHNwcml0ZXNMZW5ndGg7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoZnJhbWVzTGVmdCAvIHN0ZXApO1xufTtcbmV4cG9ydCBjb25zdCBtYWluID0ge1xuICAgIGNhbnZhcyxcbiAgICBjb250ZXh0LFxuICAgIGNsZWFyU2NyZWVuKCkge1xuICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgIH0sXG4gICAgcmVuZGVyQ2hhaW5naW5nU3RhZ2UobGVmdCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IGdldEFuaW1hdGlvbkluZGV4KFNDUkVFTl9GQURFX0ZSQU1FUywgU0NSRUVOX0ZBREVfRlJBTUVTLCBsZWZ0KTtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCA2MDAsIGluZGV4KTtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCA2MDAgLSBpbmRleCwgNjAwLCBpbmRleCk7XG4gICAgfSxcbiAgICByZW5kZXJHYW1lT3ZlcihsZWZ0ID0gMCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IGdldEFuaW1hdGlvbkluZGV4KFNDUkVFTl9GQURFX0ZSQU1FUywgU0NSRUVOX0ZBREVfRlJBTUVTLCBsZWZ0KTtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCA2MDAsIDMwMCAtIGluZGV4KTtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAzMDAgKyBpbmRleCwgNjAwLCAzMDAgLSBpbmRleCk7XG4gICAgICAgIGlmICghbGVmdCkge1xuICAgICAgICAgICAgYXNzZXRzSG9sZGVyLnNwcml0ZXMuZ2FtZU92ZXIoeyB4OiAyNzUsIHk6IDI3NSB9LCB7IHg6IDUwLCB5OiA1MCB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcmVuZGVyU3RhcnRTY3JlZW4oKSB7XG4gICAgICAgIGFzc2V0c0hvbGRlci5zcHJpdGVzLmxvZ28oeyB4OiAxMDAsIHk6IDIwMCB9LCB7IHg6IDQwMCwgeTogMjAwIH0pO1xuICAgICAgICBjb250ZXh0LnN0cm9rZVRleHQoJ1ByZXNzIGFueSBrZXknLCAzMDAsIDUwMCk7XG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYWluLmpzLm1hcCIsImltcG9ydCB7IGFzc2V0c0hvbGRlciB9IGZyb20gJy4uL3V0aWxzJztcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmQnKTtcbmNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbmNvbnN0IGRyYXdUYW5rcyA9ICh0YW5rcywgdGFua1Nwcml0ZSkgPT4ge1xuICAgIGlmICghdGFua3MubGVuZ3RoKVxuICAgICAgICByZXR1cm47XG4gICAgbGV0IHkgPSA3MDtcbiAgICBsZXQgY291bnRlciA9IDA7XG4gICAgdGFua3MuZm9yRWFjaCgoXywgaWR4KSA9PiB7XG4gICAgICAgIGlmIChpZHggJSAyID09PSAwKSB7XG4gICAgICAgICAgICB0YW5rU3ByaXRlKHsgeDogNjk1LCB5IH0sIHsgeDogMTUsIHk6IDE1IH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFua1Nwcml0ZSh7IHg6IDY3MCwgeSB9LCB7IHg6IDE1LCB5OiAxNSB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY291bnRlciA9PT0gMikge1xuICAgICAgICAgICAgeSArPSAyMDtcbiAgICAgICAgICAgIGNvdW50ZXIgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY291bnRlciArPSAxO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuZXhwb3J0IGNvbnN0IGRhc2hib2FyZCA9IHtcbiAgICBjYW52YXMsXG4gICAgY29udGV4dCxcbiAgICByZW5kZXIocGxheWVyTGl2ZXMsIHN0YWdlTnVtLCB0YW5rcykge1xuICAgICAgICBjb25zdCB7IG51bWJlckljb25zLCBmbGFnSWNvbiwgcGxheWVySWNvbiwgdGFua0ljb24gfSA9IGFzc2V0c0hvbGRlci5zcHJpdGVzO1xuICAgICAgICBkcmF3VGFua3ModGFua3MsIHRhbmtJY29uKTtcbiAgICAgICAgZmxhZ0ljb24oeyB4OiA2NzAsIHk6IDQ1MCB9LCB7IHg6IDUwLCB5OiA0MCB9KTtcbiAgICAgICAgcGxheWVySWNvbih7IHg6IDY3MCwgeTogMzgwIH0sIHsgeDogMjAsIHk6IDIwIH0pO1xuICAgICAgICBudW1iZXJJY29uc1tzdGFnZU51bV0oeyB4OiA2OTAsIHk6IDQ4NSB9LCB7IHg6IDIwLCB5OiAyMCB9KTtcbiAgICAgICAgbnVtYmVySWNvbnNbcGxheWVyTGl2ZXNdKHsgeDogNzAwLCB5OiAzODAgfSwgeyB4OiAyMCwgeTogMjAgfSk7XG4gICAgfSxcbiAgICBjbGVhclNjcmVlbigpIHtcbiAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICB9LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhc2hib2FyZC5qcy5tYXAiLCJpbXBvcnQgeyBtYWluLCBkYXNoYm9hcmQgfSBmcm9tICcuLi9zY3JlZW5zJztcbmltcG9ydCB7IFBsYXllclBvd2VyLCBEaXJlY3Rpb24sIFRhbmtUeXBlcywgUG93ZXJ1cFR5cGVzLCBUaWxlcywgfSBmcm9tICcuLi90eXBlcyc7XG5jb25zdCBjcmVhdGVTcHJpdGUgPSAoaW1hZ2UsIGNvbnRleHQpID0+IChkeCwgZHksIGRXaWR0aCwgZEhlaWdodCkgPT4gKHBvc2l0aW9uLCBzaXplKSA9PiB7XG4gICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIGR4LCBkeSwgZFdpZHRoLCBkSGVpZ2h0LCBwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBzaXplLngsIHNpemUueSk7XG59O1xuY29uc3Qgc2V0dXBTcHJpdGVzID0gKGltYWdlKSA9PiB7XG4gICAgY29uc3QgbWFpblNwcml0ZSA9IGNyZWF0ZVNwcml0ZShpbWFnZSwgbWFpbi5jb250ZXh0KTtcbiAgICBjb25zdCBkYXNoYm9hcmRTcHJpdGUgPSBjcmVhdGVTcHJpdGUoaW1hZ2UsIGRhc2hib2FyZC5jb250ZXh0KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBwbGF5ZXI6IHtcbiAgICAgICAgICAgIFtQbGF5ZXJQb3dlci5EZWZhdWx0XToge1xuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uVG9wXTogW21haW5TcHJpdGUoMCwgMCwgMTYsIDE1KSwgbWFpblNwcml0ZSgxNiwgMCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Cb3R0b21dOiBbbWFpblNwcml0ZSg2NCwgMCwgMTYsIDE1KSwgbWFpblNwcml0ZSg4MCwgMCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDk2LCAwLCAxNiwgMTUpLCBtYWluU3ByaXRlKDExMiwgMCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5MZWZ0XTogW21haW5TcHJpdGUoMzIsIDAsIDE2LCAxNSksIG1haW5TcHJpdGUoNDgsIDAsIDE2LCAxNSldLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtQbGF5ZXJQb3dlci5GaXJzdF06IHtcbiAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlRvcF06IFttYWluU3ByaXRlKDAsIDMyLjMsIDE2LCAxNSksIG1haW5TcHJpdGUoMTUuNywgMzIuNSwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Cb3R0b21dOiBbbWFpblNwcml0ZSg2NCwgMzIuMywgMTYsIDE1KSwgbWFpblNwcml0ZSg4MCwgMzIuNSwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDk2LCAzMi4zLCAxNiwgMTUpLCBtYWluU3ByaXRlKDExMi4zLCAzMiwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5MZWZ0XTogW21haW5TcHJpdGUoMzEuNywgMzIsIDE2LCAxNSksIG1haW5TcHJpdGUoNDgsIDMyLCAxNiwgMTUpXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbUGxheWVyUG93ZXIuU2Vjb25kXToge1xuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uVG9wXTogW21haW5TcHJpdGUoMCwgNDgsIDE2LCAxNSksIG1haW5TcHJpdGUoMTUuNywgNDgsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uQm90dG9tXTogW21haW5TcHJpdGUoNjQsIDQ4LCAxNiwgMTUpLCBtYWluU3ByaXRlKDgwLCA0OCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDk2LCA0OCwgMTYsIDE1KSwgbWFpblNwcml0ZSgxMTIuMywgNDgsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uTGVmdF06IFttYWluU3ByaXRlKDMxLjcsIDQ4LCAxNiwgMTUpLCBtYWluU3ByaXRlKDQ4LCA0OCwgMTYsIDE1KV0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBlbmVteToge1xuICAgICAgICAgICAgW1RhbmtUeXBlcy5EZWZhdWx0XToge1xuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uVG9wXTogW21haW5TcHJpdGUoMTI4LCAwLCAxNiwgMTUpLCBtYWluU3ByaXRlKDE0NCwgMCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Cb3R0b21dOiBbbWFpblNwcml0ZSgxOTIsIDAsIDE2LCAxNSksIG1haW5TcHJpdGUoMjA4LCAwLCAxNiwgMTUpXSxcbiAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlJpZ2h0XTogW21haW5TcHJpdGUoMjIzLjcsIDAsIDE2LCAxNSksIG1haW5TcHJpdGUoMjM5LjcsIDAsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uTGVmdF06IFttYWluU3ByaXRlKDE2MCwgMCwgMTYsIDE1KSwgbWFpblNwcml0ZSgxNzYsIDAsIDE2LCAxNSldLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtUYW5rVHlwZXMuRmFzdF06IHtcbiAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlRvcF06IFttYWluU3ByaXRlKDEyOCwgODAsIDE2LCAxNSksIG1haW5TcHJpdGUoMTQ0LCA4MCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Cb3R0b21dOiBbbWFpblNwcml0ZSgxOTIsIDgwLCAxNiwgMTUpLCBtYWluU3ByaXRlKDIwOCwgODAsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uUmlnaHRdOiBbbWFpblNwcml0ZSgyMjQsIDgwLCAxNiwgMTUpLCBtYWluU3ByaXRlKDI0MCwgODAsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uTGVmdF06IFttYWluU3ByaXRlKDE2MCwgODAsIDE2LCAxNSksIG1haW5TcHJpdGUoMTc2LCA4MCwgMTYsIDE1KV0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW1RhbmtUeXBlcy5Bcm1vcmVkXToge1xuICAgICAgICAgICAgICAgICcxJzoge1xuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlRvcF06IFttYWluU3ByaXRlKDEyOC41LCAxMTEuNzUsIDE0Ljc1LCAxNiksIG1haW5TcHJpdGUoMTQ0LjI1LCAxMTEuNzUsIDE0Ljc1LCAxNildLFxuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLkJvdHRvbV06IFttYWluU3ByaXRlKDE5MS43NSwgMTExLjc1LCAxNS4yNSwgMTYpLCBtYWluU3ByaXRlKDIwNy41LCAxMTEuNzUsIDE1LjI1LCAxNildLFxuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlJpZ2h0XTogW21haW5TcHJpdGUoMjIyLjc1LCAxMTEuNzUsIDE2LCAxNiksIG1haW5TcHJpdGUoMjM5LCAxMTEuNzUsIDE0Ljc1LCAxNildLFxuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLkxlZnRdOiBbbWFpblNwcml0ZSgxNTksIDExMS43NSwgMTYsIDE2KSwgbWFpblNwcml0ZSgxNzQuNzUsIDExMS43NSwgMTYsIDE2KV0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnMic6IHtcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Ub3BdOiBbbWFpblNwcml0ZSgwLCAyNDAsIDE0Ljc1LCAxNiksIG1haW5TcHJpdGUoMTYsIDI0MCwgMTQuNzUsIDE2KV0sXG4gICAgICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uQm90dG9tXTogW21haW5TcHJpdGUoNjQsIDI0MCwgMTUuMjUsIDE2KSwgbWFpblNwcml0ZSg4MCwgMjQwLCAxNS4yNSwgMTYpXSxcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDk2LCAyNDAsIDE2LCAxNiksIG1haW5TcHJpdGUoMTEyLCAyNDAsIDE0Ljc1LCAxNildLFxuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLkxlZnRdOiBbbWFpblNwcml0ZSgzMiwgMjQwLCAxNiwgMTYpLCBtYWluU3ByaXRlKDQ4LCAyNDAsIDE2LCAxNildLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJzMnOiB7XG4gICAgICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uVG9wXTogW21haW5TcHJpdGUoMTI4LCAyNDAsIDE0Ljc1LCAxNiksIG1haW5TcHJpdGUoMTQ0LCAyNDAsIDE0Ljc1LCAxNildLFxuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLkJvdHRvbV06IFttYWluU3ByaXRlKDE5MiwgMjQwLCAxNS4yNSwgMTYpLCBtYWluU3ByaXRlKDIwOCwgMjQwLCAxNS4yNSwgMTYpXSxcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDIyNCwgMjQwLCAxNiwgMTYpLCBtYWluU3ByaXRlKDI0MCwgMjQwLCAxNC43NSwgMTYpXSxcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5MZWZ0XTogW21haW5TcHJpdGUoMTYwLCAyNDAsIDE2LCAxNiksIG1haW5TcHJpdGUoMTc2LCAyNDAsIDE2LCAxNildLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBidWxsZXQ6IHtcbiAgICAgICAgICAgIFtEaXJlY3Rpb24uVG9wXTogW21haW5TcHJpdGUoMzIyLjI1LCAxMDEuNSwgNSwgNS43KV0sXG4gICAgICAgICAgICBbRGlyZWN0aW9uLkJvdHRvbV06IFttYWluU3ByaXRlKDMzOC41LCAxMDEuNSwgNSwgNS43KV0sXG4gICAgICAgICAgICBbRGlyZWN0aW9uLlJpZ2h0XTogW21haW5TcHJpdGUoMzQ1Ljc1LCAxMDEuNSwgNSwgNS43KV0sXG4gICAgICAgICAgICBbRGlyZWN0aW9uLkxlZnRdOiBbbWFpblNwcml0ZSgzMjkuNSwgMTAxLjUsIDUsIDUuNyldLFxuICAgICAgICB9LFxuICAgICAgICBmbGFnOiBtYWluU3ByaXRlKDMwNC41LCAzMywgMTYsIDE1LjI1KSxcbiAgICAgICAgZmxhZ0RlYXRoOiBtYWluU3ByaXRlKDMyMCwgMzMsIDE2LCAxNS4yNSksXG4gICAgICAgIHRhbmtJY29uOiBkYXNoYm9hcmRTcHJpdGUoMzIwLjI1LCAxOTIuNzUsIDguNSwgNy43NSksXG4gICAgICAgIGZsYWdJY29uOiBkYXNoYm9hcmRTcHJpdGUoMzc1LjUsIDE4NCwgMTcsIDE1KSxcbiAgICAgICAgcGxheWVySWNvbjogZGFzaGJvYXJkU3ByaXRlKDM3Ni41LCAxNDQuNSwgOCwgOC41KSxcbiAgICAgICAgbnVtYmVySWNvbnM6IFtcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzMjguNSwgMTg0LCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzMzYuNSwgMTg0LCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNDQuNSwgMTg0LCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNTIuNSwgMTg0LCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNjAuNSwgMTg0LCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzMjguNSwgMTkyLCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzMzYuNSwgMTkyLCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNDQuNSwgMTkyLCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNTIuNSwgMTkyLCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNjAuNSwgMTkyLCA4LCA3KSxcbiAgICAgICAgXSxcbiAgICAgICAgbG9nbzogbWFpblNwcml0ZSgwLCAyNjAsIDM3NSwgMTM3KSxcbiAgICAgICAgdGlsZXM6IHtcbiAgICAgICAgICAgIFtUaWxlcy5CcmljazFdOiBtYWluU3ByaXRlKDI1NiwgMCwgOCwgNyksXG4gICAgICAgICAgICBbVGlsZXMuQnJpY2syXTogbWFpblNwcml0ZSgyNjQsIDAsIDgsIDcpLFxuICAgICAgICAgICAgW1RpbGVzLkJyaWNrM106IG1haW5TcHJpdGUoMjU2LCA4LCA4LCA3KSxcbiAgICAgICAgICAgIFtUaWxlcy5CcmljazRdOiBtYWluU3ByaXRlKDI2NCwgOCwgOCwgNyksXG4gICAgICAgICAgICBbVGlsZXMuU3RlZWxdOiBtYWluU3ByaXRlKDI1NiwgMTYsIDgsIDcpLFxuICAgICAgICAgICAgW1RpbGVzLkljZV06IG1haW5TcHJpdGUoMjg4LCAzMiwgOCwgNyksXG4gICAgICAgICAgICBbVGlsZXMuR3Jhc3NdOiBtYWluU3ByaXRlKDI3MiwgMzIsIDgsIDcpLFxuICAgICAgICAgICAgW1RpbGVzLldhdGVyXTogbWFpblNwcml0ZSgyNTYsIDQwLCA4LCA3KSxcbiAgICAgICAgfSxcbiAgICAgICAgZ2FtZU92ZXI6IG1haW5TcHJpdGUoMjg4LjUsIDE4NCwgMzEuMiwgMTYpLFxuICAgICAgICBwb3dlcnVwOiB7XG4gICAgICAgICAgICBbUG93ZXJ1cFR5cGVzLkhlbG1ldF06IG1haW5TcHJpdGUoMjU1LjUsIDExMiwgMTYsIDE0KSxcbiAgICAgICAgICAgIFtQb3dlcnVwVHlwZXMuU3RvcHdhdGNoXTogbWFpblNwcml0ZSgyNzEuNSwgMTEyLCAxNiwgMTQpLFxuICAgICAgICAgICAgW1Bvd2VydXBUeXBlcy5TdGFyXTogbWFpblNwcml0ZSgzMDMuNSwgMTEyLCAxNiwgMTQpLFxuICAgICAgICAgICAgW1Bvd2VydXBUeXBlcy5HcmVuYWRlXTogbWFpblNwcml0ZSgzMTkuNSwgMTEyLCAxNiwgMTQpLFxuICAgICAgICAgICAgW1Bvd2VydXBUeXBlcy5UYW5rXTogbWFpblNwcml0ZSgzMzUuNSwgMTEyLCAxNiwgMTQpLFxuICAgICAgICB9LFxuICAgICAgICBpbnZpbmNpYmxlOiBbbWFpblNwcml0ZSgyNTYsIDE0NCwgMTUuNywgMTYpLCBtYWluU3ByaXRlKDI3Mi4yLCAxNDQsIDE1LjcsIDE2KV0sXG4gICAgfTtcbn07XG5jb25zdCBzZXR1cFZhcmlhYmxlU3ByaXRlcyA9IChpbWFnZSkgPT4ge1xuICAgIGNvbnN0IG1haW5TcHJpdGUgPSBjcmVhdGVTcHJpdGUoaW1hZ2UsIG1haW4uY29udGV4dCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGFua1NwYXduOiBbXG4gICAgICAgICAgICB7IHNwcml0ZTogbWFpblNwcml0ZSgzMDMsIDk3LCAxNSwgMTQpLCBzaXplOiB7IHg6IDM1LCB5OiAzNSB9IH0sXG4gICAgICAgICAgICB7IHNwcml0ZTogbWFpblNwcml0ZSgzMDMsIDk3LCAxNSwgMTQpLCBzaXplOiB7IHg6IDM1LCB5OiAzNSB9IH0sXG4gICAgICAgICAgICB7IHNwcml0ZTogbWFpblNwcml0ZSgyODgsIDk3LCAxNSwgMTQpLCBzaXplOiB7IHg6IDM1LCB5OiAzNSB9IH0sXG4gICAgICAgICAgICB7IHNwcml0ZTogbWFpblNwcml0ZSgyNzMsIDk3LCAxNSwgMTQpLCBzaXplOiB7IHg6IDMwLCB5OiAzMCB9IH0sXG4gICAgICAgICAgICB7IHNwcml0ZTogbWFpblNwcml0ZSgyNTcsIDk3LCAxNSwgMTQpLCBzaXplOiB7IHg6IDMwLCB5OiAzMCB9IH0sXG4gICAgICAgIF0sXG4gICAgICAgIHRhbmtEZXN0cnVjdGlvbjogW1xuICAgICAgICAgICAgeyBzcHJpdGU6IG1haW5TcHJpdGUoMzM2LCAxMjguNzUsIDMyLCAzMiksIHNpemU6IHsgeDogNjAsIHk6IDYwIH0gfSxcbiAgICAgICAgICAgIHsgc3ByaXRlOiBtYWluU3ByaXRlKDMwNC41LCAxMjguNzUsIDMwLjUsIDMxLjI1KSwgc2l6ZTogeyB4OiA2MCwgeTogNjAgfSB9LFxuICAgICAgICAgICAgeyBzcHJpdGU6IG1haW5TcHJpdGUoMjg4LjI1LCAxMjguNzUsIDE2LCAxNS41KSwgc2l6ZTogeyB4OiA0MCwgeTogNDAgfSB9LFxuICAgICAgICAgICAgeyBzcHJpdGU6IG1haW5TcHJpdGUoMjcyLjI1LCAxMjguNzUsIDE1Ljc1LCAxNC4yNSksIHNpemU6IHsgeDogMzcsIHk6IDM3IH0gfSxcbiAgICAgICAgICAgIHsgc3ByaXRlOiBtYWluU3ByaXRlKDI1OCwgMTI4Ljc1LCAxMy43NSwgMTMuMjUpLCBzaXplOiB7IHg6IDM1LCB5OiAzNSB9IH0sXG4gICAgICAgIF0sXG4gICAgfTtcbn07XG5jbGFzcyBBc3NldHNIb2xkZXIge1xuICAgIGxvYWRTcHJpdGUoc3JjKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgaW1hZ2Uuc3JjID0gc3JjO1xuICAgICAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7XG4gICAgICAgICAgICAgICAgdGhpcy5zcHJpdGVzID0gc2V0dXBTcHJpdGVzKGltYWdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnZhcmlhYmxlU3ByaXRlcyA9IHNldHVwVmFyaWFibGVTcHJpdGVzKGltYWdlKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxvYWRBdWRpbyhhdWRpb1NyYykge1xuICAgICAgICB0aGlzLmF1ZGlvID0ge307XG4gICAgICAgIGNvbnN0IGxvYWRlcnMgPSBPYmplY3Qua2V5cyhhdWRpb1NyYykubWFwKHRyYWNrTmFtZSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbygpO1xuICAgICAgICAgICAgYXVkaW8uc3JjID0gYXVkaW9TcmNbdHJhY2tOYW1lXTtcbiAgICAgICAgICAgIGF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXl0aHJvdWdoJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9bdHJhY2tOYW1lXSA9IGF1ZGlvO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChsb2FkZXJzKTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgYXNzZXRzSG9sZGVyID0gbmV3IEFzc2V0c0hvbGRlcigpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXNzZXRzSG9sZGVyLmpzLm1hcCIsImltcG9ydCB7IENvbnRyb2xLZXlzIH0gZnJvbSAnLi90eXBlcyc7XG5leHBvcnQgY2xhc3MgS2V5Ym9hcmQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnF1ZXVlID0gbmV3IFNldCgpO1xuICAgIH1cbiAgICBoYW5kbGVFdmVudChldmVudCwgZ2FtZSkge1xuICAgICAgICBjb25zdCB7IGNvZGUsIHR5cGUgfSA9IGV2ZW50O1xuICAgICAgICBpZiAoZ2FtZS5pc1dhaXRpbmdGb3JSZXN0YXJ0KCkpIHtcbiAgICAgICAgICAgIHJldHVybiBnYW1lLnJlc3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2FtZS5pc1N0YXJ0U2NyZWVuKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2FtZS5wbGF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFDb250cm9sS2V5c1tjb2RlXSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHR5cGUgPT09ICdrZXlkb3duJykge1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS5hZGQoQ29udHJvbEtleXNbY29kZV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS5kZWxldGUoQ29udHJvbEtleXNbY29kZV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldEtleSgpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5xdWV1ZSkucG9wKCk7XG4gICAgfVxuICAgIGxpc3RlblRvRXZlbnRzKGdhbWUpIHtcbiAgICAgICAgWydrZXlkb3duJywgJ2tleXVwJ10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUV2ZW50KGV2ZW50LCBnYW1lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY29uc3Qga2V5Ym9hcmQgPSBuZXcgS2V5Ym9hcmQoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWtleWJvYXJkLmpzLm1hcCIsImNvbnN0IG1hcHMgPSBbXG4gICAgW1xuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDUsIDUsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMSwgMiwgNSwgNSwgMSwgMiwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzEsIDIsIDAsIDAsIDEsIDIsIDEsIDIsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDIsIDEsIDIsIDAsIDAsIDEsIDJdLFxuICAgICAgICBbNSwgNSwgMCwgMCwgMywgNCwgMywgNCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMywgNCwgMywgNCwgMCwgMCwgNSwgNV0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAzLCA0LCAxLCAyLCAzLCA0LCAwLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDMsIDQsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMCwgMSwgMiwgMSwgMiwgMCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAzLCAwLCAwLCA0LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDIsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgIF0sXG4gICAgW1xuICAgICAgICBbMCwgMCwgMCwgMCwgMSwgMiwgNSwgNSwgMSwgMiwgMSwgMiwgNSwgNSwgMSwgMiwgNSwgNSwgMSwgMiwgMSwgMiwgNSwgNSwgMSwgMiwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAzLCA0LCA1LCA1LCAzLCA0LCAzLCA0LCA1LCA1LCAzLCA0LCA1LCA1LCAzLCA0LCAzLCA0LCA1LCA1LCAzLCA0LCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCA1LCA1LCAwLCAwLCAxLCAyLCAwLCAwLCA1LCA1LCAxLCAyLCA1LCA1LCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDUsIDUsIDAsIDAsIDMsIDQsIDAsIDAsIDUsIDUsIDMsIDQsIDUsIDUsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgNywgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgMCwgMywgNCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCA3LCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDcsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgNywgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAzLCA0LCAwLCAwLCA3LCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDUsIDAsIDYsIDYsIDYsIDYsIDYsIDAsIDcsIDAsIDcsIDAsIDcsIDcsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgNSwgNywgNiwgNiwgNiwgNiwgNiwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCA1LCAwLCA2LCA2LCA2LCA2LCA3LCAwLCA3LCAwLCA3LCAwLCA3LCA3LCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDUsIDcsIDYsIDYsIDYsIDYsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgNywgMCwgNiwgNiwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgNywgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAzLCA0LCAwLCAwLCA3LCA3LCA2LCA2LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDcsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgNywgNywgNywgNywgNywgNywgNywgNywgNywgNywgNywgNywgNywgNywgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDUsIDUsIDEsIDIsIDUsIDUsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgNSwgNSwgMywgNCwgNSwgNSwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMiwgMSwgMiwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAzLCAwLCAwLCA0LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDIsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgIF0sXG5dO1xuY29uc3QgdGFua3MgPSBbWzIsIDIsIDAsIDAsIDEsIDIsIDEsIDAsIDAsIDBdLCBbMiwgMiwgMCwgMCwgMSwgMiwgMSwgMCwgMCwgMF1dO1xuZXhwb3J0IHsgbWFwcywgdGFua3MgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YWdlQ29uZmlnLmpzLm1hcCIsImltcG9ydCB7IFRpbGVzLCBMYXllcnMgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IFRJTEVfU0lERSB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IGFzc2V0c0hvbGRlciB9IGZyb20gJy4vdXRpbHMnO1xuZXhwb3J0IGNvbnN0IHJpZ2lkID0gW1RpbGVzLkJyaWNrMSwgVGlsZXMuQnJpY2syLCBUaWxlcy5CcmljazMsIFRpbGVzLkJyaWNrNCwgVGlsZXMuU3RlZWwsIFRpbGVzLldhdGVyXTtcbmV4cG9ydCBjb25zdCBidWxsZXRUaHJvdWdoID0gW1RpbGVzLkdyYXNzLCBUaWxlcy5XYXRlciwgVGlsZXMuTm9uZV07XG5jb25zdCBsYXllc3JNYXAgPSB7XG4gICAgW0xheWVycy51bmRlcl06IFtUaWxlcy5JY2UsIFRpbGVzLldhdGVyXSxcbiAgICBbTGF5ZXJzLm1haW5dOiBbVGlsZXMuQnJpY2sxLCBUaWxlcy5CcmljazIsIFRpbGVzLkJyaWNrMywgVGlsZXMuQnJpY2s0LCBUaWxlcy5TdGVlbF0sXG4gICAgW0xheWVycy5vdmVyXTogW1RpbGVzLkdyYXNzXSxcbn07XG5leHBvcnQgY2xhc3MgVGlsZU1hcCB7XG4gICAgY29uc3RydWN0b3IodGlsZXMpIHtcbiAgICAgICAgdGhpcy50aWxlcyA9IHRpbGVzLm1hcChyb3cgPT4gWy4uLnJvd10pO1xuICAgIH1cbiAgICBkZXN0cm95KHBvaW50KSB7XG4gICAgICAgIGNvbnN0IHhJbmRleCA9IE1hdGgubWF4KDAsIE1hdGguZmxvb3IocG9pbnQueCAvIFRJTEVfU0lERSkpO1xuICAgICAgICBjb25zdCB5SW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKHBvaW50LnkgLyBUSUxFX1NJREUpKTtcbiAgICAgICAgdGhpcy50aWxlc1t5SW5kZXhdW3hJbmRleF0gPSBUaWxlcy5Ob25lO1xuICAgIH1cbiAgICBsb29rdXAocG9pbnQpIHtcbiAgICAgICAgY29uc3QgeEluZGV4ID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihwb2ludC54IC8gVElMRV9TSURFKSksIDI5KTtcbiAgICAgICAgY29uc3QgeUluZGV4ID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihwb2ludC55IC8gVElMRV9TSURFKSksIDI5KTtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogdGhpcy50aWxlc1t5SW5kZXhdW3hJbmRleF0sIHBvc2l0aW9uOiB7IHg6IHhJbmRleCAqIFRJTEVfU0lERSwgeTogeUluZGV4ICogVElMRV9TSURFIH0gfTtcbiAgICB9XG4gICAgbG9va3VwUmFuZ2UocG9pbnQxLCBwb2ludDIpIHtcbiAgICAgICAgbGV0IGluQmV0d2VlblBvaW50cyA9IFtdO1xuICAgICAgICBjb25zdCByYW5nZVggPSBNYXRoLmFicyhwb2ludDEueCAtIHBvaW50Mi54KTtcbiAgICAgICAgY29uc3QgcmFuZ2VZID0gTWF0aC5hYnMocG9pbnQxLnkgLSBwb2ludDIueSk7XG4gICAgICAgIGlmIChyYW5nZVggPiAwICYmIHJhbmdlWCA+IFRJTEVfU0lERSkge1xuICAgICAgICAgICAgLy8gQ2hlY2tzIHRpbGUgaW4gYmV0d2VlbiB0YW5rIGVkZ2VzXG4gICAgICAgICAgICBpbkJldHdlZW5Qb2ludHMucHVzaCh7IHg6IHBvaW50MS54ICsgVElMRV9TSURFLCB5OiBwb2ludDEueSB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyYW5nZVkgPiAwICYmIHJhbmdlWSA+IFRJTEVfU0lERSkge1xuICAgICAgICAgICAgaW5CZXR3ZWVuUG9pbnRzLnB1c2goeyB4OiBwb2ludDEueCwgeTogcG9pbnQxLnkgKyBUSUxFX1NJREUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtwb2ludDEsIC4uLmluQmV0d2VlblBvaW50cywgcG9pbnQyXS5tYXAocG9pbnQgPT4gdGhpcy5sb29rdXAocG9pbnQpKTtcbiAgICB9XG4gICAgcmVuZGVyTGF5ZXIobmFtZSkge1xuICAgICAgICB0aGlzLnRpbGVzLmZvckVhY2goKHJvdywgeSkgPT4ge1xuICAgICAgICAgICAgcm93LmZvckVhY2goKHRpbGUsIHgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWxheWVzck1hcFtuYW1lXS5pbmNsdWRlcyh0aWxlKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGFzc2V0c0hvbGRlci5zcHJpdGVzLnRpbGVzW3RpbGVdKHsgeDogeCAqIFRJTEVfU0lERSwgeTogeSAqIFRJTEVfU0lERSB9LCB7IHg6IFRJTEVfU0lERSwgeTogVElMRV9TSURFIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVNYXAuanMubWFwIiwiaW1wb3J0IHsgYXNzZXRzSG9sZGVyIH0gZnJvbSAnLi4vdXRpbHMnO1xuZXhwb3J0IGNsYXNzIFNvdW5kTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IodHJhY2tOYW1lcykge1xuICAgICAgICB0aGlzLnNldHVwVHJhY2tzKHRyYWNrTmFtZXMpO1xuICAgIH1cbiAgICBzZXR1cFRyYWNrcyh0cmFja05hbWVzKSB7XG4gICAgICAgIHRoaXMudHJhY2tzID0gdHJhY2tOYW1lcy5yZWR1Y2UoKGFjYywgdHJhY2spID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdHJhY2sgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgYWNjW3RyYWNrXSA9IGFzc2V0c0hvbGRlci5hdWRpb1t0cmFja10uY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHRyYWNrTmFtZSwgbG9vcCB9ID0gdHJhY2s7XG4gICAgICAgICAgICAgICAgYWNjW3RyYWNrTmFtZV0gPSBhc3NldHNIb2xkZXIuYXVkaW9bdHJhY2tOYW1lXS5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgICAgICBhY2NbdHJhY2tOYW1lXS5sb29wID0gbG9vcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9KTtcbiAgICB9XG4gICAgcGxheSh0cmFja05hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhY2tzW3RyYWNrTmFtZV0ucGxheSgpO1xuICAgIH1cbiAgICBwYXVzZSh0cmFja05hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhY2tzW3RyYWNrTmFtZV0ucGF1c2UoKTtcbiAgICB9XG4gICAgcGF1c2VBbGwoKSB7XG4gICAgICAgIE9iamVjdC52YWx1ZXModGhpcy50cmFja3MpLmZvckVhY2godHJhY2sgPT4gdHJhY2sucGF1c2UoKSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U291bmRNYW5hZ2VyLmpzLm1hcCIsImV4cG9ydCBjbGFzcyBUaW1lTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudGltZXJzID0ge307XG4gICAgfVxuICAgIHNldFRpbWVyKHRpbWVyTmFtZSwgZnJhbWVMZW5ndGgpIHtcbiAgICAgICAgdGhpcy50aW1lcnNbdGltZXJOYW1lXSA9IGZyYW1lTGVuZ3RoO1xuICAgIH1cbiAgICBnZXRUaW1lcih0aW1lck5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXJzW3RpbWVyTmFtZV07XG4gICAgfVxuICAgIHNvbWUodGltZXJzKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZW50cmllcyh0aGlzLnRpbWVycykuc29tZShlbnRyeSA9PiB0aW1lcnMuaW5jbHVkZXMoZW50cnlbMF0pICYmIGVudHJ5WzFdID49IDApO1xuICAgIH1cbiAgICBkZWNyZW1lbnRUaW1lcnMoKSB7XG4gICAgICAgIGNvbnN0IHRvUmVtb3ZlID0gT2JqZWN0LmVudHJpZXModGhpcy50aW1lcnMpLmZpbHRlcihlbnRyeSA9PiBlbnRyeVsxXSA9PT0gMCk7XG4gICAgICAgIGlmICh0b1JlbW92ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRvUmVtb3ZlLmZvckVhY2goZW50cnkgPT4ge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRpbWVyc1tlbnRyeVswXV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnRpbWVycykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgdGhpcy50aW1lcnNba2V5XSAtPSAxO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaW1lTWFuYWdlci5qcy5tYXAiLCJleHBvcnQgY2xhc3MgRW50aXR5IHtcbiAgICBjb25zdHJ1Y3Rvcihwb3NpdGlvbiwgc2l6ZSkge1xuICAgICAgICB0aGlzLmlkID0gRW50aXR5Lm51bWJlckdlbjtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgICAgICBFbnRpdHkubnVtYmVyR2VuICs9IDE7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHsgfVxuICAgIHJlbmRlcigpIHsgfVxuICAgIHJlc29sdmVFbnRpdHlDb2xsaXNpb24ob3RoZXIpIHsgfVxuICAgIGdldEJvdW5kaW5nQm94KCkge1xuICAgICAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXMucG9zaXRpb247XG4gICAgICAgIGNvbnN0IHsgeDogd2lkdGgsIHk6IGhlaWdodCB9ID0gdGhpcy5zaXplO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDE6IHgsXG4gICAgICAgICAgICB4MjogeCArIHdpZHRoLFxuICAgICAgICAgICAgeTE6IHksXG4gICAgICAgICAgICB5MjogeSArIGhlaWdodCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZGVjb25zdHJ1Y3QoKSB7IH1cbn1cbkVudGl0eS5udW1iZXJHZW4gPSAwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RW50aXR5LmpzLm1hcCIsImltcG9ydCB7IEVudGl0eSB9IGZyb20gJy4vRW50aXR5JztcbmltcG9ydCB7IERFTFRBX1RJTUUgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgRGlyZWN0aW9uIH0gZnJvbSAnLi4vdHlwZXMnO1xuZXhwb3J0IGNsYXNzIE1vdmFibGUgZXh0ZW5kcyBFbnRpdHkge1xuICAgIGNvbnN0cnVjdG9yKHBvc2l0aW9uLCBzaXplLCBkaXJlY3Rpb24pIHtcbiAgICAgICAgc3VwZXIocG9zaXRpb24sIHNpemUpO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbiAgICAgICAgdGhpcy5wcmV2UG9zaXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBwb3NpdGlvbik7XG4gICAgfVxuICAgIHJlc29sdmVFZGdlQ29sbGlzaW9uKCkgeyB9XG4gICAgcmVzb2x2ZVRpbGVDb2xsaXNpb24odGlsZXMsIHRpbGVNYXApIHsgfVxuICAgIHJlc29sdmVFbnRpdHlDb2xsaXNpb24ob3RoZXIpIHsgfVxuICAgIG1vdmUodmVsb2NpdHkpIHtcbiAgICAgICAgdGhpcy5wcmV2UG9zaXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnBvc2l0aW9uKTtcbiAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uVG9wKSB7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnkgLT0gdmVsb2NpdHkgKiBERUxUQV9USU1FO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uQm90dG9tKSB7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnkgKz0gdmVsb2NpdHkgKiBERUxUQV9USU1FO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uTGVmdCkge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi54IC09IHZlbG9jaXR5ICogREVMVEFfVElNRTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlJpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnggKz0gdmVsb2NpdHkgKiBERUxUQV9USU1FO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdvQmFjaygpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMucHJldlBvc2l0aW9uKTtcbiAgICB9XG4gICAgYW5pbWF0ZU1vdmVtZW50KHNwcml0ZXMpIHtcbiAgICAgICAgbGV0IGRpc3RhbmNlO1xuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5MZWZ0IHx8IHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uUmlnaHQpIHtcbiAgICAgICAgICAgIGRpc3RhbmNlID0gdGhpcy5wb3NpdGlvbi54O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGlzdGFuY2UgPSB0aGlzLnBvc2l0aW9uLnk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSBNYXRoLmZsb29yKGRpc3RhbmNlIC8gMC4zKSAlIHNwcml0ZXMubGVuZ3RoO1xuICAgICAgICBzcHJpdGVzW2luZGV4XSh0aGlzLnBvc2l0aW9uLCB0aGlzLnNpemUpO1xuICAgIH1cbiAgICBpc091dE9mU2NyZWVuKCkge1xuICAgICAgICBjb25zdCBib3ggPSB0aGlzLmdldEJvdW5kaW5nQm94KCk7XG4gICAgICAgIHJldHVybiBib3gueTEgPCAwIHx8IGJveC55MiA+IDYwMCB8fCBib3gueDEgPCAwIHx8IGJveC54MiA+IDYwMDtcbiAgICB9XG4gICAgZ2V0RnJvbnRDb2xsaXNpb25Qb2ludHMoKSB7XG4gICAgICAgIGNvbnN0IHsgeDEsIHgyLCB5MSwgeTIgfSA9IHRoaXMuZ2V0Qm91bmRpbmdCb3goKTtcbiAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uVG9wKSB7XG4gICAgICAgICAgICByZXR1cm4gW3sgeDogeDEsIHk6IHkxIH0sIHsgeDogeDIsIHk6IHkxIH1dO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uUmlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybiBbeyB4OiB4MiwgeTogeTEgfSwgeyB4OiB4MiwgeTogeTIgfV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Cb3R0b20pIHtcbiAgICAgICAgICAgIHJldHVybiBbeyB4OiB4MSwgeTogeTIgfSwgeyB4OiB4MiwgeTogeTIgfV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5MZWZ0KSB7XG4gICAgICAgICAgICByZXR1cm4gW3sgeDogeDEsIHk6IHkxIH0sIHsgeDogeDEsIHk6IHkyIH1dO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TW92YWJsZS5qcy5tYXAiLCJpbXBvcnQgeyBNb3ZhYmxlIH0gZnJvbSAnLi9Nb3ZhYmxlJztcbmltcG9ydCB7IEJVTExFVF9TSVpFLCBERUFUSF9GUkFNRVMsIFRJTEVfU0lERSB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBlbnRpdHlNYW5hZ2VyIH0gZnJvbSAnLi4vbWFuYWdlcnMnO1xuaW1wb3J0IHsgRGlyZWN0aW9uIH0gZnJvbSAnLi4vdHlwZXMnO1xuZXhwb3J0IGNsYXNzIFRhbmsgZXh0ZW5kcyBNb3ZhYmxlIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3NpdGlvbiwgc2l6ZSwgZGlyZWN0aW9uKSB7XG4gICAgICAgIHN1cGVyKHBvc2l0aW9uLCBzaXplLCBkaXJlY3Rpb24pO1xuICAgIH1cbiAgICBzaG90KGNkKSB7XG4gICAgICAgIGNvbnN0IHNob3RDRCA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ3Nob3RDRCcpO1xuICAgICAgICBpZiAoc2hvdENEKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgYnVsbGV0UG9zaXRpb247XG4gICAgICAgIGNvbnN0IHsgeDogd2lkdGgsIHk6IGhlaWdodCB9ID0gQlVMTEVUX1NJWkU7XG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlRvcCkge1xuICAgICAgICAgICAgYnVsbGV0UG9zaXRpb24gPSB7IHg6IHRoaXMuc2l6ZS54IC8gMiArIHRoaXMucG9zaXRpb24ueCAtIHdpZHRoIC8gMiwgeTogdGhpcy5wb3NpdGlvbi55IC0gaGVpZ2h0IH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5SaWdodCkge1xuICAgICAgICAgICAgYnVsbGV0UG9zaXRpb24gPSB7IHg6IHRoaXMuc2l6ZS54ICsgdGhpcy5wb3NpdGlvbi54LCB5OiB0aGlzLnNpemUueSAvIDIgKyB0aGlzLnBvc2l0aW9uLnkgLSBoZWlnaHQgLyAyIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Cb3R0b20pIHtcbiAgICAgICAgICAgIGJ1bGxldFBvc2l0aW9uID0geyB4OiB0aGlzLnNpemUueCAvIDIgKyB0aGlzLnBvc2l0aW9uLnggLSB3aWR0aCAvIDIsIHk6IHRoaXMuc2l6ZS55ICsgdGhpcy5wb3NpdGlvbi55IH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBidWxsZXRQb3NpdGlvbiA9IHsgeDogdGhpcy5wb3NpdGlvbi54IC0gd2lkdGgsIHk6IHRoaXMuc2l6ZS55IC8gMiArIHRoaXMucG9zaXRpb24ueSAtIGhlaWdodCAvIDIgfTtcbiAgICAgICAgfVxuICAgICAgICBlbnRpdHlNYW5hZ2VyLnNwYXduRW50aXR5KCdCdWxsZXQnLCBidWxsZXRQb3NpdGlvbiwgdGhpcy5kaXJlY3Rpb24sIHRoaXMpO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdzaG90Q0QnLCBjZCk7XG4gICAgfVxuICAgIGRpZSgpIHtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignZGVhdGgnLCBERUFUSF9GUkFNRVMpO1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5KCdleHBsb2RlJyk7XG4gICAgICAgIGVudGl0eU1hbmFnZXIudG9SZW1vdmUodGhpcy5pZCk7XG4gICAgfVxuICAgIGZvcmdpdmVDb2xsaXNpb24odGlsZSkge1xuICAgICAgICBjb25zdCBbcG9pbnQxLCBwb2ludDJdID0gdGhpcy5nZXRGcm9udENvbGxpc2lvblBvaW50cygpO1xuICAgICAgICBjb25zdCB0aWxlUG9zID0gdGlsZS5wb3NpdGlvbjtcbiAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uVG9wIHx8IHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uQm90dG9tKSB7XG4gICAgICAgICAgICBjb25zdCBkaWZmUG9pbnQgPSBNYXRoLm1pbihNYXRoLmFicyh0aWxlUG9zLnggLSBwb2ludDEueCksIE1hdGguYWJzKHRpbGVQb3MueCAtIHBvaW50Mi54KSk7XG4gICAgICAgICAgICBpZiAoZGlmZlBvaW50ID4gMCAmJiBkaWZmUG9pbnQgPCA1KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVzdGluYXRpb24gPSB0aGlzLnBvc2l0aW9uLnggPiB0aWxlUG9zLnggPyB0aWxlUG9zLnggKyBUSUxFX1NJREUgOiB0aWxlUG9zLnggLSB0aGlzLnNpemUueDtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB4OiBkZXN0aW5hdGlvbiwgeTogdGhpcy5wcmV2UG9zaXRpb24ueSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uTGVmdCB8fCB0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlJpZ2h0KSB7XG4gICAgICAgICAgICBjb25zdCBkaWZmUG9pbnQgPSBNYXRoLm1pbihNYXRoLmFicyh0aWxlUG9zLnkgLSBwb2ludDEueSksIE1hdGguYWJzKHRpbGVQb3MueSAtIHBvaW50Mi55KSk7XG4gICAgICAgICAgICBpZiAoZGlmZlBvaW50ID4gMCAmJiBkaWZmUG9pbnQgPCA1KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVzdGluYXRpb24gPSB0aGlzLnBvc2l0aW9uLnkgPiB0aWxlUG9zLnkgPyB0aWxlUG9zLnkgKyBUSUxFX1NJREUgOiB0aWxlUG9zLnkgLSB0aGlzLnNpemUueTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB4OiB0aGlzLnByZXZQb3NpdGlvbi54LCB5OiBkZXN0aW5hdGlvbiB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UYW5rLmpzLm1hcCIsImltcG9ydCB7IFBsYXllciwgRW5lbXksIFBvd2VydXAsIEZsYWcsIFRhbmssIEJ1bGxldCB9IGZyb20gJy4vJztcbmV4cG9ydCBmdW5jdGlvbiBpc1RhbmsoZW50aXR5KSB7XG4gICAgcmV0dXJuIGVudGl0eSBpbnN0YW5jZW9mIFRhbms7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNQbGF5ZXIoZW50aXR5KSB7XG4gICAgcmV0dXJuIGVudGl0eSBpbnN0YW5jZW9mIFBsYXllcjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0VuZW15KGVudGl0eSkge1xuICAgIHJldHVybiBlbnRpdHkgaW5zdGFuY2VvZiBFbmVteTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0J1bGxldChlbnRpdHkpIHtcbiAgICByZXR1cm4gZW50aXR5IGluc3RhbmNlb2YgQnVsbGV0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzRmxhZyhlbnRpdHkpIHtcbiAgICByZXR1cm4gZW50aXR5IGluc3RhbmNlb2YgRmxhZztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1Bvd2VydXAoZW50aXR5KSB7XG4gICAgcmV0dXJuIGVudGl0eSBpbnN0YW5jZW9mIFBvd2VydXA7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ndWFyZHMuanMubWFwIiwiaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnLi9FbnRpdHknO1xuaW1wb3J0IHsgUE9XRVJVUF9TSVpFLCBQT1dFUlVQX1NQQVdOX0NELCBQT1dFUlVQX0JMSU5LX0ZSQU1FUyB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBTb3VuZE1hbmFnZXIsIGVudGl0eU1hbmFnZXIsIFRpbWVNYW5hZ2VyIH0gZnJvbSAnLi4vbWFuYWdlcnMnO1xuaW1wb3J0IHsgYXNzZXRzSG9sZGVyIH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHsgaXNQbGF5ZXIgfSBmcm9tICcuL2d1YXJkcyc7XG5leHBvcnQgY2xhc3MgUG93ZXJ1cEV2ZW50cyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0ge307XG4gICAgfVxuICAgIHN1YnNjcmliZShlbnRpdHlJZCwgb2JzZXJ2ZXIpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnNbZW50aXR5SWRdID0gb2JzZXJ2ZXI7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKGVudGl0eUlkKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLm9ic2VydmVyc1tlbnRpdHlJZF07XG4gICAgfVxuICAgIG5vdGlmeShldmVudFR5cGUpIHtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLm9ic2VydmVycykuZm9yRWFjaCgob2JzZXJ2ZXIpID0+IG9ic2VydmVyKGV2ZW50VHlwZSkpO1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBwb3dlcnVwRXZlbnRzID0gbmV3IFBvd2VydXBFdmVudHMoKTtcbmV4cG9ydCBjbGFzcyBQb3dlcnVwIGV4dGVuZHMgRW50aXR5IHtcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBwb3NpdGlvbikge1xuICAgICAgICBzdXBlcihwb3NpdGlvbiwgT2JqZWN0LmFzc2lnbih7fSwgUE9XRVJVUF9TSVpFKSk7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIgPSBuZXcgVGltZU1hbmFnZXIoKTtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIgPSBuZXcgU291bmRNYW5hZ2VyKFsncG93ZXJ1cCddKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignbGl2ZScsIFBPV0VSVVBfU1BBV05fQ0QpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGNvbnN0IGxpdmVzTGVmdCA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ2xpdmUnKTtcbiAgICAgICAgaWYgKGxpdmVzTGVmdCA9PT0gMCkge1xuICAgICAgICAgICAgZW50aXR5TWFuYWdlci50b1JlbW92ZSh0aGlzLmlkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsaXZlc0xlZnQgPT09IFBPV0VSVVBfQkxJTktfRlJBTUVTKSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdibGluaycsIFBPV0VSVVBfQkxJTktfRlJBTUVTKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLmRlY3JlbWVudFRpbWVycygpO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IGJsaW5rTGVmdCA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ2JsaW5rJyk7XG4gICAgICAgIGlmIChibGlua0xlZnQgJiYgYmxpbmtMZWZ0ICUgNTAgPT09IDApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGFzc2V0c0hvbGRlci5zcHJpdGVzLnBvd2VydXBbdGhpcy50eXBlXSh0aGlzLnBvc2l0aW9uLCB0aGlzLnNpemUpO1xuICAgIH1cbiAgICByZXNvbHZlRW50aXR5Q29sbGlzaW9uKG90aGVyKSB7XG4gICAgICAgIGlmIChpc1BsYXllcihvdGhlcikpIHtcbiAgICAgICAgICAgIGVudGl0eU1hbmFnZXIudG9SZW1vdmUodGhpcy5pZCk7XG4gICAgICAgICAgICBwb3dlcnVwRXZlbnRzLm5vdGlmeSh0aGlzLnR5cGUpO1xuICAgICAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheSgncG93ZXJ1cCcpO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG93ZXJ1cC5qcy5tYXAiLCJpbXBvcnQgeyBUYW5rIH0gZnJvbSAnLi9UYW5rJztcbmltcG9ydCB7IGFzc2V0c0hvbGRlciwgYW5pbWF0ZVZhcmlhYmxlU3ByaXRlcyB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7IERpcmVjdGlvbiwgUG93ZXJ1cFR5cGVzLCBQbGF5ZXJQb3dlciwgQ29udHJvbEtleXMgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBQTEFZRVJfU1BBV05fUE9TSVRJT04sIFRBTktfU0laRSwgUExBWUVSX1NUQVRTLCBTUEFXTl9GUkFNRVMsIERFQVRIX0ZSQU1FUywgSU5WSU5DSUJMRV9GUkFNRVMsIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB7IHBvd2VydXBFdmVudHMgfSBmcm9tICcuL1Bvd2VydXAnO1xuaW1wb3J0IHsga2V5Ym9hcmQgfSBmcm9tICcuLi9rZXlib2FyZCc7XG5pbXBvcnQgeyBTb3VuZE1hbmFnZXIsIFRpbWVNYW5hZ2VyIH0gZnJvbSAnLi4vbWFuYWdlcnMnO1xuaW1wb3J0IHsgaXNQb3dlcnVwLCBpc0J1bGxldCB9IGZyb20gJy4vZ3VhcmRzJztcbmZ1bmN0aW9uIHBvd2VydXBPYnNlcnZlcihwb3dlcnVwVHlwZSkge1xuICAgIGlmIChwb3dlcnVwVHlwZSA9PT0gUG93ZXJ1cFR5cGVzLlRhbmspIHtcbiAgICAgICAgdGhpcy5saXZlcyArPSAxO1xuICAgIH1cbiAgICBlbHNlIGlmIChwb3dlcnVwVHlwZSA9PT0gUG93ZXJ1cFR5cGVzLkhlbG1ldCkge1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdpbnZpbmNpYmxlJywgSU5WSU5DSUJMRV9GUkFNRVMpO1xuICAgIH1cbiAgICBlbHNlIGlmIChwb3dlcnVwVHlwZSA9PT0gUG93ZXJ1cFR5cGVzLlN0YXIgJiYgdGhpcy5wb3dlciA8IFBsYXllclBvd2VyLlNlY29uZCkge1xuICAgICAgICB0aGlzLnBvd2VyICs9IDE7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFBsYXllciBleHRlbmRzIFRhbmsge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihPYmplY3QuYXNzaWduKHt9LCBQTEFZRVJfU1BBV05fUE9TSVRJT04pLCBPYmplY3QuYXNzaWduKHt9LCBUQU5LX1NJWkUpLCBEaXJlY3Rpb24uVG9wKTtcbiAgICAgICAgdGhpcy5saXZlcyA9IDM7XG4gICAgICAgIHRoaXMucG93ZXIgPSBQbGF5ZXJQb3dlci5EZWZhdWx0O1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyID0gbmV3IFRpbWVNYW5hZ2VyKCk7XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyID0gbmV3IFNvdW5kTWFuYWdlcihbXG4gICAgICAgICAgICAnZXhwbG9kZScsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHJhY2tOYW1lOiAnbmV1dHJhbCcsXG4gICAgICAgICAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHJhY2tOYW1lOiAnbW92ZScsXG4gICAgICAgICAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdzcGF3bicsIFNQQVdOX0ZSQU1FUyk7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ2ludmluY2libGUnLCBJTlZJTkNJQkxFX0ZSQU1FUyk7XG4gICAgICAgIHBvd2VydXBFdmVudHMuc3Vic2NyaWJlKHRoaXMuaWQsIHBvd2VydXBPYnNlcnZlci5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLmRlY3JlbWVudFRpbWVycygpO1xuICAgICAgICBjb25zdCBkZWF0aCA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ2RlYXRoJyk7XG4gICAgICAgIGNvbnN0IHNwYXduID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignc3Bhd24nKTtcbiAgICAgICAgaWYgKGRlYXRoKSB7XG4gICAgICAgICAgICBpZiAoZGVhdGggPT09IDEpXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNwYXduKHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNwYXduKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheSgnbmV1dHJhbCcpO1xuICAgICAgICB0aGlzLnByb2Nlc3NJbnB1dCgpO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHNwYXduID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignc3Bhd24nKTtcbiAgICAgICAgY29uc3QgZGVhdGggPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdkZWF0aCcpO1xuICAgICAgICBjb25zdCBpbnZpbmNpYmxlID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignaW52aW5jaWJsZScpO1xuICAgICAgICBpZiAoc3Bhd24pIHtcbiAgICAgICAgICAgIHJldHVybiBhbmltYXRlVmFyaWFibGVTcHJpdGVzKHRoaXMucG9zaXRpb24sIGFzc2V0c0hvbGRlci52YXJpYWJsZVNwcml0ZXMudGFua1NwYXduLCBTUEFXTl9GUkFNRVMsIHNwYXduKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZWF0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGFuaW1hdGVWYXJpYWJsZVNwcml0ZXModGhpcy5wb3NpdGlvbiwgYXNzZXRzSG9sZGVyLnZhcmlhYmxlU3ByaXRlcy50YW5rRGVzdHJ1Y3Rpb24sIERFQVRIX0ZSQU1FUywgZGVhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGludmluY2libGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGludmluY2libGVTcHJpdGVzID0gYXNzZXRzSG9sZGVyLnNwcml0ZXMuaW52aW5jaWJsZTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gaW52aW5jaWJsZSAlIGludmluY2libGVTcHJpdGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGludmluY2libGVTcHJpdGVzW2luZGV4XSh0aGlzLnBvc2l0aW9uLCB0aGlzLnNpemUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYW5pbWF0ZU1vdmVtZW50KGFzc2V0c0hvbGRlci5zcHJpdGVzLnBsYXllclt0aGlzLnBvd2VyXVt0aGlzLmRpcmVjdGlvbl0pO1xuICAgIH1cbiAgICBwcm9jZXNzSW5wdXQoKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGtleWJvYXJkLmdldEtleSgpO1xuICAgICAgICBsZXQgaXNNb3ZpbmcgPSB0cnVlO1xuICAgICAgICBpZiAoa2V5ID09PSBDb250cm9sS2V5cy5BcnJvd1VwKSB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IERpcmVjdGlvbi5Ub3A7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBDb250cm9sS2V5cy5BcnJvd0Rvd24pIHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gRGlyZWN0aW9uLkJvdHRvbTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09IENvbnRyb2xLZXlzLkFycm93TGVmdCkge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBEaXJlY3Rpb24uTGVmdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09IENvbnRyb2xLZXlzLkFycm93UmlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gRGlyZWN0aW9uLlJpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGF1c2UoJ21vdmUnKTtcbiAgICAgICAgICAgIGlzTW92aW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleSA9PT0gQ29udHJvbEtleXMuU3BhY2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvdChQTEFZRVJfU1RBVFNbdGhpcy5wb3dlcl0uc2hvdENEKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNNb3ZpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBhdXNlKCduZXV0cmFsJyk7XG4gICAgICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5KCdtb3ZlJyk7XG4gICAgICAgICAgICB0aGlzLm1vdmUoUExBWUVSX1NUQVRTW3RoaXMucG93ZXJdLnZlbG9jaXR5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXNvbHZlRWRnZUNvbGxpc2lvbigpIHtcbiAgICAgICAgdGhpcy5nb0JhY2soKTtcbiAgICB9XG4gICAgcmVzb2x2ZVRpbGVDb2xsaXNpb24odGlsZXMpIHtcbiAgICAgICAgaWYgKHRpbGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgY29uc3QgbmV3UG9zID0gdGhpcy5mb3JnaXZlQ29sbGlzaW9uKHRpbGVzWzBdKTtcbiAgICAgICAgICAgIGlmIChuZXdQb3MpXG4gICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIG5ld1Bvcyk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5nb0JhY2soKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZ29CYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzb2x2ZUVudGl0eUNvbGxpc2lvbihvdGhlcikge1xuICAgICAgICBjb25zdCBkZWF0aCA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ2RlYXRoJyk7XG4gICAgICAgIGlmIChpc1Bvd2VydXAob3RoZXIpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNCdWxsZXQob3RoZXIpICYmICFkZWF0aCkge1xuICAgICAgICAgICAgY29uc3QgaW52aW5jaWJsZSA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ2ludmluY2libGUnKTtcbiAgICAgICAgICAgIGlmIChpbnZpbmNpYmxlKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ2RlYXRoJywgREVBVEhfRlJBTUVTKTtcbiAgICAgICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXkoJ2V4cGxvZGUnKTtcbiAgICAgICAgICAgIHRoaXMubGl2ZXMgLT0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLmxpdmVzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZ29CYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzcGF3bihkZWZhdWx0UG93ZXIgPSBmYWxzZSkge1xuICAgICAgICBpZiAoZGVmYXVsdFBvd2VyKVxuICAgICAgICAgICAgdGhpcy5wb3dlciA9IFBsYXllclBvd2VyLkRlZmF1bHQ7XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBhdXNlQWxsKCk7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ3NwYXduJywgU1BBV05fRlJBTUVTKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignaW52aW5jaWJsZScsIElOVklOQ0lCTEVfRlJBTUVTKTtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIFBMQVlFUl9TUEFXTl9QT1NJVElPTik7XG4gICAgICAgIHRoaXMucHJldlBvc2l0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgUExBWUVSX1NQQVdOX1BPU0lUSU9OKTtcbiAgICB9XG4gICAgZGVjb25zdHJ1Y3QoKSB7XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBhdXNlQWxsKCk7XG4gICAgICAgIHBvd2VydXBFdmVudHMudW5zdWJzY3JpYmUodGhpcy5pZCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGxheWVyLmpzLm1hcCIsImltcG9ydCB7IE1vdmFibGUgfSBmcm9tICcuL01vdmFibGUnO1xuaW1wb3J0IHsgVGlsZXMsIFBsYXllclBvd2VyIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgQlVMTEVUX1ZFTE9DSVRZLCBCVUxMRVRfU0laRSB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBTb3VuZE1hbmFnZXIsIGVudGl0eU1hbmFnZXIgfSBmcm9tICcuLi9tYW5hZ2Vycy8nO1xuaW1wb3J0IHsgYnVsbGV0VGhyb3VnaCB9IGZyb20gJy4uL1RpbGVNYXAnO1xuaW1wb3J0IHsgaXNQbGF5ZXIsIGlzRW5lbXksIGlzUG93ZXJ1cCB9IGZyb20gJy4vZ3VhcmRzJztcbmltcG9ydCB7IGFzc2V0c0hvbGRlciB9IGZyb20gJy4uL3V0aWxzJztcbmV4cG9ydCBjbGFzcyBCdWxsZXQgZXh0ZW5kcyBNb3ZhYmxlIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3NpdGlvbiwgZGlyZWN0aW9uLCBzaG9vdGVyKSB7XG4gICAgICAgIHN1cGVyKHBvc2l0aW9uLCBPYmplY3QuYXNzaWduKHt9LCBCVUxMRVRfU0laRSksIGRpcmVjdGlvbik7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgICAgICB0aGlzLnNob290ZXIgPSBzaG9vdGVyO1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlciA9IG5ldyBTb3VuZE1hbmFnZXIoWydoaXQnLCAnaGl0ZG1nJ10pO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMubW92ZShCVUxMRVRfVkVMT0NJVFkpO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHRoaXMuYW5pbWF0ZU1vdmVtZW50KGFzc2V0c0hvbGRlci5zcHJpdGVzLmJ1bGxldFt0aGlzLmRpcmVjdGlvbl0pO1xuICAgIH1cbiAgICByZXNvbHZlRWRnZUNvbGxpc2lvbigpIHtcbiAgICAgICAgZW50aXR5TWFuYWdlci50b1JlbW92ZSh0aGlzLmlkKTtcbiAgICB9XG4gICAgcmVzb2x2ZVRpbGVDb2xsaXNpb24odGlsZXMsIHRpbGVNYXApIHtcbiAgICAgICAgaWYgKHRpbGVzLmV2ZXJ5KHRpbGUgPT4gYnVsbGV0VGhyb3VnaC5pbmNsdWRlcyh0aWxlLnR5cGUpKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZW50aXR5TWFuYWdlci50b1JlbW92ZSh0aGlzLmlkKTtcbiAgICAgICAgY29uc3QgY2FuRGVzdHJveVN0ZWVsID0gaXNQbGF5ZXIodGhpcy5zaG9vdGVyKSAmJiB0aGlzLnNob290ZXIucG93ZXIgPT09IFBsYXllclBvd2VyLlNlY29uZDtcbiAgICAgICAgY29uc3QgaGFzU3RlZWwgPSB0aWxlcy5zb21lKHRpbGUgPT4gdGlsZS50eXBlID09PSBUaWxlcy5TdGVlbCk7XG4gICAgICAgIGlmIChoYXNTdGVlbCkge1xuICAgICAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheSgnaGl0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5KCdoaXRkbWcnKTtcbiAgICAgICAgfVxuICAgICAgICB0aWxlcy5mb3JFYWNoKHRpbGUgPT4ge1xuICAgICAgICAgICAgaWYgKGJ1bGxldFRocm91Z2guaW5jbHVkZXModGlsZS50eXBlKSB8fCAodGlsZS50eXBlID09PSBUaWxlcy5TdGVlbCAmJiAhY2FuRGVzdHJveVN0ZWVsKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0aWxlTWFwLmRlc3Ryb3kodGlsZS5wb3NpdGlvbik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXNvbHZlRW50aXR5Q29sbGlzaW9uKG90aGVyKSB7XG4gICAgICAgIGlmIChpc1Bvd2VydXAob3RoZXIpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoaXNQbGF5ZXIodGhpcy5zaG9vdGVyKSAmJiBpc0VuZW15KG90aGVyKSAmJiBvdGhlci50eXBlID49IDEpIHtcbiAgICAgICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXkoJ2hpdCcpO1xuICAgICAgICB9XG4gICAgICAgIGVudGl0eU1hbmFnZXIudG9SZW1vdmUodGhpcy5pZCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QnVsbGV0LmpzLm1hcCIsImltcG9ydCB7IFRhbmsgfSBmcm9tICcuL1RhbmsnO1xuaW1wb3J0IHsgYXNzZXRzSG9sZGVyLCBhbmltYXRlVmFyaWFibGVTcHJpdGVzLCBjaGVja0VudGl0eUNvbGxpc2lvbiB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7IERpcmVjdGlvbiwgUG93ZXJ1cFR5cGVzLCBUYW5rVHlwZXMgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBUQU5LX1NJWkUsIFNQQVdOX0ZSQU1FUywgREVBVEhfRlJBTUVTLCBGUkVFWkVfRlJBTUVTLCBFTkVNWV9TVEFUUyB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBTb3VuZE1hbmFnZXIsIFRpbWVNYW5hZ2VyLCBlbnRpdHlNYW5hZ2VyIH0gZnJvbSAnLi4vbWFuYWdlcnMnO1xuaW1wb3J0IHsgcG93ZXJ1cEV2ZW50cyB9IGZyb20gJy4vUG93ZXJ1cCc7XG5pbXBvcnQgeyBpc1BsYXllciwgaXNFbmVteSwgaXNCdWxsZXQsIGlzUG93ZXJ1cCB9IGZyb20gJy4vZ3VhcmRzJztcbmZ1bmN0aW9uIHBvd2VydXBPYnNlcnZlcihwb3dlcnVwVHlwZSkge1xuICAgIGlmIChwb3dlcnVwVHlwZSA9PT0gUG93ZXJ1cFR5cGVzLlN0b3B3YXRjaCkge1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdmcmVlemUnLCBGUkVFWkVfRlJBTUVTKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocG93ZXJ1cFR5cGUgPT09IFBvd2VydXBUeXBlcy5HcmVuYWRlKSB7XG4gICAgICAgIGlmICghdGhpcy50aW1lTWFuYWdlci5zb21lKFsnZGVhdGgnLCAnc3Bhd24nXSkpXG4gICAgICAgICAgICB0aGlzLmRpZSgpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBFbmVteSBleHRlbmRzIFRhbmsge1xuICAgIGNvbnN0cnVjdG9yKHR5cGUsIHBvc2l0aW9uKSB7XG4gICAgICAgIHN1cGVyKHBvc2l0aW9uLCBPYmplY3QuYXNzaWduKHt9LCBUQU5LX1NJWkUpLCBEaXJlY3Rpb24uQm90dG9tKTtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5saXZlcyA9IEVORU1ZX1NUQVRTW3R5cGVdLmxpdmVzO1xuICAgICAgICB0aGlzLnByZXZUaWxlID0gT2JqZWN0LmFzc2lnbih7fSwgcG9zaXRpb24pO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyID0gbmV3IFRpbWVNYW5hZ2VyKCk7XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyID0gbmV3IFNvdW5kTWFuYWdlcihbJ2V4cGxvZGUnXSk7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ3NwYXduJywgU1BBV05fRlJBTUVTKTtcbiAgICAgICAgcG93ZXJ1cEV2ZW50cy5zdWJzY3JpYmUodGhpcy5pZCwgcG93ZXJ1cE9ic2VydmVyLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGNvbnN0IHNwYXduID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignc3Bhd24nKTtcbiAgICAgICAgY29uc3QgZGVhdGggPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdkZWF0aCcpO1xuICAgICAgICBjb25zdCBmcmVlemUgPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdmcmVlemUnKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5kZWNyZW1lbnRUaW1lcnMoKTtcbiAgICAgICAgaWYgKHNwYXduKSB7XG4gICAgICAgICAgICBjb25zdCBpc0ludGVyc2VjdGluZyA9IHRoaXMuaXNTcGF3blNwb3RDbGVhcigpO1xuICAgICAgICAgICAgaWYgKGlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignc3Bhd24nLCBTUEFXTl9GUkFNRVMpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZWF0aCB8fCBmcmVlemUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWlNb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLnNob3QoRU5FTVlfU1RBVFNbdGhpcy50eXBlXS5zaG90Q0QpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qgc3Bhd24gPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdzcGF3bicpO1xuICAgICAgICBjb25zdCBkZWF0aCA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ2RlYXRoJyk7XG4gICAgICAgIGlmIChzcGF3bikge1xuICAgICAgICAgICAgcmV0dXJuIGFuaW1hdGVWYXJpYWJsZVNwcml0ZXModGhpcy5wb3NpdGlvbiwgYXNzZXRzSG9sZGVyLnZhcmlhYmxlU3ByaXRlcy50YW5rU3Bhd24sIFNQQVdOX0ZSQU1FUywgc3Bhd24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlYXRoKSB7XG4gICAgICAgICAgICByZXR1cm4gYW5pbWF0ZVZhcmlhYmxlU3ByaXRlcyh0aGlzLnBvc2l0aW9uLCBhc3NldHNIb2xkZXIudmFyaWFibGVTcHJpdGVzLnRhbmtEZXN0cnVjdGlvbiwgREVBVEhfRlJBTUVTLCBkZWF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gVGFua1R5cGVzLkFybW9yZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZU1vdmVtZW50KGFzc2V0c0hvbGRlci5zcHJpdGVzLmVuZW15W3RoaXMudHlwZV1bdGhpcy5saXZlc11bdGhpcy5kaXJlY3Rpb25dKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZU1vdmVtZW50KGFzc2V0c0hvbGRlci5zcHJpdGVzLmVuZW15W3RoaXMudHlwZV1bdGhpcy5kaXJlY3Rpb25dKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhaU1vdmUoKSB7XG4gICAgICAgIGNvbnN0IHsgdmVsb2NpdHkgfSA9IEVORU1ZX1NUQVRTW3RoaXMudHlwZV07XG4gICAgICAgIGlmIChNYXRoLmFicyhNYXRoLmZsb29yKHRoaXMucHJldlRpbGUueCAtIHRoaXMucG9zaXRpb24ueCkpID4gMTIwIHx8XG4gICAgICAgICAgICBNYXRoLmFicyhNYXRoLmZsb29yKHRoaXMucHJldlRpbGUueSAtIHRoaXMucG9zaXRpb24ueSkpID4gMTIwKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZUaWxlID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wb3NpdGlvbik7XG4gICAgICAgICAgICB0aGlzLnNldFJhbmRvbURpcmVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5tb3ZlKHZlbG9jaXR5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubW92ZSh2ZWxvY2l0eSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzb2x2ZUVkZ2VDb2xsaXNpb24oKSB7XG4gICAgICAgIHRoaXMuZ29CYWNrKCk7XG4gICAgICAgIHRoaXMuc2V0UmFuZG9tRGlyZWN0aW9uKCk7XG4gICAgICAgIC8vIHRoaXMuc2V0T3Bvc2l0ZURpcmVjdGlvbigpO1xuICAgIH1cbiAgICByZXNvbHZlVGlsZUNvbGxpc2lvbih0aWxlcykge1xuICAgICAgICBpZiAodGlsZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdQb3MgPSB0aGlzLmZvcmdpdmVDb2xsaXNpb24odGlsZXNbMF0pO1xuICAgICAgICAgICAgaWYgKG5ld1Bvcykge1xuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBuZXdQb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSYW5kb21EaXJlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdvQmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRSYW5kb21EaXJlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMuZ29CYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzb2x2ZUVudGl0eUNvbGxpc2lvbihvdGhlcikge1xuICAgICAgICBpZiAoaXNQb3dlcnVwKG90aGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzQnVsbGV0KG90aGVyKSAmJiBpc1BsYXllcihvdGhlci5zaG9vdGVyKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMubGl2ZXMgPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5saXZlcyAtPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzRW5lbXkob3RoZXIpKSB7XG4gICAgICAgICAgICB0aGlzLmdvQmFjaygpO1xuICAgICAgICAgICAgdGhpcy5zZXRPcG9zaXRlRGlyZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNQbGF5ZXIob3RoZXIpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignc2hvdENEJykgPiAxMClcbiAgICAgICAgICAgICAgICB0aGlzLnNldE9wb3NpdGVEaXJlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMuZ29CYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0UmFuZG9tRGlyZWN0aW9uKCkge1xuICAgICAgICBjb25zdCBpdGVtcyA9IFtEaXJlY3Rpb24uVG9wLCBEaXJlY3Rpb24uUmlnaHQsIERpcmVjdGlvbi5Cb3R0b20sIERpcmVjdGlvbi5MZWZ0XS5maWx0ZXIoZGlyZWN0aW9uID0+IGRpcmVjdGlvbiAhPT0gdGhpcy5kaXJlY3Rpb24pO1xuICAgICAgICBjb25zdCBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGl0ZW1zLmxlbmd0aCk7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gaXRlbXNbaW5kZXhdO1xuICAgIH1cbiAgICBzZXRPcG9zaXRlRGlyZWN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Ub3ApIHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gRGlyZWN0aW9uLkJvdHRvbTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkJvdHRvbSkge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBEaXJlY3Rpb24uVG9wO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uUmlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gRGlyZWN0aW9uLkxlZnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IERpcmVjdGlvbi5SaWdodDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc1NwYXduU3BvdENsZWFyKCkge1xuICAgICAgICByZXR1cm4gZW50aXR5TWFuYWdlci5lbnRpdGllc1xuICAgICAgICAgICAgLmZpbHRlcihlbnRpdHkgPT4gZW50aXR5LmlkICE9PSB0aGlzLmlkICYmICFpc0J1bGxldChlbnRpdHkpKVxuICAgICAgICAgICAgLmZpbHRlcihlbnRpdHkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzRW5lbXkoZW50aXR5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhZW50aXR5LnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdzcGF3bicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuc29tZShlbnRpdHkgPT4gY2hlY2tFbnRpdHlDb2xsaXNpb24oZW50aXR5LmdldEJvdW5kaW5nQm94KCksIHRoaXMuZ2V0Qm91bmRpbmdCb3goKSkpO1xuICAgIH1cbiAgICBkZWNvbnN0cnVjdCgpIHtcbiAgICAgICAgcG93ZXJ1cEV2ZW50cy51bnN1YnNjcmliZSh0aGlzLmlkKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FbmVteS5qcy5tYXAiLCJpbXBvcnQgeyBFbnRpdHkgfSBmcm9tICcuL0VudGl0eSc7XG5pbXBvcnQgeyBhc3NldHNIb2xkZXIgfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgeyBGTEFHX1NJWkUsIEZMQUdfUE9TSVRJT04gfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgaXNCdWxsZXQgfSBmcm9tICcuL2d1YXJkcyc7XG5leHBvcnQgY2xhc3MgRmxhZyBleHRlbmRzIEVudGl0eSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKEZMQUdfUE9TSVRJT04sIEZMQUdfU0laRSk7XG4gICAgICAgIHRoaXMuaXNEZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgYXNzZXRzSG9sZGVyLnNwcml0ZXMuZmxhZ0RlYXRoKHRoaXMucG9zaXRpb24sIHRoaXMuc2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NldHNIb2xkZXIuc3ByaXRlcy5mbGFnKHRoaXMucG9zaXRpb24sIHRoaXMuc2l6ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzb2x2ZUVudGl0eUNvbGxpc2lvbihvdGhlcikge1xuICAgICAgICBpZiAoaXNCdWxsZXQob3RoZXIpKSB7XG4gICAgICAgICAgICB0aGlzLmlzRGVzdHJveWVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZsYWcuanMubWFwIiwiaW1wb3J0ICogYXMgZW50aXRpZXMgZnJvbSAnLi4vZW50aXRpZXMnO1xuaW1wb3J0IHsgY2hlY2tFbnRpdHlDb2xsaXNpb24gfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgeyByaWdpZCB9IGZyb20gJy4uL1RpbGVNYXAnO1xuaW1wb3J0IHsgaXNQbGF5ZXIsIGlzRW5lbXksIGlzVGFuaywgaXNGbGFnLCBpc1Bvd2VydXAgfSBmcm9tICcuLi9lbnRpdGllcy9ndWFyZHMnO1xuaW1wb3J0IHsgVElMRV9TSURFIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmV4cG9ydCBjbGFzcyBFbnRpdHlNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50b1JlbW92ZSA9IChpZCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b1JlbW92ZVF1ZXVlLmFkZChpZCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVtb3ZlRnJvbVF1ZXVlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b1JlbW92ZVF1ZXVlLmZvckVhY2goZW50aXR5SWQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVudGl0eSA9IHRoaXMucG9vbFtlbnRpdHlJZF07XG4gICAgICAgICAgICAgICAgY29uc3QgZGVhdGhMZWZ0ID0gdGhpcy5fY2hlY2tEZWF0aChlbnRpdHkpO1xuICAgICAgICAgICAgICAgIGlmICghZGVhdGhMZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnBvb2xbZW50aXR5SWRdO1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkuZGVjb25zdHJ1Y3QoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b1JlbW92ZVF1ZXVlLmRlbGV0ZShlbnRpdHlJZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucG9vbCA9IHt9O1xuICAgICAgICB0aGlzLnRvUmVtb3ZlUXVldWUgPSBuZXcgU2V0KCk7XG4gICAgfVxuICAgIHNwYXduRW50aXR5KHR5cGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgZW50aXR5ID0gbmV3IGVudGl0aWVzW3R5cGVdKC4uLmFyZ3MpO1xuICAgICAgICB0aGlzLnBvb2xbZW50aXR5LmlkXSA9IGVudGl0eTtcbiAgICB9XG4gICAgZ2V0RW5lbWllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW50aXRpZXMuZmlsdGVyKGlzRW5lbXkpO1xuICAgIH1cbiAgICBnZXRQbGF5ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVudGl0aWVzLmZpbmQoaXNQbGF5ZXIpO1xuICAgIH1cbiAgICBnZXRGbGFnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbnRpdGllcy5maW5kKGlzRmxhZyk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5lbnRpdGllcy5mb3JFYWNoKGVudGl0eSA9PiBlbnRpdHkucmVuZGVyKCkpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMuZW50aXRpZXMuZm9yRWFjaChlbnRpdHkgPT4gZW50aXR5LnVwZGF0ZSgpKTtcbiAgICB9XG4gICAgY2hlY2tDb2xsaXNpb25zKHRpbGVNYXApIHtcbiAgICAgICAgY29uc3Qgc2VlbiA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy5lbnRpdGllcy5mb3JFYWNoKGVudGl0eSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNQb3dlcnVwKGVudGl0eSkgfHwgaXNGbGFnKGVudGl0eSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5jaGVja1RpbGVDb2xsaXNpb24oZW50aXR5LCB0aWxlTWFwKTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tFbnRpdGllc0NvbGxpc2lvbihlbnRpdHksIHNlZW4pO1xuICAgICAgICAgICAgc2Vlbi5hZGQoZW50aXR5LmlkKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNoZWNrVGlsZUNvbGxpc2lvbihlbnRpdHksIHRpbGVNYXApIHtcbiAgICAgICAgaWYgKGVudGl0eS5pc091dE9mU2NyZWVuKCkpIHtcbiAgICAgICAgICAgIGVudGl0eS5yZXNvbHZlRWRnZUNvbGxpc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgW2ZpcnN0LCBzZWNvbmRdID0gZW50aXR5LmdldEZyb250Q29sbGlzaW9uUG9pbnRzKCk7XG4gICAgICAgICAgICBjb25zdCB0aWxlcyA9IHRpbGVNYXAubG9va3VwUmFuZ2UoZmlyc3QsIHNlY29uZCk7XG4gICAgICAgICAgICBjb25zdCBjb2xsaWRhYmxlID0gdGlsZXNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHRpbGUgPT4gcmlnaWQuaW5jbHVkZXModGlsZS50eXBlKSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHRpbGUgPT4gY2hlY2tFbnRpdHlDb2xsaXNpb24oZW50aXR5LmdldEJvdW5kaW5nQm94KCksIHtcbiAgICAgICAgICAgICAgICB4MTogdGlsZS5wb3NpdGlvbi54LFxuICAgICAgICAgICAgICAgIHgyOiB0aWxlLnBvc2l0aW9uLnggKyBUSUxFX1NJREUsXG4gICAgICAgICAgICAgICAgeTE6IHRpbGUucG9zaXRpb24ueSxcbiAgICAgICAgICAgICAgICB5MjogdGlsZS5wb3NpdGlvbi55ICsgVElMRV9TSURFLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaWYgKGNvbGxpZGFibGUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZW50aXR5LnJlc29sdmVUaWxlQ29sbGlzaW9uKGNvbGxpZGFibGUsIHRpbGVNYXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNoZWNrRW50aXRpZXNDb2xsaXNpb24oZW50aXR5LCBzZWVuKSB7XG4gICAgICAgIHRoaXMuZW50aXRpZXMuZm9yRWFjaChvdGhlciA9PiB7XG4gICAgICAgICAgICBpZiAoZW50aXR5LmlkID09PSBvdGhlci5pZCB8fCBzZWVuLmhhcyhvdGhlci5pZCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzSW50ZXJhY3RpdmUob3RoZXIpICYmIGNoZWNrRW50aXR5Q29sbGlzaW9uKGVudGl0eS5nZXRCb3VuZGluZ0JveCgpLCBvdGhlci5nZXRCb3VuZGluZ0JveCgpKSkge1xuICAgICAgICAgICAgICAgIGVudGl0eS5yZXNvbHZlRW50aXR5Q29sbGlzaW9uKG90aGVyKTtcbiAgICAgICAgICAgICAgICBvdGhlci5yZXNvbHZlRW50aXR5Q29sbGlzaW9uKGVudGl0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjbGVhcihjbGVhclBsYXllciA9IHRydWUpIHtcbiAgICAgICAgaWYgKCFjbGVhclBsYXllcikge1xuICAgICAgICAgICAgY29uc3QgcGxheWVyID0gdGhpcy5nZXRQbGF5ZXIoKTtcbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5wb29sKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoZW50aXR5ID0+IGVudGl0eS5pZCAhPT0gcGxheWVyLmlkKVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKGVudGl0eSA9PiBlbnRpdHkuZGVjb25zdHJ1Y3QoKSk7XG4gICAgICAgICAgICB0aGlzLnBvb2wgPSB7IFtwbGF5ZXIuaWRdOiBwbGF5ZXIgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5wb29sKS5mb3JFYWNoKGVudGl0eSA9PiBlbnRpdHkuZGVjb25zdHJ1Y3QoKSk7XG4gICAgICAgICAgICB0aGlzLnBvb2wgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvUmVtb3ZlUXVldWUgPSBuZXcgU2V0KCk7XG4gICAgfVxuICAgIF9pc0ludGVyYWN0aXZlKGVudGl0eSkge1xuICAgICAgICBpZiAoaXNUYW5rKGVudGl0eSkpIHtcbiAgICAgICAgICAgIHJldHVybiAhZW50aXR5LnRpbWVNYW5hZ2VyLnNvbWUoWydzcGF3bicsICdkZWF0aCddKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgX2NoZWNrRGVhdGgoZW50aXR5KSB7XG4gICAgICAgIGlmIChpc1RhbmsoZW50aXR5KSkge1xuICAgICAgICAgICAgcmV0dXJuIGVudGl0eS50aW1lTWFuYWdlci5nZXRUaW1lcignZGVhdGgnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZW50aXRpZXMoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHRoaXMucG9vbCk7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IGVudGl0eU1hbmFnZXIgPSBuZXcgRW50aXR5TWFuYWdlcigpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW50aXR5TWFuYWdlci5qcy5tYXAiLCJpbXBvcnQgeyBQb3dlcnVwVHlwZXMsIExheWVycyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgUE9XRVJVUF9TUEFXTl9DRCwgRU5FTVlfU1BBV05fQ0QsIEVORU1ZX1NQQVdOX1BPU0lUSU9OIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgVGltZU1hbmFnZXIsIFNvdW5kTWFuYWdlciwgZW50aXR5TWFuYWdlciB9IGZyb20gJy4vbWFuYWdlcnMnO1xuaW1wb3J0IHsgcmFuZG9tSW50IH0gZnJvbSAnLi91dGlscyc7XG5leHBvcnQgY2xhc3MgU3RhZ2Uge1xuICAgIGNvbnN0cnVjdG9yKG51bWJlciwgbWFwLCB0YW5rcykge1xuICAgICAgICB0aGlzLm51bWJlciA9IG51bWJlcjtcbiAgICAgICAgdGhpcy5tYXAgPSBtYXA7XG4gICAgICAgIHRoaXMudGFua3MgPSBbLi4udGFua3NdO1xuICAgICAgICB0aGlzLnBvd2VydXBzQXZhaWxhYmxlID0gNTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlciA9IG5ldyBUaW1lTWFuYWdlcigpO1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlciA9IG5ldyBTb3VuZE1hbmFnZXIoWydzdGFydCddKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcigncG93ZXJ1cFNwYXduQ0QnLCBQT1dFUlVQX1NQQVdOX0NEKTtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheSgnc3RhcnQnKTtcbiAgICAgICAgZW50aXR5TWFuYWdlci5zcGF3bkVudGl0eSgnRmxhZycpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuZGVjcmVtZW50VGltZXJzKCk7XG4gICAgICAgIHRoaXMuc3Bhd25FbmVteSgpO1xuICAgICAgICB0aGlzLnNwYXduUG93ZXJ1cCgpO1xuICAgIH1cbiAgICBpc0ZpbmlzaCgpIHtcbiAgICAgICAgY29uc3QgZW5lbWllcyA9IGVudGl0eU1hbmFnZXIuZ2V0RW5lbWllcygpO1xuICAgICAgICByZXR1cm4gIXRoaXMudGFua3MubGVuZ3RoICYmICFlbmVtaWVzLmxlbmd0aDtcbiAgICB9XG4gICAgc3Bhd25FbmVteSgpIHtcbiAgICAgICAgY29uc3QgZW5lbXlTcGF3bkNEID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignZW5lbXlTcGF3bkNEJyk7XG4gICAgICAgIGNvbnN0IGVuZW1pZXMgPSBlbnRpdHlNYW5hZ2VyLmdldEVuZW1pZXMoKTtcbiAgICAgICAgaWYgKCF0aGlzLnRhbmtzLmxlbmd0aCB8fCBlbmVtaWVzLmxlbmd0aCA+IDQgfHwgZW5lbXlTcGF3bkNEKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBpbmRleCA9IHJhbmRvbUludCgyKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignZW5lbXlTcGF3bkNEJywgRU5FTVlfU1BBV05fQ0QpO1xuICAgICAgICBlbnRpdHlNYW5hZ2VyLnNwYXduRW50aXR5KCdFbmVteScsIHRoaXMudGFua3MucG9wKCksIE9iamVjdC5hc3NpZ24oe30sIEVORU1ZX1NQQVdOX1BPU0lUSU9OW2luZGV4XSkpO1xuICAgIH1cbiAgICBzcGF3blBvd2VydXAoKSB7XG4gICAgICAgIGNvbnN0IHBvd2VydXBTcGF3bkNEID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcigncG93ZXJ1cFNwYXduQ0QnKTtcbiAgICAgICAgaWYgKHBvd2VydXBTcGF3bkNEIHx8ICF0aGlzLnBvd2VydXBzQXZhaWxhYmxlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBpbmRleCA9IHJhbmRvbUludChPYmplY3Qua2V5cyhQb3dlcnVwVHlwZXMpLmxlbmd0aCAvIDIpO1xuICAgICAgICBlbnRpdHlNYW5hZ2VyLnNwYXduRW50aXR5KCdQb3dlcnVwJywgUG93ZXJ1cFR5cGVzW1Bvd2VydXBUeXBlc1tpbmRleF1dLCB7IHg6IHJhbmRvbUludCg1MDApLCB5OiByYW5kb21JbnQoNTAwKSB9KTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcigncG93ZXJ1cFNwYXduQ0QnLCBQT1dFUlVQX1NQQVdOX0NEKTtcbiAgICAgICAgdGhpcy5wb3dlcnVwc0F2YWlsYWJsZSAtPSAxO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHRoaXMubWFwLnJlbmRlckxheWVyKExheWVycy51bmRlcik7XG4gICAgICAgIHRoaXMubWFwLnJlbmRlckxheWVyKExheWVycy5tYWluKTtcbiAgICAgICAgZW50aXR5TWFuYWdlci5yZW5kZXIoKTtcbiAgICAgICAgdGhpcy5tYXAucmVuZGVyTGF5ZXIoTGF5ZXJzLm92ZXIpO1xuICAgIH1cbiAgICBnZXQgc2NyZWVuTnVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5udW1iZXIgKyAxO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0YWdlLmpzLm1hcCIsImltcG9ydCB7IG1hcHMsIHRhbmtzIGFzIHRhbmtzQ29uZmlnIH0gZnJvbSAnLi9zdGFnZUNvbmZpZyc7XG5pbXBvcnQgeyBERUxUQV9USU1FLCBTQ1JFRU5fRkFERV9GUkFNRVMgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBUaWxlTWFwIH0gZnJvbSAnLi9UaWxlTWFwJztcbmltcG9ydCB7IFN0YWdlIH0gZnJvbSAnLi9TdGFnZSc7XG5pbXBvcnQgeyBtYWluIGFzIG1haW5TY3JlZW4sIGRhc2hib2FyZCB9IGZyb20gJy4vc2NyZWVucyc7XG5pbXBvcnQgeyBUaW1lTWFuYWdlciwgU291bmRNYW5hZ2VyLCBlbnRpdHlNYW5hZ2VyIH0gZnJvbSAnLi9tYW5hZ2Vycyc7XG5leHBvcnQgY2xhc3MgR2FtZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaXNTdGFydFNjcmVlbiA9IHRydWU7XG4gICAgICAgIHRoaXMuaXNMb3N0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIgPSBuZXcgVGltZU1hbmFnZXIoKTtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIgPSBuZXcgU291bmRNYW5hZ2VyKFsnZ2FtZW92ZXInXSk7XG4gICAgfVxuICAgIGNyZWF0ZUxvb3AoKSB7XG4gICAgICAgIGxldCBhY2N1bXVsYXRlZFRpbWUgPSAwO1xuICAgICAgICBsZXQgbGFzdFRpbWUgPSAwO1xuICAgICAgICBjb25zdCBsb29wID0gdGltZSA9PiB7XG4gICAgICAgICAgICBhY2N1bXVsYXRlZFRpbWUgKz0gKHRpbWUgLSBsYXN0VGltZSkgLyAxMDAwO1xuICAgICAgICAgICAgd2hpbGUgKGFjY3VtdWxhdGVkVGltZSA+IERFTFRBX1RJTUUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkVGltZSAtPSBERUxUQV9USU1FO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgIGxhc3RUaW1lID0gdGltZTtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcbiAgICAgICAgfTtcbiAgICAgICAgbG9vcCgwKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLmRlY3JlbWVudFRpbWVycygpO1xuICAgICAgICBjb25zdCBzcmVlbkZhZGVMZWZ0ID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignc2NyZWVuRmFkZScpO1xuICAgICAgICBpZiAodGhpcy5pc0xvc3QgfHwgdGhpcy5pc1N0YXJ0U2NyZWVuIHx8IHNyZWVuRmFkZUxlZnQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuc3RhZ2UudXBkYXRlKCk7XG4gICAgICAgIGVudGl0eU1hbmFnZXIudXBkYXRlKCk7XG4gICAgICAgIGVudGl0eU1hbmFnZXIuY2hlY2tDb2xsaXNpb25zKHRoaXMuc3RhZ2UubWFwKTtcbiAgICAgICAgZW50aXR5TWFuYWdlci5yZW1vdmVGcm9tUXVldWUoKTtcbiAgICAgICAgY29uc3QgcGxheWVyID0gZW50aXR5TWFuYWdlci5nZXRQbGF5ZXIoKTtcbiAgICAgICAgY29uc3QgZmxhZyA9IGVudGl0eU1hbmFnZXIuZ2V0RmxhZygpO1xuICAgICAgICBpZiAoIXBsYXllciB8fCBmbGFnLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICBpZiAocGxheWVyKVxuICAgICAgICAgICAgICAgIHBsYXllci5zb3VuZE1hbmFnZXIucGF1c2VBbGwoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdhbWVPdmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3RhZ2UuaXNGaW5pc2goKSkge1xuICAgICAgICAgICAgdGhpcy50b05leHRTdGFnZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbWFpblNjcmVlbi5jbGVhclNjcmVlbigpO1xuICAgICAgICBkYXNoYm9hcmQuY2xlYXJTY3JlZW4oKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdGFydFNjcmVlbikge1xuICAgICAgICAgICAgbWFpblNjcmVlbi5yZW5kZXJTdGFydFNjcmVlbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJHYW1lKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyR2FtZSgpIHtcbiAgICAgICAgY29uc3Qgc3JlZW5GYWRlTGVmdCA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ3NjcmVlbkZhZGUnKTtcbiAgICAgICAgdGhpcy5zdGFnZS5yZW5kZXIoKTtcbiAgICAgICAgaWYgKHRoaXMuaXNMb3N0KSB7XG4gICAgICAgICAgICBtYWluU2NyZWVuLnJlbmRlckdhbWVPdmVyKHNyZWVuRmFkZUxlZnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNyZWVuRmFkZUxlZnQpIHtcbiAgICAgICAgICAgIG1haW5TY3JlZW4ucmVuZGVyQ2hhaW5naW5nU3RhZ2Uoc3JlZW5GYWRlTGVmdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSBlbnRpdHlNYW5hZ2VyLmdldFBsYXllcigpO1xuICAgICAgICAgICAgZGFzaGJvYXJkLnJlbmRlcihwbGF5ZXIubGl2ZXMsIHRoaXMuc3RhZ2Uuc2NyZWVuTnVtLCB0aGlzLnN0YWdlLnRhbmtzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnYW1lT3ZlcigpIHtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheSgnZ2FtZW92ZXInKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignc2NyZWVuRmFkZScsIFNDUkVFTl9GQURFX0ZSQU1FUyk7XG4gICAgICAgIHRoaXMuaXNMb3N0ID0gdHJ1ZTtcbiAgICB9XG4gICAgaXNXYWl0aW5nRm9yUmVzdGFydCgpIHtcbiAgICAgICAgY29uc3QgZ2FtZU92ZXJUaW1lID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignc2NyZWVuRmFkZScpO1xuICAgICAgICByZXR1cm4gIWdhbWVPdmVyVGltZSAmJiB0aGlzLmlzTG9zdDtcbiAgICB9XG4gICAgZ2V0TmV4dFN0YWdlTnVtKCkge1xuICAgICAgICBsZXQgbmV3TnVtID0gdGhpcy5zdGFnZS5udW1iZXIgKyAxO1xuICAgICAgICBpZiAobmV3TnVtID4gbWFwcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBuZXdOdW0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdOdW07XG4gICAgfVxuICAgIHRvTmV4dFN0YWdlKCkge1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdzY3JlZW5GYWRlJywgU0NSRUVOX0ZBREVfRlJBTUVTKTtcbiAgICAgICAgZW50aXR5TWFuYWdlci5jbGVhcihmYWxzZSk7XG4gICAgICAgIGNvbnN0IHN0YWdlTnVtID0gdGhpcy5nZXROZXh0U3RhZ2VOdW0oKTtcbiAgICAgICAgY29uc3QgcGxheWVyID0gZW50aXR5TWFuYWdlci5nZXRQbGF5ZXIoKTtcbiAgICAgICAgdGhpcy5zdGFnZSA9IG5ldyBTdGFnZShzdGFnZU51bSwgbmV3IFRpbGVNYXAobWFwc1tzdGFnZU51bV0pLCB0YW5rc0NvbmZpZ1tzdGFnZU51bV0pO1xuICAgICAgICBwbGF5ZXIucmVzcGF3bigpO1xuICAgIH1cbiAgICBwbGF5KCkge1xuICAgICAgICB0aGlzLmlzU3RhcnRTY3JlZW4gPSBmYWxzZTtcbiAgICAgICAgZW50aXR5TWFuYWdlci5zcGF3bkVudGl0eSgnUGxheWVyJyk7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ3NjcmVlbkZhZGUnLCBTQ1JFRU5fRkFERV9GUkFNRVMpO1xuICAgICAgICB0aGlzLnN0YWdlID0gbmV3IFN0YWdlKDAsIG5ldyBUaWxlTWFwKG1hcHNbMF0pLCB0YW5rc0NvbmZpZ1swXSk7XG4gICAgfVxuICAgIHJlc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuaXNMb3N0ID0gZmFsc2U7XG4gICAgICAgIGVudGl0eU1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R2FtZS5qcy5tYXAiLCJpbXBvcnQgc3ByaXRlIGZyb20gJy4uL2Fzc2V0cy9zcHJpdGVzLnBuZyc7XG5pbXBvcnQgZXhwbG9kZSBmcm9tICcuLi9hc3NldHMvYXVkaW8vZXhwbG9kZS53YXYnO1xuaW1wb3J0IGhpdCBmcm9tICcuLi9hc3NldHMvYXVkaW8vaGl0Lndhdic7XG5pbXBvcnQgaGl0ZG1nIGZyb20gJy4uL2Fzc2V0cy9hdWRpby9oaXRkbWcud2F2JztcbmltcG9ydCBuZXV0cmFsIGZyb20gJy4uL2Fzc2V0cy9hdWRpby9uZXV0cmFsLndhdic7XG5pbXBvcnQgcG93ZXJ1cCBmcm9tICcuLi9hc3NldHMvYXVkaW8vcG93ZXJ1cC53YXYnO1xuaW1wb3J0IG1vdmUgZnJvbSAnLi4vYXNzZXRzL2F1ZGlvL21vdmUud2F2JztcbmltcG9ydCBzdGFydCBmcm9tICcuLi9hc3NldHMvYXVkaW8vc3RhcnQud2F2JztcbmltcG9ydCBnYW1lb3ZlciBmcm9tICcuLi9hc3NldHMvYXVkaW8vZ2FtZW92ZXIud2F2JztcbmltcG9ydCB7IGFzc2V0c0hvbGRlciB9IGZyb20gJy4vdXRpbHMvYXNzZXRzSG9sZGVyJztcbmltcG9ydCB7IGtleWJvYXJkIH0gZnJvbSAnLi9rZXlib2FyZCc7XG5pbXBvcnQgeyBHYW1lIH0gZnJvbSAnLi9HYW1lJztcbmFzeW5jIGZ1bmN0aW9uIG1haW4oKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBhc3NldHNIb2xkZXIubG9hZFNwcml0ZShzcHJpdGUpLFxuICAgICAgICBhc3NldHNIb2xkZXIubG9hZEF1ZGlvKHsgZXhwbG9kZSwgaGl0LCBoaXRkbWcsIG5ldXRyYWwsIHBvd2VydXAsIG1vdmUsIHN0YXJ0LCBnYW1lb3ZlciB9KSxcbiAgICBdKTtcbiAgICBjb25zdCBnYW1lID0gbmV3IEdhbWUoKTtcbiAgICBrZXlib2FyZC5saXN0ZW5Ub0V2ZW50cyhnYW1lKTtcbiAgICByZXR1cm4gZ2FtZS5jcmVhdGVMb29wKCk7XG59XG5tYWluKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwic291cmNlUm9vdCI6IiJ9