!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=9)}([function(e,t,i){e.exports=i.p+"ab65c472c6b592afe8757bb8be8c6267.png"},function(e,t,i){e.exports=i.p+"5c078847978a138d64371531f48bbdbd.wav"},function(e,t,i){e.exports=i.p+"84c22dc339b5f57e4b15287e0125a9e7.wav"},function(e,t,i){e.exports=i.p+"d4d17f1f4a0eee511856bf90569911c0.wav"},function(e,t,i){e.exports=i.p+"17f99c4e1534406164b4d67012374629.wav"},function(e,t,i){e.exports=i.p+"f912610ac78e8270b6341ec4e6d08d83.wav"},function(e,t,i){e.exports=i.p+"54af95b7b45424485b6ebf0361d019a3.wav"},function(e,t,i){e.exports=i.p+"aa8c51850c09e89bb9a47fb31ee31a38.wav"},function(e,t,i){e.exports=i.p+"9af88a6ac9cfbc392a941b4ed520d5f8.wav"},function(e,t,i){"use strict";i.r(t);var s={};i.r(s),i.d(s,"Player",function(){return De}),i.d(s,"Bullet",function(){return Oe}),i.d(s,"Enemy",function(){return Pe}),i.d(s,"Flag",function(){return Le}),i.d(s,"PowerupEvents",function(){return Ee}),i.d(s,"powerupEvents",function(){return Ce}),i.d(s,"Powerup",function(){return Re}),i.d(s,"Tank",function(){return we}),i.d(s,"Movable",function(){return xe});var n=i(0),r=i.n(n),o=i(1),a=i.n(o),h=i(2),c=i.n(h),l=i(3),p=i.n(l),u=i(4),d=i.n(u),m=i(5),g=i.n(m),y=i(6),f=i.n(y),v=i(7),x=i.n(v),w=i(8),b=i.n(w);function M(e,t){return e.x1<t.x2&&e.x2>t.x1&&e.y1<t.y2&&e.y2>t.y1}const T=e=>Math.floor(Math.random()*e);function S(e,t,i){const s=t/e;return Math.floor(i/s)}function k(e,t,i,s){const n=Math.min(S(t.length,i,s),t.length-1),{sprite:r,size:o}=t[n];return r(e,o)}var B,E,C,R,D,O,P;!function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom",e[e.Right=2]="Right",e[e.Left=3]="Left"}(B||(B={})),function(e){e[e.Default=0]="Default",e[e.Fast=1]="Fast",e[e.Armored=2]="Armored",e[e.Armored2=3]="Armored2",e[e.Armored3=4]="Armored3"}(E||(E={})),function(e){e[e.Helmet=0]="Helmet",e[e.Star=1]="Star",e[e.Stopwatch=2]="Stopwatch",e[e.Grenade=3]="Grenade",e[e.Tank=4]="Tank"}(C||(C={})),function(e){e[e.Default=0]="Default",e[e.First=1]="First",e[e.Second=2]="Second"}(R||(R={})),function(e){e[e.None=0]="None",e[e.Brick1=1]="Brick1",e[e.Brick2=2]="Brick2",e[e.Brick3=3]="Brick3",e[e.Brick4=4]="Brick4",e[e.Steel=5]="Steel",e[e.Ice=6]="Ice",e[e.Grass=7]="Grass",e[e.Water=8]="Water"}(D||(D={})),function(e){e[e.under=0]="under",e[e.main=1]="main",e[e.over=2]="over"}(O||(O={})),function(e){e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.Space="Space"}(P||(P={}));const L=1/60,A={x:40,y:40},j={x:40,y:40},F={x:280,y:560},z={x:210,y:560},I={x:10,y:10},N=300,G={x:40,y:40},_={[R.Default]:{velocity:100,shotCD:50},[R.First]:{velocity:120,shotCD:40},[R.Second]:{velocity:150,shotCD:30}},W={[E.Default]:{velocity:100,shotCD:70,lives:1},[E.Fast]:{velocity:200,shotCD:60,lives:1},[E.Armored]:{velocity:120,shotCD:70,lives:3}},Q=35,q=35,H=200,U=200,K=600,$=200,J=400,V=300,X=[{x:0,y:0},{x:560,y:0}],Y=20,Z=document.getElementById("root"),ee=Z.getContext("2d");ee.font="30px Arial",ee.textAlign="center";const te={canvas:Z,context:ee,clearScreen(){ee.clearRect(0,0,Z.width,Z.height),ee.beginPath()},renderChaingingStage(e){const t=S(V,V,e);ee.fillRect(0,0,600,t),ee.fillRect(0,600-t,600,t)},renderGameOver(e=0){const t=S(V,V,e);ee.fillRect(0,0,600,300-t),ee.fillRect(0,300+t,600,300-t),e||he.sprites.gameOver({x:275,y:275},{x:50,y:50})},renderStartScreen(){he.sprites.logo({x:100,y:200},{x:400,y:200}),ee.strokeText("Press any key",300,500)},showPreloader(e){this.clearScreen(),ee.strokeText(`Loading...${e}`,300,300)}},ie=document.getElementById("dashboard"),se=ie.getContext("2d"),ne={canvas:ie,context:se,render(e,t,i){const{numberIcons:s,flagIcon:n,playerIcon:r,tankIcon:o}=he.sprites;((e,t)=>{if(!e.length)return;let i=70,s=0;e.forEach((e,n)=>{t(n%2==0?{x:695,y:i}:{x:670,y:i},{x:15,y:15}),2===s?(i+=20,s=0):s+=1})})(i,o),n({x:670,y:450},{x:50,y:40}),r({x:670,y:380},{x:20,y:20}),s[t]({x:690,y:485},{x:20,y:20}),s[e]({x:700,y:380},{x:20,y:20})},clearScreen(){se.clearRect(0,0,ie.width,ie.height),se.beginPath()}},re=(e,t)=>(i,s,n,r)=>(o,a)=>{t.drawImage(e,i,s,n,r,o.x,o.y,a.x,a.y)},oe=e=>{const t=re(e,te.context),i=re(e,ne.context);return{player:{[R.Default]:{[B.Top]:[t(0,0,16,15),t(16,0,16,15)],[B.Bottom]:[t(64,0,16,15),t(80,0,16,15)],[B.Right]:[t(96,0,16,15),t(112,0,16,15)],[B.Left]:[t(32,0,16,15),t(48,0,16,15)]},[R.First]:{[B.Top]:[t(0,32.3,16,15),t(15.7,32.5,16,15)],[B.Bottom]:[t(64,32.3,16,15),t(80,32.5,16,15)],[B.Right]:[t(96,32.3,16,15),t(112.3,32,16,15)],[B.Left]:[t(31.7,32,16,15),t(48,32,16,15)]},[R.Second]:{[B.Top]:[t(0,48,16,15),t(15.7,48,16,15)],[B.Bottom]:[t(64,48,16,15),t(80,48,16,15)],[B.Right]:[t(96,48,16,15),t(112.3,48,16,15)],[B.Left]:[t(31.7,48,16,15),t(48,48,16,15)]}},enemy:{[E.Default]:{[B.Top]:[t(128,0,16,15),t(144,0,16,15)],[B.Bottom]:[t(192,0,16,15),t(208,0,16,15)],[B.Right]:[t(223.7,0,16,15),t(239.7,0,16,15)],[B.Left]:[t(160,0,16,15),t(176,0,16,15)]},[E.Fast]:{[B.Top]:[t(128,80,16,15),t(144,80,16,15)],[B.Bottom]:[t(192,80,16,15),t(208,80,16,15)],[B.Right]:[t(224,80,16,15),t(240,80,16,15)],[B.Left]:[t(160,80,16,15),t(176,80,16,15)]},[E.Armored]:{1:{[B.Top]:[t(128.5,111.75,14.75,16),t(144.25,111.75,14.75,16)],[B.Bottom]:[t(191.75,111.75,15.25,16),t(207.5,111.75,15.25,16)],[B.Right]:[t(222.75,111.75,16,16),t(239,111.75,14.75,16)],[B.Left]:[t(159,111.75,16,16),t(174.75,111.75,16,16)]},2:{[B.Top]:[t(0,240,14.75,16),t(16,240,14.75,16)],[B.Bottom]:[t(64,240,15.25,16),t(80,240,15.25,16)],[B.Right]:[t(96,240,16,16),t(112,240,14.75,16)],[B.Left]:[t(32,240,16,16),t(48,240,16,16)]},3:{[B.Top]:[t(128,240,14.75,16),t(144,240,14.75,16)],[B.Bottom]:[t(192,240,15.25,16),t(208,240,15.25,16)],[B.Right]:[t(224,240,16,16),t(240,240,14.75,16)],[B.Left]:[t(160,240,16,16),t(176,240,16,16)]}}},bullet:{[B.Top]:[t(322.25,101.5,5,5.7)],[B.Bottom]:[t(338.5,101.5,5,5.7)],[B.Right]:[t(345.75,101.5,5,5.7)],[B.Left]:[t(329.5,101.5,5,5.7)]},flag:t(304.5,33,16,15.25),flagDeath:t(320,33,16,15.25),tankIcon:i(320.25,192.75,8.5,7.75),flagIcon:i(375.5,184,17,15),playerIcon:i(376.5,144.5,8,8.5),numberIcons:[i(328.5,184,8,7),i(336.5,184,8,7),i(344.5,184,8,7),i(352.5,184,8,7),i(360.5,184,8,7),i(328.5,192,8,7),i(336.5,192,8,7),i(344.5,192,8,7),i(352.5,192,8,7),i(360.5,192,8,7)],logo:t(0,260,375,137),tiles:{[D.Brick1]:t(256,0,8,7),[D.Brick2]:t(264,0,8,7),[D.Brick3]:t(256,8,8,7),[D.Brick4]:t(264,8,8,7),[D.Steel]:t(256,16,8,7),[D.Ice]:t(288,32,8,7),[D.Grass]:t(272,32,8,7),[D.Water]:t(256,40,8,7)},gameOver:t(288.5,184,31.2,16),powerup:{[C.Helmet]:t(255.5,112,16,14),[C.Stopwatch]:t(271.5,112,16,14),[C.Star]:t(303.5,112,16,14),[C.Grenade]:t(319.5,112,16,14),[C.Tank]:t(335.5,112,16,14)},invincible:[t(256,144,15.7,16),t(272.2,144,15.7,16)]}},ae=e=>{const t=re(e,te.context);return{tankSpawn:[{sprite:t(303,97,15,14),size:{x:35,y:35}},{sprite:t(303,97,15,14),size:{x:35,y:35}},{sprite:t(288,97,15,14),size:{x:35,y:35}},{sprite:t(273,97,15,14),size:{x:30,y:30}},{sprite:t(257,97,15,14),size:{x:30,y:30}}],tankDestruction:[{sprite:t(336,128.75,32,32),size:{x:60,y:60}},{sprite:t(304.5,128.75,30.5,31.25),size:{x:60,y:60}},{sprite:t(288.25,128.75,16,15.5),size:{x:40,y:40}},{sprite:t(272.25,128.75,15.75,14.25),size:{x:37,y:37}},{sprite:t(258,128.75,13.75,13.25),size:{x:35,y:35}}]}};const he=new class{constructor(){this.prelaoderState={persentage:0,isRunning:!0}}runPreloader(){if(this.prelaoderState.isRunning)return te.showPreloader(this.prelaoderState.persentage),requestAnimationFrame(this.runPreloader.bind(this))}stopPreloader(){this.prelaoderState.isRunning=!1}loadSprite(e){return new Promise((t,i)=>{const s=new Image;s.src=e,s.addEventListener("load",()=>{this.image=s,this.sprites=oe(s),this.variableSprites=ae(s),t()})})}loadAudio(e){this.audio={};const t=Object.keys(e),i=Math.floor(100/t.length),s=t.map(t=>new Promise((s,n)=>{const r=new Audio;r.src=e[t],r.addEventListener("canplaythrough",()=>{this.audio[t]=r,this.prelaoderState.persentage+=i,s()})}));return Promise.all(s)}};const ce=new class{constructor(){this.queue=new Set}handleEvent(e,t){const{code:i,type:s}=e;return t.isWaitingForRestart()?t.restart():t.isStartScreen?t.play():void(P[i]&&("keydown"===s?this.queue.add(P[i]):this.queue.delete(P[i])))}getKey(){return Array.from(this.queue).pop()}listenToEvents(e){["keydown","keyup"].forEach(t=>{window.addEventListener(t,t=>{this.handleEvent(t,e)})})}},le=[[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,5,5,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,5,5,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,0,0,0,0,0,0,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,3,4,0,0,3,4,0,0,0,0,0,0,0,0,0,0,0,0],[1,2,0,0,1,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,1,2,0,0,1,2],[5,5,0,0,3,4,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,3,4,0,0,5,5],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,1,2,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,3,4,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,0,0,0,0,0,0,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,1,2,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,1,2,0,0,0],[0,0,0,3,4,0,0,3,4,0,0,0,0,1,2,1,2,0,0,0,0,3,4,0,0,3,4,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,1,2,5,5,1,2,1,2,5,5,1,2,5,5,1,2,1,2,5,5,1,2,0,0,0,0],[0,0,0,0,3,4,5,5,3,4,3,4,5,5,3,4,5,5,3,4,3,4,5,5,3,4,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,5,5,0,0,1,2,0,0,5,5,1,2,5,5,0,0,1,2,0,0,1,2,0,0,0,0],[0,0,0,0,5,5,0,0,3,4,0,0,5,5,3,4,5,5,0,0,3,4,0,0,3,4,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,2,0,0,7,7,7,7,7,7,7,7,7,7,7,7,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,7,7,0,7,0,7,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,1,2,0,0,7,0,7,0,7,0,7,0,7,0,7,0,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,7,7,0,7,0,7,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,1,2,0,0,7,0,7,0,7,0,7,0,7,0,7,0,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,7,7,0,7,0,7,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,0,0,0,0,5,0,6,6,6,6,6,0,7,0,7,0,7,7,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,5,7,6,6,6,6,6,7,0,7,0,7,0,7,0,0,0,0,0,0,0,0],[0,0,0,0,1,2,0,0,5,0,6,6,6,6,7,0,7,0,7,0,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,5,7,6,6,6,6,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,1,2,0,0,7,0,6,6,7,0,7,0,7,0,7,0,7,7,0,0,1,2,0,0,0,0],[0,0,0,0,3,4,0,0,7,7,6,6,0,7,0,7,0,7,0,7,0,7,0,0,3,4,0,0,0,0],[0,0,0,0,0,0,0,0,7,0,7,0,7,0,7,0,7,0,7,0,7,7,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,7,7,7,7,7,7,7,7,7,7,7,7,7,7,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,5,5,1,2,5,5,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,5,5,3,4,5,5,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0]]],pe=[[2,2,0,0,1,2,1,0,0,0],[2,2,0,0,1,2,1,0,0,0]],ue=[D.Brick1,D.Brick2,D.Brick3,D.Brick4,D.Steel,D.Water],de=[D.Grass,D.Water,D.None],me={[O.under]:[D.Ice,D.Water],[O.main]:[D.Brick1,D.Brick2,D.Brick3,D.Brick4,D.Steel],[O.over]:[D.Grass]};class ge{constructor(e){this.tiles=e.map(e=>[...e])}destroy(e){const t=Math.max(0,Math.floor(e.x/Y)),i=Math.max(0,Math.floor(e.y/Y));this.tiles[i][t]=D.None}lookup(e){const t=Math.min(Math.max(0,Math.floor(e.x/Y)),29),i=Math.min(Math.max(0,Math.floor(e.y/Y)),29);return{type:this.tiles[i][t],position:{x:t*Y,y:i*Y}}}lookupRange(e,t){let i=[];const s=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return s>0&&s>Y?i.push({x:e.x+Y,y:e.y}):n>0&&n>Y&&i.push({x:e.x,y:e.y+Y}),[e,...i,t].map(e=>this.lookup(e))}renderLayer(e){this.tiles.forEach((t,i)=>{t.forEach((t,s)=>{me[e].includes(t)&&he.sprites.tiles[t]({x:s*Y,y:i*Y},{x:Y,y:Y})})})}}class ye{constructor(e){this.setupTracks(e)}setupTracks(e){this.tracks=e.reduce((e,t)=>{if("string"==typeof t)e[t]=he.audio[t].cloneNode();else{const{trackName:i,loop:s}=t;e[i]=he.audio[i].cloneNode(),e[i].loop=s}return e},{})}play(e){return this.tracks[e].play()}pause(e){return this.tracks[e].pause()}pauseAll(){Object.values(this.tracks).forEach(e=>e.pause())}}class fe{constructor(){this.timers={}}setTimer(e,t){this.timers[e]=t}getTimer(e){return this.timers[e]}some(e){return Object.entries(this.timers).some(t=>e.includes(t[0])&&t[1]>=0)}decrementTimers(){const e=Object.entries(this.timers).filter(e=>0===e[1]);e.length&&e.forEach(e=>{delete this.timers[e[0]]}),Object.keys(this.timers).forEach(e=>{this.timers[e]-=1})}}class ve{constructor(e,t){this.id=ve.numberGen,this.position=e,this.size=t,ve.numberGen+=1}update(){}render(){}resolveEntityCollision(e){}getBoundingBox(){const{x:e,y:t}=this.position,{x:i,y:s}=this.size;return{x1:e,x2:e+i,y1:t,y2:t+s}}deconstruct(){}}ve.numberGen=0;class xe extends ve{constructor(e,t,i){super(e,t),this.direction=i,this.prevPosition=Object.assign({},e)}resolveEdgeCollision(){}resolveTileCollision(e,t){}resolveEntityCollision(e){}move(e){this.prevPosition=Object.assign({},this.position),this.direction===B.Top?this.position.y-=e*L:this.direction===B.Bottom?this.position.y+=e*L:this.direction===B.Left?this.position.x-=e*L:this.direction===B.Right&&(this.position.x+=e*L)}goBack(){this.position=Object.assign({},this.prevPosition)}animateMovement(e){let t;t=this.direction===B.Left||this.direction===B.Right?this.position.x:this.position.y,e[Math.floor(t/.3)%e.length](this.position,this.size)}isOutOfScreen(){const e=this.getBoundingBox();return e.y1<0||e.y2>600||e.x1<0||e.x2>600}getFrontCollisionPoints(){const{x1:e,x2:t,y1:i,y2:s}=this.getBoundingBox();return this.direction===B.Top?[{x:e,y:i},{x:t,y:i}]:this.direction===B.Right?[{x:t,y:i},{x:t,y:s}]:this.direction===B.Bottom?[{x:e,y:s},{x:t,y:s}]:this.direction===B.Left?[{x:e,y:i},{x:e,y:s}]:void 0}}class we extends xe{constructor(e,t,i){super(e,t,i)}shot(e){if(this.timeManager.getTimer("shotCD"))return;let t;const{x:i,y:s}=I;t=this.direction===B.Top?{x:this.size.x/2+this.position.x-i/2,y:this.position.y-s}:this.direction===B.Right?{x:this.size.x+this.position.x,y:this.size.y/2+this.position.y-s/2}:this.direction===B.Bottom?{x:this.size.x/2+this.position.x-i/2,y:this.size.y+this.position.y}:{x:this.position.x-i,y:this.size.y/2+this.position.y-s/2},Ae.spawnEntity("Bullet",t,this.direction,this),this.timeManager.setTimer("shotCD",e)}die(){this.timeManager.setTimer("death",Q),this.soundManager.play("explode"),Ae.toRemove(this.id)}forgiveCollision(e){const[t,i]=this.getFrontCollisionPoints(),s=e.position;let n,r={x:this.prevPosition.x,y:this.prevPosition.y};if(this.direction===B.Top||this.direction===B.Bottom?s.x>t.x?(n=s.x-i.x,r.x=s.x-this.size.x):(n=s.x+Y-t.x,r.x=s.x+Y):this.direction!==B.Left&&this.direction!==B.Right||(s.y>t.y?(n=s.y-i.y,r.y=s.y-this.size.y):(n=s.y+Y-t.y,r.y=s.y+Y)),Math.abs(n)<5)return r}}function be(e){return e instanceof we}function Me(e){return e instanceof De}function Te(e){return e instanceof Pe}function Se(e){return e instanceof Oe}function ke(e){return e instanceof Le}function Be(e){return e instanceof Re}class Ee{constructor(){this.observers={}}subscribe(e,t){this.observers[e]=t}unsubscribe(e){delete this.observers[e]}notify(e){Object.values(this.observers).forEach(t=>t(e))}}const Ce=new Ee;class Re extends ve{constructor(e,t){super(t,Object.assign({},G)),this.type=e,this.timeManager=new fe,this.soundManager=new ye(["powerup"]),this.timeManager.setTimer("live",K)}update(){const e=this.timeManager.getTimer("live");0===e?Ae.toRemove(this.id):e===$&&this.timeManager.setTimer("blink",$),this.timeManager.decrementTimers()}render(){const e=this.timeManager.getTimer("blink");e&&e%50==0||he.sprites.powerup[this.type](this.position,this.size)}resolveEntityCollision(e){Me(e)&&(Ae.toRemove(this.id),Ce.notify(this.type),this.soundManager.play("powerup"))}}class De extends we{constructor(){super(Object.assign({},z),Object.assign({},A),B.Top),this.lives=3,this.power=R.Default,this.timeManager=new fe,this.soundManager=new ye(["explode",{trackName:"neutral",loop:!0},{trackName:"move",loop:!0}]),this.timeManager.setTimer("spawn",q),this.timeManager.setTimer("invincible",H),Ce.subscribe(this.id,function(e){e===C.Tank?this.lives+=1:e===C.Helmet?this.timeManager.setTimer("invincible",H):e===C.Star&&this.power<R.Second&&(this.power+=1)}.bind(this))}update(){this.timeManager.decrementTimers();const e=this.timeManager.getTimer("death"),t=this.timeManager.getTimer("spawn");e?1===e&&this.respawn(!0):t||(this.soundManager.play("neutral"),this.processInput())}render(){const e=this.timeManager.getTimer("spawn"),t=this.timeManager.getTimer("death"),i=this.timeManager.getTimer("invincible");if(e)return k(this.position,he.variableSprites.tankSpawn,q,e);if(t)return k(this.position,he.variableSprites.tankDestruction,Q,t);if(i){const e=he.sprites.invincible;e[i%e.length](this.position,this.size)}this.animateMovement(he.sprites.player[this.power][this.direction])}processInput(){const e=ce.getKey();let t=!0;e===P.ArrowUp?this.direction=B.Top:e===P.ArrowDown?this.direction=B.Bottom:e===P.ArrowLeft?this.direction=B.Left:e===P.ArrowRight?this.direction=B.Right:(this.soundManager.pause("move"),t=!1),e===P.Space&&this.shot(_[this.power].shotCD),t&&(this.soundManager.pause("neutral"),this.soundManager.play("move"),this.move(_[this.power].velocity))}resolveEdgeCollision(){this.goBack()}resolveTileCollision(e){if(1===e.length){const t=this.forgiveCollision(e[0]);t?this.position=Object.assign({},t):this.goBack()}else this.goBack()}resolveEntityCollision(e){const t=this.timeManager.getTimer("death");if(!Be(e))if(Se(e)&&!t){if(this.timeManager.getTimer("invincible"))return;this.timeManager.setTimer("death",Q),this.soundManager.play("explode"),this.lives-=1,0===this.lives&&this.die()}else this.goBack()}respawn(e=!1){e&&(this.power=R.Default),this.soundManager.pauseAll(),this.timeManager.setTimer("spawn",q),this.timeManager.setTimer("invincible",H),this.position=Object.assign({},z),this.prevPosition=Object.assign({},z)}deconstruct(){this.soundManager.pauseAll(),Ce.unsubscribe(this.id)}}class Oe extends xe{constructor(e,t,i){super(e,Object.assign({},I),t),this.direction=t,this.shooter=i,this.soundManager=new ye(["hit","hitdmg"])}update(){this.move(N)}render(){this.animateMovement(he.sprites.bullet[this.direction])}resolveEdgeCollision(){Ae.toRemove(this.id)}resolveTileCollision(e,t){if(e.every(e=>de.includes(e.type)))return;Ae.toRemove(this.id);const i=Me(this.shooter)&&this.shooter.power===R.Second;e.some(e=>e.type===D.Steel)?this.soundManager.play("hit"):this.soundManager.play("hitdmg"),e.forEach(e=>{de.includes(e.type)||e.type===D.Steel&&!i||t.destroy(e.position)})}resolveEntityCollision(e){Be(e)||(Me(this.shooter)&&Te(e)&&e.type>=1&&this.soundManager.play("hit"),Ae.toRemove(this.id))}}class Pe extends we{constructor(e,t){super(t,Object.assign({},A),B.Bottom),this.type=e,this.lives=W[e].lives,this.prevTile=Object.assign({},t),this.timeManager=new fe,this.soundManager=new ye(["explode"]),this.timeManager.setTimer("spawn",q),Ce.subscribe(this.id,function(e){e===C.Stopwatch?this.timeManager.setTimer("freeze",U):e===C.Grenade&&(this.timeManager.some(["death","spawn"])||this.die())}.bind(this))}update(){const e=this.timeManager.getTimer("spawn"),t=this.timeManager.getTimer("death"),i=this.timeManager.getTimer("freeze");if(this.timeManager.decrementTimers(),e){if(this.isSpawnSpotClear())return void this.timeManager.setTimer("spawn",q)}else{if(t||i)return;this.aiMove(),this.shot(W[this.type].shotCD)}}render(){const e=this.timeManager.getTimer("spawn"),t=this.timeManager.getTimer("death");return e?k(this.position,he.variableSprites.tankSpawn,q,e):t?k(this.position,he.variableSprites.tankDestruction,Q,t):void(this.type===E.Armored?this.animateMovement(he.sprites.enemy[this.type][this.lives][this.direction]):this.animateMovement(he.sprites.enemy[this.type][this.direction]))}aiMove(){const{velocity:e}=W[this.type];Math.abs(Math.floor(this.prevTile.x-this.position.x))>120||Math.abs(Math.floor(this.prevTile.y-this.position.y))>120?(this.prevTile=Object.assign({},this.position),this.setRandomDirection(),this.move(e)):this.move(e)}resolveEdgeCollision(){this.goBack(),this.setRandomDirection()}resolveTileCollision(e){if(1===e.length){const t=this.forgiveCollision(e[0]);t?this.position=Object.assign({},t):(this.setRandomDirection(),this.goBack())}else this.setRandomDirection(),this.goBack()}resolveEntityCollision(e){Be(e)||(Se(e)&&Me(e.shooter)?1===this.lives?this.die():this.lives-=1:Te(e)?(this.goBack(),this.setOpositeDirection()):Me(e)&&(this.timeManager.getTimer("shotCD")>10&&this.setOpositeDirection(),this.goBack()))}setRandomDirection(){const e=[B.Top,B.Right,B.Bottom,B.Left].filter(e=>e!==this.direction),t=Math.floor(Math.random()*e.length);this.direction=e[t]}setOpositeDirection(){this.direction===B.Top?this.direction=B.Bottom:this.direction===B.Bottom?this.direction=B.Top:this.direction===B.Right?this.direction=B.Left:this.direction=B.Right}isSpawnSpotClear(){return Ae.entities.filter(e=>e.id!==this.id&&!Se(e)).filter(e=>!Te(e)||!e.timeManager.getTimer("spawn")).some(e=>M(e.getBoundingBox(),this.getBoundingBox()))}deconstruct(){Ce.unsubscribe(this.id)}}class Le extends ve{constructor(){super(F,j),this.isDestroyed=!1}render(){this.isDestroyed?he.sprites.flagDeath(this.position,this.size):he.sprites.flag(this.position,this.size)}resolveEntityCollision(e){Se(e)&&(this.isDestroyed=!0)}}const Ae=new class{constructor(){this.toRemove=(e=>{this.toRemoveQueue.add(e)}),this.removeFromQueue=(()=>{this.toRemoveQueue.forEach(e=>{const t=this.pool[e];this._checkDeath(t)||(delete this.pool[e],t.deconstruct(),this.toRemoveQueue.delete(e))})}),this.pool={},this.toRemoveQueue=new Set}spawnEntity(e,...t){const i=new s[e](...t);this.pool[i.id]=i}getEnemies(){return this.entities.filter(Te)}getPlayer(){return this.entities.find(Me)}getFlag(){return this.entities.find(ke)}render(){this.entities.forEach(e=>e.render())}update(){this.entities.forEach(e=>e.update())}checkCollisions(e){const t=new Set;this.entities.forEach(i=>{Be(i)||ke(i)||(this.checkTileCollision(i,e),this.checkEntitiesCollision(i,t),t.add(i.id))})}checkTileCollision(e,t){if(e.isOutOfScreen())e.resolveEdgeCollision();else{const[i,s]=e.getFrontCollisionPoints(),n=t.lookupRange(i,s).filter(e=>ue.includes(e.type)).filter(t=>M(e.getBoundingBox(),{x1:t.position.x,x2:t.position.x+Y,y1:t.position.y,y2:t.position.y+Y}));n.length&&e.resolveTileCollision(n,t)}}checkEntitiesCollision(e,t){this.entities.forEach(i=>{e.id===i.id||t.has(i.id)||this._isInteractive(i)&&M(e.getBoundingBox(),i.getBoundingBox())&&(e.resolveEntityCollision(i),i.resolveEntityCollision(e))})}clear(e=!0){if(e)Object.values(this.pool).forEach(e=>e.deconstruct()),this.pool={};else{const e=this.getPlayer();Object.values(this.pool).filter(t=>t.id!==e.id).forEach(e=>e.deconstruct()),this.pool={[e.id]:e}}this.toRemoveQueue=new Set}_isInteractive(e){return!be(e)||!e.timeManager.some(["spawn","death"])}_checkDeath(e){if(be(e))return e.timeManager.getTimer("death")}get entities(){return Object.values(this.pool)}};class je{constructor(e,t,i){this.number=e,this.map=t,this.tanks=[...i],this.powerupsAvailable=5,this.timeManager=new fe,this.soundManager=new ye(["start"]),this.timeManager.setTimer("powerupSpawnCD",K),this.soundManager.play("start"),Ae.spawnEntity("Flag")}update(){this.timeManager.decrementTimers(),this.spawnEnemy(),this.spawnPowerup()}isFinish(){const e=Ae.getEnemies();return!this.tanks.length&&!e.length}spawnEnemy(){const e=this.timeManager.getTimer("enemySpawnCD"),t=Ae.getEnemies();if(!this.tanks.length||t.length>4||e)return;const i=T(2);this.timeManager.setTimer("enemySpawnCD",J),Ae.spawnEntity("Enemy",this.tanks.pop(),Object.assign({},X[i]))}spawnPowerup(){if(this.timeManager.getTimer("powerupSpawnCD")||!this.powerupsAvailable)return;const e=T(Object.keys(C).length/2);Ae.spawnEntity("Powerup",C[C[e]],{x:T(500),y:T(500)}),this.timeManager.setTimer("powerupSpawnCD",K),this.powerupsAvailable-=1}render(){this.map.renderLayer(O.under),this.map.renderLayer(O.main),Ae.render(),this.map.renderLayer(O.over)}get screenNum(){return this.number+1}}class Fe{constructor(){this.isStartScreen=!0,this.isLost=!1,this.timeManager=new fe,this.soundManager=new ye(["gameover"])}createLoop(){let e=0,t=0;const i=s=>{for(e+=(s-t)/1e3;e>L;)this.update(),e-=L;this.render(),t=s,requestAnimationFrame(i)};i(0)}update(){this.timeManager.decrementTimers();const e=this.timeManager.getTimer("screenFade");if(this.isLost||this.isStartScreen||e)return;this.stage.update(),Ae.update(),Ae.checkCollisions(this.stage.map),Ae.removeFromQueue();const t=Ae.getPlayer(),i=Ae.getFlag();if(!t||i.isDestroyed)return t&&t.soundManager.pauseAll(),this.gameOver();this.stage.isFinish()&&this.toNextStage()}render(){te.clearScreen(),ne.clearScreen(),this.isStartScreen?te.renderStartScreen():this.renderGame()}renderGame(){const e=this.timeManager.getTimer("screenFade");if(this.stage.render(),this.isLost)te.renderGameOver(e);else if(e)te.renderChaingingStage(e);else{const e=Ae.getPlayer();ne.render(e.lives,this.stage.screenNum,this.stage.tanks)}}gameOver(){this.soundManager.play("gameover"),this.timeManager.setTimer("screenFade",V),this.isLost=!0}isWaitingForRestart(){return!this.timeManager.getTimer("screenFade")&&this.isLost}getNextStageNum(){let e=this.stage.number+1;return e>le.length-1&&(e=0),e}toNextStage(){this.timeManager.setTimer("screenFade",V),Ae.clear(!1);const e=this.getNextStageNum(),t=Ae.getPlayer();this.stage=new je(e,new ge(le[e]),pe[e]),t.respawn()}play(){this.isStartScreen=!1,Ae.spawnEntity("Player"),this.timeManager.setTimer("screenFade",V),this.stage=new je(0,new ge(le[0]),pe[0])}restart(){this.isLost=!1,Ae.clear(),this.play()}}!async function(){he.runPreloader(),await Promise.all([he.loadSprite(r.a),he.loadAudio({explode:a.a,hit:c.a,hitdmg:p.a,neutral:d.a,powerup:g.a,move:f.a,start:x.a,gameover:b.a})]),he.stopPreloader();const e=new Fe;ce.listenToEvents(e),e.createLoop()}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL3Nwcml0ZXMucG5nIiwid2VicGFjazovLy8uL2Fzc2V0cy9hdWRpby9leHBsb2RlLndhdiIsIndlYnBhY2s6Ly8vLi9hc3NldHMvYXVkaW8vaGl0LndhdiIsIndlYnBhY2s6Ly8vLi9hc3NldHMvYXVkaW8vaGl0ZG1nLndhdiIsIndlYnBhY2s6Ly8vLi9hc3NldHMvYXVkaW8vbmV1dHJhbC53YXYiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2F1ZGlvL3Bvd2VydXAud2F2Iiwid2VicGFjazovLy8uL2Fzc2V0cy9hdWRpby9tb3ZlLndhdiIsIndlYnBhY2s6Ly8vLi9hc3NldHMvYXVkaW8vc3RhcnQud2F2Iiwid2VicGFjazovLy8uL2Fzc2V0cy9hdWRpby9nYW1lb3Zlci53YXYiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvdXRpbHMvY2hlY2tFbnRpdHlDb2xsaXNpb24uanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvdXRpbHMvcmFuZG9tLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3V0aWxzL2FuaW1hdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC90eXBlcy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc2NyZWVucy9tYWluLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NjcmVlbnMvZGFzaGJvYXJkLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3V0aWxzL2Fzc2V0c0hvbGRlci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9rZXlib2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zdGFnZUNvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9UaWxlTWFwLmpzIiwid2VicGFjazovLy8uL2J1aWxkL21hbmFnZXJzL1NvdW5kTWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9tYW5hZ2Vycy9UaW1lTWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9lbnRpdGllcy9FbnRpdHkuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvZW50aXRpZXMvTW92YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9lbnRpdGllcy9UYW5rLmpzIiwid2VicGFjazovLy8uL2J1aWxkL2VudGl0aWVzL2d1YXJkcy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9lbnRpdGllcy9Qb3dlcnVwLmpzIiwid2VicGFjazovLy8uL2J1aWxkL2VudGl0aWVzL1BsYXllci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9lbnRpdGllcy9CdWxsZXQuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvZW50aXRpZXMvRW5lbXkuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvZW50aXRpZXMvRmxhZy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9tYW5hZ2Vycy9lbnRpdHlNYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL2J1aWxkL1N0YWdlLmpzIiwid2VicGFjazovLy8uL2J1aWxkL0dhbWUuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjaGVja0VudGl0eUNvbGxpc2lvbiIsImJveDEiLCJib3gyIiwieDEiLCJ4MiIsInkxIiwieTIiLCJyYW5kb21JbnQiLCJsaW1pdCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImdldEFuaW1hdGlvbkluZGV4IiwiYW5pbWF0aW9uTGVuZ3RoIiwiZnJhbWVzVG90YWwiLCJmcmFtZXNMZWZ0Iiwic3RlcCIsImFuaW1hdGVWYXJpYWJsZVNwcml0ZXMiLCJwb3NpdGlvbiIsImFuaW1hdGlvbiIsImluZGV4IiwibWluIiwibGVuZ3RoIiwic3ByaXRlIiwic2l6ZSIsIkRpcmVjdGlvbiIsIlRhbmtUeXBlcyIsIlBvd2VydXBUeXBlcyIsIlBsYXllclBvd2VyIiwiVGlsZXMiLCJMYXllcnMiLCJDb250cm9sS2V5cyIsIkRFTFRBX1RJTUUiLCJUQU5LX1NJWkUiLCJ4IiwieSIsIkZMQUdfU0laRSIsIkZMQUdfUE9TSVRJT04iLCJQTEFZRVJfU1BBV05fUE9TSVRJT04iLCJCVUxMRVRfU0laRSIsIkJVTExFVF9WRUxPQ0lUWSIsIlBPV0VSVVBfU0laRSIsIlBMQVlFUl9TVEFUUyIsIltvYmplY3QgT2JqZWN0XSIsIkRlZmF1bHQiLCJ2ZWxvY2l0eSIsInNob3RDRCIsIkZpcnN0IiwiU2Vjb25kIiwiRU5FTVlfU1RBVFMiLCJsaXZlcyIsIkZhc3QiLCJBcm1vcmVkIiwiREVBVEhfRlJBTUVTIiwiU1BBV05fRlJBTUVTIiwiSU5WSU5DSUJMRV9GUkFNRVMiLCJGUkVFWkVfRlJBTUVTIiwiUE9XRVJVUF9TUEFXTl9DRCIsIlBPV0VSVVBfQkxJTktfRlJBTUVTIiwiRU5FTVlfU1BBV05fQ0QiLCJTQ1JFRU5fRkFERV9GUkFNRVMiLCJFTkVNWV9TUEFXTl9QT1NJVElPTiIsIlRJTEVfU0lERSIsImNhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsImZvbnQiLCJ0ZXh0QWxpZ24iLCJtYWluIiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJiZWdpblBhdGgiLCJsZWZ0IiwiZmlsbFJlY3QiLCJhc3NldHNIb2xkZXIiLCJzcHJpdGVzIiwiZ2FtZU92ZXIiLCJsb2dvIiwic3Ryb2tlVGV4dCIsInBlcmNlbnRhZ2UiLCJ0aGlzIiwiY2xlYXJTY3JlZW4iLCJkYXNoYm9hcmRfY2FudmFzIiwiZGFzaGJvYXJkX2NvbnRleHQiLCJkYXNoYm9hcmQiLCJwbGF5ZXJMaXZlcyIsInN0YWdlTnVtIiwidGFua3MiLCJudW1iZXJJY29ucyIsImZsYWdJY29uIiwicGxheWVySWNvbiIsInRhbmtJY29uIiwidGFua1Nwcml0ZSIsImNvdW50ZXIiLCJmb3JFYWNoIiwiXyIsImlkeCIsImRyYXdUYW5rcyIsImNyZWF0ZVNwcml0ZSIsImltYWdlIiwiZHgiLCJkeSIsImRXaWR0aCIsImRIZWlnaHQiLCJkcmF3SW1hZ2UiLCJzZXR1cFNwcml0ZXMiLCJtYWluU3ByaXRlIiwiZGFzaGJvYXJkU3ByaXRlIiwicGxheWVyIiwiVG9wIiwiQm90dG9tIiwiUmlnaHQiLCJMZWZ0IiwiZW5lbXkiLCIxIiwiMiIsIjMiLCJidWxsZXQiLCJmbGFnIiwiZmxhZ0RlYXRoIiwidGlsZXMiLCJCcmljazEiLCJCcmljazIiLCJCcmljazMiLCJCcmljazQiLCJTdGVlbCIsIkljZSIsIkdyYXNzIiwiV2F0ZXIiLCJwb3dlcnVwIiwiSGVsbWV0IiwiU3RvcHdhdGNoIiwiU3RhciIsIkdyZW5hZGUiLCJUYW5rIiwiaW52aW5jaWJsZSIsInNldHVwVmFyaWFibGVTcHJpdGVzIiwidGFua1NwYXduIiwidGFua0Rlc3RydWN0aW9uIiwicHJlbGFvZGVyU3RhdGUiLCJwZXJzZW50YWdlIiwiaXNSdW5uaW5nIiwic2hvd1ByZWxvYWRlciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInJ1blByZWxvYWRlciIsInNyYyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiSW1hZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwidmFyaWFibGVTcHJpdGVzIiwiYXVkaW9TcmMiLCJhdWRpbyIsInRyYWNrTmFtZXMiLCJrZXlzIiwiY2h1bmsiLCJsb2FkZXJzIiwibWFwIiwidHJhY2tOYW1lIiwiQXVkaW8iLCJhbGwiLCJrZXlib2FyZCIsInF1ZXVlIiwiU2V0IiwiZXZlbnQiLCJnYW1lIiwiY29kZSIsInR5cGUiLCJpc1dhaXRpbmdGb3JSZXN0YXJ0IiwicmVzdGFydCIsImlzU3RhcnRTY3JlZW4iLCJwbGF5IiwiYWRkIiwiZGVsZXRlIiwiQXJyYXkiLCJmcm9tIiwicG9wIiwiZXZlbnROYW1lIiwid2luZG93IiwiaGFuZGxlRXZlbnQiLCJtYXBzIiwic3RhZ2VDb25maWdfdGFua3MiLCJyaWdpZCIsImJ1bGxldFRocm91Z2giLCJOb25lIiwibGF5ZXNyTWFwIiwidW5kZXIiLCJvdmVyIiwiVGlsZU1hcF9UaWxlTWFwIiwicm93IiwicG9pbnQiLCJ4SW5kZXgiLCJtYXgiLCJ5SW5kZXgiLCJwb2ludDEiLCJwb2ludDIiLCJpbkJldHdlZW5Qb2ludHMiLCJyYW5nZVgiLCJhYnMiLCJyYW5nZVkiLCJwdXNoIiwibG9va3VwIiwidGlsZSIsImluY2x1ZGVzIiwiU291bmRNYW5hZ2VyX1NvdW5kTWFuYWdlciIsInNldHVwVHJhY2tzIiwidHJhY2tzIiwicmVkdWNlIiwiYWNjIiwidHJhY2siLCJjbG9uZU5vZGUiLCJsb29wIiwicGF1c2UiLCJ2YWx1ZXMiLCJUaW1lTWFuYWdlciIsInRpbWVycyIsInRpbWVyTmFtZSIsImZyYW1lTGVuZ3RoIiwiZW50cmllcyIsInNvbWUiLCJlbnRyeSIsInRvUmVtb3ZlIiwiZmlsdGVyIiwiRW50aXR5IiwiaWQiLCJudW1iZXJHZW4iLCJvdGhlciIsIk1vdmFibGVfTW92YWJsZSIsImRpcmVjdGlvbiIsInN1cGVyIiwicHJldlBvc2l0aW9uIiwiYXNzaWduIiwidGlsZU1hcCIsImRpc3RhbmNlIiwiYm94IiwiZ2V0Qm91bmRpbmdCb3giLCJUYW5rX1RhbmsiLCJjZCIsInRpbWVNYW5hZ2VyIiwiZ2V0VGltZXIiLCJidWxsZXRQb3NpdGlvbiIsImVudGl0eU1hbmFnZXIiLCJzcGF3bkVudGl0eSIsInNldFRpbWVyIiwic291bmRNYW5hZ2VyIiwiZ2V0RnJvbnRDb2xsaXNpb25Qb2ludHMiLCJ0aWxlUG9zIiwiZGlmZiIsImRlc3RpbmF0aW9uIiwiaXNUYW5rIiwiZW50aXR5IiwiaXNQbGF5ZXIiLCJQbGF5ZXJfUGxheWVyIiwiaXNFbmVteSIsIkVuZW15X0VuZW15IiwiaXNCdWxsZXQiLCJCdWxsZXRfQnVsbGV0IiwiaXNGbGFnIiwiRmxhZ19GbGFnIiwiaXNQb3dlcnVwIiwiUG93ZXJ1cF9Qb3dlcnVwIiwiUG93ZXJ1cEV2ZW50cyIsIm9ic2VydmVycyIsImVudGl0eUlkIiwib2JzZXJ2ZXIiLCJldmVudFR5cGUiLCJwb3dlcnVwRXZlbnRzIiwibGl2ZXNMZWZ0IiwiZGVjcmVtZW50VGltZXJzIiwiYmxpbmtMZWZ0Iiwibm90aWZ5IiwicG93ZXIiLCJzdWJzY3JpYmUiLCJwb3dlcnVwVHlwZSIsImRlYXRoIiwic3Bhd24iLCJyZXNwYXduIiwicHJvY2Vzc0lucHV0IiwiaW52aW5jaWJsZVNwcml0ZXMiLCJhbmltYXRlTW92ZW1lbnQiLCJnZXRLZXkiLCJpc01vdmluZyIsIkFycm93VXAiLCJBcnJvd0Rvd24iLCJBcnJvd0xlZnQiLCJBcnJvd1JpZ2h0IiwiU3BhY2UiLCJzaG90IiwibW92ZSIsImdvQmFjayIsIm5ld1BvcyIsImZvcmdpdmVDb2xsaXNpb24iLCJkaWUiLCJkZWZhdWx0UG93ZXIiLCJwYXVzZUFsbCIsInVuc3Vic2NyaWJlIiwic2hvb3RlciIsImV2ZXJ5IiwiY2FuRGVzdHJveVN0ZWVsIiwiZGVzdHJveSIsInByZXZUaWxlIiwiZnJlZXplIiwiaXNTcGF3blNwb3RDbGVhciIsImFpTW92ZSIsInNldFJhbmRvbURpcmVjdGlvbiIsInNldE9wb3NpdGVEaXJlY3Rpb24iLCJpdGVtcyIsImVudGl0aWVzIiwiaXNEZXN0cm95ZWQiLCJ0b1JlbW92ZVF1ZXVlIiwicmVtb3ZlRnJvbVF1ZXVlIiwicG9vbCIsIl9jaGVja0RlYXRoIiwiZGVjb25zdHJ1Y3QiLCJhcmdzIiwiZW50aXRpZXNfbmFtZXNwYWNlT2JqZWN0IiwiZmluZCIsInJlbmRlciIsInVwZGF0ZSIsInNlZW4iLCJjaGVja1RpbGVDb2xsaXNpb24iLCJjaGVja0VudGl0aWVzQ29sbGlzaW9uIiwiaXNPdXRPZlNjcmVlbiIsInJlc29sdmVFZGdlQ29sbGlzaW9uIiwiZmlyc3QiLCJzZWNvbmQiLCJjb2xsaWRhYmxlIiwibG9va3VwUmFuZ2UiLCJyZXNvbHZlVGlsZUNvbGxpc2lvbiIsImhhcyIsIl9pc0ludGVyYWN0aXZlIiwicmVzb2x2ZUVudGl0eUNvbGxpc2lvbiIsImNsZWFyUGxheWVyIiwiZ2V0UGxheWVyIiwiU3RhZ2VfU3RhZ2UiLCJudW1iZXIiLCJwb3dlcnVwc0F2YWlsYWJsZSIsInNwYXduRW5lbXkiLCJzcGF3blBvd2VydXAiLCJlbmVtaWVzIiwiZ2V0RW5lbWllcyIsImVuZW15U3Bhd25DRCIsInJlbmRlckxheWVyIiwic2NyZWVuTnVtIiwiR2FtZV9HYW1lIiwiaXNMb3N0IiwiYWNjdW11bGF0ZWRUaW1lIiwibGFzdFRpbWUiLCJ0aW1lIiwic3JlZW5GYWRlTGVmdCIsInN0YWdlIiwiY2hlY2tDb2xsaXNpb25zIiwiZ2V0RmxhZyIsImlzRmluaXNoIiwidG9OZXh0U3RhZ2UiLCJyZW5kZXJTdGFydFNjcmVlbiIsInJlbmRlckdhbWUiLCJyZW5kZXJHYW1lT3ZlciIsInJlbmRlckNoYWluZ2luZ1N0YWdlIiwibmV3TnVtIiwiY2xlYXIiLCJnZXROZXh0U3RhZ2VOdW0iLCJhc3luYyIsImxvYWRTcHJpdGUiLCJzcHJpdGVzX2RlZmF1bHQiLCJhIiwibG9hZEF1ZGlvIiwiZXhwbG9kZSIsImV4cGxvZGVfZGVmYXVsdCIsImhpdCIsImhpdF9kZWZhdWx0IiwiaGl0ZG1nIiwiaGl0ZG1nX2RlZmF1bHQiLCJuZXV0cmFsIiwibmV1dHJhbF9kZWZhdWx0IiwicG93ZXJ1cF9kZWZhdWx0IiwibW92ZV9kZWZhdWx0Iiwic3RhcnQiLCJzdGFydF9kZWZhdWx0IiwiZ2FtZW92ZXIiLCJnYW1lb3Zlcl9kZWZhdWx0Iiwic3RvcFByZWxvYWRlciIsImxpc3RlblRvRXZlbnRzIiwiY3JlYXRlTG9vcCIsImJ1aWxkX21haW4iXSwibWFwcGluZ3Mi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WUFBQUMsU0FBQSxlQUNBaEssS0FBQTBRLE9BRUFsVCxrQkFDQSxJQUFBZ1UsRUFBQXhSLEtBQUErUSxNQUFBZixPQUFBLEVBSUEsT0FIQXdCLEVBQXFCbkwsR0FBSWxLLE9BQUEsSUFDekJxVixFQUFBLEdBRUFBLEVBRUFoVSxjQUNBd0MsS0FBQStKLFlBQUFLLFNBQUEsYUFBZ0QzTCxHQUN4Q3lMLEdBQWF1SCxPQUFBLEdBQ3JCLE1BQUFuUixFQUFBTixLQUFBMFIsa0JBQ0E5UCxFQUF1QnNJLEdBQWE0RixZQUNwQzlQLEtBQUErUSxNQUFBLElBQXlCaEIsR0FBS3pQLEVBQUEsSUFBZXVHLEdBQVFSLEdBQUkvRixJQUFhZ0csR0FBV2hHLElBQ2pGc0IsRUFBQXlLLFVBRUE3TyxPQUNBd0MsS0FBQTJGLGVBQUEsRUFDUXVFLEdBQWFDLFlBQUEsVUFDckJuSyxLQUFBK0osWUFBQUssU0FBQSxhQUFnRDNMLEdBQ2hEdUIsS0FBQStRLE1BQUEsSUFBeUJoQixHQUFLLE1BQVFsSixHQUFRUixHQUFJLElBQU1DLEdBQVcsSUFFbkU5SSxVQUNBd0MsS0FBQTBRLFFBQUEsRUFDUXhHLEdBQWF1SCxRQUNyQnpSLEtBQUE0RixTQzdGQStMLGlCQUNJalMsR0FBWXNFLHFCQUNoQkUsUUFBQWUsS0FDUXZGLEdBQVlrUyxXQUFZQyxFQUFBQyxHQUN4QnBTLEdBQVlxUyxXQUFhQyxRQUFBQyxFQUFBSCxFQUFTSSxJQUFBQyxFQUFBTCxFQUFLTSxPQUFBQyxFQUFBUCxFQUFRUSxRQUFBQyxFQUFBVCxFQUFTN08sUUFBQXVQLEVBQUFWLEVBQVM3RSxLQUFBd0YsRUFBQVgsRUFBTVksTUFBQUMsRUFBQWIsRUFBT2MsU0FBQUMsRUFBQWYsTUFFbEZwUyxHQUFZb1QsZ0JBQ2hCLE1BQUF4TixFQUFBLElBQXFCbUwsR0FDakJ2TCxHQUFRNk4sZUFBQXpOLEdBQ1pBLEVBQUEwTixhQUVBQyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gOSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJhYjY1YzQ3MmM2YjU5MmFmZTg3NTdiYjhiZThjNjI2Ny5wbmdcIjsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCI1YzA3ODg0Nzk3OGExMzhkNjQzNzE1MzFmNDhiYmRiZC53YXZcIjsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCI4NGMyMmRjMzM5YjVmNTdlNGIxNTI4N2UwMTI1YTllNy53YXZcIjsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJkNGQxN2YxZjRhMGVlZTUxMTg1NmJmOTA1Njk5MTFjMC53YXZcIjsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCIxN2Y5OWM0ZTE1MzQ0MDYxNjRiNGQ2NzAxMjM3NDYyOS53YXZcIjsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJmOTEyNjEwYWM3OGU4MjcwYjYzNDFlYzRlNmQwOGQ4My53YXZcIjsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCI1NGFmOTViN2I0NTQyNDQ4NWI2ZWJmMDM2MWQwMTlhMy53YXZcIjsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJhYThjNTE4NTBjMDllODliYjlhNDdmYjMxZWUzMWEzOC53YXZcIjsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCI5YWY4OGE2YWM5Y2ZiYzM5MmE5NDFiNGVkNTIwZDVmOC53YXZcIjsiLCJmdW5jdGlvbiBjaGVja0VudGl0eUNvbGxpc2lvbihib3gxLCBib3gyKSB7XG4gICAgcmV0dXJuIGJveDEueDEgPCBib3gyLngyICYmIGJveDEueDIgPiBib3gyLngxICYmIGJveDEueTEgPCBib3gyLnkyICYmIGJveDEueTIgPiBib3gyLnkxO1xufVxuZXhwb3J0IHsgY2hlY2tFbnRpdHlDb2xsaXNpb24gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNoZWNrRW50aXR5Q29sbGlzaW9uLmpzLm1hcCIsImNvbnN0IHJhbmRvbUludCA9IChsaW1pdCkgPT4ge1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBsaW1pdCk7XG59O1xuZXhwb3J0IHsgcmFuZG9tSW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yYW5kb20uanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGdldEFuaW1hdGlvbkluZGV4KGFuaW1hdGlvbkxlbmd0aCwgZnJhbWVzVG90YWwsIGZyYW1lc0xlZnQpIHtcbiAgICBjb25zdCBzdGVwID0gZnJhbWVzVG90YWwgLyBhbmltYXRpb25MZW5ndGg7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoZnJhbWVzTGVmdCAvIHN0ZXApO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFuaW1hdGVWYXJpYWJsZVNwcml0ZXMocG9zaXRpb24sIGFuaW1hdGlvbiwgZnJhbWVzVG90YWwsIGZyYW1lc0xlZnQpIHtcbiAgICBjb25zdCBpbmRleCA9IE1hdGgubWluKGdldEFuaW1hdGlvbkluZGV4KGFuaW1hdGlvbi5sZW5ndGgsIGZyYW1lc1RvdGFsLCBmcmFtZXNMZWZ0KSwgYW5pbWF0aW9uLmxlbmd0aCAtIDEpO1xuICAgIGNvbnN0IHsgc3ByaXRlLCBzaXplIH0gPSBhbmltYXRpb25baW5kZXhdO1xuICAgIHJldHVybiBzcHJpdGUocG9zaXRpb24sIHNpemUpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5pbWF0aW9uLmpzLm1hcCIsImV4cG9ydCB2YXIgRGlyZWN0aW9uO1xuKGZ1bmN0aW9uIChEaXJlY3Rpb24pIHtcbiAgICBEaXJlY3Rpb25bRGlyZWN0aW9uW1wiVG9wXCJdID0gMF0gPSBcIlRvcFwiO1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJCb3R0b21cIl0gPSAxXSA9IFwiQm90dG9tXCI7XG4gICAgRGlyZWN0aW9uW0RpcmVjdGlvbltcIlJpZ2h0XCJdID0gMl0gPSBcIlJpZ2h0XCI7XG4gICAgRGlyZWN0aW9uW0RpcmVjdGlvbltcIkxlZnRcIl0gPSAzXSA9IFwiTGVmdFwiO1xufSkoRGlyZWN0aW9uIHx8IChEaXJlY3Rpb24gPSB7fSkpO1xuZXhwb3J0IHZhciBUYW5rVHlwZXM7XG4oZnVuY3Rpb24gKFRhbmtUeXBlcykge1xuICAgIFRhbmtUeXBlc1tUYW5rVHlwZXNbXCJEZWZhdWx0XCJdID0gMF0gPSBcIkRlZmF1bHRcIjtcbiAgICBUYW5rVHlwZXNbVGFua1R5cGVzW1wiRmFzdFwiXSA9IDFdID0gXCJGYXN0XCI7XG4gICAgVGFua1R5cGVzW1RhbmtUeXBlc1tcIkFybW9yZWRcIl0gPSAyXSA9IFwiQXJtb3JlZFwiO1xuICAgIFRhbmtUeXBlc1tUYW5rVHlwZXNbXCJBcm1vcmVkMlwiXSA9IDNdID0gXCJBcm1vcmVkMlwiO1xuICAgIFRhbmtUeXBlc1tUYW5rVHlwZXNbXCJBcm1vcmVkM1wiXSA9IDRdID0gXCJBcm1vcmVkM1wiO1xufSkoVGFua1R5cGVzIHx8IChUYW5rVHlwZXMgPSB7fSkpO1xuZXhwb3J0IHZhciBQb3dlcnVwVHlwZXM7XG4oZnVuY3Rpb24gKFBvd2VydXBUeXBlcykge1xuICAgIFBvd2VydXBUeXBlc1tQb3dlcnVwVHlwZXNbXCJIZWxtZXRcIl0gPSAwXSA9IFwiSGVsbWV0XCI7XG4gICAgUG93ZXJ1cFR5cGVzW1Bvd2VydXBUeXBlc1tcIlN0YXJcIl0gPSAxXSA9IFwiU3RhclwiO1xuICAgIFBvd2VydXBUeXBlc1tQb3dlcnVwVHlwZXNbXCJTdG9wd2F0Y2hcIl0gPSAyXSA9IFwiU3RvcHdhdGNoXCI7XG4gICAgUG93ZXJ1cFR5cGVzW1Bvd2VydXBUeXBlc1tcIkdyZW5hZGVcIl0gPSAzXSA9IFwiR3JlbmFkZVwiO1xuICAgIFBvd2VydXBUeXBlc1tQb3dlcnVwVHlwZXNbXCJUYW5rXCJdID0gNF0gPSBcIlRhbmtcIjtcbn0pKFBvd2VydXBUeXBlcyB8fCAoUG93ZXJ1cFR5cGVzID0ge30pKTtcbmV4cG9ydCB2YXIgUGxheWVyUG93ZXI7XG4oZnVuY3Rpb24gKFBsYXllclBvd2VyKSB7XG4gICAgUGxheWVyUG93ZXJbUGxheWVyUG93ZXJbXCJEZWZhdWx0XCJdID0gMF0gPSBcIkRlZmF1bHRcIjtcbiAgICBQbGF5ZXJQb3dlcltQbGF5ZXJQb3dlcltcIkZpcnN0XCJdID0gMV0gPSBcIkZpcnN0XCI7XG4gICAgUGxheWVyUG93ZXJbUGxheWVyUG93ZXJbXCJTZWNvbmRcIl0gPSAyXSA9IFwiU2Vjb25kXCI7XG59KShQbGF5ZXJQb3dlciB8fCAoUGxheWVyUG93ZXIgPSB7fSkpO1xuZXhwb3J0IHZhciBUaWxlcztcbihmdW5jdGlvbiAoVGlsZXMpIHtcbiAgICBUaWxlc1tUaWxlc1tcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIFRpbGVzW1RpbGVzW1wiQnJpY2sxXCJdID0gMV0gPSBcIkJyaWNrMVwiO1xuICAgIFRpbGVzW1RpbGVzW1wiQnJpY2syXCJdID0gMl0gPSBcIkJyaWNrMlwiO1xuICAgIFRpbGVzW1RpbGVzW1wiQnJpY2szXCJdID0gM10gPSBcIkJyaWNrM1wiO1xuICAgIFRpbGVzW1RpbGVzW1wiQnJpY2s0XCJdID0gNF0gPSBcIkJyaWNrNFwiO1xuICAgIFRpbGVzW1RpbGVzW1wiU3RlZWxcIl0gPSA1XSA9IFwiU3RlZWxcIjtcbiAgICBUaWxlc1tUaWxlc1tcIkljZVwiXSA9IDZdID0gXCJJY2VcIjtcbiAgICBUaWxlc1tUaWxlc1tcIkdyYXNzXCJdID0gN10gPSBcIkdyYXNzXCI7XG4gICAgVGlsZXNbVGlsZXNbXCJXYXRlclwiXSA9IDhdID0gXCJXYXRlclwiO1xufSkoVGlsZXMgfHwgKFRpbGVzID0ge30pKTtcbmV4cG9ydCB2YXIgTGF5ZXJzO1xuKGZ1bmN0aW9uIChMYXllcnMpIHtcbiAgICBMYXllcnNbTGF5ZXJzW1widW5kZXJcIl0gPSAwXSA9IFwidW5kZXJcIjtcbiAgICBMYXllcnNbTGF5ZXJzW1wibWFpblwiXSA9IDFdID0gXCJtYWluXCI7XG4gICAgTGF5ZXJzW0xheWVyc1tcIm92ZXJcIl0gPSAyXSA9IFwib3ZlclwiO1xufSkoTGF5ZXJzIHx8IChMYXllcnMgPSB7fSkpO1xuZXhwb3J0IHZhciBDb250cm9sS2V5cztcbihmdW5jdGlvbiAoQ29udHJvbEtleXMpIHtcbiAgICBDb250cm9sS2V5c1tcIkFycm93VXBcIl0gPSBcIkFycm93VXBcIjtcbiAgICBDb250cm9sS2V5c1tcIkFycm93UmlnaHRcIl0gPSBcIkFycm93UmlnaHRcIjtcbiAgICBDb250cm9sS2V5c1tcIkFycm93RG93blwiXSA9IFwiQXJyb3dEb3duXCI7XG4gICAgQ29udHJvbEtleXNbXCJBcnJvd0xlZnRcIl0gPSBcIkFycm93TGVmdFwiO1xuICAgIENvbnRyb2xLZXlzW1wiU3BhY2VcIl0gPSBcIlNwYWNlXCI7XG59KShDb250cm9sS2V5cyB8fCAoQ29udHJvbEtleXMgPSB7fSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZXMuanMubWFwIiwiaW1wb3J0ICogYXMgdHlwZXMgZnJvbSAnLi90eXBlcyc7XG4vLyBHYW1lXG5leHBvcnQgY29uc3QgREVMVEFfVElNRSA9IDEgLyA2MDtcbi8vIEVudGl0aWVzXG5leHBvcnQgY29uc3QgVEFOS19TSVpFID0geyB4OiA0MCwgeTogNDAgfTtcbmV4cG9ydCBjb25zdCBGTEFHX1NJWkUgPSB7IHg6IDQwLCB5OiA0MCB9O1xuZXhwb3J0IGNvbnN0IEZMQUdfUE9TSVRJT04gPSB7IHg6IDI4MCwgeTogNTYwIH07XG5leHBvcnQgY29uc3QgUExBWUVSX1NQQVdOX1BPU0lUSU9OID0geyB4OiAyMTAsIHk6IDU2MCB9O1xuZXhwb3J0IGNvbnN0IEJVTExFVF9TSVpFID0geyB4OiAxMCwgeTogMTAgfTtcbmV4cG9ydCBjb25zdCBCVUxMRVRfVkVMT0NJVFkgPSAzMDA7XG5leHBvcnQgY29uc3QgUE9XRVJVUF9TSVpFID0geyB4OiA0MCwgeTogNDAgfTtcbmV4cG9ydCBjb25zdCBQTEFZRVJfU1RBVFMgPSB7XG4gICAgW3R5cGVzLlBsYXllclBvd2VyLkRlZmF1bHRdOiB7XG4gICAgICAgIHZlbG9jaXR5OiAxMDAsXG4gICAgICAgIHNob3RDRDogNTAsXG4gICAgfSxcbiAgICBbdHlwZXMuUGxheWVyUG93ZXIuRmlyc3RdOiB7XG4gICAgICAgIHZlbG9jaXR5OiAxMjAsXG4gICAgICAgIHNob3RDRDogNDAsXG4gICAgfSxcbiAgICBbdHlwZXMuUGxheWVyUG93ZXIuU2Vjb25kXToge1xuICAgICAgICB2ZWxvY2l0eTogMTUwLFxuICAgICAgICBzaG90Q0Q6IDMwLFxuICAgIH0sXG59O1xuZXhwb3J0IGNvbnN0IEVORU1ZX1NUQVRTID0ge1xuICAgIFt0eXBlcy5UYW5rVHlwZXMuRGVmYXVsdF06IHtcbiAgICAgICAgdmVsb2NpdHk6IDEwMCxcbiAgICAgICAgc2hvdENEOiA3MCxcbiAgICAgICAgbGl2ZXM6IDEsXG4gICAgfSxcbiAgICBbdHlwZXMuVGFua1R5cGVzLkZhc3RdOiB7XG4gICAgICAgIHZlbG9jaXR5OiAyMDAsXG4gICAgICAgIHNob3RDRDogNjAsXG4gICAgICAgIGxpdmVzOiAxLFxuICAgIH0sXG4gICAgW3R5cGVzLlRhbmtUeXBlcy5Bcm1vcmVkXToge1xuICAgICAgICB2ZWxvY2l0eTogMTIwLFxuICAgICAgICBzaG90Q0Q6IDcwLFxuICAgICAgICBsaXZlczogMyxcbiAgICB9LFxufTtcbi8vIFRpbWVyc1xuZXhwb3J0IGNvbnN0IERFQVRIX0ZSQU1FUyA9IDM1O1xuZXhwb3J0IGNvbnN0IFNQQVdOX0ZSQU1FUyA9IDM1O1xuZXhwb3J0IGNvbnN0IElOVklOQ0lCTEVfRlJBTUVTID0gMjAwO1xuZXhwb3J0IGNvbnN0IEZSRUVaRV9GUkFNRVMgPSAyMDA7XG5leHBvcnQgY29uc3QgUE9XRVJVUF9TUEFXTl9DRCA9IDYwMDtcbmV4cG9ydCBjb25zdCBQT1dFUlVQX0JMSU5LX0ZSQU1FUyA9IDIwMDtcbmV4cG9ydCBjb25zdCBFTkVNWV9TUEFXTl9DRCA9IDQwMDtcbmV4cG9ydCBjb25zdCBTQ1JFRU5fRkFERV9GUkFNRVMgPSAzMDA7XG4vLyBTdGFnZVxuZXhwb3J0IGNvbnN0IEVORU1ZX1NQQVdOX1BPU0lUSU9OID0gW3sgeDogMCwgeTogMCB9LCB7IHg6IDU2MCwgeTogMCB9XTtcbi8vIE1hcFxuZXhwb3J0IGNvbnN0IFRJTEVfU0lERSA9IDIwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uc3RhbnRzLmpzLm1hcCIsImltcG9ydCB7IGdldEFuaW1hdGlvbkluZGV4IH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHsgU0NSRUVOX0ZBREVfRlJBTUVTIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB7IGFzc2V0c0hvbGRlciB9IGZyb20gJy4uL3V0aWxzJztcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb290Jyk7XG5jb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5jb250ZXh0LmZvbnQgPSAnMzBweCBBcmlhbCc7XG5jb250ZXh0LnRleHRBbGlnbiA9ICdjZW50ZXInO1xuZXhwb3J0IGNvbnN0IGdldEFuaW1JbmRleCA9IChhbmltYXRpb25MZW5ndGgsIGZyYW1lc0xlZnQsIHNwcml0ZXNMZW5ndGgpID0+IHtcbiAgICBjb25zdCBzdGVwID0gYW5pbWF0aW9uTGVuZ3RoIC8gc3ByaXRlc0xlbmd0aDtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihmcmFtZXNMZWZ0IC8gc3RlcCk7XG59O1xuZXhwb3J0IGNvbnN0IG1haW4gPSB7XG4gICAgY2FudmFzLFxuICAgIGNvbnRleHQsXG4gICAgY2xlYXJTY3JlZW4oKSB7XG4gICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgfSxcbiAgICByZW5kZXJDaGFpbmdpbmdTdGFnZShsZWZ0KSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZ2V0QW5pbWF0aW9uSW5kZXgoU0NSRUVOX0ZBREVfRlJBTUVTLCBTQ1JFRU5fRkFERV9GUkFNRVMsIGxlZnQpO1xuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIDYwMCwgaW5kZXgpO1xuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDYwMCAtIGluZGV4LCA2MDAsIGluZGV4KTtcbiAgICB9LFxuICAgIHJlbmRlckdhbWVPdmVyKGxlZnQgPSAwKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZ2V0QW5pbWF0aW9uSW5kZXgoU0NSRUVOX0ZBREVfRlJBTUVTLCBTQ1JFRU5fRkFERV9GUkFNRVMsIGxlZnQpO1xuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIDYwMCwgMzAwIC0gaW5kZXgpO1xuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDMwMCArIGluZGV4LCA2MDAsIDMwMCAtIGluZGV4KTtcbiAgICAgICAgaWYgKCFsZWZ0KSB7XG4gICAgICAgICAgICBhc3NldHNIb2xkZXIuc3ByaXRlcy5nYW1lT3Zlcih7IHg6IDI3NSwgeTogMjc1IH0sIHsgeDogNTAsIHk6IDUwIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICByZW5kZXJTdGFydFNjcmVlbigpIHtcbiAgICAgICAgYXNzZXRzSG9sZGVyLnNwcml0ZXMubG9nbyh7IHg6IDEwMCwgeTogMjAwIH0sIHsgeDogNDAwLCB5OiAyMDAgfSk7XG4gICAgICAgIGNvbnRleHQuc3Ryb2tlVGV4dCgnUHJlc3MgYW55IGtleScsIDMwMCwgNTAwKTtcbiAgICB9LFxuICAgIHNob3dQcmVsb2FkZXIocGVyY2VudGFnZSkge1xuICAgICAgICB0aGlzLmNsZWFyU2NyZWVuKCk7XG4gICAgICAgIGNvbnRleHQuc3Ryb2tlVGV4dChgTG9hZGluZy4uLiR7cGVyY2VudGFnZX1gLCAzMDAsIDMwMCk7XG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYWluLmpzLm1hcCIsImltcG9ydCB7IGFzc2V0c0hvbGRlciB9IGZyb20gJy4uL3V0aWxzJztcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmQnKTtcbmNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbmNvbnN0IGRyYXdUYW5rcyA9ICh0YW5rcywgdGFua1Nwcml0ZSkgPT4ge1xuICAgIGlmICghdGFua3MubGVuZ3RoKVxuICAgICAgICByZXR1cm47XG4gICAgbGV0IHkgPSA3MDtcbiAgICBsZXQgY291bnRlciA9IDA7XG4gICAgdGFua3MuZm9yRWFjaCgoXywgaWR4KSA9PiB7XG4gICAgICAgIGlmIChpZHggJSAyID09PSAwKSB7XG4gICAgICAgICAgICB0YW5rU3ByaXRlKHsgeDogNjk1LCB5IH0sIHsgeDogMTUsIHk6IDE1IH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFua1Nwcml0ZSh7IHg6IDY3MCwgeSB9LCB7IHg6IDE1LCB5OiAxNSB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY291bnRlciA9PT0gMikge1xuICAgICAgICAgICAgeSArPSAyMDtcbiAgICAgICAgICAgIGNvdW50ZXIgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY291bnRlciArPSAxO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuZXhwb3J0IGNvbnN0IGRhc2hib2FyZCA9IHtcbiAgICBjYW52YXMsXG4gICAgY29udGV4dCxcbiAgICByZW5kZXIocGxheWVyTGl2ZXMsIHN0YWdlTnVtLCB0YW5rcykge1xuICAgICAgICBjb25zdCB7IG51bWJlckljb25zLCBmbGFnSWNvbiwgcGxheWVySWNvbiwgdGFua0ljb24gfSA9IGFzc2V0c0hvbGRlci5zcHJpdGVzO1xuICAgICAgICBkcmF3VGFua3ModGFua3MsIHRhbmtJY29uKTtcbiAgICAgICAgZmxhZ0ljb24oeyB4OiA2NzAsIHk6IDQ1MCB9LCB7IHg6IDUwLCB5OiA0MCB9KTtcbiAgICAgICAgcGxheWVySWNvbih7IHg6IDY3MCwgeTogMzgwIH0sIHsgeDogMjAsIHk6IDIwIH0pO1xuICAgICAgICBudW1iZXJJY29uc1tzdGFnZU51bV0oeyB4OiA2OTAsIHk6IDQ4NSB9LCB7IHg6IDIwLCB5OiAyMCB9KTtcbiAgICAgICAgbnVtYmVySWNvbnNbcGxheWVyTGl2ZXNdKHsgeDogNzAwLCB5OiAzODAgfSwgeyB4OiAyMCwgeTogMjAgfSk7XG4gICAgfSxcbiAgICBjbGVhclNjcmVlbigpIHtcbiAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICB9LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhc2hib2FyZC5qcy5tYXAiLCJpbXBvcnQgeyBtYWluLCBkYXNoYm9hcmQgfSBmcm9tICcuLi9zY3JlZW5zJztcbmltcG9ydCB7IFBsYXllclBvd2VyLCBEaXJlY3Rpb24sIFRhbmtUeXBlcywgUG93ZXJ1cFR5cGVzLCBUaWxlcywgfSBmcm9tICcuLi90eXBlcyc7XG5jb25zdCBjcmVhdGVTcHJpdGUgPSAoaW1hZ2UsIGNvbnRleHQpID0+IChkeCwgZHksIGRXaWR0aCwgZEhlaWdodCkgPT4gKHBvc2l0aW9uLCBzaXplKSA9PiB7XG4gICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIGR4LCBkeSwgZFdpZHRoLCBkSGVpZ2h0LCBwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBzaXplLngsIHNpemUueSk7XG59O1xuY29uc3Qgc2V0dXBTcHJpdGVzID0gKGltYWdlKSA9PiB7XG4gICAgY29uc3QgbWFpblNwcml0ZSA9IGNyZWF0ZVNwcml0ZShpbWFnZSwgbWFpbi5jb250ZXh0KTtcbiAgICBjb25zdCBkYXNoYm9hcmRTcHJpdGUgPSBjcmVhdGVTcHJpdGUoaW1hZ2UsIGRhc2hib2FyZC5jb250ZXh0KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBwbGF5ZXI6IHtcbiAgICAgICAgICAgIFtQbGF5ZXJQb3dlci5EZWZhdWx0XToge1xuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uVG9wXTogW21haW5TcHJpdGUoMCwgMCwgMTYsIDE1KSwgbWFpblNwcml0ZSgxNiwgMCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Cb3R0b21dOiBbbWFpblNwcml0ZSg2NCwgMCwgMTYsIDE1KSwgbWFpblNwcml0ZSg4MCwgMCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDk2LCAwLCAxNiwgMTUpLCBtYWluU3ByaXRlKDExMiwgMCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5MZWZ0XTogW21haW5TcHJpdGUoMzIsIDAsIDE2LCAxNSksIG1haW5TcHJpdGUoNDgsIDAsIDE2LCAxNSldLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtQbGF5ZXJQb3dlci5GaXJzdF06IHtcbiAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlRvcF06IFttYWluU3ByaXRlKDAsIDMyLjMsIDE2LCAxNSksIG1haW5TcHJpdGUoMTUuNywgMzIuNSwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Cb3R0b21dOiBbbWFpblNwcml0ZSg2NCwgMzIuMywgMTYsIDE1KSwgbWFpblNwcml0ZSg4MCwgMzIuNSwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDk2LCAzMi4zLCAxNiwgMTUpLCBtYWluU3ByaXRlKDExMi4zLCAzMiwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5MZWZ0XTogW21haW5TcHJpdGUoMzEuNywgMzIsIDE2LCAxNSksIG1haW5TcHJpdGUoNDgsIDMyLCAxNiwgMTUpXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbUGxheWVyUG93ZXIuU2Vjb25kXToge1xuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uVG9wXTogW21haW5TcHJpdGUoMCwgNDgsIDE2LCAxNSksIG1haW5TcHJpdGUoMTUuNywgNDgsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uQm90dG9tXTogW21haW5TcHJpdGUoNjQsIDQ4LCAxNiwgMTUpLCBtYWluU3ByaXRlKDgwLCA0OCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDk2LCA0OCwgMTYsIDE1KSwgbWFpblNwcml0ZSgxMTIuMywgNDgsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uTGVmdF06IFttYWluU3ByaXRlKDMxLjcsIDQ4LCAxNiwgMTUpLCBtYWluU3ByaXRlKDQ4LCA0OCwgMTYsIDE1KV0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBlbmVteToge1xuICAgICAgICAgICAgW1RhbmtUeXBlcy5EZWZhdWx0XToge1xuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uVG9wXTogW21haW5TcHJpdGUoMTI4LCAwLCAxNiwgMTUpLCBtYWluU3ByaXRlKDE0NCwgMCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Cb3R0b21dOiBbbWFpblNwcml0ZSgxOTIsIDAsIDE2LCAxNSksIG1haW5TcHJpdGUoMjA4LCAwLCAxNiwgMTUpXSxcbiAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlJpZ2h0XTogW21haW5TcHJpdGUoMjIzLjcsIDAsIDE2LCAxNSksIG1haW5TcHJpdGUoMjM5LjcsIDAsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uTGVmdF06IFttYWluU3ByaXRlKDE2MCwgMCwgMTYsIDE1KSwgbWFpblNwcml0ZSgxNzYsIDAsIDE2LCAxNSldLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtUYW5rVHlwZXMuRmFzdF06IHtcbiAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlRvcF06IFttYWluU3ByaXRlKDEyOCwgODAsIDE2LCAxNSksIG1haW5TcHJpdGUoMTQ0LCA4MCwgMTYsIDE1KV0sXG4gICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Cb3R0b21dOiBbbWFpblNwcml0ZSgxOTIsIDgwLCAxNiwgMTUpLCBtYWluU3ByaXRlKDIwOCwgODAsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uUmlnaHRdOiBbbWFpblNwcml0ZSgyMjQsIDgwLCAxNiwgMTUpLCBtYWluU3ByaXRlKDI0MCwgODAsIDE2LCAxNSldLFxuICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uTGVmdF06IFttYWluU3ByaXRlKDE2MCwgODAsIDE2LCAxNSksIG1haW5TcHJpdGUoMTc2LCA4MCwgMTYsIDE1KV0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW1RhbmtUeXBlcy5Bcm1vcmVkXToge1xuICAgICAgICAgICAgICAgICcxJzoge1xuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlRvcF06IFttYWluU3ByaXRlKDEyOC41LCAxMTEuNzUsIDE0Ljc1LCAxNiksIG1haW5TcHJpdGUoMTQ0LjI1LCAxMTEuNzUsIDE0Ljc1LCAxNildLFxuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLkJvdHRvbV06IFttYWluU3ByaXRlKDE5MS43NSwgMTExLjc1LCAxNS4yNSwgMTYpLCBtYWluU3ByaXRlKDIwNy41LCAxMTEuNzUsIDE1LjI1LCAxNildLFxuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLlJpZ2h0XTogW21haW5TcHJpdGUoMjIyLjc1LCAxMTEuNzUsIDE2LCAxNiksIG1haW5TcHJpdGUoMjM5LCAxMTEuNzUsIDE0Ljc1LCAxNildLFxuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLkxlZnRdOiBbbWFpblNwcml0ZSgxNTksIDExMS43NSwgMTYsIDE2KSwgbWFpblNwcml0ZSgxNzQuNzUsIDExMS43NSwgMTYsIDE2KV0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnMic6IHtcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5Ub3BdOiBbbWFpblNwcml0ZSgwLCAyNDAsIDE0Ljc1LCAxNiksIG1haW5TcHJpdGUoMTYsIDI0MCwgMTQuNzUsIDE2KV0sXG4gICAgICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uQm90dG9tXTogW21haW5TcHJpdGUoNjQsIDI0MCwgMTUuMjUsIDE2KSwgbWFpblNwcml0ZSg4MCwgMjQwLCAxNS4yNSwgMTYpXSxcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDk2LCAyNDAsIDE2LCAxNiksIG1haW5TcHJpdGUoMTEyLCAyNDAsIDE0Ljc1LCAxNildLFxuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLkxlZnRdOiBbbWFpblNwcml0ZSgzMiwgMjQwLCAxNiwgMTYpLCBtYWluU3ByaXRlKDQ4LCAyNDAsIDE2LCAxNildLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJzMnOiB7XG4gICAgICAgICAgICAgICAgICAgIFtEaXJlY3Rpb24uVG9wXTogW21haW5TcHJpdGUoMTI4LCAyNDAsIDE0Ljc1LCAxNiksIG1haW5TcHJpdGUoMTQ0LCAyNDAsIDE0Ljc1LCAxNildLFxuICAgICAgICAgICAgICAgICAgICBbRGlyZWN0aW9uLkJvdHRvbV06IFttYWluU3ByaXRlKDE5MiwgMjQwLCAxNS4yNSwgMTYpLCBtYWluU3ByaXRlKDIwOCwgMjQwLCAxNS4yNSwgMTYpXSxcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5SaWdodF06IFttYWluU3ByaXRlKDIyNCwgMjQwLCAxNiwgMTYpLCBtYWluU3ByaXRlKDI0MCwgMjQwLCAxNC43NSwgMTYpXSxcbiAgICAgICAgICAgICAgICAgICAgW0RpcmVjdGlvbi5MZWZ0XTogW21haW5TcHJpdGUoMTYwLCAyNDAsIDE2LCAxNiksIG1haW5TcHJpdGUoMTc2LCAyNDAsIDE2LCAxNildLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBidWxsZXQ6IHtcbiAgICAgICAgICAgIFtEaXJlY3Rpb24uVG9wXTogW21haW5TcHJpdGUoMzIyLjI1LCAxMDEuNSwgNSwgNS43KV0sXG4gICAgICAgICAgICBbRGlyZWN0aW9uLkJvdHRvbV06IFttYWluU3ByaXRlKDMzOC41LCAxMDEuNSwgNSwgNS43KV0sXG4gICAgICAgICAgICBbRGlyZWN0aW9uLlJpZ2h0XTogW21haW5TcHJpdGUoMzQ1Ljc1LCAxMDEuNSwgNSwgNS43KV0sXG4gICAgICAgICAgICBbRGlyZWN0aW9uLkxlZnRdOiBbbWFpblNwcml0ZSgzMjkuNSwgMTAxLjUsIDUsIDUuNyldLFxuICAgICAgICB9LFxuICAgICAgICBmbGFnOiBtYWluU3ByaXRlKDMwNC41LCAzMywgMTYsIDE1LjI1KSxcbiAgICAgICAgZmxhZ0RlYXRoOiBtYWluU3ByaXRlKDMyMCwgMzMsIDE2LCAxNS4yNSksXG4gICAgICAgIHRhbmtJY29uOiBkYXNoYm9hcmRTcHJpdGUoMzIwLjI1LCAxOTIuNzUsIDguNSwgNy43NSksXG4gICAgICAgIGZsYWdJY29uOiBkYXNoYm9hcmRTcHJpdGUoMzc1LjUsIDE4NCwgMTcsIDE1KSxcbiAgICAgICAgcGxheWVySWNvbjogZGFzaGJvYXJkU3ByaXRlKDM3Ni41LCAxNDQuNSwgOCwgOC41KSxcbiAgICAgICAgbnVtYmVySWNvbnM6IFtcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzMjguNSwgMTg0LCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzMzYuNSwgMTg0LCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNDQuNSwgMTg0LCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNTIuNSwgMTg0LCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNjAuNSwgMTg0LCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzMjguNSwgMTkyLCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzMzYuNSwgMTkyLCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNDQuNSwgMTkyLCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNTIuNSwgMTkyLCA4LCA3KSxcbiAgICAgICAgICAgIGRhc2hib2FyZFNwcml0ZSgzNjAuNSwgMTkyLCA4LCA3KSxcbiAgICAgICAgXSxcbiAgICAgICAgbG9nbzogbWFpblNwcml0ZSgwLCAyNjAsIDM3NSwgMTM3KSxcbiAgICAgICAgdGlsZXM6IHtcbiAgICAgICAgICAgIFtUaWxlcy5CcmljazFdOiBtYWluU3ByaXRlKDI1NiwgMCwgOCwgNyksXG4gICAgICAgICAgICBbVGlsZXMuQnJpY2syXTogbWFpblNwcml0ZSgyNjQsIDAsIDgsIDcpLFxuICAgICAgICAgICAgW1RpbGVzLkJyaWNrM106IG1haW5TcHJpdGUoMjU2LCA4LCA4LCA3KSxcbiAgICAgICAgICAgIFtUaWxlcy5CcmljazRdOiBtYWluU3ByaXRlKDI2NCwgOCwgOCwgNyksXG4gICAgICAgICAgICBbVGlsZXMuU3RlZWxdOiBtYWluU3ByaXRlKDI1NiwgMTYsIDgsIDcpLFxuICAgICAgICAgICAgW1RpbGVzLkljZV06IG1haW5TcHJpdGUoMjg4LCAzMiwgOCwgNyksXG4gICAgICAgICAgICBbVGlsZXMuR3Jhc3NdOiBtYWluU3ByaXRlKDI3MiwgMzIsIDgsIDcpLFxuICAgICAgICAgICAgW1RpbGVzLldhdGVyXTogbWFpblNwcml0ZSgyNTYsIDQwLCA4LCA3KSxcbiAgICAgICAgfSxcbiAgICAgICAgZ2FtZU92ZXI6IG1haW5TcHJpdGUoMjg4LjUsIDE4NCwgMzEuMiwgMTYpLFxuICAgICAgICBwb3dlcnVwOiB7XG4gICAgICAgICAgICBbUG93ZXJ1cFR5cGVzLkhlbG1ldF06IG1haW5TcHJpdGUoMjU1LjUsIDExMiwgMTYsIDE0KSxcbiAgICAgICAgICAgIFtQb3dlcnVwVHlwZXMuU3RvcHdhdGNoXTogbWFpblNwcml0ZSgyNzEuNSwgMTEyLCAxNiwgMTQpLFxuICAgICAgICAgICAgW1Bvd2VydXBUeXBlcy5TdGFyXTogbWFpblNwcml0ZSgzMDMuNSwgMTEyLCAxNiwgMTQpLFxuICAgICAgICAgICAgW1Bvd2VydXBUeXBlcy5HcmVuYWRlXTogbWFpblNwcml0ZSgzMTkuNSwgMTEyLCAxNiwgMTQpLFxuICAgICAgICAgICAgW1Bvd2VydXBUeXBlcy5UYW5rXTogbWFpblNwcml0ZSgzMzUuNSwgMTEyLCAxNiwgMTQpLFxuICAgICAgICB9LFxuICAgICAgICBpbnZpbmNpYmxlOiBbbWFpblNwcml0ZSgyNTYsIDE0NCwgMTUuNywgMTYpLCBtYWluU3ByaXRlKDI3Mi4yLCAxNDQsIDE1LjcsIDE2KV0sXG4gICAgfTtcbn07XG5jb25zdCBzZXR1cFZhcmlhYmxlU3ByaXRlcyA9IChpbWFnZSkgPT4ge1xuICAgIGNvbnN0IG1haW5TcHJpdGUgPSBjcmVhdGVTcHJpdGUoaW1hZ2UsIG1haW4uY29udGV4dCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGFua1NwYXduOiBbXG4gICAgICAgICAgICB7IHNwcml0ZTogbWFpblNwcml0ZSgzMDMsIDk3LCAxNSwgMTQpLCBzaXplOiB7IHg6IDM1LCB5OiAzNSB9IH0sXG4gICAgICAgICAgICB7IHNwcml0ZTogbWFpblNwcml0ZSgzMDMsIDk3LCAxNSwgMTQpLCBzaXplOiB7IHg6IDM1LCB5OiAzNSB9IH0sXG4gICAgICAgICAgICB7IHNwcml0ZTogbWFpblNwcml0ZSgyODgsIDk3LCAxNSwgMTQpLCBzaXplOiB7IHg6IDM1LCB5OiAzNSB9IH0sXG4gICAgICAgICAgICB7IHNwcml0ZTogbWFpblNwcml0ZSgyNzMsIDk3LCAxNSwgMTQpLCBzaXplOiB7IHg6IDMwLCB5OiAzMCB9IH0sXG4gICAgICAgICAgICB7IHNwcml0ZTogbWFpblNwcml0ZSgyNTcsIDk3LCAxNSwgMTQpLCBzaXplOiB7IHg6IDMwLCB5OiAzMCB9IH0sXG4gICAgICAgIF0sXG4gICAgICAgIHRhbmtEZXN0cnVjdGlvbjogW1xuICAgICAgICAgICAgeyBzcHJpdGU6IG1haW5TcHJpdGUoMzM2LCAxMjguNzUsIDMyLCAzMiksIHNpemU6IHsgeDogNjAsIHk6IDYwIH0gfSxcbiAgICAgICAgICAgIHsgc3ByaXRlOiBtYWluU3ByaXRlKDMwNC41LCAxMjguNzUsIDMwLjUsIDMxLjI1KSwgc2l6ZTogeyB4OiA2MCwgeTogNjAgfSB9LFxuICAgICAgICAgICAgeyBzcHJpdGU6IG1haW5TcHJpdGUoMjg4LjI1LCAxMjguNzUsIDE2LCAxNS41KSwgc2l6ZTogeyB4OiA0MCwgeTogNDAgfSB9LFxuICAgICAgICAgICAgeyBzcHJpdGU6IG1haW5TcHJpdGUoMjcyLjI1LCAxMjguNzUsIDE1Ljc1LCAxNC4yNSksIHNpemU6IHsgeDogMzcsIHk6IDM3IH0gfSxcbiAgICAgICAgICAgIHsgc3ByaXRlOiBtYWluU3ByaXRlKDI1OCwgMTI4Ljc1LCAxMy43NSwgMTMuMjUpLCBzaXplOiB7IHg6IDM1LCB5OiAzNSB9IH0sXG4gICAgICAgIF0sXG4gICAgfTtcbn07XG5jbGFzcyBBc3NldHNIb2xkZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnByZWxhb2RlclN0YXRlID0ge1xuICAgICAgICAgICAgcGVyc2VudGFnZTogMCxcbiAgICAgICAgICAgIGlzUnVubmluZzogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcnVuUHJlbG9hZGVyKCkge1xuICAgICAgICBpZiAodGhpcy5wcmVsYW9kZXJTdGF0ZS5pc1J1bm5pbmcpIHtcbiAgICAgICAgICAgIG1haW4uc2hvd1ByZWxvYWRlcih0aGlzLnByZWxhb2RlclN0YXRlLnBlcnNlbnRhZ2UpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJ1blByZWxvYWRlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdG9wUHJlbG9hZGVyKCkge1xuICAgICAgICB0aGlzLnByZWxhb2RlclN0YXRlLmlzUnVubmluZyA9IGZhbHNlO1xuICAgIH1cbiAgICBsb2FkU3ByaXRlKHNyYykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIGltYWdlLnNyYyA9IHNyYztcbiAgICAgICAgICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZSA9IGltYWdlO1xuICAgICAgICAgICAgICAgIHRoaXMuc3ByaXRlcyA9IHNldHVwU3ByaXRlcyhpbWFnZSk7XG4gICAgICAgICAgICAgICAgdGhpcy52YXJpYWJsZVNwcml0ZXMgPSBzZXR1cFZhcmlhYmxlU3ByaXRlcyhpbWFnZSk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsb2FkQXVkaW8oYXVkaW9TcmMpIHtcbiAgICAgICAgdGhpcy5hdWRpbyA9IHt9O1xuICAgICAgICBjb25zdCB0cmFja05hbWVzID0gT2JqZWN0LmtleXMoYXVkaW9TcmMpO1xuICAgICAgICBjb25zdCBjaHVuayA9IE1hdGguZmxvb3IoMTAwIC8gdHJhY2tOYW1lcy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBsb2FkZXJzID0gdHJhY2tOYW1lcy5tYXAodHJhY2tOYW1lID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKCk7XG4gICAgICAgICAgICBhdWRpby5zcmMgPSBhdWRpb1NyY1t0cmFja05hbWVdO1xuICAgICAgICAgICAgYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignY2FucGxheXRocm91Z2gnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb1t0cmFja05hbWVdID0gYXVkaW87XG4gICAgICAgICAgICAgICAgdGhpcy5wcmVsYW9kZXJTdGF0ZS5wZXJzZW50YWdlICs9IGNodW5rO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChsb2FkZXJzKTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgYXNzZXRzSG9sZGVyID0gbmV3IEFzc2V0c0hvbGRlcigpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXNzZXRzSG9sZGVyLmpzLm1hcCIsImltcG9ydCB7IENvbnRyb2xLZXlzIH0gZnJvbSAnLi90eXBlcyc7XG5leHBvcnQgY2xhc3MgS2V5Ym9hcmQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnF1ZXVlID0gbmV3IFNldCgpO1xuICAgIH1cbiAgICBoYW5kbGVFdmVudChldmVudCwgZ2FtZSkge1xuICAgICAgICBjb25zdCB7IGNvZGUsIHR5cGUgfSA9IGV2ZW50O1xuICAgICAgICBpZiAoZ2FtZS5pc1dhaXRpbmdGb3JSZXN0YXJ0KCkpIHtcbiAgICAgICAgICAgIHJldHVybiBnYW1lLnJlc3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2FtZS5pc1N0YXJ0U2NyZWVuKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2FtZS5wbGF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFDb250cm9sS2V5c1tjb2RlXSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHR5cGUgPT09ICdrZXlkb3duJykge1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS5hZGQoQ29udHJvbEtleXNbY29kZV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS5kZWxldGUoQ29udHJvbEtleXNbY29kZV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldEtleSgpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5xdWV1ZSkucG9wKCk7XG4gICAgfVxuICAgIGxpc3RlblRvRXZlbnRzKGdhbWUpIHtcbiAgICAgICAgWydrZXlkb3duJywgJ2tleXVwJ10uZm9yRWFjaChldmVudE5hbWUgPT4ge1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUV2ZW50KGV2ZW50LCBnYW1lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY29uc3Qga2V5Ym9hcmQgPSBuZXcgS2V5Ym9hcmQoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWtleWJvYXJkLmpzLm1hcCIsImV4cG9ydCBjb25zdCBtYXBzID0gW1xuICAgIFtcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAzLCA0LCA1LCA1LCAzLCA0LCAwLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDUsIDUsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFsxLCAyLCAwLCAwLCAxLCAyLCAxLCAyLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAyLCAxLCAyLCAwLCAwLCAxLCAyXSxcbiAgICAgICAgWzUsIDUsIDAsIDAsIDMsIDQsIDMsIDQsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDMsIDQsIDMsIDQsIDAsIDAsIDUsIDVdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMywgNCwgMSwgMiwgMywgNCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAzLCA0LCAxLCAyLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDEsIDIsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgMywgNCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCAxLCAyLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDAsIDEsIDIsIDEsIDIsIDAsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDMsIDQsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMywgMCwgMCwgNCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAyLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICBdLFxuICAgIFtcbiAgICAgICAgWzAsIDAsIDAsIDAsIDEsIDIsIDUsIDUsIDEsIDIsIDEsIDIsIDUsIDUsIDEsIDIsIDUsIDUsIDEsIDIsIDEsIDIsIDUsIDUsIDEsIDIsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMywgNCwgNSwgNSwgMywgNCwgMywgNCwgNSwgNSwgMywgNCwgNSwgNSwgMywgNCwgMywgNCwgNSwgNSwgMywgNCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgNSwgNSwgMCwgMCwgMSwgMiwgMCwgMCwgNSwgNSwgMSwgMiwgNSwgNSwgMCwgMCwgMSwgMiwgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCA1LCA1LCAwLCAwLCAzLCA0LCAwLCAwLCA1LCA1LCAzLCA0LCA1LCA1LCAwLCAwLCAzLCA0LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAxLCAyLCAwLCAwLCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCA3LCAwLCAwLCAxLCAyLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDMsIDQsIDAsIDAsIDcsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDAsIDMsIDQsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgNywgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAzLCA0LCAwLCAwLCA3LCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDcsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgNywgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgMCwgMywgNCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCA1LCAwLCA2LCA2LCA2LCA2LCA2LCAwLCA3LCAwLCA3LCAwLCA3LCA3LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDUsIDcsIDYsIDYsIDYsIDYsIDYsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMSwgMiwgMCwgMCwgNSwgMCwgNiwgNiwgNiwgNiwgNywgMCwgNywgMCwgNywgMCwgNywgNywgMCwgMCwgMSwgMiwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAzLCA0LCAwLCAwLCA1LCA3LCA2LCA2LCA2LCA2LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCAwLCAzLCA0LCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDEsIDIsIDAsIDAsIDcsIDAsIDYsIDYsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDAsIDcsIDcsIDAsIDAsIDEsIDIsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMywgNCwgMCwgMCwgNywgNywgNiwgNiwgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgNywgMCwgMCwgMywgNCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCAwLCA3LCA3LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDcsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCA1LCA1LCAxLCAyLCA1LCA1LCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDUsIDUsIDMsIDQsIDUsIDUsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDIsIDEsIDIsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMywgMCwgMCwgNCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAyLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICBdLFxuXTtcbmV4cG9ydCBjb25zdCB0YW5rcyA9IFtbMiwgMiwgMCwgMCwgMSwgMiwgMSwgMCwgMCwgMF0sIFsyLCAyLCAwLCAwLCAxLCAyLCAxLCAwLCAwLCAwXV07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdGFnZUNvbmZpZy5qcy5tYXAiLCJpbXBvcnQgeyBUaWxlcywgTGF5ZXJzIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBUSUxFX1NJREUgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBhc3NldHNIb2xkZXIgfSBmcm9tICcuL3V0aWxzJztcbmV4cG9ydCBjb25zdCByaWdpZCA9IFtUaWxlcy5CcmljazEsIFRpbGVzLkJyaWNrMiwgVGlsZXMuQnJpY2szLCBUaWxlcy5CcmljazQsIFRpbGVzLlN0ZWVsLCBUaWxlcy5XYXRlcl07XG5leHBvcnQgY29uc3QgYnVsbGV0VGhyb3VnaCA9IFtUaWxlcy5HcmFzcywgVGlsZXMuV2F0ZXIsIFRpbGVzLk5vbmVdO1xuY29uc3QgbGF5ZXNyTWFwID0ge1xuICAgIFtMYXllcnMudW5kZXJdOiBbVGlsZXMuSWNlLCBUaWxlcy5XYXRlcl0sXG4gICAgW0xheWVycy5tYWluXTogW1RpbGVzLkJyaWNrMSwgVGlsZXMuQnJpY2syLCBUaWxlcy5CcmljazMsIFRpbGVzLkJyaWNrNCwgVGlsZXMuU3RlZWxdLFxuICAgIFtMYXllcnMub3Zlcl06IFtUaWxlcy5HcmFzc10sXG59O1xuZXhwb3J0IGNsYXNzIFRpbGVNYXAge1xuICAgIGNvbnN0cnVjdG9yKHRpbGVzKSB7XG4gICAgICAgIHRoaXMudGlsZXMgPSB0aWxlcy5tYXAocm93ID0+IFsuLi5yb3ddKTtcbiAgICB9XG4gICAgZGVzdHJveShwb2ludCkge1xuICAgICAgICBjb25zdCB4SW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKHBvaW50LnggLyBUSUxFX1NJREUpKTtcbiAgICAgICAgY29uc3QgeUluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihwb2ludC55IC8gVElMRV9TSURFKSk7XG4gICAgICAgIHRoaXMudGlsZXNbeUluZGV4XVt4SW5kZXhdID0gVGlsZXMuTm9uZTtcbiAgICB9XG4gICAgbG9va3VwKHBvaW50KSB7XG4gICAgICAgIGNvbnN0IHhJbmRleCA9IE1hdGgubWluKE1hdGgubWF4KDAsIE1hdGguZmxvb3IocG9pbnQueCAvIFRJTEVfU0lERSkpLCAyOSk7XG4gICAgICAgIGNvbnN0IHlJbmRleCA9IE1hdGgubWluKE1hdGgubWF4KDAsIE1hdGguZmxvb3IocG9pbnQueSAvIFRJTEVfU0lERSkpLCAyOSk7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IHRoaXMudGlsZXNbeUluZGV4XVt4SW5kZXhdLCBwb3NpdGlvbjogeyB4OiB4SW5kZXggKiBUSUxFX1NJREUsIHk6IHlJbmRleCAqIFRJTEVfU0lERSB9IH07XG4gICAgfVxuICAgIGxvb2t1cFJhbmdlKHBvaW50MSwgcG9pbnQyKSB7XG4gICAgICAgIGxldCBpbkJldHdlZW5Qb2ludHMgPSBbXTtcbiAgICAgICAgY29uc3QgcmFuZ2VYID0gTWF0aC5hYnMocG9pbnQxLnggLSBwb2ludDIueCk7XG4gICAgICAgIGNvbnN0IHJhbmdlWSA9IE1hdGguYWJzKHBvaW50MS55IC0gcG9pbnQyLnkpO1xuICAgICAgICBpZiAocmFuZ2VYID4gMCAmJiByYW5nZVggPiBUSUxFX1NJREUpIHtcbiAgICAgICAgICAgIC8vIENoZWNrcyB0aWxlIGluIGJldHdlZW4gdGFuayBlZGdlc1xuICAgICAgICAgICAgaW5CZXR3ZWVuUG9pbnRzLnB1c2goeyB4OiBwb2ludDEueCArIFRJTEVfU0lERSwgeTogcG9pbnQxLnkgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmFuZ2VZID4gMCAmJiByYW5nZVkgPiBUSUxFX1NJREUpIHtcbiAgICAgICAgICAgIGluQmV0d2VlblBvaW50cy5wdXNoKHsgeDogcG9pbnQxLngsIHk6IHBvaW50MS55ICsgVElMRV9TSURFIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbcG9pbnQxLCAuLi5pbkJldHdlZW5Qb2ludHMsIHBvaW50Ml0ubWFwKHBvaW50ID0+IHRoaXMubG9va3VwKHBvaW50KSk7XG4gICAgfVxuICAgIHJlbmRlckxheWVyKG5hbWUpIHtcbiAgICAgICAgdGhpcy50aWxlcy5mb3JFYWNoKChyb3csIHkpID0+IHtcbiAgICAgICAgICAgIHJvdy5mb3JFYWNoKCh0aWxlLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXllc3JNYXBbbmFtZV0uaW5jbHVkZXModGlsZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBhc3NldHNIb2xkZXIuc3ByaXRlcy50aWxlc1t0aWxlXSh7IHg6IHggKiBUSUxFX1NJREUsIHk6IHkgKiBUSUxFX1NJREUgfSwgeyB4OiBUSUxFX1NJREUsIHk6IFRJTEVfU0lERSB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlTWFwLmpzLm1hcCIsImltcG9ydCB7IGFzc2V0c0hvbGRlciB9IGZyb20gJy4uL3V0aWxzJztcbmV4cG9ydCBjbGFzcyBTb3VuZE1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHRyYWNrTmFtZXMpIHtcbiAgICAgICAgdGhpcy5zZXR1cFRyYWNrcyh0cmFja05hbWVzKTtcbiAgICB9XG4gICAgc2V0dXBUcmFja3ModHJhY2tOYW1lcykge1xuICAgICAgICB0aGlzLnRyYWNrcyA9IHRyYWNrTmFtZXMucmVkdWNlKChhY2MsIHRyYWNrKSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRyYWNrID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGFjY1t0cmFja10gPSBhc3NldHNIb2xkZXIuYXVkaW9bdHJhY2tdLmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB0cmFja05hbWUsIGxvb3AgfSA9IHRyYWNrO1xuICAgICAgICAgICAgICAgIGFjY1t0cmFja05hbWVdID0gYXNzZXRzSG9sZGVyLmF1ZGlvW3RyYWNrTmFtZV0uY2xvbmVOb2RlKCk7XG4gICAgICAgICAgICAgICAgYWNjW3RyYWNrTmFtZV0ubG9vcCA9IGxvb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSk7XG4gICAgfVxuICAgIHBsYXkodHJhY2tOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYWNrc1t0cmFja05hbWVdLnBsYXkoKTtcbiAgICB9XG4gICAgcGF1c2UodHJhY2tOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYWNrc1t0cmFja05hbWVdLnBhdXNlKCk7XG4gICAgfVxuICAgIHBhdXNlQWxsKCkge1xuICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMudHJhY2tzKS5mb3JFYWNoKHRyYWNrID0+IHRyYWNrLnBhdXNlKCkpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNvdW5kTWFuYWdlci5qcy5tYXAiLCJleHBvcnQgY2xhc3MgVGltZU1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnRpbWVycyA9IHt9O1xuICAgIH1cbiAgICBzZXRUaW1lcih0aW1lck5hbWUsIGZyYW1lTGVuZ3RoKSB7XG4gICAgICAgIHRoaXMudGltZXJzW3RpbWVyTmFtZV0gPSBmcmFtZUxlbmd0aDtcbiAgICB9XG4gICAgZ2V0VGltZXIodGltZXJOYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVyc1t0aW1lck5hbWVdO1xuICAgIH1cbiAgICBzb21lKHRpbWVycykge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy50aW1lcnMpLnNvbWUoZW50cnkgPT4gdGltZXJzLmluY2x1ZGVzKGVudHJ5WzBdKSAmJiBlbnRyeVsxXSA+PSAwKTtcbiAgICB9XG4gICAgZGVjcmVtZW50VGltZXJzKCkge1xuICAgICAgICBjb25zdCB0b1JlbW92ZSA9IE9iamVjdC5lbnRyaWVzKHRoaXMudGltZXJzKS5maWx0ZXIoZW50cnkgPT4gZW50cnlbMV0gPT09IDApO1xuICAgICAgICBpZiAodG9SZW1vdmUubGVuZ3RoKSB7XG4gICAgICAgICAgICB0b1JlbW92ZS5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy50aW1lcnNbZW50cnlbMF1dO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmtleXModGhpcy50aW1lcnMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIHRoaXMudGltZXJzW2tleV0gLT0gMTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGltZU1hbmFnZXIuanMubWFwIiwiZXhwb3J0IGNsYXNzIEVudGl0eSB7XG4gICAgY29uc3RydWN0b3IocG9zaXRpb24sIHNpemUpIHtcbiAgICAgICAgdGhpcy5pZCA9IEVudGl0eS5udW1iZXJHZW47XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICAgICAgRW50aXR5Lm51bWJlckdlbiArPSAxO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7IH1cbiAgICByZW5kZXIoKSB7IH1cbiAgICByZXNvbHZlRW50aXR5Q29sbGlzaW9uKG90aGVyKSB7IH1cbiAgICBnZXRCb3VuZGluZ0JveCgpIHtcbiAgICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLnBvc2l0aW9uO1xuICAgICAgICBjb25zdCB7IHg6IHdpZHRoLCB5OiBoZWlnaHQgfSA9IHRoaXMuc2l6ZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHgxOiB4LFxuICAgICAgICAgICAgeDI6IHggKyB3aWR0aCxcbiAgICAgICAgICAgIHkxOiB5LFxuICAgICAgICAgICAgeTI6IHkgKyBoZWlnaHQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGRlY29uc3RydWN0KCkgeyB9XG59XG5FbnRpdHkubnVtYmVyR2VuID0gMDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVudGl0eS5qcy5tYXAiLCJpbXBvcnQgeyBFbnRpdHkgfSBmcm9tICcuL0VudGl0eSc7XG5pbXBvcnQgeyBERUxUQV9USU1FIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmltcG9ydCB7IERpcmVjdGlvbiB9IGZyb20gJy4uL3R5cGVzJztcbmV4cG9ydCBjbGFzcyBNb3ZhYmxlIGV4dGVuZHMgRW50aXR5IHtcbiAgICBjb25zdHJ1Y3Rvcihwb3NpdGlvbiwgc2l6ZSwgZGlyZWN0aW9uKSB7XG4gICAgICAgIHN1cGVyKHBvc2l0aW9uLCBzaXplKTtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgICAgIHRoaXMucHJldlBvc2l0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgcG9zaXRpb24pO1xuICAgIH1cbiAgICByZXNvbHZlRWRnZUNvbGxpc2lvbigpIHsgfVxuICAgIHJlc29sdmVUaWxlQ29sbGlzaW9uKHRpbGVzLCB0aWxlTWFwKSB7IH1cbiAgICByZXNvbHZlRW50aXR5Q29sbGlzaW9uKG90aGVyKSB7IH1cbiAgICBtb3ZlKHZlbG9jaXR5KSB7XG4gICAgICAgIHRoaXMucHJldlBvc2l0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wb3NpdGlvbik7XG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlRvcCkge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi55IC09IHZlbG9jaXR5ICogREVMVEFfVElNRTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkJvdHRvbSkge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi55ICs9IHZlbG9jaXR5ICogREVMVEFfVElNRTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkxlZnQpIHtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueCAtPSB2ZWxvY2l0eSAqIERFTFRBX1RJTUU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5SaWdodCkge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi54ICs9IHZlbG9jaXR5ICogREVMVEFfVElNRTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnb0JhY2soKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByZXZQb3NpdGlvbik7XG4gICAgfVxuICAgIGFuaW1hdGVNb3ZlbWVudChzcHJpdGVzKSB7XG4gICAgICAgIGxldCBkaXN0YW5jZTtcbiAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uTGVmdCB8fCB0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlJpZ2h0KSB7XG4gICAgICAgICAgICBkaXN0YW5jZSA9IHRoaXMucG9zaXRpb24ueDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRpc3RhbmNlID0gdGhpcy5wb3NpdGlvbi55O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gTWF0aC5mbG9vcihkaXN0YW5jZSAvIDAuMykgJSBzcHJpdGVzLmxlbmd0aDtcbiAgICAgICAgc3ByaXRlc1tpbmRleF0odGhpcy5wb3NpdGlvbiwgdGhpcy5zaXplKTtcbiAgICB9XG4gICAgaXNPdXRPZlNjcmVlbigpIHtcbiAgICAgICAgY29uc3QgYm94ID0gdGhpcy5nZXRCb3VuZGluZ0JveCgpO1xuICAgICAgICByZXR1cm4gYm94LnkxIDwgMCB8fCBib3gueTIgPiA2MDAgfHwgYm94LngxIDwgMCB8fCBib3gueDIgPiA2MDA7XG4gICAgfVxuICAgIGdldEZyb250Q29sbGlzaW9uUG9pbnRzKCkge1xuICAgICAgICBjb25zdCB7IHgxLCB4MiwgeTEsIHkyIH0gPSB0aGlzLmdldEJvdW5kaW5nQm94KCk7XG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlRvcCkge1xuICAgICAgICAgICAgcmV0dXJuIFt7IHg6IHgxLCB5OiB5MSB9LCB7IHg6IHgyLCB5OiB5MSB9XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlJpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gW3sgeDogeDIsIHk6IHkxIH0sIHsgeDogeDIsIHk6IHkyIH1dO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uQm90dG9tKSB7XG4gICAgICAgICAgICByZXR1cm4gW3sgeDogeDEsIHk6IHkyIH0sIHsgeDogeDIsIHk6IHkyIH1dO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uTGVmdCkge1xuICAgICAgICAgICAgcmV0dXJuIFt7IHg6IHgxLCB5OiB5MSB9LCB7IHg6IHgxLCB5OiB5MiB9XTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1vdmFibGUuanMubWFwIiwiaW1wb3J0IHsgTW92YWJsZSB9IGZyb20gJy4vTW92YWJsZSc7XG5pbXBvcnQgeyBCVUxMRVRfU0laRSwgREVBVEhfRlJBTUVTLCBUSUxFX1NJREUgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgZW50aXR5TWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzJztcbmltcG9ydCB7IERpcmVjdGlvbiB9IGZyb20gJy4uL3R5cGVzJztcbmV4cG9ydCBjbGFzcyBUYW5rIGV4dGVuZHMgTW92YWJsZSB7XG4gICAgY29uc3RydWN0b3IocG9zaXRpb24sIHNpemUsIGRpcmVjdGlvbikge1xuICAgICAgICBzdXBlcihwb3NpdGlvbiwgc2l6ZSwgZGlyZWN0aW9uKTtcbiAgICB9XG4gICAgc2hvdChjZCkge1xuICAgICAgICBjb25zdCBzaG90Q0QgPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdzaG90Q0QnKTtcbiAgICAgICAgaWYgKHNob3RDRClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGJ1bGxldFBvc2l0aW9uO1xuICAgICAgICBjb25zdCB7IHg6IHdpZHRoLCB5OiBoZWlnaHQgfSA9IEJVTExFVF9TSVpFO1xuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Ub3ApIHtcbiAgICAgICAgICAgIGJ1bGxldFBvc2l0aW9uID0geyB4OiB0aGlzLnNpemUueCAvIDIgKyB0aGlzLnBvc2l0aW9uLnggLSB3aWR0aCAvIDIsIHk6IHRoaXMucG9zaXRpb24ueSAtIGhlaWdodCB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uUmlnaHQpIHtcbiAgICAgICAgICAgIGJ1bGxldFBvc2l0aW9uID0geyB4OiB0aGlzLnNpemUueCArIHRoaXMucG9zaXRpb24ueCwgeTogdGhpcy5zaXplLnkgLyAyICsgdGhpcy5wb3NpdGlvbi55IC0gaGVpZ2h0IC8gMiB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uQm90dG9tKSB7XG4gICAgICAgICAgICBidWxsZXRQb3NpdGlvbiA9IHsgeDogdGhpcy5zaXplLnggLyAyICsgdGhpcy5wb3NpdGlvbi54IC0gd2lkdGggLyAyLCB5OiB0aGlzLnNpemUueSArIHRoaXMucG9zaXRpb24ueSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYnVsbGV0UG9zaXRpb24gPSB7IHg6IHRoaXMucG9zaXRpb24ueCAtIHdpZHRoLCB5OiB0aGlzLnNpemUueSAvIDIgKyB0aGlzLnBvc2l0aW9uLnkgLSBoZWlnaHQgLyAyIH07XG4gICAgICAgIH1cbiAgICAgICAgZW50aXR5TWFuYWdlci5zcGF3bkVudGl0eSgnQnVsbGV0JywgYnVsbGV0UG9zaXRpb24sIHRoaXMuZGlyZWN0aW9uLCB0aGlzKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignc2hvdENEJywgY2QpO1xuICAgIH1cbiAgICBkaWUoKSB7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ2RlYXRoJywgREVBVEhfRlJBTUVTKTtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheSgnZXhwbG9kZScpO1xuICAgICAgICBlbnRpdHlNYW5hZ2VyLnRvUmVtb3ZlKHRoaXMuaWQpO1xuICAgIH1cbiAgICBmb3JnaXZlQ29sbGlzaW9uKHRpbGUpIHtcbiAgICAgICAgY29uc3QgW3BvaW50MSwgcG9pbnQyXSA9IHRoaXMuZ2V0RnJvbnRDb2xsaXNpb25Qb2ludHMoKTtcbiAgICAgICAgY29uc3QgdGlsZVBvcyA9IHRpbGUucG9zaXRpb247XG4gICAgICAgIGxldCBkaWZmLCBkZXN0aW5hdGlvbiA9IHsgeDogdGhpcy5wcmV2UG9zaXRpb24ueCwgeTogdGhpcy5wcmV2UG9zaXRpb24ueSB9O1xuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Ub3AgfHwgdGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Cb3R0b20pIHtcbiAgICAgICAgICAgIGlmICh0aWxlUG9zLnggPiBwb2ludDEueCkge1xuICAgICAgICAgICAgICAgIGRpZmYgPSB0aWxlUG9zLnggLSBwb2ludDIueDtcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi54ID0gdGlsZVBvcy54IC0gdGhpcy5zaXplLng7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkaWZmID0gdGlsZVBvcy54ICsgVElMRV9TSURFIC0gcG9pbnQxLng7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb24ueCA9IHRpbGVQb3MueCArIFRJTEVfU0lERTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkxlZnQgfHwgdGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5SaWdodCkge1xuICAgICAgICAgICAgaWYgKHRpbGVQb3MueSA+IHBvaW50MS55KSB7XG4gICAgICAgICAgICAgICAgZGlmZiA9IHRpbGVQb3MueSAtIHBvaW50Mi55O1xuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLnkgPSB0aWxlUG9zLnkgLSB0aGlzLnNpemUueTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRpZmYgPSB0aWxlUG9zLnkgKyBUSUxFX1NJREUgLSBwb2ludDEueTtcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi55ID0gdGlsZVBvcy55ICsgVElMRV9TSURFO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChNYXRoLmFicyhkaWZmKSA8IDUpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXN0aW5hdGlvbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGFuay5qcy5tYXAiLCJpbXBvcnQgeyBQbGF5ZXIsIEVuZW15LCBQb3dlcnVwLCBGbGFnLCBUYW5rLCBCdWxsZXQgfSBmcm9tICcuLyc7XG5leHBvcnQgZnVuY3Rpb24gaXNUYW5rKGVudGl0eSkge1xuICAgIHJldHVybiBlbnRpdHkgaW5zdGFuY2VvZiBUYW5rO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzUGxheWVyKGVudGl0eSkge1xuICAgIHJldHVybiBlbnRpdHkgaW5zdGFuY2VvZiBQbGF5ZXI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNFbmVteShlbnRpdHkpIHtcbiAgICByZXR1cm4gZW50aXR5IGluc3RhbmNlb2YgRW5lbXk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCdWxsZXQoZW50aXR5KSB7XG4gICAgcmV0dXJuIGVudGl0eSBpbnN0YW5jZW9mIEJ1bGxldDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0ZsYWcoZW50aXR5KSB7XG4gICAgcmV0dXJuIGVudGl0eSBpbnN0YW5jZW9mIEZsYWc7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNQb3dlcnVwKGVudGl0eSkge1xuICAgIHJldHVybiBlbnRpdHkgaW5zdGFuY2VvZiBQb3dlcnVwO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3VhcmRzLmpzLm1hcCIsImltcG9ydCB7IEVudGl0eSB9IGZyb20gJy4vRW50aXR5JztcbmltcG9ydCB7IFBPV0VSVVBfU0laRSwgUE9XRVJVUF9TUEFXTl9DRCwgUE9XRVJVUF9CTElOS19GUkFNRVMgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgU291bmRNYW5hZ2VyLCBlbnRpdHlNYW5hZ2VyLCBUaW1lTWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzJztcbmltcG9ydCB7IGFzc2V0c0hvbGRlciB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7IGlzUGxheWVyIH0gZnJvbSAnLi9ndWFyZHMnO1xuZXhwb3J0IGNsYXNzIFBvd2VydXBFdmVudHMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm9ic2VydmVycyA9IHt9O1xuICAgIH1cbiAgICBzdWJzY3JpYmUoZW50aXR5SWQsIG9ic2VydmVyKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzW2VudGl0eUlkXSA9IG9ic2VydmVyO1xuICAgIH1cbiAgICB1bnN1YnNjcmliZShlbnRpdHlJZCkge1xuICAgICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbZW50aXR5SWRdO1xuICAgIH1cbiAgICBub3RpZnkoZXZlbnRUeXBlKSB7XG4gICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5vYnNlcnZlcnMpLmZvckVhY2goKG9ic2VydmVyKSA9PiBvYnNlcnZlcihldmVudFR5cGUpKTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgcG93ZXJ1cEV2ZW50cyA9IG5ldyBQb3dlcnVwRXZlbnRzKCk7XG5leHBvcnQgY2xhc3MgUG93ZXJ1cCBleHRlbmRzIEVudGl0eSB7XG4gICAgY29uc3RydWN0b3IodHlwZSwgcG9zaXRpb24pIHtcbiAgICAgICAgc3VwZXIocG9zaXRpb24sIE9iamVjdC5hc3NpZ24oe30sIFBPV0VSVVBfU0laRSkpO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyID0gbmV3IFRpbWVNYW5hZ2VyKCk7XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyID0gbmV3IFNvdW5kTWFuYWdlcihbJ3Bvd2VydXAnXSk7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ2xpdmUnLCBQT1dFUlVQX1NQQVdOX0NEKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBjb25zdCBsaXZlc0xlZnQgPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdsaXZlJyk7XG4gICAgICAgIGlmIChsaXZlc0xlZnQgPT09IDApIHtcbiAgICAgICAgICAgIGVudGl0eU1hbmFnZXIudG9SZW1vdmUodGhpcy5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGl2ZXNMZWZ0ID09PSBQT1dFUlVQX0JMSU5LX0ZSQU1FUykge1xuICAgICAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignYmxpbmsnLCBQT1dFUlVQX0JMSU5LX0ZSQU1FUyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5kZWNyZW1lbnRUaW1lcnMoKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBibGlua0xlZnQgPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdibGluaycpO1xuICAgICAgICBpZiAoYmxpbmtMZWZ0ICYmIGJsaW5rTGVmdCAlIDUwID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBhc3NldHNIb2xkZXIuc3ByaXRlcy5wb3dlcnVwW3RoaXMudHlwZV0odGhpcy5wb3NpdGlvbiwgdGhpcy5zaXplKTtcbiAgICB9XG4gICAgcmVzb2x2ZUVudGl0eUNvbGxpc2lvbihvdGhlcikge1xuICAgICAgICBpZiAoaXNQbGF5ZXIob3RoZXIpKSB7XG4gICAgICAgICAgICBlbnRpdHlNYW5hZ2VyLnRvUmVtb3ZlKHRoaXMuaWQpO1xuICAgICAgICAgICAgcG93ZXJ1cEV2ZW50cy5ub3RpZnkodGhpcy50eXBlKTtcbiAgICAgICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXkoJ3Bvd2VydXAnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvd2VydXAuanMubWFwIiwiaW1wb3J0IHsgVGFuayB9IGZyb20gJy4vVGFuayc7XG5pbXBvcnQgeyBhc3NldHNIb2xkZXIsIGFuaW1hdGVWYXJpYWJsZVNwcml0ZXMgfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgeyBEaXJlY3Rpb24sIFBvd2VydXBUeXBlcywgUGxheWVyUG93ZXIsIENvbnRyb2xLZXlzIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgUExBWUVSX1NQQVdOX1BPU0lUSU9OLCBUQU5LX1NJWkUsIFBMQVlFUl9TVEFUUywgU1BBV05fRlJBTUVTLCBERUFUSF9GUkFNRVMsIElOVklOQ0lCTEVfRlJBTUVTLCB9IGZyb20gJy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBwb3dlcnVwRXZlbnRzIH0gZnJvbSAnLi9Qb3dlcnVwJztcbmltcG9ydCB7IGtleWJvYXJkIH0gZnJvbSAnLi4va2V5Ym9hcmQnO1xuaW1wb3J0IHsgU291bmRNYW5hZ2VyLCBUaW1lTWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzJztcbmltcG9ydCB7IGlzUG93ZXJ1cCwgaXNCdWxsZXQgfSBmcm9tICcuL2d1YXJkcyc7XG5mdW5jdGlvbiBwb3dlcnVwT2JzZXJ2ZXIocG93ZXJ1cFR5cGUpIHtcbiAgICBpZiAocG93ZXJ1cFR5cGUgPT09IFBvd2VydXBUeXBlcy5UYW5rKSB7XG4gICAgICAgIHRoaXMubGl2ZXMgKz0gMTtcbiAgICB9XG4gICAgZWxzZSBpZiAocG93ZXJ1cFR5cGUgPT09IFBvd2VydXBUeXBlcy5IZWxtZXQpIHtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignaW52aW5jaWJsZScsIElOVklOQ0lCTEVfRlJBTUVTKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocG93ZXJ1cFR5cGUgPT09IFBvd2VydXBUeXBlcy5TdGFyICYmIHRoaXMucG93ZXIgPCBQbGF5ZXJQb3dlci5TZWNvbmQpIHtcbiAgICAgICAgdGhpcy5wb3dlciArPSAxO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBQbGF5ZXIgZXh0ZW5kcyBUYW5rIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoT2JqZWN0LmFzc2lnbih7fSwgUExBWUVSX1NQQVdOX1BPU0lUSU9OKSwgT2JqZWN0LmFzc2lnbih7fSwgVEFOS19TSVpFKSwgRGlyZWN0aW9uLlRvcCk7XG4gICAgICAgIHRoaXMubGl2ZXMgPSAzO1xuICAgICAgICB0aGlzLnBvd2VyID0gUGxheWVyUG93ZXIuRGVmYXVsdDtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlciA9IG5ldyBUaW1lTWFuYWdlcigpO1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlciA9IG5ldyBTb3VuZE1hbmFnZXIoW1xuICAgICAgICAgICAgJ2V4cGxvZGUnLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRyYWNrTmFtZTogJ25ldXRyYWwnLFxuICAgICAgICAgICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRyYWNrTmFtZTogJ21vdmUnLFxuICAgICAgICAgICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignc3Bhd24nLCBTUEFXTl9GUkFNRVMpO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdpbnZpbmNpYmxlJywgSU5WSU5DSUJMRV9GUkFNRVMpO1xuICAgICAgICBwb3dlcnVwRXZlbnRzLnN1YnNjcmliZSh0aGlzLmlkLCBwb3dlcnVwT2JzZXJ2ZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5kZWNyZW1lbnRUaW1lcnMoKTtcbiAgICAgICAgY29uc3QgZGVhdGggPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdkZWF0aCcpO1xuICAgICAgICBjb25zdCBzcGF3biA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ3NwYXduJyk7XG4gICAgICAgIGlmIChkZWF0aCkge1xuICAgICAgICAgICAgaWYgKGRlYXRoID09PSAxKVxuICAgICAgICAgICAgICAgIHRoaXMucmVzcGF3bih0cnVlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzcGF3bikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXkoJ25ldXRyYWwnKTtcbiAgICAgICAgdGhpcy5wcm9jZXNzSW5wdXQoKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBzcGF3biA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ3NwYXduJyk7XG4gICAgICAgIGNvbnN0IGRlYXRoID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignZGVhdGgnKTtcbiAgICAgICAgY29uc3QgaW52aW5jaWJsZSA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ2ludmluY2libGUnKTtcbiAgICAgICAgaWYgKHNwYXduKSB7XG4gICAgICAgICAgICByZXR1cm4gYW5pbWF0ZVZhcmlhYmxlU3ByaXRlcyh0aGlzLnBvc2l0aW9uLCBhc3NldHNIb2xkZXIudmFyaWFibGVTcHJpdGVzLnRhbmtTcGF3biwgU1BBV05fRlJBTUVTLCBzcGF3bik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVhdGgpIHtcbiAgICAgICAgICAgIHJldHVybiBhbmltYXRlVmFyaWFibGVTcHJpdGVzKHRoaXMucG9zaXRpb24sIGFzc2V0c0hvbGRlci52YXJpYWJsZVNwcml0ZXMudGFua0Rlc3RydWN0aW9uLCBERUFUSF9GUkFNRVMsIGRlYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbnZpbmNpYmxlKSB7XG4gICAgICAgICAgICBjb25zdCBpbnZpbmNpYmxlU3ByaXRlcyA9IGFzc2V0c0hvbGRlci5zcHJpdGVzLmludmluY2libGU7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGludmluY2libGUgJSBpbnZpbmNpYmxlU3ByaXRlcy5sZW5ndGg7XG4gICAgICAgICAgICBpbnZpbmNpYmxlU3ByaXRlc1tpbmRleF0odGhpcy5wb3NpdGlvbiwgdGhpcy5zaXplKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW1hdGVNb3ZlbWVudChhc3NldHNIb2xkZXIuc3ByaXRlcy5wbGF5ZXJbdGhpcy5wb3dlcl1bdGhpcy5kaXJlY3Rpb25dKTtcbiAgICB9XG4gICAgcHJvY2Vzc0lucHV0KCkge1xuICAgICAgICBjb25zdCBrZXkgPSBrZXlib2FyZC5nZXRLZXkoKTtcbiAgICAgICAgbGV0IGlzTW92aW5nID0gdHJ1ZTtcbiAgICAgICAgaWYgKGtleSA9PT0gQ29udHJvbEtleXMuQXJyb3dVcCkge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBEaXJlY3Rpb24uVG9wO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gQ29udHJvbEtleXMuQXJyb3dEb3duKSB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IERpcmVjdGlvbi5Cb3R0b207XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBDb250cm9sS2V5cy5BcnJvd0xlZnQpIHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gRGlyZWN0aW9uLkxlZnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBDb250cm9sS2V5cy5BcnJvd1JpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IERpcmVjdGlvbi5SaWdodDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBhdXNlKCdtb3ZlJyk7XG4gICAgICAgICAgICBpc01vdmluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrZXkgPT09IENvbnRyb2xLZXlzLlNwYWNlKSB7XG4gICAgICAgICAgICB0aGlzLnNob3QoUExBWUVSX1NUQVRTW3RoaXMucG93ZXJdLnNob3RDRCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTW92aW5nKSB7XG4gICAgICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wYXVzZSgnbmV1dHJhbCcpO1xuICAgICAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheSgnbW92ZScpO1xuICAgICAgICAgICAgdGhpcy5tb3ZlKFBMQVlFUl9TVEFUU1t0aGlzLnBvd2VyXS52ZWxvY2l0eSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzb2x2ZUVkZ2VDb2xsaXNpb24oKSB7XG4gICAgICAgIHRoaXMuZ29CYWNrKCk7XG4gICAgfVxuICAgIHJlc29sdmVUaWxlQ29sbGlzaW9uKHRpbGVzKSB7XG4gICAgICAgIGlmICh0aWxlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1BvcyA9IHRoaXMuZm9yZ2l2ZUNvbGxpc2lvbih0aWxlc1swXSk7XG4gICAgICAgICAgICBpZiAobmV3UG9zKVxuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBuZXdQb3MpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMuZ29CYWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmdvQmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc29sdmVFbnRpdHlDb2xsaXNpb24ob3RoZXIpIHtcbiAgICAgICAgY29uc3QgZGVhdGggPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdkZWF0aCcpO1xuICAgICAgICBpZiAoaXNQb3dlcnVwKG90aGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzQnVsbGV0KG90aGVyKSAmJiAhZGVhdGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGludmluY2libGUgPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdpbnZpbmNpYmxlJyk7XG4gICAgICAgICAgICBpZiAoaW52aW5jaWJsZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdkZWF0aCcsIERFQVRIX0ZSQU1FUyk7XG4gICAgICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5KCdleHBsb2RlJyk7XG4gICAgICAgICAgICB0aGlzLmxpdmVzIC09IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5saXZlcyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGllKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmdvQmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc3Bhd24oZGVmYXVsdFBvd2VyID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKGRlZmF1bHRQb3dlcilcbiAgICAgICAgICAgIHRoaXMucG93ZXIgPSBQbGF5ZXJQb3dlci5EZWZhdWx0O1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wYXVzZUFsbCgpO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdzcGF3bicsIFNQQVdOX0ZSQU1FUyk7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ2ludmluY2libGUnLCBJTlZJTkNJQkxFX0ZSQU1FUyk7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBQTEFZRVJfU1BBV05fUE9TSVRJT04pO1xuICAgICAgICB0aGlzLnByZXZQb3NpdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sIFBMQVlFUl9TUEFXTl9QT1NJVElPTik7XG4gICAgfVxuICAgIGRlY29uc3RydWN0KCkge1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wYXVzZUFsbCgpO1xuICAgICAgICBwb3dlcnVwRXZlbnRzLnVuc3Vic2NyaWJlKHRoaXMuaWQpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBsYXllci5qcy5tYXAiLCJpbXBvcnQgeyBNb3ZhYmxlIH0gZnJvbSAnLi9Nb3ZhYmxlJztcbmltcG9ydCB7IFRpbGVzLCBQbGF5ZXJQb3dlciB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IEJVTExFVF9WRUxPQ0lUWSwgQlVMTEVUX1NJWkUgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgU291bmRNYW5hZ2VyLCBlbnRpdHlNYW5hZ2VyIH0gZnJvbSAnLi4vbWFuYWdlcnMvJztcbmltcG9ydCB7IGJ1bGxldFRocm91Z2ggfSBmcm9tICcuLi9UaWxlTWFwJztcbmltcG9ydCB7IGlzUGxheWVyLCBpc0VuZW15LCBpc1Bvd2VydXAgfSBmcm9tICcuL2d1YXJkcyc7XG5pbXBvcnQgeyBhc3NldHNIb2xkZXIgfSBmcm9tICcuLi91dGlscyc7XG5leHBvcnQgY2xhc3MgQnVsbGV0IGV4dGVuZHMgTW92YWJsZSB7XG4gICAgY29uc3RydWN0b3IocG9zaXRpb24sIGRpcmVjdGlvbiwgc2hvb3Rlcikge1xuICAgICAgICBzdXBlcihwb3NpdGlvbiwgT2JqZWN0LmFzc2lnbih7fSwgQlVMTEVUX1NJWkUpLCBkaXJlY3Rpb24pO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbiAgICAgICAgdGhpcy5zaG9vdGVyID0gc2hvb3RlcjtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIgPSBuZXcgU291bmRNYW5hZ2VyKFsnaGl0JywgJ2hpdGRtZyddKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLm1vdmUoQlVMTEVUX1ZFTE9DSVRZKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICB0aGlzLmFuaW1hdGVNb3ZlbWVudChhc3NldHNIb2xkZXIuc3ByaXRlcy5idWxsZXRbdGhpcy5kaXJlY3Rpb25dKTtcbiAgICB9XG4gICAgcmVzb2x2ZUVkZ2VDb2xsaXNpb24oKSB7XG4gICAgICAgIGVudGl0eU1hbmFnZXIudG9SZW1vdmUodGhpcy5pZCk7XG4gICAgfVxuICAgIHJlc29sdmVUaWxlQ29sbGlzaW9uKHRpbGVzLCB0aWxlTWFwKSB7XG4gICAgICAgIGlmICh0aWxlcy5ldmVyeSh0aWxlID0+IGJ1bGxldFRocm91Z2guaW5jbHVkZXModGlsZS50eXBlKSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGVudGl0eU1hbmFnZXIudG9SZW1vdmUodGhpcy5pZCk7XG4gICAgICAgIGNvbnN0IGNhbkRlc3Ryb3lTdGVlbCA9IGlzUGxheWVyKHRoaXMuc2hvb3RlcikgJiYgdGhpcy5zaG9vdGVyLnBvd2VyID09PSBQbGF5ZXJQb3dlci5TZWNvbmQ7XG4gICAgICAgIGNvbnN0IGhhc1N0ZWVsID0gdGlsZXMuc29tZSh0aWxlID0+IHRpbGUudHlwZSA9PT0gVGlsZXMuU3RlZWwpO1xuICAgICAgICBpZiAoaGFzU3RlZWwpIHtcbiAgICAgICAgICAgIHRoaXMuc291bmRNYW5hZ2VyLnBsYXkoJ2hpdCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheSgnaGl0ZG1nJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGlsZXMuZm9yRWFjaCh0aWxlID0+IHtcbiAgICAgICAgICAgIGlmIChidWxsZXRUaHJvdWdoLmluY2x1ZGVzKHRpbGUudHlwZSkgfHwgKHRpbGUudHlwZSA9PT0gVGlsZXMuU3RlZWwgJiYgIWNhbkRlc3Ryb3lTdGVlbCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGlsZU1hcC5kZXN0cm95KHRpbGUucG9zaXRpb24pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVzb2x2ZUVudGl0eUNvbGxpc2lvbihvdGhlcikge1xuICAgICAgICBpZiAoaXNQb3dlcnVwKG90aGVyKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGlzUGxheWVyKHRoaXMuc2hvb3RlcikgJiYgaXNFbmVteShvdGhlcikgJiYgb3RoZXIudHlwZSA+PSAxKSB7XG4gICAgICAgICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5KCdoaXQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbnRpdHlNYW5hZ2VyLnRvUmVtb3ZlKHRoaXMuaWQpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJ1bGxldC5qcy5tYXAiLCJpbXBvcnQgeyBUYW5rIH0gZnJvbSAnLi9UYW5rJztcbmltcG9ydCB7IGFzc2V0c0hvbGRlciwgYW5pbWF0ZVZhcmlhYmxlU3ByaXRlcywgY2hlY2tFbnRpdHlDb2xsaXNpb24gfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgeyBEaXJlY3Rpb24sIFBvd2VydXBUeXBlcywgVGFua1R5cGVzIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgVEFOS19TSVpFLCBTUEFXTl9GUkFNRVMsIERFQVRIX0ZSQU1FUywgRlJFRVpFX0ZSQU1FUywgRU5FTVlfU1RBVFMgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgU291bmRNYW5hZ2VyLCBUaW1lTWFuYWdlciwgZW50aXR5TWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzJztcbmltcG9ydCB7IHBvd2VydXBFdmVudHMgfSBmcm9tICcuL1Bvd2VydXAnO1xuaW1wb3J0IHsgaXNQbGF5ZXIsIGlzRW5lbXksIGlzQnVsbGV0LCBpc1Bvd2VydXAgfSBmcm9tICcuL2d1YXJkcyc7XG5mdW5jdGlvbiBwb3dlcnVwT2JzZXJ2ZXIocG93ZXJ1cFR5cGUpIHtcbiAgICBpZiAocG93ZXJ1cFR5cGUgPT09IFBvd2VydXBUeXBlcy5TdG9wd2F0Y2gpIHtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignZnJlZXplJywgRlJFRVpFX0ZSQU1FUyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHBvd2VydXBUeXBlID09PSBQb3dlcnVwVHlwZXMuR3JlbmFkZSkge1xuICAgICAgICBpZiAoIXRoaXMudGltZU1hbmFnZXIuc29tZShbJ2RlYXRoJywgJ3NwYXduJ10pKVxuICAgICAgICAgICAgdGhpcy5kaWUoKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgRW5lbXkgZXh0ZW5kcyBUYW5rIHtcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBwb3NpdGlvbikge1xuICAgICAgICBzdXBlcihwb3NpdGlvbiwgT2JqZWN0LmFzc2lnbih7fSwgVEFOS19TSVpFKSwgRGlyZWN0aW9uLkJvdHRvbSk7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMubGl2ZXMgPSBFTkVNWV9TVEFUU1t0eXBlXS5saXZlcztcbiAgICAgICAgdGhpcy5wcmV2VGlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlciA9IG5ldyBUaW1lTWFuYWdlcigpO1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlciA9IG5ldyBTb3VuZE1hbmFnZXIoWydleHBsb2RlJ10pO1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdzcGF3bicsIFNQQVdOX0ZSQU1FUyk7XG4gICAgICAgIHBvd2VydXBFdmVudHMuc3Vic2NyaWJlKHRoaXMuaWQsIHBvd2VydXBPYnNlcnZlci5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBjb25zdCBzcGF3biA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ3NwYXduJyk7XG4gICAgICAgIGNvbnN0IGRlYXRoID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignZGVhdGgnKTtcbiAgICAgICAgY29uc3QgZnJlZXplID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignZnJlZXplJyk7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuZGVjcmVtZW50VGltZXJzKCk7XG4gICAgICAgIGlmIChzcGF3bikge1xuICAgICAgICAgICAgY29uc3QgaXNJbnRlcnNlY3RpbmcgPSB0aGlzLmlzU3Bhd25TcG90Q2xlYXIoKTtcbiAgICAgICAgICAgIGlmIChpc0ludGVyc2VjdGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ3NwYXduJywgU1BBV05fRlJBTUVTKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVhdGggfHwgZnJlZXplKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFpTW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5zaG90KEVORU1ZX1NUQVRTW3RoaXMudHlwZV0uc2hvdENEKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHNwYXduID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignc3Bhd24nKTtcbiAgICAgICAgY29uc3QgZGVhdGggPSB0aGlzLnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdkZWF0aCcpO1xuICAgICAgICBpZiAoc3Bhd24pIHtcbiAgICAgICAgICAgIHJldHVybiBhbmltYXRlVmFyaWFibGVTcHJpdGVzKHRoaXMucG9zaXRpb24sIGFzc2V0c0hvbGRlci52YXJpYWJsZVNwcml0ZXMudGFua1NwYXduLCBTUEFXTl9GUkFNRVMsIHNwYXduKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZWF0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGFuaW1hdGVWYXJpYWJsZVNwcml0ZXModGhpcy5wb3NpdGlvbiwgYXNzZXRzSG9sZGVyLnZhcmlhYmxlU3ByaXRlcy50YW5rRGVzdHJ1Y3Rpb24sIERFQVRIX0ZSQU1FUywgZGVhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnR5cGUgPT09IFRhbmtUeXBlcy5Bcm1vcmVkKSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGVNb3ZlbWVudChhc3NldHNIb2xkZXIuc3ByaXRlcy5lbmVteVt0aGlzLnR5cGVdW3RoaXMubGl2ZXNdW3RoaXMuZGlyZWN0aW9uXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGVNb3ZlbWVudChhc3NldHNIb2xkZXIuc3ByaXRlcy5lbmVteVt0aGlzLnR5cGVdW3RoaXMuZGlyZWN0aW9uXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWlNb3ZlKCkge1xuICAgICAgICBjb25zdCB7IHZlbG9jaXR5IH0gPSBFTkVNWV9TVEFUU1t0aGlzLnR5cGVdO1xuICAgICAgICBpZiAoTWF0aC5hYnMoTWF0aC5mbG9vcih0aGlzLnByZXZUaWxlLnggLSB0aGlzLnBvc2l0aW9uLngpKSA+IDEyMCB8fFxuICAgICAgICAgICAgTWF0aC5hYnMoTWF0aC5mbG9vcih0aGlzLnByZXZUaWxlLnkgLSB0aGlzLnBvc2l0aW9uLnkpKSA+IDEyMCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2VGlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMucG9zaXRpb24pO1xuICAgICAgICAgICAgdGhpcy5zZXRSYW5kb21EaXJlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMubW92ZSh2ZWxvY2l0eSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1vdmUodmVsb2NpdHkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc29sdmVFZGdlQ29sbGlzaW9uKCkge1xuICAgICAgICB0aGlzLmdvQmFjaygpO1xuICAgICAgICB0aGlzLnNldFJhbmRvbURpcmVjdGlvbigpO1xuICAgIH1cbiAgICByZXNvbHZlVGlsZUNvbGxpc2lvbih0aWxlcykge1xuICAgICAgICBpZiAodGlsZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdQb3MgPSB0aGlzLmZvcmdpdmVDb2xsaXNpb24odGlsZXNbMF0pO1xuICAgICAgICAgICAgaWYgKG5ld1Bvcykge1xuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBuZXdQb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSYW5kb21EaXJlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdvQmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRSYW5kb21EaXJlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMuZ29CYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzb2x2ZUVudGl0eUNvbGxpc2lvbihvdGhlcikge1xuICAgICAgICBpZiAoaXNQb3dlcnVwKG90aGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzQnVsbGV0KG90aGVyKSAmJiBpc1BsYXllcihvdGhlci5zaG9vdGVyKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMubGl2ZXMgPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5saXZlcyAtPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzRW5lbXkob3RoZXIpKSB7XG4gICAgICAgICAgICB0aGlzLmdvQmFjaygpO1xuICAgICAgICAgICAgdGhpcy5zZXRPcG9zaXRlRGlyZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNQbGF5ZXIob3RoZXIpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignc2hvdENEJykgPiAxMClcbiAgICAgICAgICAgICAgICB0aGlzLnNldE9wb3NpdGVEaXJlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMuZ29CYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0UmFuZG9tRGlyZWN0aW9uKCkge1xuICAgICAgICBjb25zdCBpdGVtcyA9IFtEaXJlY3Rpb24uVG9wLCBEaXJlY3Rpb24uUmlnaHQsIERpcmVjdGlvbi5Cb3R0b20sIERpcmVjdGlvbi5MZWZ0XS5maWx0ZXIoZGlyZWN0aW9uID0+IGRpcmVjdGlvbiAhPT0gdGhpcy5kaXJlY3Rpb24pO1xuICAgICAgICBjb25zdCBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGl0ZW1zLmxlbmd0aCk7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gaXRlbXNbaW5kZXhdO1xuICAgIH1cbiAgICBzZXRPcG9zaXRlRGlyZWN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Ub3ApIHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gRGlyZWN0aW9uLkJvdHRvbTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkJvdHRvbSkge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBEaXJlY3Rpb24uVG9wO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uUmlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gRGlyZWN0aW9uLkxlZnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IERpcmVjdGlvbi5SaWdodDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc1NwYXduU3BvdENsZWFyKCkge1xuICAgICAgICByZXR1cm4gZW50aXR5TWFuYWdlci5lbnRpdGllc1xuICAgICAgICAgICAgLmZpbHRlcihlbnRpdHkgPT4gZW50aXR5LmlkICE9PSB0aGlzLmlkICYmICFpc0J1bGxldChlbnRpdHkpKVxuICAgICAgICAgICAgLmZpbHRlcihlbnRpdHkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzRW5lbXkoZW50aXR5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhZW50aXR5LnRpbWVNYW5hZ2VyLmdldFRpbWVyKCdzcGF3bicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuc29tZShlbnRpdHkgPT4gY2hlY2tFbnRpdHlDb2xsaXNpb24oZW50aXR5LmdldEJvdW5kaW5nQm94KCksIHRoaXMuZ2V0Qm91bmRpbmdCb3goKSkpO1xuICAgIH1cbiAgICBkZWNvbnN0cnVjdCgpIHtcbiAgICAgICAgcG93ZXJ1cEV2ZW50cy51bnN1YnNjcmliZSh0aGlzLmlkKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FbmVteS5qcy5tYXAiLCJpbXBvcnQgeyBFbnRpdHkgfSBmcm9tICcuL0VudGl0eSc7XG5pbXBvcnQgeyBhc3NldHNIb2xkZXIgfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgeyBGTEFHX1NJWkUsIEZMQUdfUE9TSVRJT04gfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgaXNCdWxsZXQgfSBmcm9tICcuL2d1YXJkcyc7XG5leHBvcnQgY2xhc3MgRmxhZyBleHRlbmRzIEVudGl0eSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKEZMQUdfUE9TSVRJT04sIEZMQUdfU0laRSk7XG4gICAgICAgIHRoaXMuaXNEZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgYXNzZXRzSG9sZGVyLnNwcml0ZXMuZmxhZ0RlYXRoKHRoaXMucG9zaXRpb24sIHRoaXMuc2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NldHNIb2xkZXIuc3ByaXRlcy5mbGFnKHRoaXMucG9zaXRpb24sIHRoaXMuc2l6ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzb2x2ZUVudGl0eUNvbGxpc2lvbihvdGhlcikge1xuICAgICAgICBpZiAoaXNCdWxsZXQob3RoZXIpKSB7XG4gICAgICAgICAgICB0aGlzLmlzRGVzdHJveWVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZsYWcuanMubWFwIiwiaW1wb3J0ICogYXMgZW50aXRpZXMgZnJvbSAnLi4vZW50aXRpZXMnO1xuaW1wb3J0IHsgY2hlY2tFbnRpdHlDb2xsaXNpb24gfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgeyByaWdpZCB9IGZyb20gJy4uL1RpbGVNYXAnO1xuaW1wb3J0IHsgaXNQbGF5ZXIsIGlzRW5lbXksIGlzVGFuaywgaXNGbGFnLCBpc1Bvd2VydXAgfSBmcm9tICcuLi9lbnRpdGllcy9ndWFyZHMnO1xuaW1wb3J0IHsgVElMRV9TSURFIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcbmV4cG9ydCBjbGFzcyBFbnRpdHlNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50b1JlbW92ZSA9IChpZCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b1JlbW92ZVF1ZXVlLmFkZChpZCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVtb3ZlRnJvbVF1ZXVlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b1JlbW92ZVF1ZXVlLmZvckVhY2goZW50aXR5SWQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVudGl0eSA9IHRoaXMucG9vbFtlbnRpdHlJZF07XG4gICAgICAgICAgICAgICAgY29uc3QgZGVhdGhMZWZ0ID0gdGhpcy5fY2hlY2tEZWF0aChlbnRpdHkpO1xuICAgICAgICAgICAgICAgIGlmICghZGVhdGhMZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnBvb2xbZW50aXR5SWRdO1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkuZGVjb25zdHJ1Y3QoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b1JlbW92ZVF1ZXVlLmRlbGV0ZShlbnRpdHlJZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucG9vbCA9IHt9O1xuICAgICAgICB0aGlzLnRvUmVtb3ZlUXVldWUgPSBuZXcgU2V0KCk7XG4gICAgfVxuICAgIHNwYXduRW50aXR5KHR5cGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgZW50aXR5ID0gbmV3IGVudGl0aWVzW3R5cGVdKC4uLmFyZ3MpO1xuICAgICAgICB0aGlzLnBvb2xbZW50aXR5LmlkXSA9IGVudGl0eTtcbiAgICB9XG4gICAgZ2V0RW5lbWllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW50aXRpZXMuZmlsdGVyKGlzRW5lbXkpO1xuICAgIH1cbiAgICBnZXRQbGF5ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVudGl0aWVzLmZpbmQoaXNQbGF5ZXIpO1xuICAgIH1cbiAgICBnZXRGbGFnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbnRpdGllcy5maW5kKGlzRmxhZyk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5lbnRpdGllcy5mb3JFYWNoKGVudGl0eSA9PiBlbnRpdHkucmVuZGVyKCkpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMuZW50aXRpZXMuZm9yRWFjaChlbnRpdHkgPT4gZW50aXR5LnVwZGF0ZSgpKTtcbiAgICB9XG4gICAgY2hlY2tDb2xsaXNpb25zKHRpbGVNYXApIHtcbiAgICAgICAgY29uc3Qgc2VlbiA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy5lbnRpdGllcy5mb3JFYWNoKGVudGl0eSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNQb3dlcnVwKGVudGl0eSkgfHwgaXNGbGFnKGVudGl0eSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5jaGVja1RpbGVDb2xsaXNpb24oZW50aXR5LCB0aWxlTWFwKTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tFbnRpdGllc0NvbGxpc2lvbihlbnRpdHksIHNlZW4pO1xuICAgICAgICAgICAgc2Vlbi5hZGQoZW50aXR5LmlkKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNoZWNrVGlsZUNvbGxpc2lvbihlbnRpdHksIHRpbGVNYXApIHtcbiAgICAgICAgaWYgKGVudGl0eS5pc091dE9mU2NyZWVuKCkpIHtcbiAgICAgICAgICAgIGVudGl0eS5yZXNvbHZlRWRnZUNvbGxpc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgW2ZpcnN0LCBzZWNvbmRdID0gZW50aXR5LmdldEZyb250Q29sbGlzaW9uUG9pbnRzKCk7XG4gICAgICAgICAgICBjb25zdCB0aWxlcyA9IHRpbGVNYXAubG9va3VwUmFuZ2UoZmlyc3QsIHNlY29uZCk7XG4gICAgICAgICAgICBjb25zdCBjb2xsaWRhYmxlID0gdGlsZXNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHRpbGUgPT4gcmlnaWQuaW5jbHVkZXModGlsZS50eXBlKSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHRpbGUgPT4gY2hlY2tFbnRpdHlDb2xsaXNpb24oZW50aXR5LmdldEJvdW5kaW5nQm94KCksIHtcbiAgICAgICAgICAgICAgICB4MTogdGlsZS5wb3NpdGlvbi54LFxuICAgICAgICAgICAgICAgIHgyOiB0aWxlLnBvc2l0aW9uLnggKyBUSUxFX1NJREUsXG4gICAgICAgICAgICAgICAgeTE6IHRpbGUucG9zaXRpb24ueSxcbiAgICAgICAgICAgICAgICB5MjogdGlsZS5wb3NpdGlvbi55ICsgVElMRV9TSURFLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaWYgKGNvbGxpZGFibGUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZW50aXR5LnJlc29sdmVUaWxlQ29sbGlzaW9uKGNvbGxpZGFibGUsIHRpbGVNYXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNoZWNrRW50aXRpZXNDb2xsaXNpb24oZW50aXR5LCBzZWVuKSB7XG4gICAgICAgIHRoaXMuZW50aXRpZXMuZm9yRWFjaChvdGhlciA9PiB7XG4gICAgICAgICAgICBpZiAoZW50aXR5LmlkID09PSBvdGhlci5pZCB8fCBzZWVuLmhhcyhvdGhlci5pZCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzSW50ZXJhY3RpdmUob3RoZXIpICYmIGNoZWNrRW50aXR5Q29sbGlzaW9uKGVudGl0eS5nZXRCb3VuZGluZ0JveCgpLCBvdGhlci5nZXRCb3VuZGluZ0JveCgpKSkge1xuICAgICAgICAgICAgICAgIGVudGl0eS5yZXNvbHZlRW50aXR5Q29sbGlzaW9uKG90aGVyKTtcbiAgICAgICAgICAgICAgICBvdGhlci5yZXNvbHZlRW50aXR5Q29sbGlzaW9uKGVudGl0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjbGVhcihjbGVhclBsYXllciA9IHRydWUpIHtcbiAgICAgICAgaWYgKCFjbGVhclBsYXllcikge1xuICAgICAgICAgICAgY29uc3QgcGxheWVyID0gdGhpcy5nZXRQbGF5ZXIoKTtcbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5wb29sKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoZW50aXR5ID0+IGVudGl0eS5pZCAhPT0gcGxheWVyLmlkKVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKGVudGl0eSA9PiBlbnRpdHkuZGVjb25zdHJ1Y3QoKSk7XG4gICAgICAgICAgICB0aGlzLnBvb2wgPSB7IFtwbGF5ZXIuaWRdOiBwbGF5ZXIgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5wb29sKS5mb3JFYWNoKGVudGl0eSA9PiBlbnRpdHkuZGVjb25zdHJ1Y3QoKSk7XG4gICAgICAgICAgICB0aGlzLnBvb2wgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvUmVtb3ZlUXVldWUgPSBuZXcgU2V0KCk7XG4gICAgfVxuICAgIF9pc0ludGVyYWN0aXZlKGVudGl0eSkge1xuICAgICAgICBpZiAoaXNUYW5rKGVudGl0eSkpIHtcbiAgICAgICAgICAgIHJldHVybiAhZW50aXR5LnRpbWVNYW5hZ2VyLnNvbWUoWydzcGF3bicsICdkZWF0aCddKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgX2NoZWNrRGVhdGgoZW50aXR5KSB7XG4gICAgICAgIGlmIChpc1RhbmsoZW50aXR5KSkge1xuICAgICAgICAgICAgcmV0dXJuIGVudGl0eS50aW1lTWFuYWdlci5nZXRUaW1lcignZGVhdGgnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZW50aXRpZXMoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHRoaXMucG9vbCk7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IGVudGl0eU1hbmFnZXIgPSBuZXcgRW50aXR5TWFuYWdlcigpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW50aXR5TWFuYWdlci5qcy5tYXAiLCJpbXBvcnQgeyBQb3dlcnVwVHlwZXMsIExheWVycyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgUE9XRVJVUF9TUEFXTl9DRCwgRU5FTVlfU1BBV05fQ0QsIEVORU1ZX1NQQVdOX1BPU0lUSU9OIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgVGltZU1hbmFnZXIsIFNvdW5kTWFuYWdlciwgZW50aXR5TWFuYWdlciB9IGZyb20gJy4vbWFuYWdlcnMnO1xuaW1wb3J0IHsgcmFuZG9tSW50IH0gZnJvbSAnLi91dGlscyc7XG5leHBvcnQgY2xhc3MgU3RhZ2Uge1xuICAgIGNvbnN0cnVjdG9yKG51bWJlciwgbWFwLCB0YW5rcykge1xuICAgICAgICB0aGlzLm51bWJlciA9IG51bWJlcjtcbiAgICAgICAgdGhpcy5tYXAgPSBtYXA7XG4gICAgICAgIHRoaXMudGFua3MgPSBbLi4udGFua3NdO1xuICAgICAgICB0aGlzLnBvd2VydXBzQXZhaWxhYmxlID0gNTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlciA9IG5ldyBUaW1lTWFuYWdlcigpO1xuICAgICAgICB0aGlzLnNvdW5kTWFuYWdlciA9IG5ldyBTb3VuZE1hbmFnZXIoWydzdGFydCddKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcigncG93ZXJ1cFNwYXduQ0QnLCBQT1dFUlVQX1NQQVdOX0NEKTtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheSgnc3RhcnQnKTtcbiAgICAgICAgZW50aXR5TWFuYWdlci5zcGF3bkVudGl0eSgnRmxhZycpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuZGVjcmVtZW50VGltZXJzKCk7XG4gICAgICAgIHRoaXMuc3Bhd25FbmVteSgpO1xuICAgICAgICB0aGlzLnNwYXduUG93ZXJ1cCgpO1xuICAgIH1cbiAgICBpc0ZpbmlzaCgpIHtcbiAgICAgICAgY29uc3QgZW5lbWllcyA9IGVudGl0eU1hbmFnZXIuZ2V0RW5lbWllcygpO1xuICAgICAgICByZXR1cm4gIXRoaXMudGFua3MubGVuZ3RoICYmICFlbmVtaWVzLmxlbmd0aDtcbiAgICB9XG4gICAgc3Bhd25FbmVteSgpIHtcbiAgICAgICAgY29uc3QgZW5lbXlTcGF3bkNEID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignZW5lbXlTcGF3bkNEJyk7XG4gICAgICAgIGNvbnN0IGVuZW1pZXMgPSBlbnRpdHlNYW5hZ2VyLmdldEVuZW1pZXMoKTtcbiAgICAgICAgaWYgKCF0aGlzLnRhbmtzLmxlbmd0aCB8fCBlbmVtaWVzLmxlbmd0aCA+IDQgfHwgZW5lbXlTcGF3bkNEKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBpbmRleCA9IHJhbmRvbUludCgyKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignZW5lbXlTcGF3bkNEJywgRU5FTVlfU1BBV05fQ0QpO1xuICAgICAgICBlbnRpdHlNYW5hZ2VyLnNwYXduRW50aXR5KCdFbmVteScsIHRoaXMudGFua3MucG9wKCksIE9iamVjdC5hc3NpZ24oe30sIEVORU1ZX1NQQVdOX1BPU0lUSU9OW2luZGV4XSkpO1xuICAgIH1cbiAgICBzcGF3blBvd2VydXAoKSB7XG4gICAgICAgIGNvbnN0IHBvd2VydXBTcGF3bkNEID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcigncG93ZXJ1cFNwYXduQ0QnKTtcbiAgICAgICAgaWYgKHBvd2VydXBTcGF3bkNEIHx8ICF0aGlzLnBvd2VydXBzQXZhaWxhYmxlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBpbmRleCA9IHJhbmRvbUludChPYmplY3Qua2V5cyhQb3dlcnVwVHlwZXMpLmxlbmd0aCAvIDIpO1xuICAgICAgICBlbnRpdHlNYW5hZ2VyLnNwYXduRW50aXR5KCdQb3dlcnVwJywgUG93ZXJ1cFR5cGVzW1Bvd2VydXBUeXBlc1tpbmRleF1dLCB7IHg6IHJhbmRvbUludCg1MDApLCB5OiByYW5kb21JbnQoNTAwKSB9KTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcigncG93ZXJ1cFNwYXduQ0QnLCBQT1dFUlVQX1NQQVdOX0NEKTtcbiAgICAgICAgdGhpcy5wb3dlcnVwc0F2YWlsYWJsZSAtPSAxO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHRoaXMubWFwLnJlbmRlckxheWVyKExheWVycy51bmRlcik7XG4gICAgICAgIHRoaXMubWFwLnJlbmRlckxheWVyKExheWVycy5tYWluKTtcbiAgICAgICAgZW50aXR5TWFuYWdlci5yZW5kZXIoKTtcbiAgICAgICAgdGhpcy5tYXAucmVuZGVyTGF5ZXIoTGF5ZXJzLm92ZXIpO1xuICAgIH1cbiAgICBnZXQgc2NyZWVuTnVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5udW1iZXIgKyAxO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0YWdlLmpzLm1hcCIsImltcG9ydCB7IG1hcHMsIHRhbmtzIGFzIHRhbmtzQ29uZmlnIH0gZnJvbSAnLi9zdGFnZUNvbmZpZyc7XG5pbXBvcnQgeyBERUxUQV9USU1FLCBTQ1JFRU5fRkFERV9GUkFNRVMgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBUaWxlTWFwIH0gZnJvbSAnLi9UaWxlTWFwJztcbmltcG9ydCB7IFN0YWdlIH0gZnJvbSAnLi9TdGFnZSc7XG5pbXBvcnQgeyBtYWluIGFzIG1haW5TY3JlZW4sIGRhc2hib2FyZCB9IGZyb20gJy4vc2NyZWVucyc7XG5pbXBvcnQgeyBUaW1lTWFuYWdlciwgU291bmRNYW5hZ2VyLCBlbnRpdHlNYW5hZ2VyIH0gZnJvbSAnLi9tYW5hZ2Vycyc7XG5leHBvcnQgY2xhc3MgR2FtZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaXNTdGFydFNjcmVlbiA9IHRydWU7XG4gICAgICAgIHRoaXMuaXNMb3N0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIgPSBuZXcgVGltZU1hbmFnZXIoKTtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIgPSBuZXcgU291bmRNYW5hZ2VyKFsnZ2FtZW92ZXInXSk7XG4gICAgfVxuICAgIGNyZWF0ZUxvb3AoKSB7XG4gICAgICAgIGxldCBhY2N1bXVsYXRlZFRpbWUgPSAwO1xuICAgICAgICBsZXQgbGFzdFRpbWUgPSAwO1xuICAgICAgICBjb25zdCBsb29wID0gdGltZSA9PiB7XG4gICAgICAgICAgICBhY2N1bXVsYXRlZFRpbWUgKz0gKHRpbWUgLSBsYXN0VGltZSkgLyAxMDAwO1xuICAgICAgICAgICAgd2hpbGUgKGFjY3VtdWxhdGVkVGltZSA+IERFTFRBX1RJTUUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkVGltZSAtPSBERUxUQV9USU1FO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgIGxhc3RUaW1lID0gdGltZTtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcbiAgICAgICAgfTtcbiAgICAgICAgbG9vcCgwKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLmRlY3JlbWVudFRpbWVycygpO1xuICAgICAgICBjb25zdCBzcmVlbkZhZGVMZWZ0ID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignc2NyZWVuRmFkZScpO1xuICAgICAgICBpZiAodGhpcy5pc0xvc3QgfHwgdGhpcy5pc1N0YXJ0U2NyZWVuIHx8IHNyZWVuRmFkZUxlZnQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuc3RhZ2UudXBkYXRlKCk7XG4gICAgICAgIGVudGl0eU1hbmFnZXIudXBkYXRlKCk7XG4gICAgICAgIGVudGl0eU1hbmFnZXIuY2hlY2tDb2xsaXNpb25zKHRoaXMuc3RhZ2UubWFwKTtcbiAgICAgICAgZW50aXR5TWFuYWdlci5yZW1vdmVGcm9tUXVldWUoKTtcbiAgICAgICAgY29uc3QgcGxheWVyID0gZW50aXR5TWFuYWdlci5nZXRQbGF5ZXIoKTtcbiAgICAgICAgY29uc3QgZmxhZyA9IGVudGl0eU1hbmFnZXIuZ2V0RmxhZygpO1xuICAgICAgICBpZiAoIXBsYXllciB8fCBmbGFnLmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICBpZiAocGxheWVyKVxuICAgICAgICAgICAgICAgIHBsYXllci5zb3VuZE1hbmFnZXIucGF1c2VBbGwoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdhbWVPdmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3RhZ2UuaXNGaW5pc2goKSkge1xuICAgICAgICAgICAgdGhpcy50b05leHRTdGFnZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbWFpblNjcmVlbi5jbGVhclNjcmVlbigpO1xuICAgICAgICBkYXNoYm9hcmQuY2xlYXJTY3JlZW4oKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdGFydFNjcmVlbikge1xuICAgICAgICAgICAgbWFpblNjcmVlbi5yZW5kZXJTdGFydFNjcmVlbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJHYW1lKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyR2FtZSgpIHtcbiAgICAgICAgY29uc3Qgc3JlZW5GYWRlTGVmdCA9IHRoaXMudGltZU1hbmFnZXIuZ2V0VGltZXIoJ3NjcmVlbkZhZGUnKTtcbiAgICAgICAgdGhpcy5zdGFnZS5yZW5kZXIoKTtcbiAgICAgICAgaWYgKHRoaXMuaXNMb3N0KSB7XG4gICAgICAgICAgICBtYWluU2NyZWVuLnJlbmRlckdhbWVPdmVyKHNyZWVuRmFkZUxlZnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNyZWVuRmFkZUxlZnQpIHtcbiAgICAgICAgICAgIG1haW5TY3JlZW4ucmVuZGVyQ2hhaW5naW5nU3RhZ2Uoc3JlZW5GYWRlTGVmdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSBlbnRpdHlNYW5hZ2VyLmdldFBsYXllcigpO1xuICAgICAgICAgICAgZGFzaGJvYXJkLnJlbmRlcihwbGF5ZXIubGl2ZXMsIHRoaXMuc3RhZ2Uuc2NyZWVuTnVtLCB0aGlzLnN0YWdlLnRhbmtzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnYW1lT3ZlcigpIHtcbiAgICAgICAgdGhpcy5zb3VuZE1hbmFnZXIucGxheSgnZ2FtZW92ZXInKTtcbiAgICAgICAgdGhpcy50aW1lTWFuYWdlci5zZXRUaW1lcignc2NyZWVuRmFkZScsIFNDUkVFTl9GQURFX0ZSQU1FUyk7XG4gICAgICAgIHRoaXMuaXNMb3N0ID0gdHJ1ZTtcbiAgICB9XG4gICAgaXNXYWl0aW5nRm9yUmVzdGFydCgpIHtcbiAgICAgICAgY29uc3QgZ2FtZU92ZXJUaW1lID0gdGhpcy50aW1lTWFuYWdlci5nZXRUaW1lcignc2NyZWVuRmFkZScpO1xuICAgICAgICByZXR1cm4gIWdhbWVPdmVyVGltZSAmJiB0aGlzLmlzTG9zdDtcbiAgICB9XG4gICAgZ2V0TmV4dFN0YWdlTnVtKCkge1xuICAgICAgICBsZXQgbmV3TnVtID0gdGhpcy5zdGFnZS5udW1iZXIgKyAxO1xuICAgICAgICBpZiAobmV3TnVtID4gbWFwcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBuZXdOdW0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdOdW07XG4gICAgfVxuICAgIHRvTmV4dFN0YWdlKCkge1xuICAgICAgICB0aGlzLnRpbWVNYW5hZ2VyLnNldFRpbWVyKCdzY3JlZW5GYWRlJywgU0NSRUVOX0ZBREVfRlJBTUVTKTtcbiAgICAgICAgZW50aXR5TWFuYWdlci5jbGVhcihmYWxzZSk7XG4gICAgICAgIGNvbnN0IHN0YWdlTnVtID0gdGhpcy5nZXROZXh0U3RhZ2VOdW0oKTtcbiAgICAgICAgY29uc3QgcGxheWVyID0gZW50aXR5TWFuYWdlci5nZXRQbGF5ZXIoKTtcbiAgICAgICAgdGhpcy5zdGFnZSA9IG5ldyBTdGFnZShzdGFnZU51bSwgbmV3IFRpbGVNYXAobWFwc1tzdGFnZU51bV0pLCB0YW5rc0NvbmZpZ1tzdGFnZU51bV0pO1xuICAgICAgICBwbGF5ZXIucmVzcGF3bigpO1xuICAgIH1cbiAgICBwbGF5KCkge1xuICAgICAgICB0aGlzLmlzU3RhcnRTY3JlZW4gPSBmYWxzZTtcbiAgICAgICAgZW50aXR5TWFuYWdlci5zcGF3bkVudGl0eSgnUGxheWVyJyk7XG4gICAgICAgIHRoaXMudGltZU1hbmFnZXIuc2V0VGltZXIoJ3NjcmVlbkZhZGUnLCBTQ1JFRU5fRkFERV9GUkFNRVMpO1xuICAgICAgICB0aGlzLnN0YWdlID0gbmV3IFN0YWdlKDAsIG5ldyBUaWxlTWFwKG1hcHNbMF0pLCB0YW5rc0NvbmZpZ1swXSk7XG4gICAgfVxuICAgIHJlc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuaXNMb3N0ID0gZmFsc2U7XG4gICAgICAgIGVudGl0eU1hbmFnZXIuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R2FtZS5qcy5tYXAiLCJpbXBvcnQgc3ByaXRlIGZyb20gJy4uL2Fzc2V0cy9zcHJpdGVzLnBuZyc7XG5pbXBvcnQgZXhwbG9kZSBmcm9tICcuLi9hc3NldHMvYXVkaW8vZXhwbG9kZS53YXYnO1xuaW1wb3J0IGhpdCBmcm9tICcuLi9hc3NldHMvYXVkaW8vaGl0Lndhdic7XG5pbXBvcnQgaGl0ZG1nIGZyb20gJy4uL2Fzc2V0cy9hdWRpby9oaXRkbWcud2F2JztcbmltcG9ydCBuZXV0cmFsIGZyb20gJy4uL2Fzc2V0cy9hdWRpby9uZXV0cmFsLndhdic7XG5pbXBvcnQgcG93ZXJ1cCBmcm9tICcuLi9hc3NldHMvYXVkaW8vcG93ZXJ1cC53YXYnO1xuaW1wb3J0IG1vdmUgZnJvbSAnLi4vYXNzZXRzL2F1ZGlvL21vdmUud2F2JztcbmltcG9ydCBzdGFydCBmcm9tICcuLi9hc3NldHMvYXVkaW8vc3RhcnQud2F2JztcbmltcG9ydCBnYW1lb3ZlciBmcm9tICcuLi9hc3NldHMvYXVkaW8vZ2FtZW92ZXIud2F2JztcbmltcG9ydCB7IGFzc2V0c0hvbGRlciB9IGZyb20gJy4vdXRpbHMvYXNzZXRzSG9sZGVyJztcbmltcG9ydCB7IGtleWJvYXJkIH0gZnJvbSAnLi9rZXlib2FyZCc7XG5pbXBvcnQgeyBHYW1lIH0gZnJvbSAnLi9HYW1lJztcbmFzeW5jIGZ1bmN0aW9uIG1haW4oKSB7XG4gICAgYXNzZXRzSG9sZGVyLnJ1blByZWxvYWRlcigpO1xuICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgYXNzZXRzSG9sZGVyLmxvYWRTcHJpdGUoc3ByaXRlKSxcbiAgICAgICAgYXNzZXRzSG9sZGVyLmxvYWRBdWRpbyh7IGV4cGxvZGUsIGhpdCwgaGl0ZG1nLCBuZXV0cmFsLCBwb3dlcnVwLCBtb3ZlLCBzdGFydCwgZ2FtZW92ZXIgfSksXG4gICAgXSk7XG4gICAgYXNzZXRzSG9sZGVyLnN0b3BQcmVsb2FkZXIoKTtcbiAgICBjb25zdCBnYW1lID0gbmV3IEdhbWUoKTtcbiAgICBrZXlib2FyZC5saXN0ZW5Ub0V2ZW50cyhnYW1lKTtcbiAgICByZXR1cm4gZ2FtZS5jcmVhdGVMb29wKCk7XG59XG5tYWluKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwic291cmNlUm9vdCI6IiJ9